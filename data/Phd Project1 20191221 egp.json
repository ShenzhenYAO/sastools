{"idx":"ProjectCollection-cmSbt48MqRzD7t79","name":"PhDProject1 PhysicianImpactStatin 20191221","children":[{"idx":"MYfd08efa7-d2a0-4b59-b9d5-ea9d49b40487","name":"Main Analysis","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"MY51f5187e-8719-4c28-807d-b6591ac8cf47","name":"Preparing Data","custparents":[{"idx":"MYfd08efa7-d2a0-4b59-b9d5-ea9d49b40487"}],"children":[{"idx":"MYb92945ef-f84e-485b-b71e-8ad01a46b8e6","name":"1. Cohort","custparents":[{"idx":"MY51f5187e-8719-4c28-807d-b6591ac8cf47"}],"children":[{"idx":"CodeTask-rXaW7KfQgzQfcx1V","name":"VXA_Statin Users","NodeDescription":"///t<br/>///s<br/>/*VXA. Those receiving Statins between 2012 and 2017*/<br/>data _null_&#59 run&#59<br/><br/>/*VXA0. perepared source data*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_verif_mort.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_verif_mort.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_cohort.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_cohort.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*%print(data=master_cohort)&#59*/<br/>/*%nobs(data=master_cohort)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test1, m=max)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test2, m=min)&#59*/<br/><br/>/*VXA1_a. keep the relevant cols, the latest entry date is 31dec2017d (so as to allow 365 days follow up)*/<br/>data VXA1_a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_cohort&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn dqdate RHA sex_desc mari_stat_desc fam_no birth age fsa nh_name nh_number QAIPPE resitype&#59<br/>&nbsp&nbsp&nbsp&nbspif dqdate le &EntryEndDate&#59   <br/>&nbsp&nbsp&nbsp&nbsprename dqdate = EntryDate&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/>/*<br/>The following exclusion has been applied during cohort creation<br/>missing age sex<br/>age < 18 at entry<br/>not continuously covered during washout (5 years) or 1 years follow up<br/>(including those deceased)<br/>Receiving statin within washout (5 years)<br/>*/<br/>/*apply other exclusion criterias<br/>&nbsp&nbsp&nbsp&nbspThis part was copied from VZC<br/>*/ <br/>/*VXA1. */<br/>%print(data=master_verif_mort)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA1_a,<br/>&nbsp&nbsp&nbsp&nbspt2=master_verif_mort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA1a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ddt_novit as MortDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data vxa1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA1a&#59<br/>&nbsp&nbsp&nbsp&nbspDeath_Pre365 =0&#59Death_Post365 =0&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and MortDate < EntryDate then Death_Pre365=1&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and EntryDate <= MortDate < EntryDate + &followdays then Death_Post365=1&#59<br/>Run&#59<br/>data localt.vxa1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxa1b&#59<br/>&nbsp&nbsp&nbsp&nbspif Death_Pre365 =0 and Death_Post365 =0&#59<br/>run&#59<br/><br/><br/>/*VXA2. LTC stay: in LTC from 365*5 days prior through 365 days since entryDate*/<br/>/*VXA2a. from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxa1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*VXA2b. oncatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXA2a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA2b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=<br/>)&#59<br/><br/>/*VXA2c. Get a list of distinct patient id of those ever stayed in a LTC facility within the washout , or the follow up period*/<br/>%distinct(data=VXA2b, target=VXA2c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate - &washoutdays and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate - &washoutdays and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate - &washoutdays and dschg_date > entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp))&#59<br/><br/>/*VXA2D. Link to vax1, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxa1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA2c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXA2d, table=LTCStay)&#59*/<br/><br/><br/>/*VXA2E, from above, keep patients not having LTC stays. These are cohort memebers not stayed in a LTC facility within the washout<br/>&nbsp&nbsp&nbsp&nbspor the followup period*/<br/>data localt.VXA2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA2d&#59<br/>&nbsp&nbsp&nbsp&nbspwhere LTCStay=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop LTCStay&#59<br/>run&#59<br/><br/>/*VXA3. Stayed in an out-province facility (prov_loc_sk = 'N') for acute care during follow -up*/<br/>/*%print(data=master_hosp)&#59*/<br/>/*%freq(data=master_hosp, table=prov_loc_sk*ds_ip)&#59*/<br/><br/>/*VXA3a. From the master hospitalization record, select those events occured in a facility indicated as out-of-province facility (i.e., prov_loc_sk = 'N')*/<br/>data VXA3a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere prov_loc_sk = 'N'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date&#59<br/>run&#59<br/>/*VXA3b. From VXA2, and according to VXA3a, get a list of patient who stayed in an out-province acute care facility during follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA3a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA3b, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm = %str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn = t2.key_hsn and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entryDate  and t1.entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.dschg_date between t1.entryDate and t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.adm_date < t1.entryDate  and t2.dschg_date > t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Exclude patients in VXA3b to get the cohort after applying excusion criteria */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget= localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(key_hsn not in (select key_hsn from VXA3b)) <br/>)&#59<br/><br/><br/>/*VXA4. Need to exclude those preg during runin or follow up!!! (see VXI)*/<br/>/*. pregnancy<br/>pregnancy (Using the CCDSS case definition, which is used for exclusion in definition of CCDSS chronic conditions)<br/>the code of pregancy was from the file A12_CoMorb_ICDDX in the ChronicPop's remoteS folder<br/><br/>('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', '655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', '673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', 'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', 'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', 'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', 'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', 'O94', 'O95', 'O98', 'O99', 'Z37')<br/>*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/>/*VXA4a. hospital*/<br/>data VXA4a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>/*VXA4b. MSB*/<br/>data VXA4b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>/*VXA4c. merge hospital and msb*/<br/>data VXA4c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA4a VXA4b&#59<br/>run&#59<br/>/*VXA4d. link to VXA3, indicate those having preg during pre365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4c,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA4d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_pre365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate-&runindays and t1.dschg_date > t2.entryDate -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VXA4e. link to VXA3, indicate those having preg during post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4c,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA4e,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_post365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + &followdays -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VXA4f.link back to VXA3*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA4d,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXA4f,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_pre365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXA4g. add preg_post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA4e,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXA4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%freq(data=VXA4, table=preg_pre365*preg_post365)&#59<br/><br/>/*VXA5. exclude patients having pregancy events during run-in or follow up*/<br/>data VXA&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA4&#59<br/>&nbsp&nbsp&nbsp&nbspif preg_pre365=0 and preg_post365=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop preg_post365 preg_post365&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXa.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXa.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXA)&#59<br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"MYb92945ef-f84e-485b-b71e-8ad01a46b8e6"}]}],"NodeDescription":"<p>///t</p><p>t///</p><p><br></p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/F-S46SpjAf4?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>"},{"idx":"MY2aaaebb6-1112-4546-98b5-9391aaa39870","name":"2. Determine UCP and CMEP","custparents":[{"idx":"MY51f5187e-8719-4c28-807d-b6591ac8cf47"}],"children":[{"idx":"CodeTask-gbhiLx1DedOwRO4o","name":"VXB_Encounter Episodes","NodeDescription":"///t<br/>///s<br/>/*VXB, get all encounter episodes, indicated by whether or not being CME, and type of provider (PCP, SCP, OTH)<br/>&nbsp&nbsp&nbsp&nbsp1) get patient-physician-date-spec specific encounters <br/>&nbsp&nbsp&nbsp&nbsp2) keep encounters with GPs<br/>&nbsp&nbsp&nbsp&nbsp3) determine the final cohort (those having encounters with GP during follow up) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote: patients are excluded if only having encounters during run-in period but not during follow up<br/>&nbsp&nbsp&nbsp&nbsp4) Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbsp5) indicate whether the encounter was for complete medical examination encounters (CME) <br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VXB0a. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*VXB0b. get msb claims within lookback and follow up (i.e. +/- 365 days around entryDate) of the cohort members in VXA*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=vxa,<br/>&nbsp&nbsp&nbsp&nbsptarget=vxb0b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.EntryDate-&runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/><br/>/*VXB1 get patient-physician-date-spec specific encounters with PCPs (GPs)*/<br/>/*VXB1a. from above, get eligible service claims (see appendix 2)*/<br/>data vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb0b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>/*VXB1b. excluding claims without doc number, or by slush doc codes, anyway these claims are difficult to calculate encounter episodes*/<br/>data vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_doc_num ne '' and DocSlushCode = 'N'&#59<br/>run&#59<br/><br/>/*VXB1C. get the number of encounter episode (a distinct patient-doc-dos is an Encounter), get distinct patient doc dos and spec*/<br/>%distinct(data=vxb1b, target=vxb1c, vars=%str(key_hsn, entryDate, key_doc_num, dos, spec), orderby=%str(key_hsn,key_doc_num, dos, spec))&#59 <br/>/*The above may have the same doc as diff SPEC on the same date. Only encounters with physcians claimed as PCPs(GPs) will be kept*/<br/><br/>/*VXB1d. determine whether the encounter episodes are with a PCP (GP), SCP (SP, a specialist who treated statin related conditions), <br/>or others (appendix 3 and 4). */<br/>data VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1c&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in:('B') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'GP'&#59 /*Family physician or primary care provider*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in ('CL','DL') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'SCP'&#59 /*Specialist*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse ProviderType_DateSpecific = 'OTH'&#59 /*Other*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/><br/>run&#59<br/>/*%freq(data=vxb1, table=ProviderType_DateSpecific)&#59*/<br/>/*vxb1 contains all encounters, the provider indicated as PCP, SCP, or OTH*/<br/><br/>/*VXB2. Keep encounters with PCPs (GPs)<br/>Note that the data vxb1 allowsthe flexibility for analyses including non-GP physicians. In this study however, only GP will be kept starting from here<br/>*/<br/><br/>/*VXB2a. From VXB1, keep encounters indicated as with 'GP' */<br/>Data VXB2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspif ProviderType_DateSpecific= 'GP'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop spec&#59<br/>run&#59<br/>/*in the above there might be encounters of the same physician as of different SPEC value of the B class (e.g., B1, B3)*/<br/><br/>/*VXB2b, keep distinct encounters with 'GP'*/<br/>%distinct(data=VXB2a, target=VXB2, vars=*)&#59<br/><br/>/*<br/>VXB3. determine the final cohort (those having encounters with GP during follow up) <br/>Note: patients are excluded if only having encounters during run-in period but not during follow up<br/>*/<br/>/*VXB3a. Get a distinct list of patients who had encounters with GP during followup*/<br/>%distinct(data=VXB2, target=VXB3a, vars=key_hsn, filters=%str(dos between entryDate and entrydate + &followdays -1))&#59<br/><br/>/*VXB3b. from VXA, keep those appearing in VXB3a. The result is the final cohort, i.e., eligible new users of statin medication, <br/>&nbsp&nbsp&nbsp&nbspand having one GP encounter during followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxA,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB_pt.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB_pt.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*VXB4. Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbspNote: these encounters occured in run-in period, or in follow up (the records in run-in period is for future sensitivity analysis)<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB4,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXB5. indicate CME encounters, FSC code in Appendix 5*/<br/>/*VXB5a. From vxb1b (claims with a non-slush physician), select claims indicated as CMEs*/<br/>data vxb5a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspif fsc in ('B003','B064','B052', 'B004')&#59<br/>run&#59<br/><br/>/*VXB5b. get distinct CME claims by patient, provider, and date)*/<br/>%distinct(data=vxb5a, target=vxb5b, vars=%str(key_hsn, key_doc_num, dos))&#59<br/><br/>/*VXB5c. link vxb5b to vxb4 to indicate the CME episodes*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb4,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb5b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn='', 0,1) as CME),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn dos key_doc_num<br/>)&#59<br/>/*%freq(data=vxb, table=cme*ProviderType_DateSpecific)&#59*/<br/>/*!!! VXB contains all encounter episodes with PCPs, indicated whether or not being a CME within runin and follow up period*/<br/>/*however don't get confused!<br/>&nbsp&nbsp&nbsp&nbspA doctors can be both a CMEP, or not&#59 <br/>&nbsp&nbsp&nbsp&nbspThese classifications are encounter-specific (i.e., patient and service date specific) <br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXB)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-qw5zY2AXDDUdP1Gk","name":"VXB_V validate GP whose SPEC starts B","NodeDescription":"///t<br/>///s<br/>/*VXB_V:<br/>&nbsp&nbsp&nbsp&nbspValidate that SPEC starting with 'B' represents family physicians (FP)<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*The idea is to check who ever wrote a reference to a specialist.<br/>&nbsp&nbsp&nbsp&nbspTheoretically, only GPs would write references to a specialist. So the claims indicated as writing a referal should be from a GP.<br/>&nbsp&nbsp&nbsp&nbspIn the service billing claims, such referals billed by a GP is with an FSC code of 'B055'. <br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*From msb claims, get claims indicated as a referal from a GP (FSC= 'B055'), and list out the SPECs of the physicians who wrote these referals */<br/>proc freq data=master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere FSC=\"B055\"&#59<br/>&nbsp&nbsp&nbsp&nbsptable  spec * fsc /nocol norow nopct&#59<br/>run&#59<br/>/*Bingo! <br/>&nbsp&nbsp&nbsp&nbspIn the above, all claims with 'B055' are from a SPEC starting with 'B'. <br/>&nbsp&nbsp&nbsp&nbspIt proves that spec starting with a 'B' are GPs. <br/>*/<br/><br/><br/><br/><br/>/*other attempts&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspThe idea is that both FP and SP will have the save service codes, but<br/>&nbsp&nbsp&nbsp&nbsp1). The charge of a subsequent service by SP is higher<br/><br/>&nbsp&nbsp&nbsp&nbspLet's just use the MSB services of the statin cohort as an example<br/>*/<br/><br/>/*1. Get service claims of the patients in the statin cohort*/<br/>/*%print(data=master_msb)&#59*/<br/>/*2. does the amount of charge (amt_app) the same for<br/>&nbsp&nbsp&nbsp&nbspdifferent<br/>&nbsp&nbsp&nbsp&nbspspec, fsc?<br/>*/<br/>%distinct(data=master_msb, target=ZXA1, <br/>vars=%str(fsc, amt_app, diag, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2), <br/>orderby=%str(fsc, amt_app, diag, SP))&#59<br/>/*the result shows that even for same GP same FSC, the charge is different<br/>*/<br/>data ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspCalendarYr= year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbspif month(dos) < 4 then FiscalYr=year(dos)-1&#59<br/>&nbsp&nbsp&nbsp&nbspelse FiscalYr=year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat SPEC2 $2.&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") then SPEC2=\"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse SPEC2=\"SP\"&#59<br/>run&#59<br/>%beep&#59<br/>data ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif FSC=\"A073\"&#59<br/>run&#59<br/>/*is it true that by fiscal year the charge is the same for the same SPEC and the same FSC*/<br/>%distinct(data=ZXA2a2, target=ZXA2b1, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*Nope. e.g., in CY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>%distinct(data=ZXA2a2, target=ZXA2b2, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, CalendarYr), <br/>orderby=%str(fsc, amt_app, CalendarYr, SP))&#59<br/>/*Nope. e.g., again in FY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>/*get the claims by GP in FY or CY 2015*/<br/>data ZXA2b3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspif CalendarYr=2015 or FiscalYr=2015&#59<br/>run&#59<br/>/*it seems that the charge increased in FY 2015, but sometimes services in Apr (although in FY2015) were yet charged by the rate<br/>&nbsp&nbsp&nbsp&nbspof the previous year<br/>&nbsp&nbsp&nbsp&nbspHmm.... If that is true, then the services in the second half year should be of the same charge for GPs<br/>*/<br/>data ZXA2b4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") and month(dos) > 5&#59<br/>run&#59<br/>%distinct(data=ZXA2b4, target=ZXA2b5, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*still have claims of different charges<br/>e.g.<br/>A056&nbsp&nbsp&nbsp&nbsp13.2 or 13.5 by&nbsp&nbsp&nbsp&nbspGP&nbsp&nbsp&nbsp&nbspin FY 2015<br/>but maybe it is good enough, as the deviation in the same year is not that big<br/>*/<br/>/*another way, <br/>what is the mean sd of charges by GP/SP by fsc fiscal years<br/>*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXA2a1, <br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=amt_app,<br/>&nbsp&nbsp&nbsp&nbspgroupVars= fiscalyr fsc spec2,  <br/>&nbsp&nbsp&nbsp&nbsptheStats=mean sd, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3a, <br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbsppersonID=<br/>)&#59<br/>/*Just to hypothesis, could it be that <br/>&nbsp&nbsp&nbsp&nbspthe means of charge are sig dif between GP and SP<br/>&nbsp&nbsp&nbsp&nbsp(by fiscal year, by fsc)<br/>*/<br/>/*<br/>does it make sense to let charge predict SPEC?<br/>is that a conditional log model (paired by fsc)<br/>*/<br/>proc genmod data=ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspwhere fsc='A110'&#59<br/>&nbsp&nbsp&nbsp&nbspclass key_doc_num key_hsn <br/>&nbsp&nbsp&nbsp&nbsp fiscalyr (ref='2006') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel SPEC2 (ref='GP') = amt_app fiscalyr&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num ( key_hsn) /covb&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}]},{"idx":"MYf4211b47-ac6d-4841-9e6b-f897690cd54c","name":"Determine UCP","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}],"children":[{"idx":"CodeTask-jZobJlVFsLEwSeaJ","name":"VXC_F_UPCIndex in Followup UCPF","NodeDescription":"///t<br/>///s<br/>/*VXC_F determine the upc index during follow up for all the encounterd GPs during follow up*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_F0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb_pt.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb_pt.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/>/*VXC_F1, From vxb, get claims with follow up, i.e., 365 days since to the index(entryDate) */<br/>data VXC_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_F1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_F2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_F2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_F3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_F3a, determine the highest UPC index of each patient */<br/>data VXC_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_F3b1, link the patient and highest UPC index back to VXC_F2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/><br/>/*VXC_F3b2, insert a step here to exclude patients who had only one UCP, and the UCP <br/>&nbsp&nbsp&nbsp&nbspcannot be found in the mobility file (the UCP does not have age/sex, ... info)<br/>*/<br/>/*VXC_F3b2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/><br/>/*VXC_F3b2a have a distinct list of doc from F3b (the physicians ever had encounters with cohort patients*/<br/>%distinct(data=VXC_F3b1, target=VXC_F3b2, vars=key_doc_num)&#59<br/>/*VXC_F3b1b keep records in which sex, age, ... is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXC_F3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_F3b1b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXC_F3b2b, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXC_F3b2c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXC_F3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_F3b2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXC_F3b2c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%freq(data=VXC_F3b2, table=Doc&docVar)&#59*/<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*the above results in a list of physicians with complete info of age, sex, grad year, and grad country*/<br/><br/>/*Link VXC_F3b2 to VXC_F3b1, select patients whose physician are in F3b2<br/>&nbsp&nbsp&nbsp&nbspIn F3b2, physicians are not missing for age, sex, grad year and grad country<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F3b1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upcindex desc) <br/>)&#59<br/><br/><br/>/*VXC_F3c. determine the UCPF. In case of tie, getUCPF1,UCPF2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPFs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPF.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPF1, 2, etc<br/>*/<br/>data VXC_F3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsF N_visits = NMax_VisitsPerDocF UPCIndex=UPCIndexF&#59<br/>run&#59<br/>/*VXC_F3d. Now we can transpose the string in theStr into columsn of UCPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPF1, 1, \":\") is the key_doc_num of UCPF1, scan(UCPF1, 2, \"&#59\") is the n_visits of UCPF1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_F3c, target=VXC_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocF  T_VisitsF UPCIndexF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPF1= scan(UCPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_F4. The docs in VXC_F3 are UCPFs, link them back to vxb_pt(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb_pt,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPFs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPF2 ne '' then MultipleUCPFs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPFs)&#59*/<br/>%exportvars(data=VXC_F)&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-NDmRsLr4oAZXwf3g","name":"QVXC_F","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>1. Why the file is so small? VXC_F is only 1k?!!!!!! need to rerun it<br/><br/>1. Why the UPC Index is so high (25% percentile =60%, median =77%)<br/>  Need to validate by comparing  some patients with their previous run data on Z drive<br/><br/>2. How many patients are with 1 encounter? <br/>&nbsp&nbsp&nbsp&nbspWhat if taking out those with 1 encounter, how does the percentile median  of UPC index change<br/><br/>3. How is the distribution of 2 year UPC index<br/>*/<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>/*better. The UPCIndex level lowered*/<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-arJqviACFDHOJzCD","name":"Additional Analysis of UPCindex","NodeDescription":"///t<br/>///s<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>libname LocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-NDmRsLr4oAZXwf3g"}]},{"idx":"CodeTask-saDPv4LZogMZLgnF","name":"Nirmal's code for UPC","NodeDescription":"///t<br/>///s<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>/*vaheguru ji   Extract MSB data*/<br/>%include '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/coverage_days.sas'&#59<br/>libname ppr '/SAS_data/dw0/HQC_share/nsidhu/PPR/data_MS'&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp<br/>%Extract_MSB(xtrc_start_dt='31Mar2012'd,<br/>                   xtrc_end_dt='26Mar2018'd, <br/>                   excl_xtrc_dt=, <br/>                   ds_out=temp_msb, <br/>                   ds_out_hsn_only=, <br/>                   hsn_list=, <br/>                   hsn_file=, <br/>                   MDnumber=, <br/>                   diagcode=, <br/>&nbsp&nbsp&nbsp&nbsp      &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   diag_file=, <br/>                   dostart='01Apr2013'd, <br/>                   dosend='31Mar2018'd, <br/>                   fscode=, <br/>                   loscode=, <br/>                   othercondition=, <br/>                   othernumber=, <br/>                   kept_vars=KEY_HSN KEY_DOC_NUM SPEC MG DIAG FSC NUM_SRV LOS CONTACTS AMT_APP MODE, <br/>                   debug=N)&#59&nbsp&nbsp&nbsp&nbsp<br/>data ppr.temp_msb1&#59<br/>set temp_msb&#59<br/>SPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>if SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>run&#59<br/><br/>/*<br/>Quality Checks: Check below for the chosen 4 physicians, <br/>Proc freq variable SPEC and LOS<br/>Check the earliest dos_1 for each of 4 physicians<br/>Extract the data of these 4 physicians from the physician mobility file to check the practice start dates<br/>*/<br/>proc freq data=ppr.temp_msb1&#59<br/>table spec los&#59<br/>run&#59<br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>set ppr.temp_msb1&#59<br/>/*<br/>if key_doc_num in ('51925304676' '42925324679' '27925304675' '63825354679' '05825374675' '73925324675') <br/>then key_doc_num='00123456789'&#59<br/>*/<br/><br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B') then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/>proc freq data=temp_msb2&#59<br/>tables spec&#59 run&#59<br/>/*Step 4 removing same day, same doctor visits: <br/>NOTE: There were 32003786 observations read from the data set WORK.TEMP_MSB2.<br/>NOTE: 5942281 observations with duplicate key values were deleted.<br/>NOTE: The data set PPR.TEMP_MSB2 has 26061505 observations and 14 variables.<br/>*/<br/>data ppr.temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=ppr.temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=ppr.temp_msb1x out=ppr.temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/>/*<br/>NOTE: There were 26061505 observations read from the data set PPR.TEMP_MSB2.<br/>NOTE: The data set WORK.TEMP_MSB_3YEAR has 15783671 observations and 14 variables.<br/>*/<br/>data temp_msb_3year&#59<br/>set ppr.temp_msb2&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/>run&#59<br/><br/><br/>/*checking coverage on Mar 31, 2018*/<br/>data temp_msb_3year&#59<br/>set temp_msb_3year&#59<br/>cover_dt1='1Dec2017'd&#59<br/>cover_dt='31Dec2017'd&#59 /*change these dates to 31Mar 2018 when data comes*/<br/>format cover_dt date9. cover_dt1 date9.&#59<br/>run&#59<br/><br/>%coverage_days(xtrc_dt='02JAN2018'd,<br/>&nbsp&nbsp&nbsp&nbspds_in=temp_msb_3year,<br/>&nbsp&nbsp&nbsp&nbspds_out=temp_msb_3year_covered, <br/>&nbsp&nbsp&nbsp&nbspstrt_dt_var=cover_dt,      <br/>&nbsp&nbsp&nbsp&nbspend_dt_var=cover_dt,<br/>&nbsp&nbsp&nbsp&nbspdef_strt_dt=07DEC1994,<br/>&nbsp&nbsp&nbsp&nbspdef_end_dt=&sysdate9,<br/>&nbsp&nbsp&nbsp&nbspcvrg_strt_dt_var=eff_date,<br/>&nbsp&nbsp&nbsp&nbspcvrg_end_dt_var=exp_date)&#59<br/>proc freq data=temp_msb_3year_covered&#59<br/>table cvgdays&#59<br/>run&#59<br/>/*keeping if covered on last day of month*/<br/>data temp_msb_3yearx&#59<br/>set temp_msb_3year_covered&#59<br/>if cvgdays=1&#59<br/>run&#59<br/><br/>proc sort data=temp_msb_3yearx out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/>proc sql noprint&#59 <br/>create table temp_msb_3year1 as <br/>select *, count(dos_1) as total_visits3<br/>from temp_msb_3yearx<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_3year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/>proc freq data=checkz&#59table total_visits3&#59run&#59<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_3year2 as <br/>select *, count(dos_1) as total_visits_phy3<br/>from temp_msb_3year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data ppr.visits_by_phy_3year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3&#59<br/>set temp_msb_3year2&#59<br/>upc3=(total_visits_phy3/total_visits3)*100&#59<br/>format upc3 6.2&#59<br/>run&#59<br/>proc sort data=ppr.visits_by_phy_3year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>/*Single provider*/<br/>data sole_visits ppr.after_sole_visits&#59/*sole=921798 1061676+rest left out=14861873=Total of 15783671*/<br/>set ppr.visits_by_phy_3year&#59<br/>if upc3=100 then output sole_visits&#59<br/>else output ppr.after_sole_visits&#59<br/>run&#59<br/>proc sort data=sole_visits&#59/*sorting this way? Idea is to keep the last visit date*/<br/>by key_hsn descending dos_1 key_doc_num&#59 <br/>run&#59<br/>proc sort data=sole_visits nodupkey out=ppr.sole_visits&#59/*729502 accounting for 921798 visits*/<br/>by key_hsn key_doc_num&#59 <br/>run&#59<br/>data ppr.sole_visits&#59<br/>set ppr.sole_visits&#59<br/>step=1&#59<br/>run&#59<br/><br/>/*192296 individuals keys are alloted physician based on sole provider*/<br/>proc sort data=ppr.sole_visits out=check1 nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*14861873 observations (or 938099 unique individuals) has to allocated doctor based on criteria below*/<br/>proc sort data=ppr.after_sole_visits out=check nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/>/*<br/>2. Majority Provider&#59 <br/>3. if tie then PHYSICAL EXAM(3B), CDM(64B), SUPPORTIVE CARE(52B), WELL BABY(4B) takes prority&#59<br/>4. if no physical then date of service takes priority<br/>*/  <br/>data after_sole_visitsx&#59<br/>retain key_hsn upc3 FSC physical_flag dos_1 key_doc_num&#59<br/>set ppr.after_sole_visits&#59<br/>/*if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59*/<br/>run&#59<br/>proc freq data=after_sole_visitsx&#59 tables physical_flag&#59 run&#59<br/>proc sort data=after_sole_visitsx&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=after_sole_visitsx out=after_sole_visitsxz nodupkey&#59 /*904902 accounting for 14084916 visits*/<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*to add which step contributed, i changed code as under and we get same result*/<br/>/*Here starts setp 2*/<br/>proc sort data=after_sole_visitsx out=step2A nodupkey&#59<br/>by key_hsn upc3 key_doc_num&#59<br/>run&#59<br/>proc sort data=step2A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=step2A&#59<br/>tables total_visits3&#59<br/>run&#59<br/><br/>data step2B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step2A point=_n_&#59<br/>leadupc3=upc3&#59<br/>end&#59<br/>set step2A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadupc3=.&#59<br/>run&#59<br/>data step2C&#59<br/>set step2B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadupc3=.&#59<br/>end&#59<br/>run&#59<br/>data step2D&#59<br/>set step2C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if upc3 GT leadupc3 then step=2&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step2D&#59<br/>tables step&#59<br/>run&#59<br/>data step2E&#59/*741493 unique people got alloted in step 2*/<br/>set step2D&#59<br/>if step=2&#59<br/>run&#59<br/>proc sort data=step2E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/* Dec2019<br/>just checking who got allotted in step 2 and what is there next highest ups3*/<br/>data test22&#59<br/>set step2A&#59<br/>keep key_hsn key_doc_num upc3 total_phys&#59<br/>run&#59<br/>proc sort data=test22&#59<br/>by KEY_HSN descending upc3&#59<br/>run&#59<br/>data test23&#59<br/>set test22&#59<br/>by KEY_HSN descending upc3&#59<br/>if first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbspdocN=1&#59<br/>&nbsp&nbsp&nbsp&nbspcumuUPC3=UPC3&#59<br/>End&#59<br/>else do&#59<br/>&nbsp&nbsp&nbsp&nbspdocN+1&#59<br/>&nbsp&nbsp&nbsp&nbspcumuUPC3 + UPc3&#59<br/>end&#59<br/>run&#59<br/>data test24&#59<br/>set test23&#59<br/>if docN =1<br/>or<br/>(docN=2 and cumuUPC3 ge 75 and (cumuUPC3 - upc3) le 50)&#59<br/>run&#59<br/><br/>data test24only2nd&#59<br/>&nbsp&nbsp&nbsp&nbspset test23&#59<br/>&nbsp&nbsp&nbsp&nbspif (docN=2 and cumuUPC3 ge 75 and (cumuUPC3 - upc3) le 50)&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/><br/>/*May 21, 2019*/<br/>/*Cretating artifical data*/ <br/>proc freq data=ppr.UNIQUE_PHY_PATIENTS_DEMOG&#59<br/>tables step&#59<br/>run&#59<br/><br/><br/>proc freq data=randomdataMay21&#59<br/>where dr=2&#59<br/>tables step sex upc&#59<br/>run&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-rvLPn6HFgzUHpqfy","name":"UPCINdex Cross Check","NodeDescription":"///t<br/>///s<br/>/*Check the UPC index calculation*/<br/><br/>/*1. Get a list of patients who had 100% UPC Index from the statin cohort*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data ptFile&#59<br/>&nbsp&nbsp&nbsp&nbspset vxc_f&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num entryDate UPCIndexF N_VisitsF T_visitsF UCPF1&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, ':')&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF= input(scan(UCPF1, 2, ':'), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>&nbsp&nbsp&nbsp&nbspIf Year(entryDate) = 2015 and month(entryDate)=6&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get patients of june 2015*/<br/>run&#59<br/><br/>/* T_VisitsF :8. UpcIndexF :8.2 key_doc_num :$11. N_VisitsF:8.0 &#59*/<br/>data _tmp2&#59<br/>&nbsp&nbsp&nbsp&nbspinput key_hsn $11. @13 EntryDate $8. @22 key_doc_num $11. T_VisitsF&#59<br/>&nbsp&nbsp&nbsp&nbspdatalines&#59<br/>00235324616&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp51925324674&nbsp&nbsp&nbsp&nbsp1<br/>00445374626&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp13925314674&nbsp&nbsp&nbsp&nbsp4<br/>00525334689&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp39925334673&nbsp&nbsp&nbsp&nbsp3<br/>01245314612&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp30825354679&nbsp&nbsp&nbsp&nbsp5<br/>01245334644&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp3<br/>01645334623&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp5<br/>02345364614&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp13<br/>02435324646&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp2<br/>02635324613&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp84825354675&nbsp&nbsp&nbsp&nbsp7<br/>03045374659&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp48825344672&nbsp&nbsp&nbsp&nbsp1<br/>03435304629&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp02925334670&nbsp&nbsp&nbsp&nbsp7<br/>03635314617&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp03925334679&nbsp&nbsp&nbsp&nbsp2<br/>03745334632&nbsp&nbsp&nbsp&nbsp06062015&nbsp&nbsp&nbsp&nbsp54825364678&nbsp&nbsp&nbsp&nbsp1<br/>04545364628&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp94825354673&nbsp&nbsp&nbsp&nbsp1<br/>05025354686&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp00925344672&nbsp&nbsp&nbsp&nbsp8<br/>05045344633&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp34825394670&nbsp&nbsp&nbsp&nbsp4<br/>05045384663&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp36825364673&nbsp&nbsp&nbsp&nbsp17<br/>05445334628&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp9<br/>05535324648&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp14925324670&nbsp&nbsp&nbsp&nbsp13<br/>05635344636&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp53925334673&nbsp&nbsp&nbsp&nbsp4<br/>06425394687&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp31925314675&nbsp&nbsp&nbsp&nbsp2<br/>06545334630&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp84925334674&nbsp&nbsp&nbsp&nbsp1<br/>07145394631&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp15<br/>07645374660&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp75825394675&nbsp&nbsp&nbsp&nbsp1<br/>07735334622&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp1<br/>08635354630&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp50925344670&nbsp&nbsp&nbsp&nbsp7<br/>09245314616&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp04925324678&nbsp&nbsp&nbsp&nbsp4<br/>09335304664&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp36825364673&nbsp&nbsp&nbsp&nbsp6<br/>10035324649&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp4<br/>10435334696&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp54925304678&nbsp&nbsp&nbsp&nbsp8<br/>10545304645&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp5<br/>12645304660&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp2<br/>12725354684&nbsp&nbsp&nbsp&nbsp21062015&nbsp&nbsp&nbsp&nbsp35825394670&nbsp&nbsp&nbsp&nbsp6<br/>12735324638&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp53925324670&nbsp&nbsp&nbsp&nbsp4<br/>12935334620&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp8<br/>13635354613&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp43825384679&nbsp&nbsp&nbsp&nbsp8<br/>13835384694&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp53825374672&nbsp&nbsp&nbsp&nbsp1<br/>14235364669&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>14235394628&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp54825374674&nbsp&nbsp&nbsp&nbsp6<br/>14925394693&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp5<br/>15035314639&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp3<br/>15745394635&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp14<br/>16135304676&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp7<br/>16435354680&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp4<br/>16645304631&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp8<br/>17145314622&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp04825354673&nbsp&nbsp&nbsp&nbsp3<br/>17535324604&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp7<br/>17835324625&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp01925324677&nbsp&nbsp&nbsp&nbsp6<br/>17835324669&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp21825374675&nbsp&nbsp&nbsp&nbsp3<br/>18025334681&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp51825364673&nbsp&nbsp&nbsp&nbsp4<br/>18225364687&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp89825394674&nbsp&nbsp&nbsp&nbsp6<br/>18435334665&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp2<br/>18745304609&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp6<br/>19435394665&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp07825354677&nbsp&nbsp&nbsp&nbsp5<br/>19735354609&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp76825374676&nbsp&nbsp&nbsp&nbsp12<br/>19745324640&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp18825344679&nbsp&nbsp&nbsp&nbsp12<br/>20235334602&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp24925334675&nbsp&nbsp&nbsp&nbsp16<br/>20535314682&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp82925314673&nbsp&nbsp&nbsp&nbsp8<br/>20745344608&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp20925334675&nbsp&nbsp&nbsp&nbsp13<br/>20935364648&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp65825394676&nbsp&nbsp&nbsp&nbsp4<br/>21125344689&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp7<br/>21345324667&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp34825374674&nbsp&nbsp&nbsp&nbsp1<br/>21535324632&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp08825374677&nbsp&nbsp&nbsp&nbsp3<br/>21545314616&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp04925304673&nbsp&nbsp&nbsp&nbsp2<br/>21645334631&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp7<br/>21835384645&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp18925304671&nbsp&nbsp&nbsp&nbsp8<br/>22135354641&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp62925324675&nbsp&nbsp&nbsp&nbsp1<br/>22635324654&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp84825354671&nbsp&nbsp&nbsp&nbsp10<br/>23045304655&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp73925314676&nbsp&nbsp&nbsp&nbsp5<br/>23145324638&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp29825344670&nbsp&nbsp&nbsp&nbsp1<br/>23225354681&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp6<br/>23535304638&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp6<br/>24035344679&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp3<br/>24735344672&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp30925344676&nbsp&nbsp&nbsp&nbsp2<br/>25745394647&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp6<br/>26135314641&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp14925334677&nbsp&nbsp&nbsp&nbsp4<br/>26145344664&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp03825394679&nbsp&nbsp&nbsp&nbsp7<br/>26545374603&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp70825364675&nbsp&nbsp&nbsp&nbsp6<br/>26935344612&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>27225394696&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp04925324678&nbsp&nbsp&nbsp&nbsp3<br/>27345394626&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp04825364672&nbsp&nbsp&nbsp&nbsp14<br/>27425334696&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp16<br/>27435314625&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp44825394677&nbsp&nbsp&nbsp&nbsp5<br/>27445394634&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp4<br/>27545304610&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp23<br/>27545384608&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp03925344674&nbsp&nbsp&nbsp&nbsp4<br/>28335374683&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp62925324670&nbsp&nbsp&nbsp&nbsp2<br/>28535394624&nbsp&nbsp&nbsp&nbsp13062015&nbsp&nbsp&nbsp&nbsp43825354674&nbsp&nbsp&nbsp&nbsp3<br/>28935324687&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp5<br/>30145324642&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp85925344673&nbsp&nbsp&nbsp&nbsp1<br/>30635364613&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp73825364677&nbsp&nbsp&nbsp&nbsp1<br/>31425334682&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp4<br/>31635314629&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp4<br/>31735354628&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp74925344674&nbsp&nbsp&nbsp&nbsp4<br/>31935354676&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp12825394679&nbsp&nbsp&nbsp&nbsp1<br/>32435384603&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp4<br/>32435384621&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp3<br/>32535324653&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp50925344670&nbsp&nbsp&nbsp&nbsp5<br/>32735384615&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp65825374677&nbsp&nbsp&nbsp&nbsp8<br/>32945374621&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp87825344678&nbsp&nbsp&nbsp&nbsp8<br/>33225384685&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp81825384676&nbsp&nbsp&nbsp&nbsp3<br/>33535394633&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp5<br/>33835394631&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp05825394672&nbsp&nbsp&nbsp&nbsp17<br/>34035374675&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp18925304678&nbsp&nbsp&nbsp&nbsp5<br/>34235354605&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp51825364673&nbsp&nbsp&nbsp&nbsp5<br/>34245374628&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp00925344679&nbsp&nbsp&nbsp&nbsp5<br/>34735394622&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp67925304673&nbsp&nbsp&nbsp&nbsp6<br/>35335364606&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp65825374677&nbsp&nbsp&nbsp&nbsp7<br/>35435344621&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp54925314671&nbsp&nbsp&nbsp&nbsp4<br/>35435354688&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp66925334670&nbsp&nbsp&nbsp&nbsp5<br/>35535394681&nbsp&nbsp&nbsp&nbsp07062015&nbsp&nbsp&nbsp&nbsp48825384674&nbsp&nbsp&nbsp&nbsp10<br/>35935314617&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp87825364679&nbsp&nbsp&nbsp&nbsp4<br/>35945384656&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp48825394679&nbsp&nbsp&nbsp&nbsp7<br/>36245344616&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp93925344678&nbsp&nbsp&nbsp&nbsp4<br/>36345354658&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp2<br/>38135374675&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp5<br/>38235304661&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp42825394671&nbsp&nbsp&nbsp&nbsp3<br/>38235354652&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp5<br/>38335374615&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp54825364679&nbsp&nbsp&nbsp&nbsp4<br/>38425354684&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp28<br/>38445384620&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp2<br/>39435344652&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp39925334673&nbsp&nbsp&nbsp&nbsp5<br/>40135384691&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp53925324670&nbsp&nbsp&nbsp&nbsp7<br/>40345384658&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp35825394670&nbsp&nbsp&nbsp&nbsp2<br/>40935354603&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp54825354670&nbsp&nbsp&nbsp&nbsp5<br/>41235364600&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp04925304673&nbsp&nbsp&nbsp&nbsp4<br/>41445374657&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp3<br/>41745394649&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp5<br/>42135304642&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp33825354675&nbsp&nbsp&nbsp&nbsp3<br/>42135354623&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp6<br/>42325364690&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp13<br/>42545394609&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp20925334675&nbsp&nbsp&nbsp&nbsp7<br/>42835364667&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp56825394676&nbsp&nbsp&nbsp&nbsp10<br/>43245354652&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp06825354671&nbsp&nbsp&nbsp&nbsp8<br/>43335354683&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp6<br/>43345384643&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp05825394672&nbsp&nbsp&nbsp&nbsp7<br/>43625374690&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp5<br/>45545394606&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp50925314671&nbsp&nbsp&nbsp&nbsp4<br/>45745334650&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp11<br/>45835394610&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp12825384676&nbsp&nbsp&nbsp&nbsp1<br/>46035364685&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp41825394677&nbsp&nbsp&nbsp&nbsp8<br/>46345364608&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp21925304670&nbsp&nbsp&nbsp&nbsp3<br/>46735374622&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp45825394678&nbsp&nbsp&nbsp&nbsp7<br/>47335364666&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp89825394674&nbsp&nbsp&nbsp&nbsp6<br/>47925374684&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp62925304677&nbsp&nbsp&nbsp&nbsp13<br/>48045314657&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp79925314676&nbsp&nbsp&nbsp&nbsp5<br/>48145334604&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp53825364671&nbsp&nbsp&nbsp&nbsp4<br/>48225394692&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp94925334675&nbsp&nbsp&nbsp&nbsp6<br/>48235384601&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp60925334677&nbsp&nbsp&nbsp&nbsp4<br/>49035324698&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp55925324677&nbsp&nbsp&nbsp&nbsp11<br/>49835364625&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp8<br/>50035364663&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp27925334672&nbsp&nbsp&nbsp&nbsp9<br/>50235384695&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp7<br/>50335344671&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp90925314678&nbsp&nbsp&nbsp&nbsp3<br/>50435384675&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp05825354673&nbsp&nbsp&nbsp&nbsp5<br/>51035304681&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp93925324674&nbsp&nbsp&nbsp&nbsp1<br/>51335354657&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp63925324678&nbsp&nbsp&nbsp&nbsp28<br/>51425364686&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp66825374671&nbsp&nbsp&nbsp&nbsp1<br/>52735374690&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp2<br/>52745344649&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp00925324674&nbsp&nbsp&nbsp&nbsp17<br/>53945374652&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp10825354678&nbsp&nbsp&nbsp&nbsp5<br/>54035364695&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp72825364678&nbsp&nbsp&nbsp&nbsp9<br/>54135344634&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp89825374670&nbsp&nbsp&nbsp&nbsp3<br/>54235334692&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp79925324674&nbsp&nbsp&nbsp&nbsp1<br/>54325354683&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp19<br/>54345384609&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp62925324670&nbsp&nbsp&nbsp&nbsp5<br/>54845384630&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp41825374679&nbsp&nbsp&nbsp&nbsp9<br/>54935384610&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp72925324671&nbsp&nbsp&nbsp&nbsp4<br/>56435344692&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp3<br/>56535364614&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp84825354670&nbsp&nbsp&nbsp&nbsp18<br/>57135344604&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp75825384670&nbsp&nbsp&nbsp&nbsp1<br/>57735314637&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp47825384679&nbsp&nbsp&nbsp&nbsp1<br/>57845384644&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp2<br/>57935394680&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp28825364670&nbsp&nbsp&nbsp&nbsp10<br/>58035354632&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp08825384671&nbsp&nbsp&nbsp&nbsp11<br/>58735344628&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp74825354679&nbsp&nbsp&nbsp&nbsp5<br/>58735384624&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp37825344678&nbsp&nbsp&nbsp&nbsp8<br/>58835344624&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp9<br/>59245344656&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp47825354678&nbsp&nbsp&nbsp&nbsp6<br/>59425384682&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp05825374675&nbsp&nbsp&nbsp&nbsp2<br/>60135384652&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp5<br/>60225344688&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp08925324674&nbsp&nbsp&nbsp&nbsp1<br/>60335374601&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp13925334676&nbsp&nbsp&nbsp&nbsp4<br/>60525304698&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp67825394676&nbsp&nbsp&nbsp&nbsp8<br/>61645314653&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp74925344674&nbsp&nbsp&nbsp&nbsp9<br/>61745354651&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp5<br/>63025354695&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp96825344670&nbsp&nbsp&nbsp&nbsp1<br/>63125324681&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp48825394679&nbsp&nbsp&nbsp&nbsp5<br/>63335334614&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp56825364674&nbsp&nbsp&nbsp&nbsp5<br/>64535324696&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp5<br/>64935364615&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp96925324670&nbsp&nbsp&nbsp&nbsp5<br/>65535364662&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp35925324678&nbsp&nbsp&nbsp&nbsp4<br/>65635304639&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp29925324672&nbsp&nbsp&nbsp&nbsp5<br/>66245334602&nbsp&nbsp&nbsp&nbsp06062015&nbsp&nbsp&nbsp&nbsp19825374677&nbsp&nbsp&nbsp&nbsp3<br/>67025364699&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp11825384671&nbsp&nbsp&nbsp&nbsp4<br/>67745334640&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp38825384677&nbsp&nbsp&nbsp&nbsp3<br/>68245354616&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp43825354679&nbsp&nbsp&nbsp&nbsp7<br/>68345334607&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp8<br/>68735354614&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp19925334675&nbsp&nbsp&nbsp&nbsp8<br/>68835344648&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp9<br/>69535374624&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp28825384672&nbsp&nbsp&nbsp&nbsp3<br/>69635364692&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp96825364676&nbsp&nbsp&nbsp&nbsp4<br/>71535384616&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp6<br/>71645304660&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp43825384677&nbsp&nbsp&nbsp&nbsp15<br/>73025324689&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp40825384675&nbsp&nbsp&nbsp&nbsp3<br/>73525334682&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp38825384679&nbsp&nbsp&nbsp&nbsp5<br/>73735364670&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp7<br/>73745344644&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp66825374671&nbsp&nbsp&nbsp&nbsp4<br/>73835364675&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp07825384671&nbsp&nbsp&nbsp&nbsp5<br/>74335364665&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp5<br/>74645374651&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp6<br/>75135354623&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp5<br/>75525304693&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp11<br/>75545314644&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp1<br/>75935394628&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp86825374674&nbsp&nbsp&nbsp&nbsp5<br/>75945324607&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp48825354678&nbsp&nbsp&nbsp&nbsp4<br/>75945384642&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp47825384674&nbsp&nbsp&nbsp&nbsp6<br/>76425394696&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp5<br/>76445314657&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp39825384679&nbsp&nbsp&nbsp&nbsp15<br/>76535314686&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp93925344678&nbsp&nbsp&nbsp&nbsp7<br/>76645394622&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp39825384671&nbsp&nbsp&nbsp&nbsp7<br/>76845324623&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp00925344679&nbsp&nbsp&nbsp&nbsp7<br/>77635304626&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp89825354677&nbsp&nbsp&nbsp&nbsp4<br/>78145334640&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp51925324675&nbsp&nbsp&nbsp&nbsp9<br/>78545334655&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp88825384678&nbsp&nbsp&nbsp&nbsp6<br/>78545364604&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp17<br/>78735374672&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp47825354678&nbsp&nbsp&nbsp&nbsp1<br/>79045394662&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp50825364672&nbsp&nbsp&nbsp&nbsp4<br/>79135364630&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp21825374675&nbsp&nbsp&nbsp&nbsp3<br/>79435394633&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp03925344674&nbsp&nbsp&nbsp&nbsp20<br/>80445394636&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp30825354679&nbsp&nbsp&nbsp&nbsp4<br/>80625374684&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp5<br/>80835354645&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp19925304670&nbsp&nbsp&nbsp&nbsp19<br/>82135344634&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp3<br/>82135364615&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp37825354678&nbsp&nbsp&nbsp&nbsp8<br/>82145344600&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp5<br/>82435304635&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp35925324678&nbsp&nbsp&nbsp&nbsp16<br/>82545354614&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp6<br/>82835374691&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp13925344674&nbsp&nbsp&nbsp&nbsp7<br/>82925304698&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp13825394674&nbsp&nbsp&nbsp&nbsp9<br/>83435304655&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp02925324676&nbsp&nbsp&nbsp&nbsp2<br/>83545304618&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp8<br/>84045304637&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp82925314673&nbsp&nbsp&nbsp&nbsp11<br/>84445314626&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp9<br/>84535364670&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp8<br/>84735304650&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp26925324671&nbsp&nbsp&nbsp&nbsp3<br/>85435374621&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp99825384678&nbsp&nbsp&nbsp&nbsp7<br/>85725344691&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp5<br/>86125374685&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp7<br/>86345334601&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp10<br/>86835364645&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp08825394671&nbsp&nbsp&nbsp&nbsp5<br/>86845374654&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp73825364677&nbsp&nbsp&nbsp&nbsp2<br/>87025334695&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp03825394677&nbsp&nbsp&nbsp&nbsp1<br/>87245334661&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp03825384670&nbsp&nbsp&nbsp&nbsp2<br/>87545304637&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp07925304670&nbsp&nbsp&nbsp&nbsp2<br/>88145354600&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp2<br/>89235344631&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp5<br/>89445364620&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp93825394671&nbsp&nbsp&nbsp&nbsp4<br/>89535334658&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp90925304672&nbsp&nbsp&nbsp&nbsp21<br/>89745324654&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp3<br/>90225384689&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp11825364676&nbsp&nbsp&nbsp&nbsp2<br/>90725314690&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp70825364675&nbsp&nbsp&nbsp&nbsp4<br/>91525364696&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp66925324674&nbsp&nbsp&nbsp&nbsp4<br/>91535354668&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>91545304641&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp6<br/>91545354609&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp02925324679&nbsp&nbsp&nbsp&nbsp13<br/>91625324693&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp28825354675&nbsp&nbsp&nbsp&nbsp7<br/>91735324644&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp37925324677&nbsp&nbsp&nbsp&nbsp5<br/>92135374656&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp77825364673&nbsp&nbsp&nbsp&nbsp2<br/>92745304637&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp70825364674&nbsp&nbsp&nbsp&nbsp11<br/>92835384689&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp05925344674&nbsp&nbsp&nbsp&nbsp6<br/>92845384601&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp16825364673&nbsp&nbsp&nbsp&nbsp3<br/>92935364654&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp5<br/>92945314643&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp60825394676&nbsp&nbsp&nbsp&nbsp3<br/>94225314690&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp69925334677&nbsp&nbsp&nbsp&nbsp6<br/>94225364684&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp46925314675&nbsp&nbsp&nbsp&nbsp4<br/>94235344669&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp65925324670&nbsp&nbsp&nbsp&nbsp7<br/>94245384627&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp64825374677&nbsp&nbsp&nbsp&nbsp1<br/>94335364611&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp5<br/>94545344619&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp42825394671&nbsp&nbsp&nbsp&nbsp6<br/>96045384607&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp4<br/>96125344689&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp12825394679&nbsp&nbsp&nbsp&nbsp1<br/>96835314624&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp47925314675&nbsp&nbsp&nbsp&nbsp1<br/>96835324638&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp88825384672&nbsp&nbsp&nbsp&nbsp4<br/>97045364609&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp92825374676&nbsp&nbsp&nbsp&nbsp1<br/>97145304634&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp65925324670&nbsp&nbsp&nbsp&nbsp12<br/>97445314655&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp89825374670&nbsp&nbsp&nbsp&nbsp2<br/>98335314688&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp93925344676&nbsp&nbsp&nbsp&nbsp4<br/>99235394663&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp09825374671&nbsp&nbsp&nbsp&nbsp3<br/>&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-IJhZyByUcCqgbPym","name":"Use Nirmal's code","NodeDescription":"///t<br/>///s<br/>%let ptlist =%str(<br/>'00235324616', '00445374626', '00525334689', '01245314612', '01245334644', '01645334623', '02345364614', '02435324646', '02635324613', '03045374659', '03435304629', '03635314617', '03745334632', '04545364628', '05025354686', '05045344633', '05045384663', '05445334628', '05535324648', '05635344636', '06425394687', '06545334630', '07145394631', '07645374660', '07735334622', '08635354630', '09245314616', '09335304664', '10035324649', '10435334696', '10545304645', '12645304660', '12725354684', '12735324638', '12935334620', '13635354613', '13835384694', '14235364669', '14235394628', '14925394693', '15035314639', '15745394635', '16135304676', '16435354680', '16645304631', '17145314622', '17535324604', '17835324625', '17835324669', '18025334681', '18225364687', '18435334665', '18745304609', '19435394665', '19735354609', '19745324640', '20235334602', '20535314682', '20745344608', '20935364648', '21125344689', '21345324667', '21535324632', '21545314616', '21645334631', '21835384645', '22135354641', '22635324654', '23045304655', '23145324638', '23225354681', '23535304638', '24035344679', '24735344672', '25745394647', '26135314641', '26145344664', '26545374603', '26935344612', '27225394696', '27345394626', '27425334696', '27435314625', '27445394634', '27545304610', '27545384608', '28335374683', '28535394624', '28935324687', '30145324642', '30635364613', '31425334682', '31635314629', '31735354628', '31935354676', '32435384603', '32435384621', '32535324653', '32735384615', '32945374621', '33225384685', '33535394633', '33835394631', '34035374675', '34235354605', '34245374628', '34735394622', '35335364606', '35435344621', '35435354688', '35535394681', '35935314617', '35945384656', '36245344616', '36345354658', '38135374675', '38235304661', '38235354652', '38335374615', '38425354684', '38445384620', '39435344652', '40135384691', '40345384658', '40935354603', '41235364600', '41445374657', '41745394649', '42135304642', '42135354623', '42325364690', '42545394609', '42835364667', '43245354652', '43335354683', '43345384643', '43625374690', '45545394606', '45745334650', '45835394610', '46035364685', '46345364608', '46735374622', '47335364666', '47925374684', '48045314657', '48145334604', '48225394692', '48235384601', '49035324698', '49835364625', '50035364663', '50235384695', '50335344671', '50435384675', '51035304681', '51335354657', '51425364686', '52735374690', '52745344649', '53945374652', '54035364695', '54135344634', '54235334692', '54325354683', '54345384609', '54845384630', '54935384610', '56435344692', '56535364614', '57135344604', '57735314637', '57845384644', '57935394680', '58035354632', '58735344628', '58735384624', '58835344624', '59245344656', '59425384682', '60135384652', '60225344688', '60335374601', '60525304698', '61645314653', '61745354651', '63025354695', '63125324681', '63335334614', '64535324696', '64935364615', '65535364662', '65635304639', '66245334602', '67025364699', '67745334640', '68245354616', '68345334607', '68735354614', '68835344648', '69535374624', '69635364692', '71535384616', '71645304660', '73025324689', '73525334682', '73735364670', '73745344644', '73835364675', '74335364665', '74645374651', '75135354623', '75525304693', '75545314644', '75935394628', '75945324607', '75945384642', '76425394696', '76445314657', '76535314686', '76645394622', '76845324623', '77635304626', '78145334640', '78545334655', '78545364604', '78735374672', '79045394662', '79135364630', '79435394633', '80445394636', '80625374684', '80835354645', '82135344634', '82135364615', '82145344600', '82435304635', '82545354614', '82835374691', '82925304698', '83435304655', '83545304618', '84045304637', '84445314626', '84535364670', '84735304650', '85435374621', '85725344691', '86125374685', '86345334601', '86835364645', '86845374654', '87025334695', '87245334661', '87545304637', '88145354600', '89235344631', '89445364620', '89535334658', '89745324654', '90225384689', '90725314690', '91525364696', '91535354668', '91545304641', '91545354609', '91625324693', '91735324644', '92135374656', '92745304637', '92835384689', '92845384601', '92935364654', '92945314643', '94225314690', '94225364684', '94235344669', '94245384627', '94335364611', '94545344619', '96045384607', '96125344689', '96835314624', '96835324638', '97045364609', '97145304634', '97445314655', '98335314688', '99235394663'<br/>)&#59<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>data temp_msb1&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.temp_msb&#59<br/>&nbsp&nbsp&nbsp&nbspSPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>&nbsp&nbsp&nbsp&nbspif SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>&nbsp&nbsp&nbsp&nbspif key_hsn='15035314639' and dos_1 >= '08jun2015'd and dos_1 <='08jun2015'd +364&#59<br/>run&#59<br/><br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>&nbsp&nbsp&nbsp&nbspset temp_msb1&#59<br/><br/>&nbsp&nbsp&nbsp&nbspif key_hsn='' then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif num_srv=0 then delete&#59<br/>&nbsp&nbsp&nbsp&nbsp*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>&nbsp&nbsp&nbsp&nbspif key_doc_num in:(&slush) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif spec not in: ('B') then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif mode in:(&mode_exc) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/><br/>data temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=temp_msb1x out=temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/><br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=temp_msb2,<br/>&nbsp&nbsp&nbsp&nbspt2=PTFILE,<br/>&nbsp&nbsp&nbsp&nbsptarget=temp_msb_1year,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos_1 between t2.entryDate and t2.entryDate +364),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/><br/><br/>proc sort data=temp_msb_1year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_1year1 as <br/>select *, count(dos_1) as total_visits1<br/>from temp_msb_1year<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_1year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/><br/><br/>proc sql noprint&#59 <br/>create table temp_msb_1year2 as <br/>select *, count(dos_1) as total_visits_phy1<br/>from temp_msb_1year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data visits_by_phy_1year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy1 total_visits1 upc1&#59<br/>set temp_msb_1year2&#59<br/>upc1=(total_visits_phy1/total_visits1)*100&#59<br/>format upc1 6.2&#59<br/>run&#59<br/><br/>/*so what is the UPC by patient-doc*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=visits_by_phy_1year,<br/>&nbsp&nbsp&nbsp&nbsptarget= test1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn,  key_doc_num, upc1,total_visits_phy1, total_visits1 ),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upc1 desc)<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset test1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending upc1&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>run&#59<br/>/*to this point......*/<br/><br/><br/>/*msb visits in my file*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>data test10&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_hsn ='15035314639'&#59<br/>run&#59<br/>proc sort data=test10&#59<br/>where dos between '08jun2015'd and '08jun2015'd +364 &#59<br/>by key_hsn dos&#59run&#59<br/><br/><br/>data test11&#59/*332003786 out of 54983036*/<br/>&nbsp&nbsp&nbsp&nbspset test10&#59<br/><br/>&nbsp&nbsp&nbsp&nbspif key_hsn='' then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif num_srv=0 then delete&#59<br/>&nbsp&nbsp&nbsp&nbsp*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>&nbsp&nbsp&nbsp&nbspif key_doc_num in:(&slush) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif spec not in: ('B') then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif mode in:(&mode_exc) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/><br/>data test12&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F1&#59<br/>&nbsp&nbsp&nbsp&nbspif key_hsn = '15035314639'&#59<br/>run&#59<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=test11, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/><br/>/*May 21, 2019*/<br/>/*Cretating artifical data*/ <br/>proc freq data=ppr.UNIQUE_PHY_PATIENTS_DEMOG&#59<br/>tables step&#59<br/>run&#59<br/><br/><br/>proc freq data=randomdataMay21&#59<br/>where dr=2&#59<br/>tables step sex upc&#59<br/>run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-rvLPn6HFgzUHpqfy"}]}],"custparents":[{"idx":"CodeTask-saDPv4LZogMZLgnF"}]}],"custparents":[{"idx":"CodeTask-NDmRsLr4oAZXwf3g"}]}],"custparents":[{"idx":"CodeTask-jZobJlVFsLEwSeaJ"}]},{"idx":"CodeTask-FEB1O3IYXPvgZQS8","name":"VXC_R Table 1 Patient Flow","NodeDescription":"///t<br/>///s<br/>/*VXC_R: Table 1.  patient flow*/<br/>/*The report in &localReportPath\\Analytical Report.xlsx contains the primary patient flow*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_R1, get existing patient flow from the report generated when preparing data*/<br/>Proc import datafile=\"&localReportPath.\\Analytical Report.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspdbms=excel<br/>&nbsp&nbsp&nbsp&nbspout=VXC_R1a<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Patient flow\"&#59<br/>run&#59<br/>data VXC_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep F1 f3 obs&#59<br/>&nbsp&nbsp&nbsp&nbspif f1 ne ''&#59<br/>run&#59<br/>data VXC_R1&#59<br/>&nbsp&nbsp&nbsp&nbsplength F1 $500.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 2 then F1 = \"Received statin medications between Jan 1,2012 and Dec 31, 2017\" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 3 then F1 = \"Excluding those missing age/sex information \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 5 then F1 = \"Excluding those le 18 on cohort entry \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 7 then F1 = \"Excluding those not continuously registered for healthcare service within the washout period of 1825 days, or a follow-up period of 365 days \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 9 then F1 = \"Excluding those receiving statin medications within the washout period\"&#59 <br/>&nbsp&nbsp&nbsp&nbspif _n_ in (1,2,3,5,7,9)&#59<br/>&nbsp&nbsp&nbsp&nbsprename F1=Steps F3 = Remaining&#59<br/>run&#59<br/><br/>/*VXC_R2. Note: there could be persons continuously covered until the 365th day since entry, but died<br/>&nbsp&nbsp&nbsp&nbspon the 365th day. These patients, if exist, should be excluded*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those deceased within washout,or follow-up period \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R3. Adding the flow info after excluding those stayed in LTC during washout or follow-up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those admitted to long term care facilities within washout,or follow-up period \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R4 Adding the flow info after excluding those stayed in an out province facility*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those unable to obtain sufficient data for analysis (e.g. stayed in an out-out-province facility for acute care during follow-up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R5 Adding the flow info after excluding those pregnant during run-in or followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those pregnant during run-in or followup \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R6. Adding the flow info after excluding those not have encounters with a GP during followup */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those not having encounters with a GP during follow up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R7. Adding the flow info after excluding those whose GP missing age, sex, grad year, grad country info */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding patients whose usual care provider missing age, sex, grad year, grad country info \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R8. Putting all steps together */<br/>data VXC_R8&#59<br/>&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1-VXC_R7&#59<br/>run&#59<br/><br/><br/>data localt.VXC_R&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R8&#59<br/>&nbsp&nbsp&nbsp&nbspif obs >0 then &nbsp&nbsp&nbsp&nbspExcluded = lag(Remaining)-Remaining&#59<br/>&nbsp&nbsp&nbsp&nbspProject = &_clientprojectname&#59<br/>&nbsp&nbsp&nbsp&nbspProgram = &_clienttasklabel&#59<br/>&nbsp&nbsp&nbsp&nbspCreateDate = date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat CreateDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprename Remaining = NPatients_remaining&#59<br/>run&#59<br/><br/>/*proc export data=localt.VXC_R*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"T1.Patient Flow\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-rXaW7KfQgzQfcx1V"},{"idx":"CodeTask-jZobJlVFsLEwSeaJ"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-jZobJlVFsLEwSeaJ"}]}],"custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"MY4f7e29e0-3232-4864-a613-cefc2a6076fd"},{"idx":"MYf4211b47-ac6d-4841-9e6b-f897690cd54c"}]},{"idx":"CodeTask-sTWWDBOZ5LYZpRwK","name":"VXC_W_UPCIndx in whole period UCPW","NodeDescription":"///t<br/>///s<br/>/*VXC_W. determine the upc index during running through followup for all the encounterd GPs during running through followup, <br/>&nbsp&nbsp&nbsp&nbspand the UCP of the whole period*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_W0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXB_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXB_F.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/><br/>/*VXC_W1, From vxb, get claims with running through followup, i.e., 365 days since to the index(entryDate) */<br/>data VXC_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in running through followup*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_W1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_W2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_W2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_W3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_W3a, determine the highest UPC index of each patient */<br/>data VXC_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_W3b, link the patient and highest UPC index back to VXC_W2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/><br/><br/><br/>/*VXC_W3b2, insert a step here to exclude patients who had only one UCP, and the UCP <br/>&nbsp&nbsp&nbsp&nbspcannot be found in the mobility file (the UCP does not have age/sex, ... info)<br/>*/<br/>/*VXC_W3b2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/><br/>/*VXC_W3b2a have a distinct list of doc from F3b (the physicians ever had encounters with cohort patients*/<br/>%distinct(data=VXC_W3b1, target=VXC_W3b2, vars=key_doc_num)&#59<br/>/*VXC_W3b1b keep records in which sex, age, ... is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXC_W3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_W3b1b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXC_W3b2b, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXC_W3b2c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXC_W3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_W3b2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXC_W3b2c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%freq(data=VXC_W3b2, table=Doc&docVar)&#59*/<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*the above results in a list of physicians with complete info of age, sex, grad year, and grad country*/<br/><br/>/*Link VXC_W3b2 to VXC_W3b1, select patients whose physician are in F3b2<br/>&nbsp&nbsp&nbsp&nbspIn F3b2, physicians are not missing for age, sex, grad year and grad country<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W3b1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upcindex desc) <br/>)&#59<br/><br/><br/><br/><br/><br/>/*VXC_W3c. determine the UCPW. In case of tie, getUCPW1,UCPW2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPWs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPW.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPW1, 2, etc<br/>*/<br/>data VXC_W3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsW N_visits = NMax_VisitsPerDocW UPCIndex=UPCIndexW&#59<br/>run&#59<br/>/*VXC_W3d. Now we can transpose the string in theStr into columsn of UCPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPW1, 1, \":\") is the key_doc_num of UCPW1, scan(UCPW1, 2, \"&#59\") is the n_visits of UCPW1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_W3c, target=VXC_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocW  T_VisitsW UPCIndexW  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPW1= scan(UCPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_W4. The docs in VXC_W3 are UCPWs, link them back to VXB_finalcohort(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPWs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPW2 ne '' then MultipleUCPWs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPWs)&#59*/<br/><br/>%exportvars(data=VXC_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-jZobJlVFsLEwSeaJ"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"MY4f7e29e0-3232-4864-a613-cefc2a6076fd"},{"idx":"MYf4211b47-ac6d-4841-9e6b-f897690cd54c"}]}]},{"idx":"MY80e5878f-6792-4cba-b4f7-e2b00c80c488","name":"Determine CMEP","custparents":[{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"}],"children":[{"idx":"CodeTask-1SpxtlXR8T5jchis","name":"VXD_F_CMEPF","NodeDescription":"///t<br/>///s<br/>/*VXD_F: determine the CMEPF during follow up*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_F0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_W.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_F1. From VXB, get encounter episodes indicated as CME during follow up */<br/>data VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_F2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_F2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/>/*VXD_F3. shall we keep only the CMEPF closer to the entry date? or any CMEPF during follow up<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPF. In case of tie, get CMEPF1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPFs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPF<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPF1, 2, etc<br/>*/<br/>data VXD_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPF1, 1, \":\") is the key_doc_num of CMEPF1, scan(CMEPF1, 2, \"&#59\") is the n_visits of CMEPF1, etc<br/>*/<br/>%transpose(data = VXD_F3a, target=VXD_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_F4. The docs in VXD_F3 are CMEPFs, link them back to VXC_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPF=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPF1 = '' then CMEPF=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPF)&#59*/<br/><br/>%exportvars(data=VXD_F)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-sTWWDBOZ5LYZpRwK"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"MY80e5878f-6792-4cba-b4f7-e2b00c80c488"}]},{"idx":"CodeTask-WOlheZQueJ48Okz7","name":"VXD_W_CMEPW","NodeDescription":"///t<br/>///s<br/>/*VXD_W: determine the CMEPW during runin through followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_W0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_W1. From VXB, get encounter episodes indicated as CME during runin through followup */<br/>data VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_W2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_W2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/><br/>/*VXD_W3. shall we keep only the CMEPW closer to the entry date? or any CMEPW during runin through followup<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPW. In case of tie, get CMEPW1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPWs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPW<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPW1, 2, etc<br/>*/<br/>data VXD_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPW1, 1, \":\") is the key_doc_num of CMEPW1, scan(CMEPW1, 2, \"&#59\") is the n_visits of CMEPW1, etc<br/>*/<br/>%transpose(data = VXD_W3a, target=VXD_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_W4. The docs in VXD_W3 are CMEPWs, link them back to VXD_F (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPW=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPW1 = '' then CMEPW=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPW)&#59*/<br/><br/>%exportvars(data=VXD_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-1SpxtlXR8T5jchis"},{"idx":"CodeTask-gbhiLx1DedOwRO4o"},{"idx":"MY80e5878f-6792-4cba-b4f7-e2b00c80c488"}]}]}],"custparents":[{"idx":"MY2aaaebb6-1112-4546-98b5-9391aaa39870"}]}],"NodeDescription":"<p>///t</p><p>t///</p><p><br></p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/Zx64NzzCr0k?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>"},{"idx":"MY169205e0-2aa4-40d5-a5bc-b75dd2b3f64f","name":"3. Determine Usual Prescriber (All med, statin)","custparents":[{"idx":"MY51f5187e-8719-4c28-807d-b6591ac8cf47"}],"children":[{"idx":"CodeTask-qfcAXJSXk3TTi6Wu","name":"VXE_StatinClaims in Followup","NodeDescription":"<p>///t</p><p>t///</p><p><br></p><p><br></p>","children":[{"idx":"CodeTask-j6dtk9XKc4xrGUMh","name":"VXF_FS USPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FS: USPF, usual statin prescriber*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_W.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FS1. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXE_F, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FS1, sorter=key_hsn descending RxIndexSF)&#59<br/><br/>/*VXF_FS2. For each patient, keep  the highest Rx index*/<br/>data VXF_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexSF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexSF&#59<br/>run&#59<br/><br/>/*VXF_FS3. Link the highest Rx index back to VXF_FS1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexSF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FS4. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FS4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexSF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocSF, put(RxIndexSF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FS5. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FS4, target=VXF_FS5, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocSF    TRxSF     RxIndexSF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=USPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of USPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_USPF1= scan(USPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FS6. The docs in VXF_FS5 are USPs, link them back to VXD_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FS)&#59<br/>%beep&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-qfcAXJSXk3TTi6Wu"},{"idx":"CodeTask-WOlheZQueJ48Okz7"}]}],"custparents":[{"idx":"MY169205e0-2aa4-40d5-a5bc-b75dd2b3f64f"}]},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL","name":"VXE_WW AllClaims","NodeDescription":"///t<br/>///s<br/>/*VXE_WW. the statin Rx of the final cohort members within followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXE_WW0. Prepare source data&#59*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXE_WW1 statin claims of the patients from runin through followup.*/<br/>/*VXE_WW1b. benefit statin claims from runin through followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit, <br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_WW1b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_WW1d. nonbenefit statin claims runin through followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit, <br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_WW1d,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_WW1e. combined to have claims from both sources, indicate those anonymous or slushcode doctors as unknown<br/>&nbsp&nbsp&nbsp&nbspthese docs are kept here as we'll still need the corresponding claims to identify the first prescriber<br/>*/<br/>data VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW1b VXE_WW1d&#59<br/>&nbsp&nbsp&nbsp&nbspif docslushcode ='Y' or key_prscr_num = '' or key_prscr_num = 'UNKNOWN0000' then <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num='unknown'&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocSlushCode<br/>run&#59<br/>%sort(data=VXE_WW, sorter=%str(key_hsn rx_ddddd key_prscr_num))&#59<br/>/*VXE_WW contains claims of all medications runin through followup<br/>&nbsp&nbsp&nbsp&nbspit includes those prescribed by slushcode docs or docs unknown (blank), such that the base (Total Rx) of RxIndex calculation will <br/>&nbsp&nbsp&nbsp&nbspbe complete.<br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXE_WW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXE_WW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXE_WW)&#59<br/><br/>%beep&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-j6dtk9XKc4xrGUMh"},{"idx":"MY169205e0-2aa4-40d5-a5bc-b75dd2b3f64f"}],"children":[{"idx":"CodeTask-QcJtnJf6FAp2OE7D","name":"VXF_FW UWPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FW: UWPF, usual prescriber of all (whole) medications with follow up*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_FW1. all medication claims within follow up*/<br/>data VXF_FW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_FW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FW2, sorter=key_hsn descending RxIndexWF)&#59<br/><br/>/*VXF_FW3. For each patient, keep  the highest Rx index*/<br/>data VXF_FW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWF&#59<br/>run&#59<br/><br/>/*VXF_FW4. Link the highest Rx index back to VXF_FW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWF, put(RxIndexWF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FW5, target=VXF_FW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWF    TRxWF     RxIndexWF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPF1= scan(UWPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FW7. The docs in VXF_FW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-j6dtk9XKc4xrGUMh"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"}]},{"idx":"CodeTask-4fxB3KstnXLlVbvv","name":"VXF_WW UWPW in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_WW: UWPW, usual prescriber of all (whole) medications from runin through followup*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_WW0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FW.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_WW1. all medication claims from runin through followup*/<br/>data VXF_WW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate - &RunInDays and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_WW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_WW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_WW2, sorter=key_hsn descending RxIndexWW)&#59<br/><br/>/*VXF_WW3. For each patient, keep  the highest Rx index*/<br/>data VXF_WW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWW&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWW&#59<br/>run&#59<br/><br/>/*VXF_WW4. Link the highest Rx index back to VXF_WW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWW,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_WW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_WW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWW 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWW, put(RxIndexWW, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_WW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/><br/>%transpose(data = VXF_WW5, target=VXF_WW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWW    TRxWW     RxIndexWW ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPW1= scan(UWPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_WW7. The docs in VXF_WW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_WW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_WW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_WW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_WW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-QcJtnJf6FAp2OE7D"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"},{"idx":"CodeTask-Wbu1Aj8u8JEC2ijL"}]}]}],"NodeDescription":"<p>///t</p><p>t///</p><p><br></p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/pFJJ5JvvWkc?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>"},{"idx":"MYcfb6644e-98c3-4a56-8526-6dafb497f151","name":"4. Determine CompCOC","custparents":[{"idx":"MY51f5187e-8719-4c28-807d-b6591ac8cf47"}],"children":[{"idx":"CodeTask-boFlAYB8FDL9uTfe","name":"VXG_CompSF CompWF CompWW","NodeDescription":"///t<br/>///s<br/>/*VXG. Comprehensive continuity of care by three definitions:<br/>&nbsp&nbsp&nbsp&nbsp1. COMPFS: Same UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp2. COMPFW: Same UCPF, UWPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp3. COMPWW: Same UCPW, UWPW, and CMEPW <br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXG0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXG1. Determine COMPFS: Same UCPF, USPF, and CMEPF*/<br/>/*VXG1a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} USPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG1b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG1c. determine the COMPFS term (whether or not having the same physician as UCPF, USPF, and CMEPF*/<br/>data VXG1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFS&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFS=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG1, table=COMPFS)&#59<br/><br/><br/>/*VXG2. Determine COMPFW: Same UCPF, UWPF, and CMEPF*/<br/>/*VXG2a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG2b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG2b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG2c. determine the COMPFW term*/<br/>data VXG2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG2, table=COMPFW)&#59<br/><br/><br/><br/>/*VXG3. Determine COMPWW: Same UCPW, UWPW, and CMEPW*/<br/>/*VXG3a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPW:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG3b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG3b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG3c. determine the COMPWW term*/<br/>data VXG3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPWW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPWW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPWW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPWW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG3, table=COMPWW)&#59<br/><br/>/*VXG4. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as CompFS_Pattern, t2.COMPFS),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG5. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG4,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPFW_Pattern, t2.COMPFW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG6. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPWW_Pattern, t2.COMPWW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXG.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXG.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXG)&#59<br/><br/>%Beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"MYab6e9219-77c8-4bed-99ab-4a1231e334fe","name":"Report tables 3-5","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"}],"children":[{"idx":"CodeTask-xunor4HZ3iMlurIc","name":"VXG_RT3A (FS) Table3a","NodeDescription":"///t<br/>///s<br/>/*VXG_RT3a_ Report of Table 3a (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'Total' as Role,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as NPatients<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UCPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('USPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(USPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('CMEPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(CMEPF1 ne '')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('COMPFS' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(COMPFS =1)<br/>)&#59<br/><br/>data localt.VXG_RT3A&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT3a_1-VXG_RT3a_5&#59<br/>run&#59<br/><br/><br/>proc export data=localt.VXG_RT3A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T3a. NPatient_Role_CompFS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"MYab6e9219-77c8-4bed-99ab-4a1231e334fe"}]},{"idx":"CodeTask-LSTlxgtkyO3jcjDh","name":"VXG_RT4a (FS) Table4A","NodeDescription":"///t<br/>///s<br/>/*VXG_RT4A_ Report of Table 4A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/><br/>%freq(data=VXG, table=COMPFS_Pattern, order=freq, option=%str(out=localt.VXG_RT4A))&#59<br/><br/>proc export data=localt.VXG_RT4A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T4a. NPatient_COMPFS_Pattern\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"MYab6e9219-77c8-4bed-99ab-4a1231e334fe"},{"idx":"MYab6e9219-77c8-4bed-99ab-4a1231e334fe"}]},{"idx":"CodeTask-KP6Q8ma7PkFEnf8g","name":"To do Make table 5","NodeDescription":"///t<br/>///s<br/>/*to make table 5*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"MYab6e9219-77c8-4bed-99ab-4a1231e334fe"}]}]}],"custparents":[{"idx":"CodeTask-4fxB3KstnXLlVbvv"},{"idx":"MYcfb6644e-98c3-4a56-8526-6dafb497f151"}]}]}]},{"idx":"MYe0553785-139d-41c3-bde8-dab4c0e9819f","name":"Analyses","custparents":[{"idx":"MYfd08efa7-d2a0-4b59-b9d5-ea9d49b40487"}],"children":[{"idx":"MYfb563fa9-0400-4365-a43d-9833e677d893","name":"Obj1a. Determinants of UPC index","custparents":[{"idx":"MYe0553785-139d-41c3-bde8-dab4c0e9819f"}],"NodeDescription":"<p>///t</p><p>t///</p><p><br></p><p>Many factors of adherence may affect UPC index</p>","children":[{"idx":"MYd1466b07-9ce9-4102-be6b-6f55caa0e475","name":"Covariates","custparents":[{"idx":"MYfb563fa9-0400-4365-a43d-9833e677d893"}],"children":[{"idx":"CodeTask-cEu9SJeuduGAkyLp","name":"VXI Patient Covariates","NodeDescription":"///t<br/>///s<br/>/*VXI, Patient Covariates*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXH_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXH_FS.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_ed_a2012.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_ed_a2012.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_verif_mort.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_verif_mort.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/><br/>%put >>> &theChronicConditionDataPath&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&theChronicConditionDataPath.\\&theChronicConditionData..zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theChronicConditionData..sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*# med (excluding the study medication)*/<br/>/***5* # DINs within 365 days prior to entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI5c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI5a VXI5b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI5d, target=VXI5e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXH_FS*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Pre365 = ., 0, t2.NDINS_Pre365) as NDINS_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>/***6* # DINs within 365 days since entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI6c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI6a VXI6b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI6d, target=VXI6e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXI5*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Post365 = ., 0, t2.NDINS_Post365) as NDINS_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*VXI7 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate-365 and t1.dschg_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI6*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Pre365=., 0, t2.NHosp_Pre365) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI8 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI7*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Post365=., 0, t2.NHosp_Post365) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI 9, # days/nights in hospital within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%getHDay_Nights(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHospFile=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPtFile=VXI8, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdStart=&dataStartdate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdEnd=&dataEnddate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindexCol=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortGroup=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptargetFile=VXI9a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspperiodStart=EntryDate - 365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeriodEnd=EntryDate - 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstep=2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata VXI9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename PtHNights = HNights_Pre365 PtHDays = HDays_Pre365&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI10, # days/nights in hospital within 365 days since entry*/<br/>&nbsp&nbsp&nbsp&nbsp%getHDay_Nights(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHospFile=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPtFile=VXI9, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdStart=&dataStartdate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdEnd=&dataEnddate&#59, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindexCol=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortGroup=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptargetFile=VXI10a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspperiodStart=EntryDate , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPeriodEnd=EntryDate + 365 - 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstep=2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata VXI10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename PtHNights = HNights_Post365 PtHDays = HDays_Post365&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>/*11. Doc (GP/SP) visits within 1 years prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate-1 and t2.entryDate - &runinDays)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b1, target=VXI11c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b2, target=VXI11c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI10*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Pre365=., 0, t2.NVisits_GP_Pre365) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Pre365=., 0, t2.NVisits_SP_Pre365) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*12. Doc (GP/SP) visits within 1 years since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate and t2.entryDate + &followDays-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b1, target=VXI12c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b2, target=VXI12c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI11*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Post365=., 0, t2.NVisits_GP_Post365) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Post365=., 0, t2.NVisits_SP_Post365) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*13. ER visits within a year prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate- &runinDays and t1.disp_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI12*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Pre365=., 0, t2.NVisits_ER_Pre365) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*14. ER visits within a year since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate and t1.disp_date > t2.entryDate+&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI13*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Post365=., 0, t2.NVisits_ER_Post365) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI15 the % paid by patient or 3rd party insurer of all drugs within 365 days prior to entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 prior to entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI15a, get drug claims within 365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runindays and t2.entryDate -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runinDays and t2.entryDate -1)<br/>)&#59<br/><br/>data VXI15a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15a1 VXI15a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI15c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI15c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI15c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI15d<br/>)&#59<br/>/*%freq(data=VXI15D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI15Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI15d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI14 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI14,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ThirdPartyPay as ThirdPartyPay_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI16 the % paid by patient or 3rd party insurer of all drugs within 365 days since entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 since entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI16a, get drug claims within 365 days since entry*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>data VXI16a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16a1 VXI16a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI16c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI16c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI16c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI16d<br/>)&#59<br/>/*%freq(data=VXI16D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI16Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI16d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI15 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ThirdPartyPay as ThirdPartyPay_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI 17, receiving PIM drugs within 365 days prior (exclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI16, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI17a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI17a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI17a1 VXI17a2&#59<br/>run&#59<br/><br/><br/>/*VXI17b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate -365 <= rx_ddddd < entryDate)<br/>)&#59<br/><br/>/*transpose VXI17B, so as to have indicates for each class*/<br/>%transpose(data=VXI17B, target=VXI17c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicatorsto VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/><br/>/*VXI 18, receiving PIM drugs within 365 days since (inclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI17, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI18a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI18a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI18a1 VXI18a2&#59<br/>run&#59<br/><br/><br/>/*VXI18b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate  <= rx_ddddd < entryDate +&followdays)<br/>)&#59<br/><br/>/*transpose VXI18B, so as to have indicates for each class*/<br/>%transpose(data=VXI18B, target=VXI18c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicatorsto VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*19. CAMH*/<br/>%get_CAMH( Data_Hosp=master_hosp, Data_msb=master_msb, Data_ed=master_ed_a2012, <br/>&nbsp&nbsp&nbsp&nbspstartDate=&dataStartDate, endDate=&DataEndDate, debug=1, dxDateCol=, target=VXI19a<br/>) &#59<br/>%print(data=VXI19a)&#59<br/>/*from the above, transpose and put the type of CAMH in one row for each patient*/<br/>%transpose(data=VXI19a, target=VXI19b, rowhead=key_hsn, colhead=camh_cat, contents=dxdate)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI18,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI19b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI19c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.npd as CAMH_NPD_Date, t2.SA as CAMH_SA_Date,t2.PSY as CAMH_PSY_Date), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI19&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI19c&#59<br/>&nbsp&nbsp&nbsp&nbsparray cAMHdates{3} CAMH_NPD_Date CAMH_SA_Date CAMH_PSY_Date&#59<br/>&nbsp&nbsp&nbsp&nbsparray CAMHPre_{3} &#59<br/>&nbsp&nbsp&nbsp&nbsparray camhPost_{3} &#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if there is no camh date, both pre and post are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) =. then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is before the entrydate, both pre and post are positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) < entryDate then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is within the follow up period, the pre is negative, the post positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif entryDate <= cAMHdates(i) < entryDate + 365 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is after the follow up period, both are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_1 = CAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_2 = CAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_3 = CAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_1 = CAMH_NPD_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_2 = CAMH_SA_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_3 = CAMH_PSY_Post365<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*20 Charlson score*/<br/>/*for charlson score calculation, the following macro 'VarExist.sas' will be required.<br/>&nbsp&nbsp&nbsp&nbspHowever, it has conflict with the macro 'VarExist.sas' in MyMacros.sas.<br/>&nbsp&nbsp&nbsp&nbspAfter Calculating Charlson score, remember to reload MyMacros so as to load the same-name macro in MyMacros<br/>*/<br/>%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59<br/>%Charlson_Elixhauser_Score_local(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson=Y, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elixhauser=N, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_start_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_end_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hosp_file=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_file=master_msb, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hsn_file=VXI19, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ref_date_var=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson_var_out=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elix_postfix=elix_,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp additionalByVar=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ds_out=VXI20,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp days_lookback=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp debug=N<br/>)&#59<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/><br/><br/>/*mortality*/<br/>%print(data=master_verif_mort)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI20,<br/>&nbsp&nbsp&nbsp&nbspt2=master_verif_mort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI21a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ddt_novit as MortDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI21&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI21a&#59<br/>&nbsp&nbsp&nbsp&nbspDeath_Pre365 =0&#59Death_Post365 =0&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and MortDate < EntryDate then Death_Pre365=1&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and EntryDate <= MortDate < EntryDate + &followdays then Death_Post365=1&#59<br/>Run&#59<br/>%freq(data=VXI21, table = Death_Pre365)&#59<br/>%freq(data=VXI21, table = Death_Post365)&#59<br/><br/>/*22. lost of coverage during follow up */<br/>%getCoverGAPs(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprawfile=master_phrs_cov, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspptFile=VXI21, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheCovXtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstart=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend= %str(EntryDate+&followdays-1), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI22a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortgroup=, <br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>/*from above, get those with coverage gaps*/<br/>data VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn EntryDate start<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverstart<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverEnd<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverPCT<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgaps<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgapPCT<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspif gaps ne . and gaps > 0&#59<br/>run&#59<br/>/*make a distinct list from above*/<br/>%sort(data=VXI22b, sorter = key_hsn entryDate coverstart coverend)&#59<br/>data VXI22c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn entryDate coverstart coverend&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>run&#59<br/><br/>/*link back to VXI21, if the patient appears in VXI22C, indicate as lost of coverage in post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI21,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI22C,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI22,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as LostCov_Post365, t2.coverstart as Date_LostCov ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*23. LTC stay*/<br/>/*from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*concatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXI23a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXI23b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=1<br/>)&#59<br/>%distinct(data=VXI23b, target=VXI23c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate and dschg_date > entryDate +&followdays-1<br/>))&#59<br/><br/>/*Link to VSZ22, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI23c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay_Post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*24. Chronic Conditions (CCSDD definition) within 365 days prior to entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI24a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate -&runindays and t2.dzEndDate > t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>data VXI24b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Pre365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/>%transpose(data=VXI24b, target=VXI24c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/>/*link the above back to VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI24c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI24d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI24&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_pre365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*25. Chronic Conditions (CCSDD definition) within 365 days prior to entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI25a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate  and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate and t2.dzEndDate > t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>data VXI25b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Post365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/>%transpose(data=VXI25b, target=VXI25c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/>/*link the above back to VXI24*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI25d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI25&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_post365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*26. pregnancy<br/>pregnancy (UltraSound Project, too complicated. eventually using the CCDSS case definition, which is used for exclusion in definition of CCDSS chronic conditions)<br/>the code of pregancy was from the file A12_CoMorb_ICDDX in the ChronicPop's remoteS folder<br/><br/>('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', '655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', '673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', 'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', 'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', 'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', 'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', 'O94', 'O95', 'O98', 'O99', 'Z37')<br/>*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/><br/>/*hospital*/<br/>data VXI26a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>data VXI26b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>data VXI26c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI26a VXI26b&#59<br/>run&#59<br/>/*link to VXI25, indicate those having preg during pre365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_pre365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate-&runindays and t1.dschg_date > t2.entryDate -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link to VXI25, indicate those having preg during post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_post365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + &followdays -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link back to VXI25*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI25,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_pre365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%freq(data=VXI26, table=preg_pre365*preg_post365)&#59<br/><br/><br/>/*VXI27<br/>to count # of prescribers<br/>of AHTN OH Statin medications<br/>1) within 1 year prior to entryDate<br/>2) within 1 year during follow up<br/>*/<br/><br/>/*claims of STATIN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of antiHTN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of oh*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*distinct records of statins*/<br/>data VXI27b1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a1 VXI27a2&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='statin'&#59<br/>run&#59<br/>%distinct(data=VXI27b1, target=VXI27b2, vars=*)&#59<br/><br/>data VXI27b3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a3 VXI27a4&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='ahtn'&#59<br/>run&#59<br/>%distinct(data=VXI27b3, target=VXI27b4, vars=*)&#59<br/><br/>data VXI27b5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a5 VXI27a6&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='oh'&#59<br/>run&#59<br/>%distinct(data=VXI27b5, target=VXI27b6, vars=*)&#59<br/><br/>/*put all records together*/<br/>data VXI27C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27b2 VXI27B4 VXI27B6&#59<br/>run&#59<br/><br/>/*link to VXI26 to select records within look back*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'pre365' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate -365 and t2.entryDate -1)<br/>)&#59<br/><br/>/*link to VXI26 to select records within follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'follow' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate+&followdays-1)<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E1a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E1a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Pre365_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E2a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Pre365_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in follow up*/<br/>%distinct(data=VXI27D2, target=VXI27E3a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Followup_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D2, target=VXI27E4a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E4a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Followup_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*link to VXI26 to have the vars*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_Prscr_statinAHTNOH=., 0, Pre365_Prscr_statinAHTNOH) as Pre365_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_MedClass_statinAHTNOH=., 0, Pre365_MedClass_statinAHTNOH) as Pre365_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_Prscr_statinAHTNOH=., 0, Followup_Prscr_statinAHTNOH) as Followup_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_MedClass_statinAHTNOH=., 0, Followup_MedClass_statinAHTNOH) as Followup_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>data VXI&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXI.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXI.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXI)&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-LLZkM6Opd8YxnRP1","name":"Q VXI same Macro VarExist","NodeDescription":"///t<br/>///s<br/>/*<br/>The charlson score need a HQC macro 'VarExist.sas', which is of the same name as another macro in MyMacros.sas<br/>These two macros have conflict.<br/>After running charlson score, reload MyMacros.sas to overwrite that HQC macro<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-cEu9SJeuduGAkyLp"}]}],"custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"MYd1466b07-9ce9-4102-be6b-6f55caa0e475"}]},{"idx":"CodeTask-RO6JSuJAejHUZYEn","name":"VXJ_A Physician Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_A Physician Covariates<br/>Note: this part is only for attributes of UCPF1 and UCPW1 (the first usual care provider in follow up or from runin through followup<br/><br/>Doctor panel size<br/>Doctor workload<br/><br/>Fee for service or NFFS<br/>Familarity with statin (% of statin Rx in all Rx)<br/><br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXJ_A0. Preparing Source Data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXI.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXI.sas7bdat)<br/>)&#59<br/>/*from the doc mobile file, get the spec of these docs from the doc info file*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_A1. For physicians in VXI, get doc sex age education, spec from VXJ_A1*/<br/>/*VXJ_A1a. From VXI, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_A1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_A21b. keep the distinct record of doc ids, as the doc properties are not time-specific*/<br/>%distinct(data=VXJ_A1a, target=VXJ_A1, vars=key_doc_num)&#59<br/><br/><br/>/*VXJ_A2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/>/*VXJ_A2a keep records in which sex is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXJ_A2a, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXJ_A2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_A2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%freq(data=VXJ_A1, table=Doc&docVar)&#59<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*clean up the sex category, there were funny values like D, J, etc.*/<br/><br/>/*VXJ_A3. Link the cleaned properties to distinct docs appeared in the cohort*/<br/>data VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A1&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex='F')) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSexN=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex))='M' then DocSexN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse DocSexN=-1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>/*the grad_geo see the file \"PHMB_File_Descptn.xls\", a link can be found at quincy desktop, file saved in U<br/>&nbsp&nbsp&nbsp&nbspand mailed to SHY516 on Jan 31, 2019*/<br/>data VXJ_A3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbsplength DocGrad_Country $10.&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGRAD_GEO_COUNTRY=\"\" then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode=.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=.&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*GRAD_GEO_COUNTRY = \"1\" to \"19\" are CANADA grads, the rest are foreign grads*/<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode = input(strip(DocGRAD_GEO_COUNTRY), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif  DocGradCountryCode <= 19 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"CANADA\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country = \"FOREIGN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocGRAD_GEO_COUNTRY&#59<br/>&nbsp&nbsp&nbsp&nbsplength docAttrs $20.&#59<br/>&nbsp&nbsp&nbsp&nbspdocAttrs = strip(docSex) || \":\" || strip(DocBirth_Year) || \":\" || strip(DocGrad_Year) || \":\" || <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrip(DocGradCountryCode) || \":\" || strip(DocGrad_CountryN)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%freq(data=VXJ_A3, table=DocGrad_Country)&#59<br/><br/><br/><br/>/*VXJ_A4, link the properties to docs in the cohort VXI. For UCPF1, add the properties into the file*/<br/>data VXJ_A4a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A4a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A4b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1 =strip(UCPF1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/>/*VXJ_A5, repeat VXJ_A4, this time, for UCPW1, add the properties into the file*/<br/>data VXJ_A5a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A5a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A5b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A5b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1 =strip(UCPW1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXJ_A.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_A.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>%exportvars(data=VXJ_A)&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-cEu9SJeuduGAkyLp"},{"idx":"MYd1466b07-9ce9-4102-be6b-6f55caa0e475"}]},{"idx":"CodeTask-U7plDj8VHBhFWJGm","name":"VXJ_B DOC_MSB_ATTRs","NodeDescription":"///t<br/>///s<br/>/*VXJ_B, Get MSB claims of GPs in VXJ_A, <br/>count % of claims as FFS/NFFS in the specified period (1 years prior and 1 year after the EntryDate) <br/>Note, the FFS/NFFS is based all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients, but within the 2 year period around the entry dates. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2012-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2011-1-1 and 2013-12-31.<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VXJ_B0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_A.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_A.sas7bdat)<br/>)&#59<br/>/*the MSB data is too big, only do it for once.*/<br/>%macro prepareMSBData&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the original file is too big, make distinct records and make it smaller<br/>&nbsp&nbsp&nbsp&nbspThis time, claims of all spec will be kept. */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=localt.VXJ_B0a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsnc, key_doc_numc, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsnc, key_doc_numc,  dos, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*claims of the same patient-doc-date should be treated as a unique encounter. In the above, it could be that<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe same patient-doc-date could appear twice, each for a different paymode. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn that case, keep the same patient-doc-date records of the FFS type. The reason is that at least part of such claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwere indicated as FFS mode*/<br/>&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_hsnc key_doc_numc dos paymode&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.dos&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*zip the file VXJ_B0, and delete the unzipped file (it is too large)*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B0.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B0.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=&localTargetPath<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend prepareMSBData&#59<br/>/*%prepareMSBData&#59*/<br/><br/><br/><br/>/*VXJ_B1. Get UCPF1 and UCPW1 from VXJ_A. These doctors are specific by patient and entrydate*/<br/>/*VXJ_B1a. From VXJ_A, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_B1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_B1b. keep the distinct record of period-specific doc ids*/<br/>%distinct(data=VXJ_B1a, target=VXJ_B1b, vars=%str(entryDate, key_doc_num))&#59<br/><br/>/*map the key_doc_num and key_doc_numc*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>/*VXJ_B2. From above, select claims of the docs between entrydate -365 and entrydate +364*/<br/>/*VXJ_B2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>&nbsp&nbsp&nbsp&nbspThere are millions of MSB claims, and there are 60K doc records (by specific entrydate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe intermediate temp data will be huge if run by a single SQL query.<br/>&nbsp&nbsp&nbsp&nbspThe following is to bring the MSB records by quarter and aggregate the results. <br/>*/<br/>%macro makeVXJ_B2b3&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B0.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B0.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the doc and period specific claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowing are the requirements:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. count the N_encounters by physician, period, and payMode (i.e., grouped by entryDate, doc id , and paymode, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand count # encounters)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. count the # of patients by physician and  period (i.e., grouped by entryDate, doc id,  count the # of distinct patients)<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTo save time, we'll put the 2 requirements into one omnibus.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) aggregate the # encounters per physician-payMode-entrydate-patient (Note that the patient here refers to<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspall patients, not only the cohort members) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_num, t1.PayMode, count(t1.key_hsnc) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t2.entryDate, t2.key_doc_num, t1.PayMode),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*  b) have a distinct list of physician-period-patient (i.e., doc id - entrydate - patientid)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_numc, t1.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXJ_B3b. count the # of distinct patients for each physician with a specific entry period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_numc, count(key_hsnc) as N_Pt),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_numc)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.N_Pt, t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the following will overwirte the existing zip! be careful*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B2a.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B2a.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B3b.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B3b.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>%mend makeVXJ_B2b3&#59<br/>%makeVXJ_B2b3&#59<br/><br/>/*For # of visits by paymode, and # of patients by period-specific physicians, the data has been prepared for once, unzip the prepared data */<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B2a.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B2a.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B3b.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B3b.sas7bdat)<br/>)&#59<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=VXJ_B2a, target=VXJ_B4, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in VXJ_B has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data VXJ_B5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B4&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/>/*%freq(data=VXJ_B5, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*VXJ_B6. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>/*VXJ_B6a. For each period-specific physician, get paytype, visits, and patients from B5 and B3b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B6a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.payType,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(t1.NFFS, t1.FFS) as N_Visits,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_Pt as N_Patients<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=entryDate key_doc_num<br/>)&#59<br/>data VXJ_B6b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Visits=. then N_Visits=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients=. then N_Patients=0&#59<br/>run&#59<br/>/*VXJ_BJ6b. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>data VXJ_B6&#59<br/>&nbsp&nbsp&nbsp&nbsplength MSBAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspMSBAttrStr = strip(paytype) || \":\" || strip(N_Visits)  || \":\" || strip(N_Patients)&#59<br/>run&#59 <br/><br/><br/>/*VXJ_B7.  link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>/*VXJ_B7a. Get the docid for UCPF1 */<br/>data VXJ_B7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B7b. link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B7c. Append MSBAttrStr to UCPF1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/>/*VXJ_B8.  link VXJ_B8a and VXJ_B7 to indicate the MSB related attributes for UCPW1*/<br/>/*VXJ_B8a. Get the docid for UCPW1*/<br/>data VXJ_B8a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B8b. link VXJ_B8a and VXJ_B6 (with MSB related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B8a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B8c. Append MSBAttrStr to UCPW1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPW1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_B)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-RO6JSuJAejHUZYEn"},{"idx":"MYd1466b07-9ce9-4102-be6b-6f55caa0e475"}]},{"idx":"CodeTask-QdgwMbLyrBc2zchU","name":"VXJ_C DOC_Rx_Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_C <br/>&nbsp&nbsp&nbsp&nbspRx related attributes of each period-related physician. <br/>&nbsp&nbsp&nbsp&nbsp1. # of Rx from runin throught follow up<br/>&nbsp&nbsp&nbsp&nbsp2. # of Statin out of all Rx<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%let localDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\data&#59<br/>%let localTargetPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname localt \"&localTargetPath\"&#59<br/>libname locald \"&localDataPath\"&#59<br/><br/>/*VXJ_C0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop_slim.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_C1. Get UCPF1 and UCPW1 from VXJ_B. These doctors are specific by patient and entrydate*/<br/>/*VXJ_C1a. From VXJ_C, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_C1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_C1b. keep the distinct record of period specific doc ids*/<br/>%distinct(data=VXJ_C1a, target=VXJ_C1b, vars=%str(entryDate, key_doc_num))&#59<br/>/*VXJ_C1c. add the char id: key_doc_numc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc)<br/>)&#59<br/><br/><br/>/*VXJ_C2. Sum by prescriber, and date, count Rx of all medications*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*VXJ_C2a. Sum by prescriber, and date, count Rx of all medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C2b. Sum by prescriber, and date, count Rx of all medications from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C2c. combine C2a and C2b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C2c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C2a VXJ_C2b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C2C,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_AllMed) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C3. Sum by prescriber, and date, count Rx of statin medications*/<br/>/*VXJ_C3a0. As the claim files contains DINStr, not DIN, need an additional step to map  the statin dins to dinstrs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dinstr)<br/>)&#59<br/>/*VXJ_C3a. Sum by prescriber, and date, count Rx of statin medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3a,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C3b. Sum by prescriber, and date, count Rx of statin from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3b,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*combine C3a and C3b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C3a VXJ_C3b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C3c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C4. Combine C2 and C3. The result data contains # of Rx of all medicine and # of Rx of statin by prescriber's id, and by dispensation date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C4,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=Rx_DDDDD key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_Statin=., 0, t2.N_Rx_Statin) as N_Rx_Statin)<br/>)&#59<br/><br/>/*VXJ_C5. Link C4 to  VXJ_C1, for each period(entrydate) specific doc, sum the # of Rx of all medications, and # of Rx of statin<br/>&nbsp&nbsp&nbsp&nbspfrom runin through followup.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C5,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, sum(t2.N_Rx_AllMed) as N_Rx_AllMed, sum(t2.N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/>/*VXJ_C6. Make a string to hold Rx related attributes, i.e., N_Rx_AllMed:N_Rx_Statin*/<br/>data VXJ_C6&#59<br/>&nbsp&nbsp&nbsp&nbsplength RxAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C5&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_AllMed=. then N_Rx_AllMed=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_Statin=. then N_Rx_Statin=0&#59<br/>&nbsp&nbsp&nbsp&nbspRxAttrStr = strip(N_Rx_AllMed) || \":\" || strip(N_Rx_Statin) &#59<br/>run&#59 <br/><br/>/*VXJ_C7.  link VXJ_C6 and VXJ_B to indicate the Rx related attributes for UCPF1*/<br/>/*VXJ_C7a. Get the docid of UCPF1 */<br/>data VXJ_C7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/>/*VXJ_C7b. link VXJ_C7a and VXJ_C6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*VXJ_C7c. Append RxAttrStr to UCPF1*/<br/>Data VXJ_C7&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/>/*VXJ_C8.  link VXJ_C6 and VXJ_C7 to indicate the Rx related attributes for UCPW1*/<br/>/*VXJ_C8a. Get the docid for UCPW1*/<br/>data VXJ_C8a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/>/*VXJ_C8b. link VXJ_C8a and VXJ_C6 (with Rx related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C8a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*VXJ_C8c. Append RxAttrStr to UCPW1*/<br/>Data VXJ_C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_C.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_C.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_C)&#59<br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-U7plDj8VHBhFWJGm"},{"idx":"MYd1466b07-9ce9-4102-be6b-6f55caa0e475"}]}]},{"idx":"MY2dfff4cd-db62-416d-bfd8-520da1cad9f6","name":"Statistical modeling","custparents":[{"idx":"MYfb563fa9-0400-4365-a43d-9833e677d893"}],"children":[{"idx":"CodeTask-gKhBppYTrBDMcRqC","name":"VXK_FS UCPIndexF predictors Poisson","NodeDescription":"///t<br/>///s<br/>/*localt.VXK_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>data VXK_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/>/*Univariate models betwen VXK_FS1 and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/><br/>/*create an empty set to hold results*/<br/>data localt.VXK_FS&#59 length Level1 $50. parameter $50.&#59  delete&#59run&#59<br/>%macro UniPoission(data=, n_events=, n_total=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar n_events n_total classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=negbin&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoffset = log(&n_total/100)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=negbin type3 offset= offset &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp/*get lower waldCI of dispersion*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif parameter = 'Dispersion'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheSign=-1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*round the WaldCL, it is meaning less if it is close to 0*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLowerWaldCL=round(LowerWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUpperWaldCL=round(UpperWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif LowerWaldCL * UpperWaldCL > 0 then theSign=1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('DispersionWaldCLSign', theSign)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> DispersionWaldCLSign = &DispersionWaldCLSign&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, it must be that LowerWaldCL and  UpperLowerWaldCL are of the opposite sign, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., their production is of a negative Sign. In that case, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&DispersionWaldCLSign = -1) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let model = poisson&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=poisson type3 scale = pearson  offset= offset&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniPoission_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength parameter $50.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniPoission_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniPoission&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=sex_Desc, classref=%str('M'), target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=age, classref=, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=qaippe, classref=%str('1'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=resiType, classref=%str('URBAN'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=COMPFS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Pre365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Post365, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Charlson_Index, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NS_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANXP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CD_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NONRA, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NS_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANXP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CD_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NONRA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>/*docrelated*/<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docSexN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docAge_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docServiceYr_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docEdCountry_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docPayTypeN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docN_Visits_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docNPatients_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docStatinRxPCT_FS, target=localt.VXK_FS)&#59<br/><br/>%exportvars(data=localt.VXK_FS)&#59<br/>/*proc export data=localt.VXK_FS*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivPoisson\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>%beep&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"},{"idx":"MY2dfff4cd-db62-416d-bfd8-520da1cad9f6"}],"children":[{"idx":"MYdb38865f-c06b-476a-ae29-83897098d0c0","name":"Q Is Poission model correct","custparents":[{"idx":"CodeTask-gKhBppYTrBDMcRqC"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[to do]</p><p>Make distrubitions (normal poisson, etc) using SAS function rand()</p><p><a href=\"http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a001466748.htm\" target=\"_blank\">http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a001466748.htm</a></p><p><br></p>"}]},{"idx":"CodeTask-ajLAZfjc4WWWL5BX","name":"VXL_FS UCPIndexF predictors -Logistic","NodeDescription":"///t<br/>///s<br/>/*localt.VXL_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXL_FS1.sas7bdat)<br/>)&#59<br/><br/>/*Univariate models betwen VXJ_C and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/>/*Add doc related covariates*/<br/><br/>data VXL_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/><br/>/*create an empty set to hold results*/<br/>data localt.VXL_FS&#59 length Level1 $50. parameter $50. outcomeVar $50. CutOffVar $50.&#59  delete&#59run&#59<br/>%macro UniLogistic(data=, Outcome=, CutOffVar=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar Outcome CutOffVar classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=logistic&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOutcome=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &Outcome >= &CutOffVar  then Outcome =1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniLogistic_tmp0 desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel Outcome = &theVar /dist=bin link=logit type3  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniLogistic_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniLogistic_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniLogistic_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutcomeVar = upcase(strip(symget('Outcome')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcutoffVar = upcase(strip(symget('cutoffVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniLogistic_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniLogistic&#59<br/><br/>%macro UniLogistic_batchVars(OutcomeVar =,  cutoffVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local outcomeVar cutoffvar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=sex_Desc, classref=%str('M'), target=localt.VXL_FS, debug=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=age, classref=, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=qaippe, classref=%str('1'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=resiType, classref=%str('URBAN'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=COMPFS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Pre365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Post365, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Charlson_Index, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NS_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANXP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CD_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NONRA, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NS_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANXP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CD_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NONRA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>/**Docrelated*/<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docSexN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docAge_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docServiceYr_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docEdCountry_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docPayTypeN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docN_Visits_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docNPatients_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docStatinRxPCT_FS, target=localt.VXL_FS)&#59<br/><br/>%mend UniLogistic_batchVars&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP75)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP50)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP25)&#59<br/><br/>%exportvars(data=localt.VXL_FS)&#59<br/>/**/<br/>/*proc export data=localt.VXL_FS*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivLogistic\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>%beep&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-nmtB9v4FbQr1tLX3","name":"! VXK_FS MultiV","NodeDescription":"///t<br/>///s<br/>/*VXLR/KR multivariate analysis about UPC index? Repeat!*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-ajLAZfjc4WWWL5BX"},{"idx":"CodeTask-gKhBppYTrBDMcRqC"}]}],"custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"},{"idx":"MY2dfff4cd-db62-416d-bfd8-520da1cad9f6"}]}]}]},{"idx":"MY930ab0d2-192b-4d75-a7f7-e5939c01895a","name":"Obj1b. UPC Index not cover # visits, USP, and CMEP","custparents":[{"idx":"MYe0553785-139d-41c3-bde8-dab4c0e9819f"}],"NodeDescription":"<p>///t</p><p>t///</p><p>///h</p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>UPC index does not reflect # of visits (i.e., patients could have a high UPC index, yet the # of visits is low (1b1)</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>High UPC index does not predict USP or CMEP. (i.e., patients could have a high UPC index, yet it does not suggest that the patient has the same doc as USP, or CMEP, or COMPCOC)</li></ol><p>h///</p>","children":[{"idx":"CodeTask-IWAU2bsojMFEwy3C","name":"VXH_FS Same Doc (comp coc)","NodeDescription":"///t<br/>///s<br/>/*VXH_FS. UCPF = USPF, UCPF=CMEPF*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXH_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/>%print(data=VXG)&#59<br/><br/><br/>/*VXH_FS1. indicate whether UCPF is the same doc as USPF, or CMEPF*/<br/>%let thePatten =CompFS_Pattern&#59<br/>%let theUCPUSP=UCPFUSPF&#59<br/>%let theUCPCMEP=UCPFCMEPF&#59<br/>data VXH_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG&#59<br/>&nbsp&nbsp&nbsp&nbsplength  _tmp1 $100. &#59<br/>&nbsp&nbsp&nbsp&nbsp/*split the pattern into 3 substrings, each for UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen select the desired combination*/<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and USPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The following is like counting 2As, 2Bs, ..., 2Zs. If any of them is matched, UCPF and USPF are the same doc*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and CMEPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 3 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop _tmp: i j&#59<br/>run&#59<br/><br/><br/>/*VXH_FS2. Determine the 25% and 75% percentile category of UPCIndexF */<br/>proc means data =  VXH_FS1 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS2a mean=mean median=median p25 = p25 p75=p75 &#59<br/>run&#59<br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as UPCIndexFP25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as UPCIndexFP50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as UPCIndexFP75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF < t2.p25 then cat('_0L_', '(<', round(t2.p25, 1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF >=  t2.p25 and t1.UPCIndexF <  t2.p75 then cat('_1M_', '(', round(t2.p25, 1), ' to ', round(t2.p75, 1)-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF  >= t2.p75 then cat('_2H_', '(>=', round(t2.p75,1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) as UPCIndexF_Cat<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS2, table=UPCIndexF_Cat)&#59<br/><br/><br/>/*VXH_FS3. Determine the 25% and 75% percentile category of # visits to the most visited GP */<br/>proc means data =  VXH_FS2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS3a mean=mean median=median p25 = p25 p75=p75 min=min max=max &#59<br/>run&#59<br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as NMax_VisitsPerDocF25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as NMax_VisitsPerDocF50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as NMax_VisitsPerDocF75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF < t2.p25 then cat('_0L_', '(<', t2.p25, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF >=  t2.p25 and t1.NMax_VisitsPerDocF <  t2.p75 then cat('_1M_', '(', t2.p25, ' to ', t2.p75-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF  >= t2.p75 then cat('_2H_', '(>=', t2.p75, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) length = 20 as NMax_VisitsPerDocF_Cat<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS, table=UPCIndexF_Cat * NMax_VisitsPerDocF_Cat )&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXH_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXH_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXH_FS)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"MY3ea59fb6-a02c-4057-8026-c5ae01865bb2","name":"Report Tables 6 and 7","custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"}],"children":[{"idx":"CodeTask-xLEwLXhdO7wiiN9W","name":"VXH_RT6a(FS) Table 6A","NodeDescription":"///t<br/>///s<br/>/*VXH_RT6A_ Report of Table 6A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/>/*%freq(data=VXH_FS, table=UPCIndexF_Cat * NMax_VisitsPerDocF_Cat )&#59*/<br/>%freq(data=VXH_FS noprint, table= NMax_VisitsPerDocF_Cat *UPCIndexF_Cat, option=%str(out=localt.VXH_RT6A))&#59<br/><br/>proc export data=localt.VXH_RT6A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table6a_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"MY3ea59fb6-a02c-4057-8026-c5ae01865bb2"}],"children":[{"idx":"MYd2f9c2b4-1789-44dd-9a67-8b800e703bc2","name":"Q_VXHR6","custparents":[{"idx":"CodeTask-xLEwLXhdO7wiiN9W"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[to do]</p><p>comments from Lisa:</p><p>So, if I am understanding correctly, you are using the number of visits as the gold standard and comparing the UPC index values to the number of visits. Will you compute measures of sensitivity and specificity? This would seem to be the only way to address potential misclassification bias.</p><p><br></p><p><br></p>"}]},{"idx":"CodeTask-JlbvjosmQduDA42A","name":"VXH_RT7a(FS) Table7A","NodeDescription":"///t<br/>///s<br/>/*VXH_RT7A_ Report of Table 7A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/>%Sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.VXH_RT7A,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Same_UCPFUSPF) as Same_UCPFUSPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Same_UCPFCMEPF) as Same_UCPFCMEPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(COMPFS) as COMPFS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as GroupSubtotal<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(UPCIndexF_Cat)<br/>)&#59<br/><br/>proc export data=localt.VXH_RT7A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table7a_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-IWAU2bsojMFEwy3C"},{"idx":"MY3ea59fb6-a02c-4057-8026-c5ae01865bb2"}],"children":[{"idx":"MYc539203c-2ed1-4854-9ccd-f300b4a4fa83","name":"Q_VXHR7","custparents":[{"idx":"CodeTask-JlbvjosmQduDA42A"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[to do]</p><p>Agreement?</p>"}]}]}],"custparents":[{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"CodeTask-boFlAYB8FDL9uTfe"},{"idx":"MY930ab0d2-192b-4d75-a7f7-e5939c01895a"}]}]},{"idx":"MY2f29f863-6d70-4d73-ae27-be4b8e932b8b","name":"Obj2. GP panel profile","custparents":[{"idx":"MYe0553785-139d-41c3-bde8-dab4c0e9819f"}],"children":[{"idx":"CodeTask-7z6jqXUBwicRz7Ey","name":"VZ_ Panels","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-QfMGtpWeNGomQjyJ","name":"VZA Period specific UCPs","NodeDescription":"///t<br/>///s<br/>/*<br/>VZA: get period specific pairs of patient-physician, and entrydate<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/>/*VZA1, from VXM_FS, get the patient id, doc id, and the entrydate*/<br/>data VZA1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate UCPF1 key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1,1,\":\")&#59<br/>run&#59<br/><br/>/*VZA2, add the compressed patient id*/<br/>%print(data=master_docidmap_pop)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZA1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZA2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnC),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*all patients are found in the map_pop file*/<br/><br/>/*VZA3, add the compressed doc id*/<br/>%print(data=master_patientidmap_pop)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZA2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numC),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*%print(data=localt.VZA)&#59*/<br/>/*all docs are found in the map_pop file*/<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZA, the patients are statin cohort members<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-7z6jqXUBwicRz7Ey"}],"children":[{"idx":"CodeTask-VcdwgkrCROezTDl3","name":"VZE encounters to UCPs by statin users receiving statin during followup","NodeDescription":"///t<br/>///s<br/>/*VZE <br/>&nbsp&nbsp&nbsp&nbspthe statin user who visited the UCP of the cohort member during the follow up period.<br/>&nbsp&nbsp&nbsp&nbspYes, it is that complicated<br/>&nbsp&nbsp&nbsp&nbsp1) the patients in VZE must be a statin user, i.e., patient in VZC must be in VZD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThat will greatly reduce the # of records!<br/>&nbsp&nbsp&nbsp&nbsp2) the docs in VZE must be in VZA (i.e., the MSB claims are with the UCP of the cohort member)<br/>&nbsp&nbsp&nbsp&nbsp3) the patient in VZE must received statin during the entry specific follow up period (this is different from<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) in that in 1) patients are those ever received a statin&#59 in 3) patients must receive a statin during the follow up<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VZE0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZD.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZD.sas7bdat)<br/>)&#59<br/><br/>/*VZE1. From VZD, get a list of distinct patient id. These are statin users (prevalent users, new users, all of them)*/<br/>%distinct(data=VZD, target=VZE1, vars=key_hsnc)&#59<br/><br/>/*VZE2. From VZC (encounters to GPs), keep records where the patient ids are in VZE1. These are MSB encounters to GPs<br/>&nbsp&nbsp&nbsp&nbspof statin users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZC,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE2,<br/>&nbsp&nbsp&nbsp&nbspvars=*, <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.key_hsnc in (select key_hsnc from VZE1))<br/>)&#59<br/><br/>/*VZE3, from VZE2, prepare distinct list of statin user-physician-entrydate<br/>&nbsp&nbsp&nbsp&nbspfor which the claim in VZE2 occured withing the follow up period specified by the entryDate.<br/>&nbsp&nbsp&nbsp&nbspNote: here the statin users are not cohort memeber. They are patients (who received statin at any time) and <br/>&nbsp&nbsp&nbsp&nbspvisited the doctor (who is a UCP of a cohort member) during the entrydate specified followup.<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE2,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_numc, t2.entryDate, t1.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE3, <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_doc_numc), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate and t2.entryDate + &Followdays -1)<br/>)&#59<br/><br/>/*VZE4. From VZE3, keep records of which the patient received statin during followup.<br/>&nbsp&nbsp&nbsp&nbspNote: in VZE3, although patients were statin users, they may not received statin during followup. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn the following, those who did not receive statin medications during follow up are excluded.<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE3,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE, <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsnc), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.RX_DDDDD between t1.entryDate and t1.entryDate + &Followdays -1)<br/>)&#59<br/>/*the following generates the same data as the above. However, it took way longer*/<br/>/*%sqljoinv2(*/<br/>/*&nbsp&nbsp&nbsp&nbspt1=VZE3,*/<br/>/*&nbsp&nbsp&nbsp&nbspt2=VZD,*/<br/>/*&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),*/<br/>/*&nbsp&nbsp&nbsp&nbsptarget=VZE4a, */<br/>/*&nbsp&nbsp&nbsp&nbspdistinct=1,*/<br/>/*&nbsp&nbsp&nbsp&nbspjtype=inner,*/<br/>/*&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsnc = t2.key_hsnc and t2.RX_DDDDD between t1.entryDate and t1.entryDate + &Followdays -1)*/<br/>/*)&#59*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZE.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZE.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: in VZE, <br/>&nbsp&nbsp&nbsp&nbspthe patients are panel statin users (majority are not statin cohort members) who received statin during followup<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(the followup is defined for the pair of the statin cohort member and the member's UCP)<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>*/<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-gqtqi4mb5cu3VDES","name":"VZF exclude patients having hosp, preg, or not fully covered in followup","NodeDescription":"///t<br/>///s<br/>/*VZF <br/>&nbsp&nbsp&nbsp&nbspVZE, contains statin users who received statin during a specified period, and visited a UCP during that period.<br/>&nbsp&nbsp&nbsp&nbspNow, from VZE, exclude those:<br/>&nbsp&nbsp&nbsp&nbsp1. hospitalized during the specified follow up<br/>&nbsp&nbsp&nbsp&nbsp2. not fully covered by health insurance during follow up<br/>&nbsp&nbsp&nbsp&nbsp3. pregnant during follow up<br/>*/<br/><br/><br/>/*VZE0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZE.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZE.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZF1. From VZE, get a list of disticnt patient-entrydate*/<br/>%distinct(data=VZE, target=VZF1, vars=%str(key_hsnc, entryDate, monotonic() as n))&#59<br/><br/>/*VZF2. From VZE, get a list of disticnt patient-entrydate (this step was skipped)*/<br/>/*%distinct(data=VZE, target=VZF2, vars=%str(key_hsnc))&#59*/<br/><br/>/*VZE3. for patients in VZE5, exclude those ever hospitalized during the specified followup period*/<br/>/*VZE3a. From master_hosp_pop_slim, get in patient hospitalizations*/<br/>data VZF3a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere ds_ip = 'IP'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep Key_HSNC adm_date dschg_date&#59<br/>run&#59 <br/>/*VZE3b. Link VZE3a to VZF1, <br/>&nbsp&nbsp&nbsp&nbspget records in VZF1 if there is hospitalization events within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF3b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entrydate and t1.entrydate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.dschg_date between t1.entrydate and t1.entrydate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t2.adm_date < t1.entrydate and t2.dschg_date > t1.entrydate +&followdays -1)&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF3c. In VZF1, exclude those having hospital events (as in VZF3b)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF3,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF3b ))<br/>)&#59<br/><br/><br/>/*VZF4. Exlcude those pregant during followup*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/>/*VZF4a. get hospitalization records related to pregnant*/<br/>data VZF4a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsnc adm_date dschg_date src&#59<br/>run&#59<br/>/*VZF4b. get MSB records related to pregnant*/<br/>%print(data=master_msb_pop_slim)&#59<br/>data VZF4b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsnc adm_date dschg_date src&#59<br/>run&#59<br/>/*VZF4c. merge pregnant records in hosp and in MSB*/<br/>data VZF4c&#59<br/>&nbsp&nbsp&nbsp&nbspset VZF4a VZF4b&#59<br/>run&#59<br/>/*VZF4d. for records in VZF3, find those having pregnant hosp/MSB events during followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF3,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF4c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF4d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.dschg_date between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date < t1.entryDate  and t2.dschg_date > t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF4e. In VZF3, exclude those having preg events (as in VZF4d)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF4,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF4d ))<br/>)&#59<br/><br/><br/>/*VZF5. From VZF4, exclude those not continuously covered within followup*/<br/>/*VZF5a. From the covereage file, calculate the coverage gaps*/<br/>data VZF5a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_phrs_cov_pop&#59<br/>&nbsp&nbsp&nbsp&nbspreport_start=eff_date&#59<br/>&nbsp&nbsp&nbsp&nbspreport_end = rexp_date&#59<br/>&nbsp&nbsp&nbsp&nbsprename rexp_date=exp_date&#59<br/>/*&nbsp&nbsp&nbsp&nbspif eff_date ne '01oct2019'd&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&cover_Xtrc_date&#59*/<br/>run&#59<br/>%distinct(data=master_phrs_cov_pop, target=VZF5a2, vars=key_hsn)&#59<br/>%getCoverGAPs(<br/>&nbsp&nbsp&nbsp&nbsprawfile=VZF5a1, <br/>&nbsp&nbsp&nbsp&nbspptFile=VZF5a2, <br/>&nbsp&nbsp&nbsp&nbsptheCovXtrc=, <br/>&nbsp&nbsp&nbsp&nbspkeyDateCol=,<br/>&nbsp&nbsp&nbsp&nbspstart='01jan2011'd, <br/>&nbsp&nbsp&nbsp&nbspend= '31dec2018'd, <br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5a, <br/>&nbsp&nbsp&nbsp&nbspcohortgroup=, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*VZF5b. From VZF5a, select records with gaps >0.*/<br/>data VZF5b&#59<br/>&nbsp&nbsp&nbsp&nbspset VZF5a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere gaps > 0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn coverStart coverEnd&#59<br/>&nbsp&nbsp&nbsp&nbsprename coverStart=gapStart coverEnd=gapEnd&#59<br/>run&#59<br/>/*VZF5c. The coverage file does not have compressed key_hsn. Attach VZF5b to master_patientidmap_pop to get<br/>&nbsp&nbsp&nbsp&nbspthe compressed key_hsn*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF5b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5c,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VZF5d. */<br/>/*VZF5d. for records in VZF4, find those having coverage gaps followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF4,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF5c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapstart between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapend between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapstart < t1.entryDate  and t2.gapend > t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF5e. In VZF4, exclude those having preg events (as in VZF5d)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF5d ))<br/>)&#59<br/><br/>/*VZF6. <br/>&nbsp&nbsp&nbsp&nbspNOTE! Till now, the file VZF5 only contains patient id and entrydate. It should be linked to VZE<br/>&nbsp&nbsp&nbsp&nbspto have a list of distinct patientID-docId-entryDate.<br/>&nbsp&nbsp&nbsp&nbspNote: the linked doc ID from VZE are UCPs of the statin cohort members during follow up.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVZF shows that for each UCP in a specific follow up period, the panel statin users ever visited that UCP.<br/>&nbsp&nbsp&nbsp&nbspNote: <br/>&nbsp&nbsp&nbsp&nbspin VZF, the patients are panel statin users (majority are not statin cohort members)<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>&nbsp&nbsp&nbsp&nbspVZF has the same structure and columns as VZE. It just contains fewer records, as those hospitalized, pregnant, not<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfully covered during followup were excluded<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZF.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZF.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-nqX2huNkGcirrgRk","name":"Q cov pop file","NodeDescription":"///t<br/>///s<br/>/*The cov_pop file is weird, having rexp_date, but not exp_date*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gqtqi4mb5cu3VDES"}]}],"custparents":[{"idx":"CodeTask-VcdwgkrCROezTDl3"}]}],"custparents":[{"idx":"CodeTask-qu966wyahw9kslba"},{"idx":"CodeTask-QfMGtpWeNGomQjyJ"},{"idx":"CodeTask-uXuQ76wDZeOgEpiz"},{"idx":"CodeTask-QfMGtpWeNGomQjyJ"}]}]},{"idx":"CodeTask-qu966wyahw9kslba","name":"VZC eligible MSB encounters to GPs","NodeDescription":"///t<br/>///s<br/>/*VZC encounters (distinct visits per patient-doc-date to GPs (SPEC in: 'B', and eligible for num_srv, LOS, etc.)*/<br/><br/>/*VZC0. prepare data.*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/>/*VZC1. in master_msb_pop_slim, keep the eligible claims*/<br/>data VZC1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSPEC in: ('B')<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc Key_HSNC dos&#59<br/>run&#59<br/><br/>/*VZC2. From above, have distinct records*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=VZC1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZC,<br/>&nbsp&nbsp&nbsp&nbspvars=*<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZC.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZC.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZD, the patients are SK residents (These are neither statin cohort members, nor panel statin patients)<br/>&nbsp&nbsp&nbsp&nbspthe dos are visiting dates<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are care providers to that residents (These may Not be UCPs of a statin cohort member, nor UCPs of<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa panel patients)<br/>*/<br/>%beep&#59<br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-7z6jqXUBwicRz7Ey"},{"idx":"CodeTask-QfMGtpWeNGomQjyJ"},{"idx":"CodeTask-7z6jqXUBwicRz7Ey"}]},{"idx":"CodeTask-uXuQ76wDZeOgEpiz","name":"VZD statin user claims","NodeDescription":"///t<br/>///s<br/>/*VZD<br/>&nbsp&nbsp&nbsp&nbspfrom MSB encounters from VZC, keep those of patients ever receiving statin.<br/>&nbsp&nbsp&nbsp&nbspNote:<br/>&nbsp&nbsp&nbsp&nbspthe patients in VZD can be prevalent users.<br/><br/>/*VZD0. Preparing data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop_slim.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZD1. For statin medications, map the compressed din*/<br/>/*%print(data=master_DINmap_pop)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.dinstr),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*all statin dins in locald.statindins are mapped*/<br/><br/>%print(data=master_dp_benefit_pop_slim)&#59<br/><br/>/*VZD2 from the master files, select statin claims into distinct claims by patient, doc, din, and date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr<br/>)&#59<br/>data vzd2c&#59<br/>&nbsp&nbsp&nbsp&nbspset vzd2a vzd2b&#59<br/>run&#59<br/>%distinct(data = VZD2c, target=VZD, vars=*)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZD.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZD.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/>/*%print(data=VZD)&#59*/<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZD, the patients are statin users (These are neither statin cohort members, nor panel statin patients)<br/>&nbsp&nbsp&nbsp&nbspdinstrs are DINs of statin medications <br/>&nbsp&nbsp&nbsp&nbspthe RXDDDDD are dates receiving a statin medication<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are prescribers of the statin medication<br/>*/<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-7z6jqXUBwicRz7Ey"},{"idx":"CodeTask-7z6jqXUBwicRz7Ey"}]}],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"},{"idx":"MY2f29f863-6d70-4d73-ae27-be4b8e932b8b"}]},{"idx":"MY60852364-4624-4ec1-951e-f1f61fc14476","name":"Determine UCP USP CMEP of panel patients","custparents":[{"idx":"MY2f29f863-6d70-4d73-ae27-be4b8e932b8b"}],"children":[{"idx":"CodeTask-dgfsahcN2hegbCIC","name":"VZG UCP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZG The UCPs of panel statin users from VZF*/<br/><br/><br/>/*VZG0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZG1. For patients in VZF (panel statin users, can be repeated for different entry periods), count the distinct encounters with GPs (from VZC)<br/>&nbsp&nbsp&nbsp&nbspwithin the followup period*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZC,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZG1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc, count(t2.dos) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbspgroupby =%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate, N_Visits),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/><br/>/*VZG2. from above, determine the max N_Visits per key_hsn-entryDate*/<br/>data VZG2&#59<br/>&nbsp&nbsp&nbsp&nbspset VZG1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsnc entrydate N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspif first.entrydate then T_visits = N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspelse T_visits+ N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspif last.entrydate&#59<br/>run&#59<br/><br/>/*VZG3, link VZG2 back to VZG1, keep records of patient-entryDate for those with the max N_Visits*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZG1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZG2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZG,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.T_visits),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entryDate N_visits<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZG.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZG.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZG:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These UCPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"MY60852364-4624-4ec1-951e-f1f61fc14476"}],"children":[]},{"idx":"CodeTask-IKTpOwWBcOlZvTix","name":"VZH CMEP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZH The UCPs of panel statin users from VZF*/<br/><br/><br/>/*VZH0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZH1. Prepare the CMEP claims<br/>&nbsp&nbsp&nbsp&nbsp(Why not using VZC? <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVZC is to determine the distinct visit, i.e., samePatient-sameDoc-sameDate.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt does not have the column FSC for determining CMEP claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIf the col FSC were kept in VZC, the samePatient-sameDoc-sameDate may appear for multiple times, which<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwould cause duplication in counting distinct visits<br/>&nbsp&nbsp&nbsp&nbsp)<br/>*/<br/>data VZH1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFSC in ('B003','B064','B052', 'B004')<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc Key_HSNC dos&#59<br/>run&#59<br/><br/><br/>/*VZH2. For patients in VZF (panel statin users, can be repeated for different entry periods), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount the distinct encounters with CMEPs(from VZH1) within the followup period<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZH1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZH,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZH.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZH.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZH:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member (the UCP's doc id is not in this table)<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are CMEPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These CMEPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"CodeTask-dgfsahcN2hegbCIC"},{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"MY60852364-4624-4ec1-951e-f1f61fc14476"}]},{"idx":"CodeTask-ZupIiHQhriJfKwu9","name":"VZI USP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZI The USPs of panel statin users from VZF*/<br/><br/><br/>/*VZI0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZD.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZI1. For patients in VZF (panel statin users, can be repeated for different entry periods), <br/>&nbsp&nbsp&nbsp&nbspcount the Rx of statins with prescribers (from VZD)&nbsp&nbsp&nbsp&nbspwithin the followup period<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZI1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc, count(t2.RX_DDDDD) as N_Rx),<br/>&nbsp&nbsp&nbsp&nbspgroupby =%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate, N_Rx),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.RX_DDDDD between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/><br/>/*VZI2. from above, determine the max N_Rx per key_hsn-entryDate*/<br/>data VZI2&#59<br/>&nbsp&nbsp&nbsp&nbspset VZI1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsnc entrydate N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspif first.entrydate then T_Rx = N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspelse T_Rx+ N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspif last.entrydate&#59<br/>run&#59<br/><br/>/*VZI3, link VZI2 back to VZI1, keep records of patient-entryDate for those with the max N_Rx*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZI1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZI2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZI,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.T_Rx),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entryDate N_Rx<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZI.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZI.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZI:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member (the UCP's doc id is not in this table)<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are USPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These USPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-ddyjSdPiWw7rRhz2","name":"VZJ NFFS not improve adherence","NodeDescription":"<p>///t</p><p>///s</p><p>/*check this example of diff in diff</p><p>It is not used in the following program though</p><p><a href=\"https://www.lexjansen.com/wuss/2016/49_Final_Paper_PDF.pdf\" target=\"_blank\">https://www.lexjansen.com/wuss/2016/49_Final_Paper_PDF.pdf</a></p><p>*/</p><p>/*NFFS does not work in terms of adherence*/</p><p><br></p><p>/*VXN_FS0-1. Prepare data*/</p><p>%VbsUnzip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zipFile=%str(&amp;localTargetPath.\\VXM_FS.zip),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcFile=%str(VXM_FS.sas7bdat)</p><p>);</p><p>data _Test0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set VXM_FS;</p><p><br></p><p>&nbsp;&nbsp;&nbsp;&nbsp;Sex=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if sex_desc='M' then sex=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;qaippeN = qaippe;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if qaippe = . or qaippe = 9 then qaippeN=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;resitypeN=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if resitype='URBAN' then resitypeN=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if charlson_index=. then charlson_index=0;</p><p><br></p><p>&nbsp;&nbsp;&nbsp;&nbsp;/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docSex_FS = scan(UCPF1, 4, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docSex_FS='M' then docSexN_FS=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;else docSexN_FS=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docBirthYr_FS= scan(UCPF1, 5, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"));</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docServiceYr_FS= year(entryDate) - docGradYr_FS;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.); /*0 for foreign*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docPayType_FS = scan(UCPF1, 9, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;else do;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if strip(docPayType_FS )='FFS' then docPayTypeN_FS =0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else docPayTypeN_FS =2;/*unknown*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;end;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.); /*N_Visits*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docNRx_FS= input(scan(UCPF1, 12, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docNStatinRx_FS= input(scan(UCPF1, 13, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docNStatinRx_FS=. then docNStatinRx_FS=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;else docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01');</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docNPatients_FS100=docNPatients_FS/100;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docN_Visits_FS100 =docN_Visits_FS/100;</p><p>run;</p><p>/*Define psVars*/</p><p>%let psVars =&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QAIPPEN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RESITYPEN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NDINS_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NDINS_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NHOSP_PRE365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NHOSP_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HNIGHTS_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HDAYS_PRE365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HNIGHTS_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HDAYS_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_GP_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_SP_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_GP_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_SP_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_ER_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NVISITS_ER_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THIRDPARTYPAY_PRE365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THIRDPARTYPAYPCT_PRE365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THIRDPARTYPAY_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;THIRDPARTYPAYPCT_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BENZO_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PSYCHO_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ANTIDEP_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ANTICHO_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BENZO_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PSYCHO_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ANTIDEP_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ANTICHO_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_NPD_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_SA_PRE365</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_PSY_PRE365</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_NPD_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_SA_POST365*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CAMH_PSY_POST365*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHARLSON_INDEX</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_ANXIETY_OLD*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_DIABETES</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_HTN</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_MOOD_OLD*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_NS_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_ASTHMA</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_COPD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_HF</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_AP_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_MOODANX</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_MOODANXP*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OA</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OMH*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_SUBABUSE_OLD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_AF_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_AMI</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_CD_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_CV_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_HP_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_IHD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_STROKE_1POP</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_WF_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OSTEO_1POP</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OSTEO_OLD*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OB_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_CA_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_PV_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_DA_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_NONRA</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_LB_PS</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_OSTEO_2DRUG*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_AK_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_RF_PS*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_VTE_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_CO_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_STROKE_2HOSP</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_IB_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_RA</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_CK_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_LV_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_EPAD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_UB_PS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_AD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_SUICIDE_OLD</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_SCHIZO*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_SCHIZO_EVER</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_PD</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_MS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_PRE365_EPJR</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_ANXIETY_OLD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_DIABETES*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_HTN*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_MOOD_OLD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_NS_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_MOODANX*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_MOODANXP*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OMH*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_ASTHMA*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_COPD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_HF*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_AP_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_IHD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OA*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_SUBABUSE_OLD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_AF_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_AMI*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_CD_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_CV_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_HP_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_STROKE_1POP*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_WF_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OSTEO_1POP*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OSTEO_OLD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_NONRA*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OB_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_CA_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_CK_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_CO_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_DA_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_PV_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_OSTEO_2DRUG*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_LB_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_AK_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_RF_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_VTE_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_STROKE_2HOSP*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_IB_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_RA*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_LV_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_EPAD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_UB_PS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_AD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_SUICIDE_OLD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_SCHIZO*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_SCHIZO_EVER*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_PD*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_MS*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CC_POST365_EPJR*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PRE365_PRSCR_STATINAHTNOH*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PRE365_MEDCLASS_STATINAHTNOH*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOLLOWUP_PRSCR_STATINAHTNOH*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp;&nbsp;&nbsp;&nbsp;*/</p><p><br></p><p>/*practice/physician related factors*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docSexN_FS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docAge_FS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docServiceYr_FS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docEdCountry_FS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docPayTypeN_FS</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docN_Visits_FS100</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docNPatients_FS100</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docStatinRxPCT_FS</p><p>;</p><p><br></p><p><br></p><p>data _test1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _test0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;length type $4.;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docid=scan(UCPF1, 1, \":\");</p><p>keep docid docPayType_FS entrydate ucpf1;</p><p>run;</p><p><br></p><p>%sort(data=_test1, sorter=docid entrydate docPayType_FS);</p><p>data _test2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _test1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;by docid entrydate docPayType_FS;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;length pattern $20.;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;retain pattern t;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if first.docid then do;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t = substr(docPayType_FS, 1,1);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pattern=t;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;end;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;else do;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if substr(docPayType_FS,1,1) ne t then do;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t=substr(docPayType_FS, 1,1);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pattern = strip(pattern) || t;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;end;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if last.docid;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if length(pattern) &gt; 1;</p><p>run;</p><p><br></p><p>/*link these docs back to the cohort, keep cohort member whose doc showing diff paytype*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=_test0,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=_test2,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=_test3, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.docid),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=inner,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jterm=%str(scan(t1.UCPF1, 1, \":\")=t2.docid)</p><p>);</p><p><br></p><p><br></p><p>proc logistic data=_test3 descending;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class docid docPayType_FS(ref='FFS')</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/param=reference;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;strata docid;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model adherence_adjust (ref='0') =CompFS docPayType_FS CompFS * docPayType_FS;</p><p>run;quit;</p><p>s///</p><p>t///</p>","custparents":[{"idx":"CodeTask-ZupIiHQhriJfKwu9"}]}],"custparents":[{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"CodeTask-IKTpOwWBcOlZvTix"},{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"MY60852364-4624-4ec1-951e-f1f61fc14476"}]},{"idx":"CodeTask-wuJgNuEzpiPHEDpP","name":"VZJ indicate for each panel patient for same UCP USP CMEP COMP","NodeDescription":"///t<br/>///s<br/>/*VZJ For patients from VZF (panel statin users), check whether the UCP', CMEP', USP', and comprehensive COC <br/>&nbsp&nbsp&nbsp&nbspof the panel statin user was the same UCP of the cohort member &nbsp&nbsp&nbsp&nbsp<br/>*/<br/><br/>/*VZJ0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZG.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZH.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZH.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZI.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZI.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZJ1. For patients in VZF (panel statin users), check whether that patient's UCP' (doc id from VZG) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZF)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsUCP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>%beep&#59<br/>%nobs(data=VZJ1)&#59<br/>/*same # of records in VZJ1 as in VZF*/<br/><br/>/*VZJ2. For patients in VZJ1 (panel statin users), check whether that patient's CMEP' (doc id from VZH) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZJ1)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZH,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsCMEP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>%beep&#59<br/>/*same # of records in VZJ2 as in VZJ1*/<br/><br/>/*VZJ3. For patients in VZJ2 (panel statin users), check whether that patient's USP' (doc id from VZI) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZJ2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ2,<br/>&nbsp&nbsp&nbsp&nbspt2=VZI,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ3,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsUSP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>/*same # of records in VZJ3 as in VZJ2*/<br/><br/>/*VZJ4. For patients in VZJ3 (panel statin users), check whether the comprehensive COC of the panel statin user<br/>&nbsp&nbsp&nbsp&nbspwas provided by the UCP of the cohort member (doc id in VZJ3)*/<br/>data VZJ&#59<br/>&nbsp&nbsp&nbsp&nbspset VZJ3&#59<br/>&nbsp&nbsp&nbsp&nbspif  AsUCP=1 and AsCMEP =1 and AsUSP=1 then AsComp =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse AsComp=0&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZJ.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZJ.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZJ:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member <br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are UCP of the statin cohort member (the patient id of the statin cohort member is not in this table)<br/>&nbsp&nbsp&nbsp&nbspThe AsUCP indicates whether the panel statin user's UCP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsCMEP indicates whether the panel statin user's CMEP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsUSP indicates whether the panel statin user's USP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsComp indicates whether the panel statin user's comprehensive care provider<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., the same doc as UCP', CMEP', and USP') is the same as the UCP of the statin cohort member<br/>*/<br/>%beep&#59<br/> <br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"CodeTask-ZupIiHQhriJfKwu9"},{"idx":"CodeTask-IKTpOwWBcOlZvTix"},{"idx":"CodeTask-dgfsahcN2hegbCIC"},{"idx":"CodeTask-gqtqi4mb5cu3VDES"},{"idx":"CodeTask-dgfsahcN2hegbCIC"},{"idx":"MY60852364-4624-4ec1-951e-f1f61fc14476"}]}]},{"idx":"MYd93c215d-f56b-4896-b0f2-e3a81933f159","name":"Stats on cohort patient's UCP as panel patients UCP' CMEP' USP'","custparents":[{"idx":"MY2f29f863-6d70-4d73-ae27-be4b8e932b8b"}],"children":[{"idx":"CodeTask-bj3QXkoOfJIVHZi6","name":"VZK Get Proportion as same UCP USP CMEP COMP","NodeDescription":"///t<br/>///s<br/>/*VZK For patients from VZJ (panel statin users), <br/>&nbsp&nbsp&nbsp&nbspfor each UCP of the cohort member (i.e., the doc id from VZK), determine the proportion of panel statin users<br/>&nbsp&nbsp&nbsp&nbspfor which the very doctor also act as UCP', CMEP', USP', and comprehensive provider of the panel statin user.<br/>&nbsp&nbsp&nbsp&nbspNote: a doc may repeatedly be the UCP of different cohort members. Each time, there will be a panel. Each panel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphas different panel statin users. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAverage number of panel statin users will be determined for each UCP appeared in the cohort, taking<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe total count of panel statin users of all panels of the same UCP, divided by the # of times that the UCP appeared<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfor different cohort members<br/>*/<br/><br/>/*VZK0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZJ.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZJ.sas7bdat)<br/>)&#59<br/><br/>/*VZK1. for each distinct UCP of cohort member, sum the total counts of panel statin users (statin users can repeat<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas for different follow up period), the counts panel statinusers for whom the very doctor act as UCP' USP' CMEP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand comprehensive continuity of care provider. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsnc) as totalPanelStatinUserCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsUCP) as totalAsUCPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsCMEP) as totalAsCMEPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsUSP) as totalAsUSPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsCOMP) as totalAsCOMPCnt<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/><br/>/*VZK2. for each distinct UCP of cohort member, count the freq that the UCP appears in the statin cohort*/<br/>%distinct(data=VZJ, vars=%str(key_doc_numc, entryDate), target=VZK2a)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZK2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_doc_numc, count(key_doc_numc) as docFreq),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_doc_numc<br/>)&#59<br/><br/>/*VZK3. Merg VZK1 and 2. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZk1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, t2.docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/><br/>/*VZK4. Calculate the average panel statin users, PCT as UCP', CMEP', USP', and comprehensive continuity of care<br/>&nbsp&nbsp&nbsp&nbspprovider*/<br/>data VZK4&#59<br/>&nbsp&nbsp&nbsp&nbspset VZK3&#59<br/>&nbsp&nbsp&nbsp&nbspN_StatinUsers = totalPanelStatinUserCnt/docFreq&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsUCP = totalAsUCPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsCMEP = totalAsCMEPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsUSP = totalAsUSPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsCOMP = totalAsCOMPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc N_StatinUsers PCT_: docFreq&#59<br/>run&#59<br/><br/>/*VZK5. Link to VZA, to get the original doc id*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZK.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZK.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZK:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are statin cohort members<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are UCP of the statin cohort member (the patient id of the statin cohort member is not in this table)<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsUCP indicates the percentage that the panel statin user's UCP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsCMEP indicates the percentage that the panel statin user's CMEP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsUSP indicates the percentage that the panel statin user's USP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsComp indicates the percentage that the panel statin user's comprehensive care provider is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe DocFreq is the number of times the UCP appears in the statin cohort<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., the same doc as UCP', CMEP', and USP') is the same as the UCP of the statin cohort member<br/>*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-cit3DUg7tPrHVjeR","name":"VZL Stats on  UCP Panels","NodeDescription":"///t<br/>///s<br/>/*VZL. Stats of UCP's panel*/<br/><br/>/*VZL0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZK.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZK.sas7bdat)<br/>)&#59<br/><br/>/*VZL1. Get data for distinct docs*/<br/>%distinct(data=VZK, target=VZL1, vars=%str(key_doc_num, docFreq, N_StatinUsers, <br/>&nbsp&nbsp&nbsp&nbsppct_asUCP, pct_asCMEP, pct_asUSP, pct_asCOMP)<br/>)&#59<br/><br/>/*VZL2. histograms*/<br/>ods graphics on&#59<br/>proc univariate data=VZL1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram N_StatinUsers pct_asUCP  pct_asUSP pct_asCMEP pct_asCOMP / normal&#59<br/>run&#59quit&#59<br/>ods graphics off&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-bj3QXkoOfJIVHZi6"}]}],"custparents":[{"idx":"CodeTask-wuJgNuEzpiPHEDpP"},{"idx":"MYd93c215d-f56b-4896-b0f2-e3a81933f159"}]}]}]},{"idx":"MY03296ed5-0f6a-40f8-a118-569c861fe335","name":"Obj3. Adherence by COC measures","custparents":[{"idx":"MYe0553785-139d-41c3-bde8-dab4c0e9819f"}],"children":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R","name":"VXM_FS Adherence","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/><br/>/*VXM_FS, Adherence by PDC*/<br/>/*the cohort*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/>%let MPR80 =.8&#59<br/>%let supplyDayCol=supplyDays&#59<br/><br/><br/>data VXM_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_F&#59<br/>&nbsp&nbsp&nbsp&nbspsupplyDays=Rx_Qty_Amt&#59<br/>&nbsp&nbsp&nbsp&nbspdrugclass='STATIN'&#59<br/>run&#59<br/><br/><br/>%getAdherence(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXM_FS1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXM_FS2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOptAdhCutOff =&MPR80, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLenInterval =%eval(365), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Intervals=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass =DrugClass, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowStart =EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsupCol =&supplyDayCol, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAllowedGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>)&#59<br/><br/><br/>/*link back to the cohort VXL_L*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXM_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS3,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.DaysOnMed, t2.Adherence)<br/>)&#59<br/><br/>/*calculate the adjusted adherence by removing days in hopsital from both numerator and denominator*/<br/>data VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspPDC_Adjust = (daysonmed -HDays_Post365) / (365-HDays_Post365)&#59<br/>&nbsp&nbsp&nbsp&nbspAdherence_Adjust=0&#59<br/>&nbsp&nbsp&nbsp&nbspif PDC_Adjust >= .8 then Adherence_Adjust =1&#59<br/>run&#59<br/>%freq(data=VXM_FS, table=Adherence_Adjust * Adherence)&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXM_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXM_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXM_FS)&#59<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-eiCI5WcPAuKiqfPX","name":"Q_VXM","NodeDescription":"///t<br/>///s<br/>/*The days in hospital were removed in calculating adjusted PDC and adherence<br/><br/>Is it over estimated by counting the amount? Nope, slightly higher than 50%<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"}]},{"idx":"CodeTask-U7RLQ3SBK85CxfFB","name":"VXT Unmatched Studies","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"}]}],"custparents":[{"idx":"CodeTask-QdgwMbLyrBc2zchU"},{"idx":"MY03296ed5-0f6a-40f8-a118-569c861fe335"}]},{"idx":"MYd427a76c-e861-4a8c-b081-3fa60030369a","name":"Unmatched analyses","custparents":[{"idx":"MY03296ed5-0f6a-40f8-a118-569c861fe335"}],"children":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA","name":"VXT_FS Unmatched Logistic","NodeDescription":"///t<br/>///s<br/>/*VXT_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXT_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXT_FS1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXT_FS1a&#59<br/>run&#59<br/>title&#59<br/>Data localt.VXT_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXT_FS1*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>/*VXT_FS2. Prepare study data*/<br/>data VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100=docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100 =docN_Visits_FS/100&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXT_FS2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXT_FS3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXT_FS2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXT_FS3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data localt.VXT_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXT_FS3*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/><br/>/*VXT_FS5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXT_FS5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXT_FS5t&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXT_FS5v&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>/*data VXT_NRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*data VXT_CNRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*data VXT_IDI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*prepare a data set to hold predict probs from multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_m&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn Adherence_Adjust&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS5a. Regression Stage 1. Univariate Models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeUniv(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXT_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXT_p&theXVar._u_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeUniv&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXT_FS5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for null, UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeMulti(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXT_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates  /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1  modelAnova = makeMulti_tmp1t parameterEstimates = makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXT_p&theXVar._m_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5t makeMulti_tmp2t&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_FS5v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_FS5v makeMulti_tmp2v&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*merge the pred values*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXT_m&UPCCutOff,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXT_m&theXVar,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXT_m&UPCCutOff, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Prob_m&theXVar),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeMulti&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar =)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*do not calculate IDINRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeIDINRI(probterm1=, probterm2=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local probterm1 probterm2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%NRICAT(VXT_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 , 2, .5)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_NRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_NRI makeIDINRI_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Continuous NRI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%CONTNRI(VXT_m&UPCCutOff,1,adherence_adjust,&probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _all_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_CNRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_CNRI makeIDINRI_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*IDI*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%IDIMacro(VXT_m&UPCCutOff, 1, adherence_adjust, &probterm1, &probterm2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeIDINRI_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _IDI_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm1=upcase(symget('probterm1'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm2=upcase(symget('probterm2'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXT_IDI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXT_IDI makeIDINRI_tmp3&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeIDINRI_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeIDINRI&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*do not calculate IDINRI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mUPCIndexF_Cat    )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCompFS    )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_m, probterm2=Prob_mCombTerm_FS   )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCompFS    )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mUPCIndexF_Cat, probterm2=Prob_mCombTerm_FS   )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeIDINRI(probterm1=Prob_mCompFS, probterm2=Prob_mCombTerm_FS   )&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59*/<br/>%mend LoopUPCCutOff&#59<br/>%LoopUPCCutOff(UPCCutOff =25)&#59<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>%LoopUPCCutOff(UPCCutOff =75)&#59<br/>data localt.VXT_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXT_FSt&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS5t&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXT_FSv&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS5v&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>/*data localt.VXT_NRI_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXT_NRI&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59*/<br/>/*run&#59*/<br/>/*data localt.VXT_CNRI_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXT_CNRI&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59*/<br/>/*run&#59*/<br/>/*data localt.VXT_IDI_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXT_IDI&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59*/<br/>/*run&#59*/<br/><br/>%macro hold&#59<br/><br/>proc export data=localt.VXT_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table12a_OddRatio_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_NRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table13a_NRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_CNRI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table14a_CNRI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>proc export data=localt.VXT_IDI_FS<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Table15a_IDI_FS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>%mend hold&#59<br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-o78saJ1cDEgfL6fO","name":"!Q VXT","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>Add interaction terms???<br/>It is not significant<br/><br/>But adding the doc chars, should it be controlled by repeating terms? (using Genmod GEE instead)<br/><br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA"}]}],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"},{"idx":"CodeTask-U7RLQ3SBK85CxfFB"},{"idx":"MYd427a76c-e861-4a8c-b081-3fa60030369a"}]},{"idx":"CodeTask-1I7cdg9tCDkvF9Sk","name":"VXTB_FS Interaction Rural Unmatch NoRepeat ","NodeDescription":"///t<br/>///s<br/>/*VXTB_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS<br/>&nbsp&nbsp&nbsp&nbspinteraction of main effect with rurality<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXTB_FS0. Prepare source files.*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXTB_FS1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXTB_FS1a&#59<br/>run&#59<br/>title&#59<br/>Data localt.VXTB_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTB_FS1*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>/*VXTB_FS2. Treat up the missing values.<br/>&nbsp&nbsp&nbsp&nbspNote: two patients whose UCPF1 does not have doc covariates like age sex... <br/>*/<br/>data VXTB_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXTB_FS2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXTB_FS3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXTB_FS2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXTB_FS3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data localt.VXTB_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTB_FS3*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"Table11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/><br/>/*VXTB_FS5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXTB_FS5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTB_FS5t&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTB_FS5v&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>/*data VXTB_NRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*data VXTB_CNRI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*data VXTB_IDI&#59 length m1 $200. m2 $200.&#59delete&#59 run&#59*/<br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTB_FS4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTB_FS5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for null, UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeMulti(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=VXTB_FS4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates &theXVar*resitypeN /scale=none aggregate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1  modelAnova = makeMulti_tmp1t parameterEstimates = makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=VXTB_m&theXVar  (keep=key_hsn adherence_adjust prob_m&theXVar) p=prob_m&theXVar&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTB_p&theXVar._m_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS5t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS5t makeMulti_tmp2t&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTB_FS5v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTB_FS5v makeMulti_tmp2v&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeMulti&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar =)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>%mend LoopUPCCutOff&#59<br/>/*%LoopUPCCutOff(UPCCutOff =25)&#59*/<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>/*%LoopUPCCutOff(UPCCutOff =75)&#59*/<br/>data localt.VXTB_FS&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTB_FSt&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS5t&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTB_FSv&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTB_FS5v&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-dc1t3qIkzKpa3hgA"},{"idx":"MYd427a76c-e861-4a8c-b081-3fa60030369a"}]},{"idx":"CodeTask-I84ABQMd589CTKCc","name":"VXTR_FSr Unmatched Logistic Repeated","NodeDescription":"///t<br/>///s<br/>/*VXTR_FSR Unmatched logistic regression, <br/>repeated by doc id, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXTR_FSR0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXTR_FSR1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXTR_FSR1a&#59<br/>run&#59<br/>title&#59<br/>Data localt.VXTR_FSR1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTR_FSR1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTR_FSR1*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"TableR11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>/*VXTR_FSR2. Treat up the missing values.<br/>&nbsp&nbsp&nbsp&nbspNote: two patients whose UCPF1 does not have doc covariates like age sex... <br/>*/<br/>data VXTR_FSR2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100=docN_Visits_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100 = docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspDocRepeatID=scan(UCPF1, 1, \":\")&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXTR_FSR2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXTR_FSR3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXTR_FSR2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXTR_FSR3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data localt.VXTR_FSR3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTR_FSR3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTR_FSR3*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"TableR11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/><br/>/*VXTR_FSR5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXTR_FSR5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTR_FSR5t&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTR_FSR5v&#59length Var $200. label $200.&#59 delete&#59run&#59<br/><br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTR_FSR4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTR_FSR4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTR_FSR2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTR_FSR5a. Regression Stage 1. Univariate Models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeUniv(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTR_FSR4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID /param=reference truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar   / dist=binomial link=logit type3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTR_p&theXVar._u_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTR_FSR5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTR_FSR5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeUniv&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeUniv(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTR_FSR5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*loop for null, UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro makeMulti(theXVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"&theXVar, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTR_FSR4 descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates  / dist=binomial link=logit type3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M1: &theXVar + covariates' &theXVar &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspROC 'M2: covariates'  &covariates&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsproccontrast reference ('M2: covariates')  /estimate&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1  type3 = makeMulti_tmp1t GEEEmpPEst = makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTR_p&theXVar._m_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theXVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = symget('theXVar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTR_FSR5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTR_FSR5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTR_FSR5t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTR_FSR5t makeMulti_tmp2t&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTR_FSR5v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTR_FSR5v makeMulti_tmp2v&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend makeMulti&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar =)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = UPCIndexF_Cat)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CompFS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeMulti(theXVar = CombTerm_FS)&#59 /*loop for UPCIndexF_Cat, COMPFS, and CombinedTerm_FS*/<br/>%mend LoopUPCCutOff&#59<br/>%LoopUPCCutOff(UPCCutOff =25)&#59<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>%LoopUPCCutOff(UPCCutOff =75)&#59<br/><br/>data localt.VXTR_FSR&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTR_FSR5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTR_FSRt&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTR_FSR5t&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTR_FSRv&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTR_FSR5v&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-U7RLQ3SBK85CxfFB"},{"idx":"MYd427a76c-e861-4a8c-b081-3fa60030369a"}]},{"idx":"CodeTask-s38dwHrkpieg4b6c","name":"VXTR_FSrI Unmatched Logistic Repeated Interaction","NodeDescription":"///t<br/>///s<br/>/*Within interaction<br/>VXTRI_FSRI Unmatched logistic regression, repeated by doc id, <br/>Adherece_adjusted by  UPCIndxF (m1), (UPCIndxF, compCOC, and interaction, M2) <br/><br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXTRI_FSRI0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=VXM_FS)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage Sex  QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXTRI_FSRI1. Report distribution of UPC index*/<br/>title \"distribution of UPC Index\"&#59<br/>proc means data=VXM_FS mean std median qrange q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspods output summary=VXTRI_FSRI1a&#59<br/>run&#59<br/>title&#59<br/>Data localt.VXTRI_FSRI1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI1a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTRI_FSRI1*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"TableR11a_UPCIndexDist_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>/*VXTRI_FSRI2. Treat up the missing values.<br/>&nbsp&nbsp&nbsp&nbspNote: two patients whose UCPF1 does not have doc covariates like age sex... <br/>*/<br/>data VXTRI_FSRI2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100=docN_Visits_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100 = docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspDocRepeatID=scan(UCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docbirthyr_FS ne .&#59<br/>run&#59<br/><br/>/*check missing*/<br/>proc means data=VXTRI_FSRI2 missing&#59<br/>vars &covariates&#59run&#59<br/><br/>/*VXTRI_FSRI3. Check multicollinearity and report*/<br/>ods trace on&#59<br/>proc reg data=VXTRI_FSRI2&#59 <br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust =UPCIndexF CompFS &covariates /tol vif&#59<br/>&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = VXTRI_FSRI3a&#59<br/>run&#59<br/>ods trace off&#59<br/>data localt.VXTRI_FSRI3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI3a&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>/*proc export data=VXTRI_FSRI3*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"TableR11a_MultiCollinearity_FS\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/><br/>/*VXTRI_FSRI5. Make an empty set to hold all statistic results from the regression models.*/<br/>data VXTRI_FSRI5&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTRI_FSRI5t&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>data VXTRI_FSRI5v&#59length Var $200. label $200.&#59 delete&#59run&#59<br/>/*loop for UPCCutOff, and COC measures, and for univ/multiv models*/<br/>%macro LoopUPCCutOff(UPCCutOff=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local UPCCutOff&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp%let UPCCutOff=50&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTRI_FSRI4.  Make UPCIndex category*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Univaraite, UPCIndex only*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"UPCIndexF_CatN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param =  glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=, or let param=glm. (default is param=glm)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from the default setting <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN  /dist=binomial link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI vs Low UPCI, H vs L\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTRI_pupc_u_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTRI_FSRI5b. multivariate models, UPC index only + covariates (without ComFS)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"UPCIndexF_CatN , + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param =  glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=, or let param=glm. (default is param=glm)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from the default setting */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN  &covariates  / dist=binomial link=logit type3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI vs Low UPCI , H vs L\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  / exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1  type3 = makeMulti_tmp1t GEEEmpPEst = makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTRI_pUPC_m_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5t makeMulti_tmp2t&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5v makeMulti_tmp2v&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTRI_FSRI5a. Regression Stage 1. Univariate Models with interaction!*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"UPCIndexF_CatN * CombTerm_FS\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param =  glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=, or let param=glm. (default is param=glm)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from the default setting <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN CompFS UPCIndexF_CatN*CompFS  /dist=binomial link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 CompFS 1 -1 UPCIndexF_CatN*CompFS 1 0 0 -1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs High UPCI non COMPCOC, H1 vs H0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0 CompFS 1 -1  UPCIndexF_CatN*CompFS 1 -1 0  0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs Low UPCI non COMPCOC, L1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0  CompFS 1 -1 UPCIndexF_CatN*CompFS 0 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI COMPCOC, H1 vs L1\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 1 0 -1 0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, non COMPCOC vs Low UPCI non COMPCOC, H0 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 0 1 0 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTRI_pinteraction_u_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeUniv_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeUniv_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN * CompFS'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Univariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5 makeUniv_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeUniv_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXTRI_FSRI5b. multivariate models*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"UPCIndexF_CatN * CompFS, + covariates \"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param =  glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=, or let param=glm. (default is param=glm)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from the default setting */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN CompFS UPCIndexF_CatN*CompFS &covariates  / dist=binomial link=logit type3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI vs Low UPCI , H vs L\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  / exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC vs non COMPCOC, 1 vs 0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCompFS 1 -1  / exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 CompFS 1 -1 UPCIndexF_CatN*CompFS 1 0 0 -1 / exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs High UPCI non COMPCOC, H1 vs H0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0 CompFS 1 -1  UPCIndexF_CatN*CompFS 1 -1 0  0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs Low UPCI non COMPCOC, L1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0  CompFS 1 -1 UPCIndexF_CatN*CompFS 0 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI COMPCOC, H1 vs L1\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 1 0 -1 0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, non COMPCOC vs Low UPCI non COMPCOC, H0 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 0 1 0 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeMulti_tmp1  type3 = makeMulti_tmp1t GEEEmpPEst = makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=localt.VXTRI_pinteraction_m_&UPCCutOff  (keep=key_hsn adherence_adjust p) p=p&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN * CompFS'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN * CompFS'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeMulti_tmp2v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeMulti_tmp1v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVar = 'UPCIndexF_CatN * CompFS'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCCutOff = &UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType='Multivariate '&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Attach results to the summary table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5 makeMulti_tmp2&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5t makeMulti_tmp2t&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata VXTRI_FSRI5v&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5v makeMulti_tmp2v&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>%mend LoopUPCCutOff&#59<br/>%LoopUPCCutOff(UPCCutOff =25)&#59<br/>%LoopUPCCutOff(UPCCutOff =50)&#59<br/>%LoopUPCCutOff(UPCCutOff =75)&#59<br/><br/><br/><br/>data localt.VXTRI_FSRI&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTRI_FSRIt&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5t&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/>data localt.VXTRI_FSRIv&#59<br/>&nbsp&nbsp&nbsp&nbspset VXTRI_FSRI5v&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-IeLpcfWccOcdnP4r","name":"About Estimation Logistic Genmod","NodeDescription":"///t<br/>///s<br/>/*local*/<br/><br/>%freq(data=locald.eyestudy , table=carrot * lenses)&#59<br/>/*1. the following is an example from the UCLA website titled<br/>https://stats.idre.ucla.edu/sas/faq/how-can-i-estimate-relative-risk-in-sas-using-proc-genmod-for-common-outcomes-in-cohort-studies/<br/>*/<br/>proc genmod data=locald.eyestudy desc &#59<br/>&nbsp&nbsp&nbsp&nbspclass carrot &#59<br/>&nbsp&nbsp&nbsp&nbspmodel lenses = carrot /dist=binomial link=logit &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Beta\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcarrot 1 -1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%freq(data=VXTRI_FSRI4 , table=adherence_adjust * UPCIndexF_CatN)&#59<br/>/*The following copies the same settings as above. <br/>&nbsp&nbsp&nbsp&nbspIn the class statement, there is no specification for PARAM=. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThis is indeed to use the default setting, which is PARAM=GLM<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPARAM=GLM enables ref=-1<br/>&nbsp&nbsp&nbsp&nbspNote: the reference level is not specified. SAS takes the ascending order, and use the largest value as the reference<br/>*/<br/>proc genmod data=VXTRI_FSRI4 desc &#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust = UPCIndexF_CatN /dist=binomial link=logit &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Beta\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN -1 1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>/*The following adds the specification for reference level (which is 0, the smallest)<br/>&nbsp&nbsp&nbsp&nbspThe result is the inverse to the above<br/>*/<br/>proc genmod data=VXTRI_FSRI4 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN /dist=binomial link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>/*The following shows the OR by est statement using logistic regression model<br/>&nbsp&nbsp&nbsp&nbspthe PARAM is not specified (using default PARAM=GLM)<br/>*/<br/>proc logistic data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param=glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from not setting param at all<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN CompFS UPCIndexF_CatN*CompFS  /link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 CompFS 1 -1 UPCIndexF_CatN*CompFS 1 0 0 -1 / exp cl<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs High UPCI non COMPCOC, H1 vs H0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0 CompFS 1 -1  UPCIndexF_CatN*CompFS 1 -1 0  0/exp cl &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs Low UPCI non COMPCOC, L1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0  CompFS 1 -1 UPCIndexF_CatN*CompFS 0 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI COMPCOC, H1 vs L1\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 1 0 -1 0/exp cl &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, non COMPCOC vs Low UPCI non COMPCOC, H0 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 0 1 0 -1 /exp cl&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59*/<br/>run&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspThe following is an alternative way, setting param=ref. <br/>&nbsp&nbsp&nbsp&nbspAs PARAM=ref, the reference level is omitted, in the estimate statement, there is no values for -1.<br/>&nbsp&nbsp&nbsp&nbspThe setting produces the same results as above&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>proc logistic data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param=ref desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from not setting param at all<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN CompFS UPCIndexF_CatN*CompFS  /link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1  CompFS 1  UPCIndexF_CatN*CompFS 1  / exp cl<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs High UPCI non COMPCOC, H1 vs H0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 CompFS 1   UPCIndexF_CatN*CompFS 1 /exp cl &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs Low UPCI non COMPCOC, L1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0  CompFS 1 UPCIndexF_CatN*CompFS 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI COMPCOC, H1 vs L1\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1  CompFS 0 UPCIndexF_CatN*CompFS 1 /exp cl &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, non COMPCOC vs Low UPCI non COMPCOC, H0 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1  CompFS 0  UPCIndexF_CatN*CompFS 0  /exp cl&#59<br/><br/><br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59*/<br/>run&#59<br/><br/>/*The following is to use PROC genmod. The PARAM is not specified (using default PARAM=GLM, which allows setting reference as -1)<br/>&nbsp&nbsp&nbsp&nbspIt produces the same results as the above two instances.<br/>*/<br/>proc genmod data=VXTRI_FSRI4 &#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_CatN (ref='0')  CompFS (ref='0')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID&nbsp&nbsp&nbsp&nbsp/param =  glm desc&#59 /*hey, to introduce the 1 -1 pair, DO NOT specify param=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnote: parma=effect is different from not setting param at all<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = UPCIndexF_CatN CompFS UPCIndexF_CatN*CompFS  /dist=binomial link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/* UPCIndexF_CatN*CompFS <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 1 , 1 0, &nbsp&nbsp&nbsp&nbsp0 1, 0 0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso upc=1, compfs=1 vs upc=0, compfs=0: 1 0 0 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI non COMPCOC, H1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1 CompFS 1 -1 UPCIndexF_CatN*CompFS 1 0 0 -1 / exp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs High UPCI non COMPCOC, H1 vs H0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0 CompFS 1 -1  UPCIndexF_CatN*CompFS 1 -1 0  0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs Low UPCI non COMPCOC, L1 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 0 0  CompFS 1 -1 UPCIndexF_CatN*CompFS 0 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Low UPCI COMPCOC, H1 vs L1\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 1 0 -1 0/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, non COMPCOC vs Low UPCI non COMPCOC, H0 vs L0\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN 1 -1  CompFS 0 0 UPCIndexF_CatN*CompFS 0 1 0 -1 /exp &#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =makeUniv_tmp1&#59*/<br/>run&#59<br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-s38dwHrkpieg4b6c"}]},{"idx":"CodeTask-oNtShTGHM5dTc4qR","name":"specsenYouden","NodeDescription":"///t<br/>///s<br/>/*specificity, sensitivity, etc<br/>This program was copied from prog D_stats of<br/>P:\\MSValidation(EvansC)_Bio15-331\\SAS code\\MSValidation_20180611.egp<br/>*/<br/><br/><br/>%UnixUnZip(<br/>&nbsp&nbsp&nbsp&nbspsPath=&remoteTargetPath,<br/>&nbsp&nbsp&nbsp&nbspzip=c_dxall,<br/>&nbsp&nbsp&nbsp&nbspzipped=c_dxall,<br/>&nbsp&nbsp&nbsp&nbsptPath=,<br/>&nbsp&nbsp&nbsp&nbsptarget=c_dxall<br/>)&#59<br/><br/>Data remotet.TheResults&#59<br/>&nbsp&nbsp&nbsp&nbspformat test $6.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*1. determine the dxDate*/<br/>&nbsp&nbsp&nbsp&nbsp/*same doc same date dx count as one dx*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(source=c_dxall, target=D1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dxDate, code, src, 'MS' as disease) )&#59<br/><br/><br/>%macro caseDef(Data=, subjectIDCol=, dxDateCol=, ndx=, dxyears=, target=, dQdateOrder=, debug= )&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local NDX DXYears lagN Data target  debug subjectIDCol DxDateCol dQdateOrder&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*by default, &dxYears=500*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dxyears) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dxyears =500&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*by default, &subjectIDCol=Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&subjectIDCol) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let subjectIDCol =key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*by default, &dxDateCol=dxDate*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dxDateCol) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dxDateCol =dxDate&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*by default, let the first dx date be the dqdate. If =last, let the late date be the diagnosis date*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dQdateOrder) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dQdateOrder =first&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%let lagN=%eval(&Ndx-1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*1. Add patient-specific dxIndex for each dx record*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*sort the data by patient id and by dxDate*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sort data=&data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &subjectIDCol &dxDateCol&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for each patient, add patient-specific dx index numbers*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain dxIndex&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &subjectIDCol &dxDateCol&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.&subjectIDCol then dxIndex=1&#59 else dxIndex+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. determine dx1/dx2 date, and dx1/dx2 patient id*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Sort records by patient, and by desceding order of dxIndex*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sort data=caseDef_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &subjectIDCol descending dxIndex&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*sorting (descendingly) by dxIndex is better than sorting by &dxDateCol<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas patient might have 2 DX on the same &dxDateCol (e.g., by 2 diff physicians)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn that case, records of the same &dxDateCol might randomly change order <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the dates of the first dx (dx1_date), and the last (dx&ndx._date)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, determine the &subjectIDCol of the first dx, and the last*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdx1_date=&dxDateCol&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdx1_&subjectIDCol=&subjectIDCol&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdx&ndx._date = lag&lagN.(&dxDateCol)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdx&ndx._&subjectIDCol=lag&lagN.(&subjectIDCol)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat dx1_date date9. dx&ndx._date date9.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. if the patientID of the first dx and last dx are not the same<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplet the last &dxDateCol = . */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dx1_&subjectIDCol ne dx&ndx._&subjectIDCol then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdx&ndx._date = .&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. exlcude those with a last &dxDateCol =. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., excluding records that on ward there were not n diagnoses*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dx&ndx._date ne .&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDays_&ndx.DXs = dx&ndx._date - dx1_date +1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*5. only keep those records that having n DXs onward, and the days between the first and the last<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspis within the required years (DxYears)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif Days_&ndx.DXs <= 365*&DxYears&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*6. For each patient, kee the last record<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAs it is sorted descendingly by DX dates, the last record is the earliest one<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhich had n DXs onward, and the n DX all occured within the required years*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata caseDef_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &subjectIDCol descending dxIndex&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.&subjectIDCol&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dQdateOrder=last, use the last dxdate in the serial as the diagnosis ate*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %sysfunc(lowcase(&dQdateOrder )) = last %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdxdate = dx&ndx._date&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59 <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*7. The final data set*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset caseDef_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop dx1_&subjectIDCol dx&ndx._&subjectIDCol dx1_Date dx&ndx._Date days_&ndx.DXS dxIndex&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%delData(source=caseDef_tmp1 caseDef_tmp2 caseDef_tmp3 caseDef_tmp4 caseDef_tmp5 caseDef_tmp6 caseDef_tmp7)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend caseDef&#59<br/><br/><br/>/*for MS , directly use the macro, to identify those with >=3 dxs (any from hospital, physician, or drug <br/>claims), within UNLIMITED years. protocol May-17, page 2. <br/>*/<br/>*%caseDef(Data=d2, subjectIDCol=key_hsn, dxDateCol=dxDate, ndx=3, dxyears=, target=d3,  debug=)&#59/*in protocol dxYears=100*/<br/><br/>%macro dx_MS(<br/>&nbsp&nbsp&nbsp&nbspHospDxDate=,<br/>&nbsp&nbsp&nbsp&nbsptheDisease=,<br/>&nbsp&nbsp&nbsp&nbspnHDx=,<br/>&nbsp&nbsp&nbsp&nbspnMSBDx=,<br/>&nbsp&nbsp&nbsp&nbspnDPDx=,<br/>&nbsp&nbsp&nbsp&nbsphDxYears=,<br/>&nbsp&nbsp&nbsp&nbspMSBDxYears=,<br/>&nbsp&nbsp&nbsp&nbspDPDxYears=,<br/>&nbsp&nbsp&nbsp&nbsptheAge=<br/>)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*1. dschg_date<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. earliest of the dxDates<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. 1 H or 2 MSB with 1 year<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp4. age 40+<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp%LOCAL HospDxDate theDisease nHDX nMSBDX theAge hDXYears MSBDxYears nDPDx DPDxYears theMark&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp%let HospDxDate = dschg_date&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let theDisease = MS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%LET nHDX=2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%LET nMSBDX=3&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let nDPDx=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%LET theAge=&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let hDxYears=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let MSBDxYears=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let DPDxYears=1&#59*/<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*A. for H claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspidentify patients withwith dx >1 in Hospital<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&nHDX) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(source=d1, target=dx_tmp4,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, dxDate, Disease, src), filters=%str(src='hp'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>  nHDx=&nHDX &hDxYears&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%caseDef(Data=dx_tmp4, subjectIDCol=key_hsn, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdxDateCol=dxDate, ndx=&nHDX, dxyears=&hDxYears, target=dx_tmp5,  debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*in protocol dxYears=100*/<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nHDx=0&#59%let HDxYears=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata dx_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat key_hsn $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*B. from MSB<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&nMSBDX) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(source=d1, target=dx_tmp6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, dxDate, Disease, src), filters=%str(src='mb'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*use caseDef to determine the DxQdate according to non_Hospital file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%caseDef(Data=dx_tmp6, subjectIDCol=key_hsn, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdxDateCol=dxDate, ndx=&nMSBDX, dxyears=&MSBDxYears, target=dx_tmp7, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdQdateOrder=last,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nMSBDX=0&#59%let MSBDxYears=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata dx_tmp7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat key_hsn $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*C. from drug files*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&nDPDx) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=d1, table=src)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(source=d1, target=dx_tmp6a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, dxDate, Disease, src), filters=%str(src='db' or src='dn'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*use caseDef to determine the DxQdate according to non_Hospital file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%caseDef(Data=dx_tmp6a, subjectIDCol=key_hsn, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdxDateCol=dxDate, ndx=&nDPDx, dxyears=&DPDxYears, target=dx_tmp7a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdQdateOrder=first,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nDPDx=0&#59%let DPDxYears=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata dx_tmp7a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat key_hsn $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*putting H, MSB, DP dx together, so as to determine which one comes the first*/<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp5 dx_tmp7 dx_tmp7a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%caseDef(Data=dx_tmp8, subjectIDCol=key_hsn, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdxDateCol=dxDate, ndx=1, dxyears=, target=dx_tmp9,  debug=)&#59/*in protocol dxYears=100*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count the combinations*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=dx_tmp9,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=remotes.a90_validationpts,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=dx_tmp10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.trueMS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.key_hsn='', 0, 1) as testMS),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%freq(data=dx_tmp10, table=testMS * trueMS, option=%str(out=dx_tmp60a nopct norow nocol))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get TP FP FN TN*/<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp60b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp60a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=1 and TrueMS=1 then do&#59 theVar='TP'&#59 obs=1&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=1and TrueMS=0 then do&#59 theVar='FP'&#59 obs=2&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=0 and TrueMS=1 then do&#59 theVar='FN'&#59 obs=3&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=0 and TrueMS=0 then do&#59 theVar='TN'&#59 obs=4&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep theVar Count obs&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=&nbsp&nbsp&nbsp&nbspdx_tmp60b, sorter=obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp%transpose(data=dx_tmp60b, target=dx_tmp60, rowhead=,colhead=theVar, contents=count)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbsptitle \"Sensitivity\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere trueMS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS /  binomial (level=\"1\" all)  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls =dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Sensitivity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSen upperCl =UpSen&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp63&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"Specificity\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere trueMS=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS /  binomial (level=\"0\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Specificity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSpe upperCl =UpSpe&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp64&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"PPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere testMS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables trueMS /  binomial (level=\"1\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=PPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowPPV upperCl =UpPPV&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp65&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"NPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere testMS=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables trueMS /  binomial (level=\"0\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=NPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowNPV upperCl =UpNPV&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp66&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS *trueMS /  agree noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output simplekappa = dx_tmp61a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = Kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (firstobs=3 obs=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = LowKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61d&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (firstobs=4 obs=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = HighKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbspThe following also produces sensitivity table (ctable), but there is no 95%CI.*/<br/>/*&nbsp&nbsp&nbsp&nbspproc logistic data=dx_tmp10&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODEL TrueMS (EVENT='1')=TestMS / ctable pprob= 0.5&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsprun&#59*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*Youden's J index*/<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp67&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge  dx_tmp61b dx_tmp61c dx_tmp61d &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let theMark=&nHDX.&nMSBDX.&nDPDx.&hDXYears.&MSBDxYears.&DPDxYears&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &theMark&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp68&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest =symget('theMark')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp60 dx_tmp63 dx_tmp64 dx_tmp65 dx_tmp66 dx_tmp67&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J = Sensitivity + Specificity -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Lower=lowSen + lowSpe -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Upper=upSen+UpSpe-1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients=400&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata remotet.TheResults&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset remotet.TheResults dx_tmp68&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete dx_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/><br/><br/>%mend dx_MS&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=3, nDPDx=, hDxYears=1, MSBDxYears=1,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=4, nDPDx=, hDxYears=1, MSBDxYears=1,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=5, nDPDx=, hDxYears=1, MSBDxYears=1,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=3, nDPDx=1, hDxYears=1, MSBDxYears=1,DPDxYears=1)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=3, nDPDx=, hDxYears=2, MSBDxYears=2,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=4, nDPDx=, hDxYears=2, MSBDxYears=2,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=5, nDPDx=, hDxYears=2, MSBDxYears=2,&nbsp&nbsp&nbsp&nbspDPDxYears=)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=2, nMSBDx=3, nDPDx=1, hDxYears=2, MSBDxYears=2,DPDxYears=2)&#59<br/>%dx_MS(HospDxDate=Dschg_date, theDisease=MS, theAge=,<br/>nHDx=1, nMSBDx=5, nDPDx=, hDxYears=2, MSBDxYears=2,DPDxYears=)&#59<br/><br/>/*finally add the last condition >=3 from any src within 1 year*/<br/>%caseDef(Data=d1, subjectIDCol=key_hsn, dxDateCol=dxDate, ndx=3, dxyears=1, target=dx_tmp9,  debug=)&#59/*in protocol dxYears=100*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count the combinations*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=dx_tmp9,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=remotes.a90_validationpts,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=dx_tmp10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.trueMS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.key_hsn='', 0, 1) as testMS),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp%freq(data=dx_tmp10, table=testMS * trueMS, option=%str(out=dx_tmp60a nopct norow nocol))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get TP FP FN TN*/<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp60b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp60a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=1 and TrueMS=1 then do&#59 theVar='TP'&#59 obs=1&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=1and TrueMS=0 then do&#59 theVar='FP'&#59 obs=2&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=0 and TrueMS=1 then do&#59 theVar='FN'&#59 obs=3&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif testMS=0 and TrueMS=0 then do&#59 theVar='TN'&#59 obs=4&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep theVar Count obs&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=&nbsp&nbsp&nbsp&nbspdx_tmp60b, sorter=obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp%transpose(data=dx_tmp60b, target=dx_tmp60, rowhead=,colhead=theVar, contents=count)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"Sensitivity\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere trueMS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS /  binomial (level=\"1\" all)  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls =dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Sensitivity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSen upperCl =UpSen&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp63&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"Specificity\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere trueMS=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS /  binomial (level=\"0\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Specificity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSpe upperCl =UpSpe&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp64&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"PPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere testMS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables trueMS /  binomial (level=\"1\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=PPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowPPV upperCl =UpPPV&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp65&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsptitle \"NPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere testMS=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables trueMS /  binomial (level=\"0\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = dx_tmp61a binomialCls = dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=NPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp62a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowNPV upperCl =UpNPV&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp66&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp61 dx_tmp62&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=dx_tmp10 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables testMS *trueMS /  agree noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output simplekappa = dx_tmp61a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = Kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (firstobs=3 obs=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = LowKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp61d&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset dx_tmp61a (firstobs=4 obs=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = HighKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp67&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge  dx_tmp61b dx_tmp61c dx_tmp61d&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbspThe following also produces sensitivity table (ctable), but there is no 95%CI.*/<br/>/*&nbsp&nbsp&nbsp&nbspproc logistic data=dx_tmp10&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODEL TrueMS (EVENT='1')=TestMS / ctable pprob= 0.5&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsprun&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp%let theMark=3Any1Y&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &theMark&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata dx_tmp68&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest =symget('theMark')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge dx_tmp60 dx_tmp63 dx_tmp64 dx_tmp65 dx_tmp66 dx_tmp67&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J = Sensitivity + Specificity -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Lower=lowSen + lowSpe -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Upper=upSen+UpSpe-1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients=400&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata remotet.TheResults&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset remotet.TheResults dx_tmp68&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCreateTime=datetime()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createTime datetime20.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete dx_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-s38dwHrkpieg4b6c"}]},{"idx":"CodeTask-hvi9XYqD84aAsgre","name":"c_index","NodeDescription":"///t<br/>///s<br/>/*c index<br/>The macros are at <br/>P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\cstatmacs.v1.sas<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\cstatmacs.v1.sas\"&#59<br/><br/>/*%macro CTEST(probsxy,detail,predx,predxy,outxy)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxtri_pupc_m_50,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.vxtri_pinteraction_m_50,<br/>&nbsp&nbsp&nbsp&nbsptarget=dsname,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adherence_adjust, t1.p as p1, t2.p as p2),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>%CTEST(dsname,1,p1,p2,adherence_adjust)&#59 <br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-s38dwHrkpieg4b6c"}]},{"idx":"CodeTask-EHzwdNZFPSQGz5yW","name":"VXT_IDIcNRI","NodeDescription":"///t<br/>///s<br/>/*IDI and CNRI*/<br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxtri_pupc_m_50,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.vxtri_pinteraction_m_50,<br/>&nbsp&nbsp&nbsp&nbsptarget=dsname,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adherence_adjust, t1.p as p1, t2.p as p2),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>%IDIMACRO(DSNAME,1,adherence_adjust,p1,p2)&#59<br/>%CONTNRI(DSNAME,1,adherence_adjust,p1,p2)&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-s38dwHrkpieg4b6c"}]}],"custparents":[{"idx":"CodeTask-U7RLQ3SBK85CxfFB"},{"idx":"MYd427a76c-e861-4a8c-b081-3fa60030369a"}]}]},{"idx":"MYdf94e949-9018-4ae4-bbf9-cc4525f3a4ae","name":"Matched analysis","custparents":[{"idx":"MY03296ed5-0f6a-40f8-a118-569c861fe335"}],"children":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6","name":"VXN_FS PS matching","NodeDescription":"///t<br/>///s<br/>/*VXN PS matching*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-Z6vsD95pYbwlYlSz","name":"VXN_FS PS Expo Match Exposure","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching,  , PS by exposure, matching by expsoure*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/><br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100=docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100 =docN_Visits_FS/100&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/><br/>/*VXN_FS2-3, propensity score matching. Changed, PS score based on exposure status, and match is based on exposure*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 25*/<br/>ods results on&#59<br/><br/><br/><br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =UPCIndexF_CatN&UPCCutOff&#59<br/><br/>%MatchByPS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_&thisExposureVar.,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_&thisExposureVar._DATA_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_&thisExposureVar._DATA_EXP.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_&thisExposureVar._DATA_EXP.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_&thisExposureVar._Rpt_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-vKwfJeExCxIBmRmG","name":"VXV_FS matched Logistic_Exp","NodeDescription":"///t<br/>///s<br/>/*VXV_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theData =VXN_FS_UPCINDEXF_CATN50_DATA_EXP&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspDocRepeatID=scan(UCPF1, 1, \":\")&#59<br/>run&#59<br/><br/>data VXV_FS2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num DocRepeatID&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_EXP, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_UPC &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_u_UPC  modelAnova = localt.Type3_50EXP_u_UPC <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_u_UPC&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc genmod data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_UPC&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_M_UPC  modelAnova = localt.Type3_50EXP_M_UPC <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_M_UPC&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.M50EXP_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59*/<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_CMP &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_u_CMP  modelAnova = localt.Type3_50EXP_u_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_u_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_CMP&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_M_CMP  modelAnova = localt.Type3_50EXP_M_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_M_CMP&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_EXP descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_U_CMB &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_u_CMB  modelAnova = localt.Type3_50EXP_u_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_u_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_EXP desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50EXP_M_CMB&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50EXP_M_CMB  modelAnova = localt.Type3_50EXP_M_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50EXP_M_CMB&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50EXP_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-SsBgi79hqzaR3tWv","name":"Stat models for repeated conditional regression","NodeDescription":"///t<br/>///s<br/><br/>%let theXVar = UPCIndexF_CatN50&#59<br/>proc genmod data=VXV_FSR2_EXP &#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocRepeatID match_Num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>/*&nbsp&nbsp&nbsp&nbspstrata match_Num&#59*/<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar  docPayTypeN_FS /dist=binomial link=logit&#59<br/>/*&nbsp&nbsp&nbsp&nbspexact &theXVar /estimate=both&#59*/<br/>&nbsp&nbsp&nbsp&nbspestimate 'UPCindex' UPCIndexF_CatN50 1 /exp &#59<br/>/*&nbsp&nbsp&nbsp&nbspexact UPCIndexF_CatN50 /estimate=both&#59*/<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=DocRepeatID&#59<br/>run&#59<br/><br/>data VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FSR2_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspif adherence_adjust = 1 then time=1&#59<br/>&nbsp&nbsp&nbsp&nbspelse time =2&#59<br/>run&#59<br/><br/>/*check example 64.5 of SAS document Conditional Logistic Regression for m:n Match. <br/>&nbsp&nbsp&nbsp&nbspThe idea is to use proc phreg, with:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) a dummy time term (1 for outcome=1, 2 for outcome=0), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) a discrete logistic model (ties=discrete),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand 3) a strata term (match_num)<br/>*/<br/>ods trace on&#59<br/>ods exclude CensoredSummary&#59<br/>proc phreg data=VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel time*adherence_adjust(0) =  &theXVar /ties=discrete&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbsphazardratio &theXVar /cl=both&#59<br/>run&#59<br/>ods trace off&#59<br/>/*The above produces the same result as the logistic regression model with strata term*/<br/><br/><br/><br/>ods trace on&#59<br/>ods exclude CensoredSummary&#59<br/>proc phreg data=VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel time*adherence_adjust(0) =  &theXVar &covariates/ties=discrete&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbsphazardratio &theXVar /cl=both&#59<br/>run&#59<br/>ods trace off&#59<br/>%beep&#59<br/><br/>/*As the physician characteristics are measured repeatedly, the following is a frailty model, adding the random term DocrepeatedID*/<br/>ods trace on&#59<br/>ods exclude CensoredSummary ClassLevelInfoR&#59<br/>proc phreg data=VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel time*adherence_adjust(0) =  &theXVar &covariates /ties=discrete maxiter=100&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbsphazardratio &theXVar /cl=both&#59<br/>&nbsp&nbsp&nbsp&nbsprandom DocRepeatID&#59<br/>run&#59<br/>ods trace off&#59<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-66Xyb2eTgIinGdeq","name":"Stat2","NodeDescription":"///t<br/>///s<br/>/*As the physician characteristics are measured repeatedly, the following is a frailty model, adding the random term DocrepeatedID*/<br/>Title 'Frailty model'&#59<br/>ods trace on&#59<br/>ods exclude CensoredSummary ClassLevelInfoR&#59<br/>proc phreg data=VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel time*adherence_adjust(0) =  &theXVar &covariates /ties=discrete maxiter=100&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbsphazardratio &theXVar /cl=both&#59<br/>&nbsp&nbsp&nbsp&nbsprandom DocRepeatID&#59<br/>run&#59<br/>ods trace off&#59<br/>Title&#59<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-Pzw8liFgkxbyQl55","name":"Stat3","NodeDescription":"///t<br/>///s<br/>/*As the physician characteristics are measured repeatedly, the following is a frailty model, adding the random term DocrepeatedID*/<br/><br/>Title 'Frailty model'&#59<br/>ods trace on&#59<br/>ods exclude CensoredSummary ClassLevelInfoR&#59<br/>proc phreg data=VXV_FSR2x_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspclass DocRepeatID&#59<br/>&nbsp&nbsp&nbsp&nbspmodel time*adherence_adjust(0) =  &theXVar &covariates /ties=discrete maxiter=100&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbsphazardratio &theXVar /cl=both&#59<br/>&nbsp&nbsp&nbsp&nbsprandom DocRepeatID&#59<br/>run&#59<br/>ods trace off&#59<br/>Title&#59<br/>%beep&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-66Xyb2eTgIinGdeq"}]}],"custparents":[{"idx":"CodeTask-SsBgi79hqzaR3tWv"}]},{"idx":"CodeTask-r2s4rJrO6P8CBQ9j","name":"NRI Survival","NodeDescription":"///t<br/>///s<br/>/*check the NRI for survival analysis<br/>Pencina 2011: extensions of net relcassification improvement calculations to measure usefulness of new biomarkers<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-SsBgi79hqzaR3tWv"}]}],"custparents":[{"idx":"CodeTask-vKwfJeExCxIBmRmG"}]}],"custparents":[{"idx":"CodeTask-Z6vsD95pYbwlYlSz"}]}],"custparents":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]},{"idx":"CodeTask-MhDm6v3S3xuch5pB","name":"VXN_FS_PS outcome Match outcome","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching , PS by outcome, matching by outcome*/<br/><br/><br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/><br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100=docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100 =docN_Visits_FS/100&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/><br/>/*VXN_FS2-3, propensity score matching. PS score not based on exposure status, but on adherence outcome!<br/>&nbsp&nbsp&nbsp&nbspthe match is based also on outcome*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 50*/<br/>ods results on&#59<br/><br/><br/><br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =adherence_adjust&#59<br/><br/>%MatchByPS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_ADH,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_ADH_DATA_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_ADH_DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_ADH_DATA_EXP.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_ADH_DATA_EXP.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_ADH_Rpt_EXP&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_ADH_Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-VMVp7fMW1flUHYWH","name":"VXV_FS matched LogisticOutcome","NodeDescription":"///t<br/>///s<br/>/*VXV_FS matched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theData =VXN_FS_ADH_DATA_EXP&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/><br/>run&#59<br/><br/>data VXV_FS2x_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_ADH&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_ADH, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_UPC &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_U_UPC  modelAnova = localt.Type3_50ADH_U_UPC <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_U_UPC&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/>/*multi model without theVar*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num &#59<br/>&nbsp&nbsp&nbsp&nbspclass qaippeN(ref='1') resitypeN(ref='0') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &covariates /maxiter=500  &#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.M50ADH_M_COV (keep=key_hsn adherence_adjust p) p=p&#59*/<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspclass qaippeN(ref='1') resitypeN(ref='0') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_UPC&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_m_UPC  modelAnova = localt.Type3_50ADH_m_UPC <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_m_UPC&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.M50ADH_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59*/<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_CMP &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_U_CMP  modelAnova = localt.Type3_50ADH_U_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_U_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_CMP&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_m_CMP  modelAnova = localt.Type3_50ADH_m_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_m_CMP&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_ADH descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_U_CMB &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_U_CMB  modelAnova = localt.Type3_50ADH_U_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_U_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_ADH desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0')  qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50ADH_M_CMB&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50ADH_m_CMB  modelAnova = localt.Type3_50ADH_m_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50ADH_m_CMB&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50ADH_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-MhDm6v3S3xuch5pB"}]}],"custparents":[{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]},{"idx":"CodeTask-GeKgpf61zi1a5WjA","name":"VXN FS PS Outcome Match Exposure","NodeDescription":"///t<br/>///s<br/>/*VXN_FS_PropensityScoreMatching,  , PS by outcome, matching by expsore*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/><br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100=docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100 =docN_Visits_FS/100&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXN_FS2-3, propensity score matching. Changed, PS score not based on exposure status, but on adherence outcome!<br/>&nbsp&nbsp&nbsp&nbspHowever, the match is based on exposure*/<br/>/*VXN_FS1a, match by UPCIndexFS cutoff = 25*/<br/>ods results on&#59<br/><br/>%let UPCCutOff=50&#59<br/>data VXN_FS2_&UPCCutOff&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_CatN&UPCCutOff=0&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_CatN&UPCCutOff=1&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_CatN&UPCCutOff) || strip(CompFS)&#59<br/>run&#59<br/><br/>%let thisExposureVar =UPCIndexF_CatN&UPCCutOff&#59<br/><br/>%MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=VXN_FS2_&UPCCutOff,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=&thisExposureVar,<br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=ADherence_adjust,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/>&nbsp&nbsp&nbsp&nbspmatchN=1,<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn ADherence_adjust &thisExposureVar age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%quote(&thisExposureVar  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%quote(&thisExposureVar  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%quote(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= 0.2),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%quote(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXN_FS3_&thisExposureVar.,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=&psVars &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>)&#59<br/><br/>data VXN_FS_&thisExposureVar._DATA_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._DATA&#59<br/>Run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXN_FS_&thisExposureVar._DATA_OCM.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXN_FS_&thisExposureVar._DATA_OCM.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>data localt.VXN_FS_&thisExposureVar._Rpt_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXN_FS3_&thisExposureVar._Report&#59<br/>Run&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-XcddnTW7jjEpu9Lr","name":"MatchByPS_Outcome","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>copy MatchByOutcomePS, getPSScore_part1_outcome, and getPSSCore_Part3 to mymacros<br/><br/>*/<br/><br/>/*Propensity score matching, PS score by outcome<br/>&nbsp&nbsp&nbsp&nbspthis part is achieved by 3 macros, each as a step for PS matching<br/>&nbsp&nbsp&nbsp&nbspstep 1. calculate the propensity score (logit_ps, and ps). This part is done by a logistic model (%getPSScore_part1)<br/>&nbsp&nbsp&nbsp&nbspstep2. matching the expose/control group by certain vars, e.g., age within 1 year, same sex, entrydate within 1 year, ps score<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(%getPSScore_part2)<br/>&nbsp&nbsp&nbsp&nbspstep3. compare the standard diff of means between matched and unmatched method (%getPSScore_part3)<br/>example:<br/>%MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5,<br/><br/>&nbsp&nbsp&nbsp&nbspmatchN=5, (1 exposure matching 5 controls)<br/>&nbsp&nbsp&nbsp&nbspcapliper=0.2,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = key_hsn var_CMEPF age sex_desc logit_ps entrydate,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%str(var_CMEPF  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%str(var_CMEPF  = 0),<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.age-t2.age) <=1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.sex_desc = t2.sex_desc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.EntryDate-t2.EntryDate) <=365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp|<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspabs(t1.logit_ps - t2.logit_ps) <= &caliper<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsppsdiff=psdiff,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=%str(,abs(t1.logit_ps-t2.logit_ps) as psDiff),<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=1,<br/><br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2,<br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbspthePSVars= <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>)&#59<br/><br/><br/>*/<br/><br/><br/>%macro MatchByOutcomePS(<br/>&nbsp&nbsp&nbsp&nbspdata=,<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=,<br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=,<br/>&nbsp&nbsp&nbsp&nbspmatchN=,<br/>&nbsp&nbsp&nbsp&nbspcapliper=,<br/>&nbsp&nbsp&nbsp&nbspkeepVarsForPart2 = ,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=,<br/>&nbsp&nbsp&nbsp&nbspControlCondition=,<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 =,<br/>&nbsp&nbsp&nbsp&nbsppsdiff=,<br/>&nbsp&nbsp&nbsp&nbsppsdiffTermForPart2=,<br/>&nbsp&nbsp&nbsp&nbspnoreplaceForPart2=,<br/>&nbsp&nbsp&nbsp&nbsptarget=,<br/>&nbsp&nbsp&nbsp&nbspdebug=,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=<br/>)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theExposureVar  trimPCT matchN capliper keepVarsForPart2 exposeCondition ControlCondition<br/>&nbsp&nbsp&nbsp&nbspConditionsForPart2 psdiff psdiffTermForPart2 noreplaceForPart2 target debug thePSVars theOutcomeVar<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%getPSScore_part1_outcome(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&data, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=&theExposureVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheOutcomeVar=&theOutcomeVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrimPCT=&trimPCT, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=&thePSVars, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=MatchByOutcomePS_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%GetPSScore_Part2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=MatchByOutcomePS_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target._data, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmatchN=&matchN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcapliper=&capliper,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep=&keepVarsForPart2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=&exposeCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=&ControlCondition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspconditions=%str(&ConditionsForPart2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppsdiff=&psdiff,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppsdiffTerm=%str(&psdiffTermForPart2),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnoreplace=&noreplaceForPart2<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&target._data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=&exposeCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=&ControlCondition,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=&theExposureVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=&thePSVars,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target._report,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete MatchByOutcomePS_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend MatchByOutcomePS&#59<br/><br/><br/><br/><br/>/*get propensity scrore by outcome, trim observations if at the upper/lower n percentile of ps score, or if the ps score does not overlap <br/>&nbsp&nbsp&nbsp&nbspwith the opposit group<br/>example:<br/>%getPSScore_part1(<br/>&nbsp&nbsp&nbsp&nbspdata=VZC3, <br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF, <br/>&nbsp&nbsp&nbsp&nbsptheOutcomeVar=adherence_adjust,<br/>&nbsp&nbsp&nbsp&nbsptrimPCT=5, <br/>&nbsp&nbsp&nbsp&nbspthePSVars=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES CC_Pre365_HTN CAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>)&#59<br/><br/>*/<br/>%macro getPSScore_part1_outcome(data=, theExposureVar=, theOutcomeVar=, trimPCT=, thePSVars=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local min_c1 max_c1 min_c0 max_c0 data theExposureVar trimPCT thePSVars<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppercent_trim_L percent_trim_u debug target&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step1. Calculate the propensity score*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=&data descending&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &theOutcomeVar = &thePSVars &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out= getPSScore_part1_tmp1 p=ps xbeta= logit_ps&#59 /*get the probability and logit of probability*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step2. Grouped by the exposure status, sort the ps values in order.*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sort data=getPSScore_part1_tmp1 out=getPSScore_part1_tmp2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetPSScore_part1_orderN + 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.&theExposureVar then getPSScore_part1_orderN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetPSScore_part1_colC='c' || strip (&theExposureVar)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%transpose(data = getPSScore_part1_tmp2, target=getPSScore_part1_tmp2b, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprowhead=getPSScore_part1_orderN, colhead=getPSScore_part1_colC, contents=ps)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core before match, before trimming\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSScore_part1_tmp2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c0 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c1 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step3. trim the min and max n% of cases*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let percent_trim_L=&trimPCT&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let percent_trim_u=%eval(99-&percent_trim_L)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc rank data=getPSScore_part1_tmp2 groups=100 out=getPSScore_part1_tmp3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspranks ps_percentile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere  ps_percentile between &percent_trim_L and  &percent_trim_u&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*step4. further trim those not in overlapping groups, i.e., <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) get the max ps value between the min ps of the exposure groups,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) get the min ps value between the max ps of the exposure groups,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3) only keep those with a ps value within the ps range of 1) and 2)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the min and max*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc univariate data=getPSScore_part1_tmp3 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      by getPSScore_part1_colC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      var ps&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp      output out=getPSScore_part1_tmp4a min=min max=max&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSScore_part1_tmp4a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif getPSScore_part1_colC='c1' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"min_c1\",min)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"max_c1\",max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"min_c0\",min)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput(\"max_c0\",max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSScore_part1_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp      set getPSScore_part1_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp      if ps >= max(&min_c1, &min_c0) and ps <= min(&max_c1, &max_c0)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   data &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp      set getPSScore_part1_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  drop getPSScore_part1_orderN getPSScore_part1_colC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*from tmp2b, get those with an getPSScore_part1_orderN in target*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSScore_part1_tmp2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=getPSScore_part1_tmp5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSScore_part1_tmp4b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=getPSScore_part1_orderN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   /*make histograms again after trimming*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core before match, after trimming\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSScore_part1_tmp4b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c0 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram c1 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getPSScore_part1_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend getPSScore_part1_outcome&#59<br/><br/><br/>/*<br/>getPSSCore_Part3, compare the standard diff of PS var means by matched/unmatched method<br/>example:<br/><br/>%getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbspdata=test12,<br/>&nbsp&nbsp&nbsp&nbspexposeCondition=%str(var_CMEPF  = 1),<br/>&nbsp&nbsp&nbsp&nbspControlCondition=%str(var_CMEPF  = 0),<br/>&nbsp&nbsp&nbsp&nbsptheExposureVar=var_CMEPF,<br/>&nbsp&nbsp&nbsp&nbspthePSVars=CC_Pre365_DIABETES CC_Pre365_HTN CAMH_NPD_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365 CC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO,<br/>&nbsp&nbsp&nbsp&nbsptarget=test15,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>*/<br/><br/>%macro getPSSCore_Part3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspexposeCondition=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspControlCondition=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheExposureVar=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePSVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data exposeCondition ControlCondition theExposureVar thePSVars target debug&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*make a histogram to compare the ps score in the exposed and matched group*/<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*split the data into exposure and nonexposure*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a1 getPSSCore_Part3_tmp0a2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &theExposureVar = 1 then output getPSSCore_Part3_tmp0a1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &theExposureVar = 0 then output getPSSCore_Part3_tmp0a2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=getPSSCore_Part3_tmp0a1, sorter=ps)&#59%sort(data=getPSSCore_Part3_tmp0a2, sorter=ps)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a3&#59set getPSSCore_Part3_tmp0a1&#59rename ps=ps1&#59keep ps&#59run&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a4&#59set getPSSCore_Part3_tmp0a2&#59rename ps=ps0&#59keep ps&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp0a3 getPSSCore_Part3_tmp0a4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Core after match\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=getPSSCore_Part3_tmp0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram ps1 / transparency=0.75 fillattrs=(color=red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=0\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram ps0 /  transparency=0.75 fillattrs=(color=blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"&theExposureVar=1\" scale=count binwidth=0.025&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(0 to 1 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the ps difference and std before and after matching*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make an empty target set*/&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59delete&#59 run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Compare the balance in covariates between the exposed and the unexposed<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the matched group. Ref. Austin (2011)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBasically, the idea is to compare the standard difference between the exposed and the control group<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe standard difference is about the mean of the PSVar. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe formulas involved in this macro only suite for vars (e.g., CC_Pre365_DIABETES) having a dichotomas <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvalue (e.g., 1 or 0). For continuous variables, other formulas may apply (Ref. Austin 2011). &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 1. set weight for unmatched analysis&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2. set weight for matched analysis&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2a. counting the number of match_num&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSSCore_Part3_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSSCore_Part3_tmp2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(match_num, count(Match_num)-1 as MatchCNT), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*count(Match_num) includes the exposed case, which should be deducted */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGroupby=%str(Match_num)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 2b. attach the MatchCNT back to getPSSCore_Part3_tmp1. For exposed cases, weight_matched =1, otherwise = inverse of matched controls&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getPSSCore_Part3_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=getPSSCore_Part3_tmp2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getPSSCore_Part3_tmp2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1 as Weight_unmatched,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(%str(&exposeCondition), 1, 1/(t2.MatchCNT)) as Weight_matched),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left join,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=Match_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3. estimate the stdDif&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dlmt=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do %until(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%length(%scan(&thePSVars, &i &dlmt))=0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the current element in the string*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thePSVar=%scan(&thePSVars, &i &dlmt)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3.a get means of &thePSVar by exposure group&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=getPSSCore_Part3_tmp2, sorter=  &theExposureVar)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc means mean data=getPSSCore_Part3_tmp2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspweight Weight_matched&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=getPSSCore_Part3_tmp3a1a (keep= &theExposureVar mean) mean=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   proc means mean data=getPSSCore_Part3_tmp2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar &thePSVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspweight Weight_unmatched&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby &theExposureVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput out=getPSSCore_Part3_tmp3a1b (keep= &theExposureVar mean) mean=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 3.b put means of &theExposureVar exposure and control groups into separate sets&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &controlCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_control=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_control&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &controlCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_control=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_control&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &exposeCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_expose=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_expose&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getPSSCore_Part3_tmp3a1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &exposeCondition&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmean_expose=mean&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep mean_expose&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_matched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b3a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength disease $40.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b1a (obs=1) getPSSCore_Part3_tmp3b2a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd_matched=(mean_expose - mean_control) / sqrt((mean_expose * (1-mean_expose) + mean_control * (1-mean_control)) /2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdiff_matched=abs(d_matched)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdisease=upcase(strip(symget('thePSVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcategory='matched'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep d_matched stdiff_matched disease &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Weight_unmatched*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength disease $40. &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b1b (obs=1) getPSSCore_Part3_tmp3b2b (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd_unmatched=(mean_expose - mean_control) / sqrt((mean_expose * (1-mean_expose) + mean_control * (1-mean_control)) /2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdiff_unmatched=abs(d_unmatched)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdisease=upcase(strip(symget('thePSVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep d_unmatched stdiff_unmatched disease &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getPSSCore_Part3_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge getPSSCore_Part3_tmp3b3a getPSSCore_Part3_tmp3b3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby disease&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 4. append stddiff of &thePSVar to the final table&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target getPSSCore_Part3_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif d_unmatched=. then d_unmatched=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif d_matched=. then d_matched=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i =%eval(&i+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> 5. Plot ps diff<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*make histograms on # of cases by exposure group*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PS Diff before and after match\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc sgplot data=&target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphbar disease  / response=d_unmatched transparency=0.75 fillattrs=(color=Blue)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"unmatched\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcategoryorder=respdesc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphbar disease  / response=d_matched transparency=0.75 fillattrs=(color=Red)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplegendlabel=\"matched\"  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxaxis label='propensity score' values=(-.3 to .3 by 0.1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspyaxis label='count' integer&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeylegend / location = outside position=bottom&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getPSSCore_Part3_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getPSSCore_Part3&#59<br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"},{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]},{"idx":"CodeTask-6e52I67wL2YkUrUf","name":"VXV_FS matched LogisticOutcomex","NodeDescription":"///t<br/>///s<br/>/*VXV_FS Unmatched logistic regression, Adherece_adjusted by COMPFS vs UPCIndxF vs CombTerm_FS*/<br/><br/>data _null_&#59run&#59<br/>%let theData =VXN_FS_UPCINDEXF_CATN50_DATA_OCM&#59<br/><br/>/*VXV_FS0. Prepare source files.*/<br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\&theData..zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theData..sas7bdat)<br/>)&#59<br/>/*check the upc score*/<br/>%print(data=&theData)&#59<br/>/*Define covariates*/<br/>%let covariates = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage   QAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>/*VXV_FS2. Treat the missing values.*/<br/>data VXV_FS2_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset &thedata&#59<br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=6&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=1 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'H' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF_CatN50=0 then &nbsp&nbsp&nbsp&nbspCombTerm_FS = 'L' || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>run&#59<br/><br/>data VXV_FS2x_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspset VXV_FS2_OCM&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adherence_adjust UPCIndexF_CatN50 COMPFS CombTerm_FS &covariates match_Num&#59<br/>run&#59<br/>%sort(data=VXV_FS2x_OCM, sorter=match_num descending adherence_adjust)&#59<br/><br/>/*1.UPCIndex as theVar*/<br/>%macro doUniv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_UPC &#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_UPC (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/>/*multi model without theVar*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>ods trace on&#59<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num &#59<br/>&nbsp&nbsp&nbsp&nbspclass qaippeN(ref='1') resitypeN(ref='0')/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &covariates /maxiter=500  &#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.M50OCMX_M_COV (keep=key_hsn adherence_adjust p) p=p&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_M_COV  modelAnova = localt.Type3_50OCMX_M_COV <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_M_COV&#59<br/>run&#59<br/>ods trace off&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = UPCIndexF_CatN50&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspclass qaippeN(ref='1') resitypeN(ref='0')/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_UPC&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_M_UPC  modelAnova = localt.Type3_50OCMX_M_UPC <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_M_UPC&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.M50OCMX_M_UPC (keep=key_hsn adherence_adjust p) p=p&#59*/<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>/*2.CompCOC as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = COMPFS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0')  qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_CMP &#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_U_CMP  modelAnova = localt.Type3_50OCMX_U_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_U_CMP&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_CMP (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = COMPFS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') qaippeN(ref='1') resitypeN(ref='0') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_CMP&#59*/<br/>&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_M_CMP  modelAnova = localt.Type3_50OCMX_M_CMP <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_M_CMP&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_M_CMP (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/><br/>/*3.Combined as theVar*/<br/>/*univ*/<br/>%macro doUniv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>ods results off&#59<br/>proc logistic data=VXV_FS2x_OCM descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0') /*sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN')*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_U_CMB &#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_U_CMB  modelAnova = localt.Type3_50OCMX_U_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_U_CMB&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_U_CMB (keep=key_hsn adherence_adjust p) p=p&#59 <br/>run&#59<br/>ods results on&#59<br/>%mend doUniv&#59<br/>%doUniv&#59<br/><br/><br/>/*multi model  theVar and covariates*/<br/>%macro doMultiv&#59<br/>%let  theXVar = CombTerm_FS&#59<br/>/*ods results off&#59*/<br/>proc logistic data=VXV_FS2x_OCM desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass  CombTerm_FS (ref='L0')  qaippeN(ref='1') resitypeN(ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata match_Num&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59<br/>&nbsp&nbsp&nbsp&nbsp%if &theXVar = CombTerm_FS %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*H0=1 0 0, H1=0 1 0, L1=0 0 1 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs Lowe UPCI non COMPCOC, H1 vs L0\" CombTerm_FS 0 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI, COMPCOC vs non COMPCOC, L1 vs L0\" CombTerm_FS 0 0 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"High UPCI, COMPCOC vs non COMPCOC, H1 vs H0\" CombTerm_FS -1 1 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"COMPCOC, High UPCI vs low UPCI, H1 vs L1\" CombTerm_FS 0 1 -1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NonCOMPCOC, High UPCI vs low UPCI, H0 vs L0\" CombTerm_FS 1 0 0 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Low UPCI but COMPCOC vs High UPCI but non-COMPCOC , L1 vs H0\" CombTerm_FS -1 0 1 /exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est50OCMX_M_CMB&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output estimates =localt.Est_50OCMX_m_CMB  modelAnova = localt.Type3_50OCMX_m_CMB <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspparameterEstimates = localt.Param_50OCMX_m_CMB&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m50OCMX_M_CMB (keep=key_hsn adherence_adjust p) p=p&#59 */<br/>run&#59<br/>/*ods results on&#59*/<br/>%mend doMultiv&#59<br/>%doMultiv&#59<br/><br/><br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-d7EaYXbksOZdjCeo","name":"! Q VXV","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>1. Why err in ps part 3, why there are values like 2.xxx which is greater than 1<br/><br/>2. Add a ps by outcome and match also by outcome. check the status<br/>Done<br/><br/><br/>3. using macro to calculate c-index?<br/><br/>4. It is extremely slow to get the output pred for the conditional logistic model. <br/>&nbsp&nbsp&nbsp&nbspNo solutions for now.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMannually it is impossible as there is no intercept, and cannot calculate the xbeta (expeced logit or Y ) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp?? other solutions?<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]},{"idx":"CodeTask-JhIK7xhV4MxYj2hF","name":"tryIDINRI","NodeDescription":"///t<br/>///s<br/><br/> <br/>%include \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\SAS code\\reclass.macros.v4.sas\"&#59<br/><br/><br/>/*proc logistic data=VXV_FS2x desc&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspstrata match_Num&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar &covariates /maxiter=500  &#59*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate \"&theXVar\" &theXVar 1/exp cl&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspods output estimates =_tmp2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=localt.m1_OCM (keep=key_hsn adherence_adjust prob_m1_OCM) p=prob_m1_OCM&#59*/<br/>/*run&#59*/<br/>/*%beep&#59*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.M50exp_M_UPC,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.M50exp_M_CMP,<br/>&nbsp&nbsp&nbsp&nbsptarget=_tmpxx, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adherence_adjust, t1.p as m0, t2.p as m1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.p ne . and t2.p ne .)<br/>)&#59<br/><br/>ods results on&#59<br/>title 'M0 vs m1'&#59<br/>%NRICAT(_tmpxx, 1, adherence_adjust, m0, m1, 2, .5)&#59<br/>%CONTNRI(_tmpxx,1,adherence_adjust,m0, m1)&#59<br/>%IDIMacro(_tmpxx, 1, adherence_adjust, m0, m1)&#59<br/>/*weired IDI results*/<br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-FEFHiRSNoCULoUBu","name":"Adapted (simplified IDI NRI)","NodeDescription":"///t<br/>///s<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxtri_pupc_m_50,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.vxtri_pinteraction_m_50,<br/>&nbsp&nbsp&nbsp&nbsptarget=dsname,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adherence_adjust, t1.p as p1, t2.p as p2),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>%IDIMACRO(DSNAME,1,adherence_adjust,p1,p2)&#59<br/>%CONTNRI(DSNAME,1,adherence_adjust,p1,p2)&#59<br/><br/>%macro IDIMACRO(DSNAME,DETAIL,OUT01,PROB1,PROB2)&#59<br/>*  Macro to compute difference in Yates slopes or<br/>     integrated discrimination improvement (IDI) from Pencina, 2007&#59<br/><br/>*  Variables:<br/>*  DSNAME = dataset name&#59<br/>*  DETAIL = 1 or 2 for limited printout, 0 for none&#59<br/>*  OUT01 = outcome variable (coded 0,1) (if 1,2 alter signs)&#59<br/>*  PROB1 = probability for model 1&#59<br/>*  PROB2 = probability for model 2&#59<br/><br/>data ididat&#59 set &dsname&#59<br/>diffprob=&prob2-&prob1&#59<br/>if &prob1>. and &prob2>.&#59<br/>run&#59<br/><br/>%if &detail<2 %then %do&#59<br/>/*ods listing exclude all&#59*/<br/>/*ods html exclude all&#59*/<br/>%end&#59<br/>ods output TTests=tstats&#59<br/>ods output Statistics=unistats&#59<br/>proc ttest data=ididat&#59<br/>class &out01&#59<br/>var &prob1 &prob2 diffprob&#59<br/>title2 \"Test of Difference in Yates Slope (IDI)\"&#59<br/>run&#59<br/><br/>data idi1&#59 set unistats end=eof&#59<br/>retain yates1 yse1 ycil1 yciu1 yates2 yse2 ycil2 yciu2<br/>       diffcase dcasese dcasecil dcaseciu diffcont dcontse dcontcil dcontciu<br/>       idi idicil idiciu&#59<br/>* Note: Yates slopes are negative since outcome coded 0,1&#59<br/>* And CIs are reversed&#59<br/>if _n_=3 then do&#59<br/>  yates1=-Mean&#59<br/>  yse1=StdErr&#59<br/>  ycil1=-UpperCLMean&#59<br/>  yciu1=-LowerCLMean&#59<br/>end&#59<br/>else if _n_=6 then do&#59<br/>  yates2=-Mean&#59<br/>  yse2=StdErr&#59<br/>  ycil2=-UpperCLMean&#59<br/>  yciu2=-LowerCLMean&#59<br/>end&#59<br/>else if _n_=8 then do&#59<br/>  diffcase=Mean&#59<br/>  dcasese=StdErr&#59<br/>  dcasecil=LowerCLMean&#59<br/>  dcaseciu=UpperCLMean&#59<br/>end&#59<br/>else if _n_=7 then do&#59<br/>  diffcont=Mean&#59<br/>  dcontse=StdErr&#59<br/>  dcontcil=LowerCLMean&#59<br/>  dcontciu=UpperCLMean&#59<br/>end&#59<br/>else if _n_=9 then do&#59<br/>  idi=-Mean&#59<br/>  idise=StdErr&#59<br/>  idicil=-UpperCLMean&#59<br/>  idiciu=-LowerCLMean&#59<br/>end&#59<br/>if eof then do&#59<br/>   rel_idi=yates2/yates1 - 1&#59<br/>   * Compute normal zscore based on Pencina&#59<br/>   normse=sqrt((dcasese)**2 +(dcontse)**2)&#59<br/>   if normse>0 then zidi=idi/normse&#59<br/>   p2idi=2*(1-probnorm(abs(zidi)))&#59<br/>   output&#59<br/>end&#59<br/>keep yates1 yse1 ycil1 yciu1 yates2 yse2 ycil2 yciu2<br/>     diffcase dcasese dcasecil dcaseciu diffcont dcontse dcontcil dcontciu<br/>     idi idise idicil idiciu rel_idi normse zidi p2idi&#59<br/>run&#59<br/><br/>data idi2&#59 set tstats end=eof&#59<br/>if _n_=6 then do&#59<br/>  idit=-tValue&#59<br/>  idip=Probt&#59<br/>  output&#59<br/>  keep idit idip&#59<br/>end&#59<br/><br/>data _idi_&#59 merge idi1 idi2&#59<br/>run&#59<br/>/*ods listing exclude none&#59*/<br/>/*ods html exclude none&#59*/<br/>%if &detail>0 %then %do&#59<br/>proc print data=_idi_&#59<br/>run&#59<br/>%end&#59<br/>title2&#59 run&#59<br/><br/>* Usage:<br/>* %idimacro(probs,1,outxy,pdx,pdxy,outxy)&#59<br/>%mend IDIMACRO&#59<br/><br/>****************************************************************&#59<br/><br/>%macro CONTNRI(DSNAME,DETAIL,STATVAR,PROB1,PROB2)&#59<br/>* Macro to compute NRI with any up or down (no categories)&#59 <br/>* Control output of frequency tables and means below&#59<br/>*  Variables:<br/>*  DSNAME = dataset name&#59<br/>*  DETAIL = 2 for detailed printout, 1 for limited, 0 for none&#59<br/>*  STATVAR = outcome variable (coded 0,1)&#59<br/>*  PROB1 = probability for model 1&#59<br/>*  PROB2 = probability for model 2&#59<br/><br/>title2 Test of Continuous NRI for &PROB2 vs &PROB1 &#59<br/><br/>data nri1&#59 set &dsname&#59<br/>* compute diffs in probs&#59<br/>stat=&STATVAR&#59<br/>prob1=&PROB1&#59<br/>prob2=&PROB2&#59<br/>diffp=prob2-prob1&#59<br/>if prob1>. and prob2>.&#59<br/><br/>if prob2>prob1 then disc=1&#59<br/>  else if prob2=prob1 then disc=0&#59<br/>  else if prob2<prob1 then disc=-1&#59<br/>run&#59<br/><br/>*** Control output as needed ***&#59<br/>%if &detail=2 %then %do&#59<br/>proc means data=nri1 n sum mean median stddev min max&#59<br/>var prob1 prob2 diffp disc stat&#59<br/>run&#59<br/>%end&#59<br/><br/>%if &detail=2 %then %do&#59<br/>proc freq data=nri1&#59<br/>tables stat*disc / chisq&#59<br/>run&#59<br/>%end&#59<br/><br/>/*ods listing exclude all&#59*/<br/>/*ods html exclude all&#59*/<br/>ods output CrossTabFreqs=freqs&#59<br/>ods output ChiSq=chisq&#59<br/>run&#59<br/>proc freq data=nri1&#59<br/>tables stat*disc / chisq&#59<br/>run&#59<br/>/*ods listing exclude none&#59*/<br/>/*ods html exclude none&#59*/<br/><br/>data trend&#59 set chisq&#59<br/>* if df=1&#59<br/>if Statistic=\"Mantel-Haenszel Chi-Square\"&#59<br/>chitrend=Value&#59<br/>ptrend=1-probchi(chitrend,1)&#59<br/>keep chitrend ptrend&#59<br/>run&#59<br/><br/>%if &detail=2 %then %do&#59<br/>proc print data=freqs&#59<br/>run&#59<br/>%end&#59<br/><br/>data nri&#59 set freqs end=eof&#59<br/>retain up_case down_case up_contr down_contr ncase ncontr 0&#59<br/>if stat=1 and disc=1 then up_case=RowPercent/100&#59<br/>   else if stat=1 and disc=-1 then down_case=RowPercent/100&#59<br/>   else if stat=0 and disc=1 then up_contr=RowPercent/100&#59<br/>   else if stat=0 and disc=-1 then down_contr=RowPercent/100&#59<br/>* Number of cases and controls is the same for pd and pred&#59<br/>if stat=1 and _type_='10' then ncase=Frequency&#59<br/>   else if stat=0 and _type_='10' then ncontr=Frequency&#59<br/><br/>if eof then do&#59<br/>  %if ncase=0 or ncontr=0 %then %do&#59<br/>     nri=.&#59 znri=.&#59 p2nri=.&#59<br/>     %goto exit&#59<br/>  %end&#59<br/>  ri_case=up_case-down_case&#59<br/>  ri_contr=down_contr-up_contr&#59<br/>  nri=ri_case+ri_contr&#59<br/>  * corrected variance to reflect binomial&#59<br/>  vri_case=4*up_case*(1-up_case)/ncase&#59<br/>  vri_contr=4*up_contr*(1-up_contr)/ncontr&#59<br/>  vnri=vri_case+vri_contr&#59<br/>  senri=sqrt(vnri)&#59<br/>  nricil=nri-1.96*senri&#59<br/>  nriciu=nri+1.96*senri&#59<br/>  if vri_case ne 0 then zri_case=ri_case/sqrt(vri_case)&#59<br/>  if vri_contr ne 0 then zri_contr=ri_contr/sqrt(vri_contr)&#59<br/>  if vnri ne 0 then znri=nri/sqrt(vnri)&#59<br/>  p2ri_case=2*(1-probnorm(abs(zri_case)))&#59<br/>  p2ri_contr=2*(1-probnorm(abs(zri_contr)))&#59<br/>  p2nri=2*(1-probnorm(abs(znri)))&#59<br/>  output&#59<br/>  keep ncase ncontr<br/>       up_case down_case up_contr down_contr<br/>       ri_case ri_contr nri vri_case vri_contr vnri senri nricil nriciu<br/>       zri_case zri_contr znri p2ri_case p2ri_contr p2nri<br/>       &#59<br/>end&#59<br/><br/>data _all_&#59 merge nri trend &#59 <br/>run&#59<br/><br/>%if &detail>0 %then %do&#59<br/>proc print data=_all_&#59<br/>var    ncase ncontr <br/>       up_case down_case up_contr down_contr <br/>       ri_case ri_contr nri vri_case vri_contr vnri senri nricil nriciu<br/>       zri_case zri_contr znri p2ri_case p2ri_contr p2nri<br/>       chitrend ptrend<br/>       &#59<br/>run&#59<br/>%end&#59<br/>title2&#59 run&#59<br/>* Usage:<br/>* %contnri(probs,1,outxy,pdx,pdxy)&#59<br/>%exit: %mend CONTNRI&#59<br/><br/>****************************************************************&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-JhIK7xhV4MxYj2hF"}]}],"custparents":[{"idx":"CodeTask-6e52I67wL2YkUrUf"}]}],"custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"}]},{"idx":"CodeTask-pdEzqWbfe3NzQy7B","name":"Q VXN","NodeDescription":"///t<br/>///s<br/>/*There are much fewer obs in matched cohort. This is because after 1:1 match, the cohort contains all cases adh=1, and matched controls.*/<br/>/*As adh is of minority in the original cohort, the result cohort is of few people*/<br/><br/>/*The MSMatch Macro is a revised one<br/>&nbsp&nbsp&nbsp&nbspThe PS is based on likelihood of outcome (Adherence), not exposure (UCPIndex or CompCOC)<br/>&nbsp&nbsp&nbsp&nbspHowever, the match is based on exposure<br/><br/>&nbsp&nbsp&nbsp&nbspSpecifically, the match for dichotomous UPCIndex(H/L) should be based on different cut off (25, median, 75 quintile)<br/>&nbsp&nbsp&nbsp&nbspThe combined model is based on match by CompCOC (otherwise how to match for multiple levels?)<br/><br/>&nbsp&nbsp&nbsp&nbspThe ps macro is set that the exposure has to be 1 or 0, cannot be characters....<br/><br/><br/>1. if set the UPCINDEX to 25 percentile, 75% of patients will be classified as exposure = 1 (High UPCIndex)<br/>&nbsp&nbsp&nbsp&nbspHowever, as there is only 25% of patients to be matched (no replacement allowed), the eventual matched cohort <br/>&nbsp&nbsp&nbsp&nbspwill only have 50% of the cohort (25% for exp and 25% for matched)<br/><br/>2. It seems that the outcome match is worse than the exposure match<br/><br/>3. Outcome match is to calculate PS based on outcome. However, the match is still using exposed group, <br/>&nbsp&nbsp&nbsp&nbspand matched with unexposed, right?<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-GeKgpf61zi1a5WjA"}]}],"custparents":[{"idx":"MYdf94e949-9018-4ae4-bbf9-cc4525f3a4ae"},{"idx":"CodeTask-wDXjQfBcd6Neqhu6"}]}],"custparents":[{"idx":"CodeTask-mqQWr8kGTH7TzB2R"},{"idx":"MYdf94e949-9018-4ae4-bbf9-cc4525f3a4ae"}]}]}],"NodeDescription":"<p>///t</p><p>t///</p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/lfYUt60Bs8w?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p><p><br></p>"}],"NodeDescription":"<p>///t</p><p>t///</p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/TienlH5YYFA?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>"}],"NodeDescription":"<p>///t </p><p>t///</p>"},{"idx":"CodeTask-pzOsKgUBMFRexTrx","name":"ZZA NFFS Anlayses","NodeDescription":"///t<br/>///s<br/>/*ZZA<br/>*/<br/><br/>/*All statin new users*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/><br/>/*zza1 patient-entrydate*/<br/>%distinct(data=vxa, target=zza1, vars=%str(key_hsn, entryDate))&#59<br/><br/>/*ZZA2. For statin new users (zza1), find statin prescribers within the followup period (365 days since the entryDate)*/<br/>/*ZZA2a. Get all statin claims within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxf.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxf.sas7bdat)<br/>)&#59<br/>/*%print(data=vxf)&#59*/<br/>/*ZZA2b. get a list of entryDate specific doc ID, excluding those of unknown ids or slush numbers*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxf,<br/>&nbsp&nbsp&nbsp&nbspt2=zza1, <br/>&nbsp&nbsp&nbsp&nbsptarget=zza2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_prscr_num as key_doc_num, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(rx_ddddd between t2.Entrydate and t2.EntryDate +364 and docSlushCode = 'N')<br/>)&#59<br/><br/>/*ZZA3. For statin new users (zza1), find physician service providers within the followup period (365 days since the entryDate)*/<br/>/*ZZA3a. Get all service claims of the new statin users within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=zza1, <br/>&nbsp&nbsp&nbsp&nbsptarget=zza3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(dos between t2.Entrydate and t2.EntryDate +364 and docSlushCode = 'N')<br/>)&#59<br/><br/>/*ZZA4. combine ZZA2 and ZZA3 (docs as prescribers/care providers during follow up , specified by entry date)*/<br/>data ZZA4a&#59<br/>&nbsp&nbsp&nbsp&nbspset zza2 &#59<br/>&nbsp&nbsp&nbsp&nbspRole = 'prescriber'&#59 <br/>run&#59<br/>data ZZA4b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZa3&#59<br/>&nbsp&nbsp&nbsp&nbspRole='careprovider'&#59<br/>run&#59<br/>data ZZA4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZA4a ZZA4b&#59<br/>&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>run&#59<br/>%DISTINCT(data=ZZA4, target=ZZA5, vars=%str(key_doc_num, entrydate, Role, cnt))&#59<br/>%transpose(data=ZZA5, target=ZZA6, rowhead=key_doc_num entrydate, colhead=role, contents=cnt)&#59<br/>data localt.ZZA&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZA6&#59<br/>&nbsp&nbsp&nbsp&nbspformat Role $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=1 and careprovid=1 then Role='both'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=1 and careprovid=. then Role='prescriber'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=. and careprovid=1 then Role='careprovider'&#59<br/>&nbsp&nbsp&nbsp&nbspif prescriber=. and careprovid=. then Role='none'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop prescriber careprovid&#59<br/>run&#59<br/>%freq(data=localt.zza, table=Role)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-xSZTFg8HW5n1nVcn","name":"H_FFS Doc","NodeDescription":"///t<br/>///s<br/>/*H For the most freq prescriber, how many are fee-for-service(ffs), how many non-ffs*/<br/>/*Those does not have service claims within the follow up*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_msb.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*Get the prescriber by index date*/<br/>%print(data=localt.g)&#59<br/>%distinct(data=localt.G, target=h1, vars=%str(StatinDoc_FW365, dqdate, monotonic() as ID), filters=%str(statinDoc_Fw365 ne \"\"))&#59<br/><br/>/*for each doc-index, get the MSB claims of the same doc between 1 year before and after the index*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_msb,<br/>&nbsp&nbsp&nbsp&nbsptarget=h2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(*),<br/>&nbsp&nbsp&nbsp&nbspjtype=left, <br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.StatinDoc_Fw365 = t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.dqdate -365 and t1.dqdate +364)<br/>)&#59<br/><br/>/*%vbsZip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=h2.zip, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=h2.sas7bdat, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=*/<br/>/*)&#59*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\h2.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(h2.sas7bdat)*/<br/>/*)&#59*/<br/><br/>/*count the number of claims for each specific doc-index case (# of claims within 2 years around index)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H2,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, count(t1.StatinDoc_Fw365) as N_DocVisits),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate)<br/>)&#59<br/><br/>/*distribution of N_DocVisits by each doc-index case*/<br/>proc univariate data=h3&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram N_DocVisits /normal&#59<br/>run&#59<br/><br/>data h4&#59<br/>&nbsp&nbsp&nbsp&nbspset h3&#59<br/>&nbsp&nbsp&nbsp&nbsprename StatinDoc_Fw365=key_hsn&#59<br/>run&#59<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=h4,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=N_DocVisits,<br/>&nbsp&nbsp&nbsp&nbsptheStats=min max mean std median p25 p50 p75 qrange,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>/*From H2, get the number of doc visits by mode (1 a FFS, others as NFFS)<br/>*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H2,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode, count(t1.StatinDoc_Fw365) as N_DocClaims),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.ID, t1.StatinDoc_Fw365, t1.dqDate, t1.Mode)<br/>)&#59<br/><br/>/*from above, recode the Modes, mode =1 as FFS, others as NFFS*/<br/>data H3b&#59<br/>&nbsp&nbsp&nbsp&nbspset H3a&#59<br/>&nbsp&nbsp&nbsp&nbspif Mode = \"1\" then FFS='FFS1'&#59 else FFS='FFS0'&#59<br/>run&#59<br/><br/>/*sum the doc claims by FFS*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=H3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=h3c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str( t1.StatinDoc_Fw365, t1.FFS, sum(t1.N_DocClaims) as N_DocClaims, count(ID) as Cases),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str( t1.StatinDoc_Fw365,t1.FFS),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str( t1.StatinDoc_Fw365, t1.FFS)<br/>)&#59<br/>/*N_DocClaims / Cases to have mean docClaims */<br/>data H3d&#59<br/>&nbsp&nbsp&nbsp&nbspset h3c&#59<br/>&nbsp&nbsp&nbsp&nbspMean_DocClaims = int(N_DocClaims / Cases)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop N_DocClaims Cases&#59<br/>run&#59<br/>/*transpose to put FFS 1 and 0 at the same row*/<br/>%transpose(data=h3d, target=h3e, RowHead=StatinDoc_Fw365, ColHead=ffs, Contents=Mean_DocClaims, keepAllCol=)&#59<br/>data h3f&#59<br/>&nbsp&nbsp&nbsp&nbspset h3e&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs0=. then ffs0=0&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs1=. then ffs1=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT = int (FFS1/sum(FFS0, FFS1) *100)&#59<br/>run&#59<br/>/*have a histogram of % FFS for each doc*/<br/>proc univariate data=h3f&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram FFSPCT /normal&#59<br/>&nbsp&nbsp&nbsp&nbspods output histogramBins = H3g&#59<br/>run&#59<br/>/*seems that 60% having 99% of their services as FFS. 27% having 3% or less services as FFS. Others are in between<br/>&nbsp&nbsp&nbsp&nbspSeems a good way to identify the FFS physicians<br/>*/<br/><br/><br/>/*# docs and pct of 'AAAA' (the fw365 doc)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h15a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(Key_hsn) as NPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\" and docPatterns='AAAA')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h15b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(Key_hsn) as NPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\" and adherence=1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.g,<br/>&nbsp&nbsp&nbsp&nbsptarget=h16,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(doc_fw365, count(key_hsn) as TPt ),<br/>&nbsp&nbsp&nbsp&nbspgroupby=doc_fw365,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(doc_fw365 ne \"\"  )<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h15a,<br/>&nbsp&nbsp&nbsp&nbspt2=h16,<br/>&nbsp&nbsp&nbsp&nbsptarget=h17,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.doc_fw365, t1.Npt, t2.TPt,  t1.Npt / t2.TPt *100 format 8.2 as AAAAPCT ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=doc_fw365<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=h17,<br/>&nbsp&nbsp&nbsp&nbspt2=h15b,<br/>&nbsp&nbsp&nbsp&nbsptarget=h18,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Npt as Npt_adh,  t2.Npt / t1.TPt *100 format 8.2 as AdhPCT ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=doc_fw365<br/>)&#59<br/><br/><br/><br/>proc univariate data=h18&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram AdhPCT AAAAPCT/normal&#59<br/>run&#59<br/>proc univariate data=h17&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram AdhPCT /normal&#59<br/>run&#59<br/><br/>/*the % of AAAA patients are quite skewed (there are a bunch of Drs having higher than average % of AAAA patients)*/<br/>/*poisson? what predicts AAAA patients among doctors?*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-pzOsKgUBMFRexTrx"}]},{"idx":"EGTask-mNdzSqhm2Bn1Jy5q","name":"Copy Statin Prscr to Remote","children":[{"idx":"CodeTask-Aci5BDMMgR9LhbzQ","name":"ZZB MSB Claims Remote","NodeDescription":"///t<br/>///s<br/>/*<br/>ZZB MSB claims of docs in ZZA<br/>*/<br/>data _null_&#59run&#59<br/>%nobs(data=remotes.zza)&#59<br/>%distinct(data=remotes.zza, target=zzb1, vars=key_doc_num)&#59<br/><br/>/*create an empty dataset*/<br/><br/>%macro getMSB(theYear=, theStart=, theEnd=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local theYear theStart theEnd debug&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%Extract_MSB(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_start_dt=&Xtrc_Start_MSB,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_end_dt=&Xtrc_End_MSB, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_out=getMSB_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphsn_list=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphsn_file= , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdiagcode=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdostart=&theStart, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdosend=&theEnd, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfscode=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getMSB_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzb1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=%str(getMSB_tmp2 (rename =(dos_1 = DOS))), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theYear = 2009 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata msbzzb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getMSB_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata msbzzb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset msbzzb getMSB_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getMSB_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getMSB&#59<br/>%getMSB(theYear=2009, theStart='01jan2009'd, theEnd='31dec2017'd, debug=1)&#59<br/><br/>%UnixZip(<br/>&nbsp&nbsp&nbsp&nbspsPath=, <br/>&nbsp&nbsp&nbsp&nbspsource=, <br/>&nbsp&nbsp&nbsp&nbspdata=msbzzb, <br/>&nbsp&nbsp&nbsp&nbsptPath=&remoteTargetPath, <br/>&nbsp&nbsp&nbsp&nbsptarget=msbzzb.zip, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-SF7U4hFBpxtTrllt","name":"Copy MSBZips from Remote","children":[{"idx":"CodeTask-kpvpcTvUPzprxvZV","name":"ZZC GPs","NodeDescription":"///t<br/>///s<br/>/*ZZC*/<br/><br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\msbzzb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(msbzzb.sas7bdat)<br/>)&#59<br/>/*%print(data=msbzzb)&#59*/<br/><br/>/*ZZC1, get a unique list of entrydate specific docs by SPEC from the MSB claims<br/>&nbsp&nbsp&nbsp&nbspwithin 2 year before and 1 year after the entryDate*/<br/>/*the following is very inefficient, so prepare a compact data set first*/<br/>%distinct(data=msbzzb, target=ZZC0, vars=%str(key_doc_num, dos, SPEC))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*how many doctors acting as GP, NGP, missing on the same date*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzc0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Doctype $3.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC in: (\"B\") then DocType = \"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC =\"\" then DocType = \"NN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC not in:(\"B\") and SPEC ne \"\" then DocType=\"NGP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=test1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.dos, sum(Doctype=\"GP\") as GP, sum(Doctype=\"NN\") as NN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Doctype=\"NGP\") as NGP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, dos)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the patterns*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset test2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif GP =0 then p1=\"\"&#59else P1=\"G\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NGP=0 then p2=\"\"&#59else p2=\"N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NN=0 then p3=\"\"&#59else p3=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocPattern=cats(p1,p2,p3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop p1 p2 p3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test3, table=docPattern)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*it is quite rare that a doc was acting as both GP and NGP on the same date*/<br/><br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t2.entryDate, SPEC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(SPEC), 1,1)=\"B\", 1, 2   <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp) as order<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num,entryDate, order),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate - 365*2 and t2.entryDate+365-1)<br/>)&#59<br/>/*%freq(data=zzc1, table=spec)&#59*/<br/>/*Note: there are records missing SPEC values*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Aummarized by specific study periods (2 years before and 1 year after entryDate), how is the doc pattern?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzc1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Doctype $3.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC in: (\"B\") then DocType = \"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC =\"\" then DocType = \"NN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif SPEC not in:(\"B\") and SPEC ne \"\" then DocType=\"NGP\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcnt=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=test1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, sum(Doctype=\"GP\") as GP, sum(Doctype=\"NN\") as NN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Doctype=\"NGP\") as NGP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check the patterns*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata test3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset test2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif GP =0 then p1=\"\"&#59else P1=\"G\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NGP=0 then p2=\"\"&#59else p2=\"N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif NN=0 then p3=\"\"&#59else p3=\"_\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocPattern=cats(p1,p2,p3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop p1 p2 p3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test3, table=docPattern)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Again, it is quite rare that a doc was acting as both GP and NGP on the same date<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*It seems OK to be more restrict, as there is not a lot of hybrid docs to lose.<br/>The decision is to indicate docs as NGP if there is at lease 1 claim as NGP<br/>That way, the remaining docs only have GP claims. These docs are pure GPs.<br/>*/<br/><br/>/*<br/>ZZC2<br/>The goal is to identify GPs from docs in zzc1<br/>*/<br/>/*zzc2a. for entryDate-specific Docs in localt.ZZA, if  they are in ZZC1 as missing SPEC, or NGPs,  they are determined as NGPs<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC1, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'ngp'  as docType length=3, 'msb' as docSRC), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num EntryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(t2.spec), 1,1) ne \"B\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor strip(t2.SPEC) = \"\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*zzc2b. entryDate-specific Docs from localt.ZZA, in ZZC1 as GPs, and not in ZZC2a are GPs.<br/>&nbsp&nbsp&nbsp&nbsp[_Note] These docs only have pure GP claims in the database within the study period<br/>cat() similar to ||<br/>catt() removing the trailing spaces<br/>cats() removing both heading and trailing spaces<br/>catx() insert a delimiter between concatenated values<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZA,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC1, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'gp'  as docType length=3, 'msb' as docSRC), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num EntryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsubstr(strip(t2.spec), 1,1) = \"B\" <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC2a)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The docs in ZZC2b should only act as GPs within the interested period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Test*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp %sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zzc1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzc2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test31,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_num, t2.entryDate, t1.SPEC),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test31, table=spec)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for these docs, there should be no claims as NGPs within the study period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzc2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=test32,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, SPEC),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate - 365*2 and t2.entryDate+365-1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=test32, table=spec)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*confirmed*/<br/><br/><br/>/*zzc3. next is to check doctors not appeared in the MSB claims<br/>... but it is not very useful. <br/>Althout there are docs not having msb claims, but are indeed GPs, how to estimate their missing claims? no clue.<br/>It is valuable to check the proportion of doctors identified/not identified though<br/>*/<br/>data _null_&#59run&#59<br/>/*ZZA contains all docs as statin prescribers, or service providers to the cohort member within the follow up period*/<br/>%print(data=localt.zza)&#59<br/>/*From ZZA, those identified as GPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC3a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'GP' as DocType length=3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*From ZZA, those identified as NGPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZC2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZC3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'NGP'  as DocType length=3),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*From ZZA, those docs can be found in MSB claims (ZZC0), but does not have MSB claims within 2 years before, <br/>and 1 year after the entryDate*/<br/>/*From ZZA, docs in ZZC0*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc0,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_num, t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>%beep&#59<br/>/*from above, those not in ZZC3a, nor in ZZC3b (not identified as a GP/NGP within the period, i.e., not having any claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwithin the period)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c2,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c3,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC3a)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzc3c3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3c,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, 'NO' as DocType), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcatx(\",\", t1.key_doc_num, t1.EntryDate) not in (select catx(\",\", key_doc_num, EntryDate) from ZZC3b)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*The above three (ZZC3a, 3b, 3c) are docs that can be found in MSB claims. 3a and 3b are GP/NGPs, 3c are those<br/>&nbsp&nbsp&nbsp&nbsphaving physician service claims out of the specified period(2 years before and 1 year after the entryDate), but not having<br/>&nbsp&nbsp&nbsp&nbspphysician service claims within the specific period*/<br/>/*The rest in ZZA are those not have any physician service claims*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.zza,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzc3d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.entryDate, '__' as DocType length=3), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_num not in (select key_doc_num from ZZC0)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*ZZC4, assembly ZZC3a-d. by doc type*/<br/>data ZZC4&#59<br/>&nbsp&nbsp&nbsp&nbspformat DocType $3.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZC3a ZZC3b ZZC3c ZZC3d&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZC4,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zza,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=localT.ZZC,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.Role),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>%freq(data=localt.ZZC, table=Role* doctype)&#59<br/>%nobs(data=localt.ZZA)&#59<br/><br/>/*the table shows that it is very rare to have doc-entryDate cases who did not have any msb claims within the specified period<br/>Conclusion: the current method is good to include most of the docs (either a statin prescriber, or a service provider of for  <br/>&nbsp&nbsp&nbsp&nbspcohort members during follow up<br/>*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-ViasKREJ44R4uJVe","name":"ZZD FFS NFFS","NodeDescription":"///t<br/>///s<br/>/*ZZD. For msbzzb, get MSB claims of GPs in ZZC, count % of claims as FFS/NFFS in the specified period (2 years prior and 1 year after the EntryDate */<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\msbzzb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(msbzzb.sas7bdat)<br/>)&#59<br/>/*note: do not use such as format $4. as paymode. Won't work. will have a length of 200!*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=msbzzb,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD0,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(num_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Note, the FFS/NFFS is based all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIf it were to the cohort members, many will have 0 visits, and FFS/NFFS cannot be determined.<br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients, but within the 2 year period around the entry dates. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2002-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2001-1-1 and 2003-12-31.<br/>*/<br/>/*ZZD1a, unique GPs from ZZC*/<br/>%distinct(data=localt.zzc, target=zzd1a, vars=key_doc_num, filters=%str(DocType=\"GP\"))&#59<br/><br/>/*zzd1b, from ZZD0, encounters of gps in ZZD1a*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzd0,<br/>&nbsp&nbsp&nbsp&nbspt2=zzd1a,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzd1b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>%sort(data=zzd1b, sorter=key_hsn dos key_doc_num PayMode)&#59<br/><br/>/*ZZD1c, the above may have same visits with diff pay type. The following is to keep the last one, which gives priority to NFFS service*/<br/>Data ZZd1c&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZD1b&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn dos key_doc_num PayMode&#59<br/>&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>run&#59<br/><br/><br/>/*ZZD1d From above, select claims between entrydate -365 and entrydate +364*/<br/>/*zzd1d, statin users and entrydate*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/>%distinct(data=vxa, target=zzd1d, vars=entryDate)&#59<br/><br/>/*zzd2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>*/<br/><br/>/*%distinct(data=zzd1c, target=test, vars=%str(year(dos) as year))&#59 */<br/>/*2009-2017*/<br/>%macro makeZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp%local i j k&#59<br/>&nbsp&nbsp&nbsp&nbsp%let k=0&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%do i = 2012 %to 2012&#59 */<br/>&nbsp&nbsp&nbsp&nbsp%do i = 2010 %to 2017&#59 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do j = 0 %to 0 %by 3&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do j = 0 %to 9 %by 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeZZD2a_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzd1c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere year(dos) = &i and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmonth(dos) between %eval(&j +1) and %eval(&j + 3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeZZD2a_tmp2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zzd1d&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif %eval(&i-1) le year(EntryDate) le %eval(&i+1)&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeZZD2a_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zzd1d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeZZD2a_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t1.key_doc_num, t1.PayMode,t1.dos),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=cross,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeZZD2a_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeZZD2a_tmp4,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, PayMode, count(t1.dos) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &k=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeZZD2a_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZD2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset ZZD2a makeZZD2a_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let k=%eval(&k+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend&#59<br/>%makeZZD2a&#59<br/><br/>/* the ZZD2a need to be further grouped and summed. Same EntryDate-doc-paymode may appear multiple times*/<br/>/*as the msb records were obtained by 3-months.  */<br/>data ZZD2a2&#59set ZZD2a&#59run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZD2a2,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_num, PayMode, sum(N_Visits) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num, PayMode)<br/>)&#59<br/><br/>/*the following will overwirte the existing zip! be careful*/<br/>/*%vbsZip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=zzd2a.zip, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=zzd2a.sas7bdat, */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=*/<br/>/*)&#59*/<br/><br/><br/><br/>/*%print(data=ZZd2)&#59*/<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=zzd2a, target=zzd2b, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZZC has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZZC has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in zzc has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data ZZD2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZD2b&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/><br/>/*%freq(data=zzd2, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*ZZD3 link pay type to ZZC*/<br/>/*link to zzc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.ZZC,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZD2,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.ZZD,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayType=\"\", \"NMSB\", t2.PayType) as PayType length=4, T2.FFS_CAT),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.DocType=\"GP\")<br/>)&#59<br/>%freq(data=localt.zzd, table=paytype*role)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-kpt49up7VUF9xXPg","name":"ZZE Missing MSB Claims for RX","NodeDescription":"///t<br/>///s<br/>/*ZZE This program is to determine the missing service claims.<br/>&nbsp&nbsp&nbsp&nbspQuestion: why using the MSBZZb file (claims of all doc's patients, not only those to cohort patients)<br/>&nbsp&nbsp&nbsp&nbspwhy not using the master_msb file (claims of the cohort patients, which is way smaller)<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*ZZE1. Get all statin claims of prescribers in ZZD to cohort members within the follow up period*/<br/>/*ZZE1a. Get distinct statin dispensation dates within follow up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxf.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxf.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxf,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZE1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.key_doc_num, t1.rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_prscr_num = t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t1.entrydate and t1.entrydate + 364)<br/>)&#59<br/><br/>/*ZZE2. Determin whether there is a visit claim within 30 days prior to the RxDate*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*from zzd, get a distinct list of docs*/<br/>%distinct(data=localt.zzd, target=zzE2a1, vars=key_doc_num)&#59<br/>/*zze2a, get distinct visits for patients in zzd*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=zzE2a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZE2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_doc_num, t1.dos),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*zze2b, join zze1 and zze2a,  determine whether there is a visit claim within 30 60 90 180 days prior to the Date of statin dispensation*/<br/>%macro analysisZZE&#59<br/>&nbsp&nbsp&nbsp&nbsp%local lookbackClaims&#59<br/>&nbsp&nbsp&nbsp&nbsp%do lookbackClaims = 30 %to 180 %by 30&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &lookbackClaims = 120 or &lookbackClaims = 150 %then %goto SkipToNext&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=ZZE1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=zze2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.key_doc_num, t1.rx_ddddd, ifc(t2.key_hsn=\"\", '_1', '_0') as MissVisitClaim),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t1.key_doc_num = t2.key_doc_num and t2.dos between t1.rx_ddddd -&lookbackClaims and t1.rx_ddddd)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%freq(data=zze2b, table=MissVisitClaim)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%print(data = localt.zzd)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*link the hasvisitclaim records (ZZE2b) with entryDate-specific doc paytype (ZZD)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso as to have the prescriber's pay type on the claim date<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif the specific entrydate-doc combination in zze2b cannot be found in zzd, indicate the PayType is 'UNKW' (unknown)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*in ZZE2, there are docs who cannot be identified for PayTYpe on the specific entryDate (i.e., there were no <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspphysician service claims within 1 year before and 1 year after the entryDate). These could be NFFS doctors,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBut these could also be FFS doctors, who knows. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zze2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t2.Role=\"\", \"prescriber\", t2.role) as Role length=20 , <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t2.PayType=\"\", \"UNKW\", t2.PayType) as PayType length=20, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.FFS_CAT),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=entrydate key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'NMSB')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%freq(data=zze2, table=Role * PayType)&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data =zze2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=zze2b)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=zze2)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*To this step, a logistic model can be applied to estimate the impact of paytype to the outcome of missing visit claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAs the records are repeated by patient and doc, the two vars can be used for repeat terms in GEE models<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(patient nested in doc, 2 levels)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"GEE, binary of missing service claim, repeated by doc nested patient levels\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze2 desc &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType(ref='FFS') key_doc_num key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel MissVisitClaim = PayType /type3 dist=bin link=logit covb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType 0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num ( key_hsn) /type=exch printmle ecovb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*repeated or strata? levels or paired?*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrata key_doc_num key_hsn / missing&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Next, the missing cases are summerized by doctor. */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*zze3, summary # of Rx, by doc, PayType, HasVisitClaim */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=zze2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=zze3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType, t1.MissVisitClaim, count(Rx_ddddd) as NRx),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t1.key_doc_num, t1.payType,  t1.MissVisitClaim)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%transpose(data=zze3a, target=zze3b, rowhead = key_doc_num paytype , colhead = MissVisitClaim, contents=NRX)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%macro GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local MissingPCTCutOff&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%do MissingPCTCutOff=1 %to 10&#59 /*missing xx% of claims*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata zze3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zze3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif _1=. then _1=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif _0=. then _0=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptotal = sum(_1, _0)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMiss_PCT= int(_1/total*100)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMiss_CAT = int(Miss_PCT/10)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif Miss_CAT ge &MissingPCTCutOff then Miss_Bin = 1&#59 else  Miss_Bin=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*proc freq data=zze3&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsptable Miss_Bin * paytype /chisq norow nocol nopct&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*run&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The following model is to estimate the OR of Missing 80% of the service claims of a patient <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby a doc of NFFS type vs FFS type<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTitle \"Binary of doc missing y% service claims , MissingPCTCutOff=&MissingPCTCutOff\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze3 desc &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType(ref='FFS') key_doc_num  /param=ref &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel Miss_Bin = PayType /type3 dist=bin link=logit covb&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType  0 1/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num /type=exch printmle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*It seems that the OR is not stable. It ranges fro 3 to 0.5 when the missing PCT cut off changes from 10% to 100%. */<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &MissingPCTCutOff=10 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*alternatively, a poisson model to estimate the rate of missing service claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe rate is estimated as # of missing claims out of the total claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata ZZe4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset zze3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*proc univariate data=zze4&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsphistogram Miss_PCT&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*run&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"Poisson model,MissingPCTCutOff=&MissingPCTCutOff \"&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data=zze4  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass PayType (ref='FFS') key_doc_num  /param=ref  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel _1 = PayType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" PayType 1 0/exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"UNKW vs FFS\" PayType 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num /type=exch modelse printmle&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%mend GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%GEE_1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If checking the rate of missing claims at doc level (summarizing all missing phycisian service cases out of all statin Rx), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRate of missing service claim are 1.5 times higher among NFFS vs FFS &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>%SkipToNext:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59/*end of loop for lookbackclaim days*/<br/>%mend analysisZZE&#59<br/>%analysisZZE&#59<br/>/*alternatively, at patient level, check the rate of missing service claims by patient. <br/>&nbsp&nbsp&nbsp&nbspSee whether it can be determined by tpe of patient's usual prescriber(s): i.e., FFS/NFFS/UNKW/Mixed<br/>&nbsp&nbsp&nbsp&nbspBut... what is the point of doing that?<br/>*/<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-47QaLlwY1h7Q44wY","name":"ZZF OR of being UPCPF FFS vs NFFS","NodeDescription":"///t<br/>///s<br/>/*ZZF, <br/> &nbsp&nbsp&nbsp&nbspThis progam is to test the hypothesis:<br/>&nbsp&nbsp&nbsp&nbspNFFS doctors are less likely to be the cohort member's usual CARE PROVIDER during follow up.  &nbsp&nbsp&nbsp&nbsp<br/>*/<br/><br/>/*msb claim docs of the cohort members during follow up*/<br/>/*msb claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*cohort memebers*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/><br/>/*distinct docs of msb claims of cohort memebers within follow up<br/>&nbsp&nbsp&nbsp&nbspthese claims including doctors identified in zzb (as GPs by FFS/NFFS type)<br/>&nbsp&nbsp&nbsp&nbspalso include doctors not identified in zzb <br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=vzc,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.entryDate, t1.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn, <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entrydate and t2.entrydate +364)<br/>)&#59<br/>/*%print(data=vzc)&#59*/<br/>/*%print(data=localt.zzd)&#59*/<br/>/*From above, determine whether a FFS/NFFS doc is identified*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.key_doc_num, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*patients and their UGPFs (usual GP during follow up)*/<br/>data ZZF3&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59format upcpfdocid $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray upcpfs upcpf:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(upcpfs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspupcpfdocid= scan(upcpfs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif upcpfdocid ne 'na' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate upcpfdocid UGPF&#59<br/>run&#59<br/><br/><br/>/*link zzf3 to zzf2, check if the very doc in zzf2 is identified as the usual provider*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf2,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.ugpf=., 0, 1) as UGPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t2.upcpfdocid = t1.key_doc_num)<br/>)&#59<br/><br/>/*what is this? there is a cross over here<br/>&nbsp&nbsp&nbsp&nbsppatient a may see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsppatient b may also see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsp...<br/>*/<br/>proc genmod data=zzf4 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') key_doc_num  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel UGPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_doc_num (key_hsn)  /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>run&#59<br/><br/>/*It makes more sense to count the number of patients by doc<br/>&nbsp&nbsp&nbsp&nbspfor number of patients being UGPF, and for total number of patients<br/>*/<br/>/*%print(data=zzf4)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf4,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(UGPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num, payType)<br/>)&#59<br/>/*for docs acting both as a FFS and a NFFS for diff time periods, */<br/>%transpose(data=ZZF5, target=ZZF6a, rowhead=key_doc_num, colhead=paytype, contents=total)&#59<br/>data ZZF7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF6a&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspTotal =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzf7a, table=PayClass)&#59<br/>%transpose(data=ZZF5, target=ZZF6b, rowhead=key_doc_num, colhead=paytype, contents=N_UGPF)&#59<br/>data ZZF7b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF6b&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspN_UGPF =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzf7b, table=PayClass)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf7a,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf7b,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payclass, t2.N_UGPF, t1.Total),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num payclass<br/>)&#59<br/><br/>/*A poisson model to est rate ratio of being UGPF*/<br/>data ZZF8&#59<br/>&nbsp&nbsp&nbsp&nbspset zzF7&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzf8, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzf8  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payClass (ref='0f') key_doc_num  /param=effect desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payClass /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payClass 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Both vs FFS\" payClass 1 0 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS + Both vs FFS\" payClass 1 1 -2 /exp&#59<br/>run&#59<br/><br/><br/>/*What about those docs both act as FFS and NFFS?*/<br/>data ZZF9&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZF8&#59<br/>&nbsp&nbsp&nbsp&nbspif payClass='2b'&#59<br/>run&#59<br/>/*get the payType specfic data*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf4,<br/>&nbsp&nbsp&nbsp&nbspt2=zzf9,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf10,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, year(entryDate) as year),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_doc_num, paytype, year, key_hsn)<br/>)&#59<br/>/*dose this make sense? It is a GEE binary analysis<br/>&nbsp&nbsp&nbsp&nbspon whether or not being Usual GP<br/>&nbsp&nbsp&nbsp&nbspby paytype<br/>&nbsp&nbsp&nbsp&nbsprepeated by patient<br/>&nbsp&nbsp&nbsp&nbspstratified by key_doc_num (being both NFFS, FFS),<br/>&nbsp&nbsp&nbsp&nbspnot a lot of cases though<br/>*/<br/>proc genmod data=zzf10 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') key_doc_num  key_hsn /param=reference desc&#59<br/>&nbsp&nbsp&nbsp&nbspmodel UGPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_hsn  /type=exch ecovb&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata key_doc_num &#59<br/>run&#59<br/>/*the result is really weird and difficult to explain, the OR >1*/<br/><br/><br/>/*Poisson? for these cross over group?*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzf10,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzf11,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_doc_num, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(UGPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(key_doc_num, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(key_doc_num, payType)<br/>)&#59<br/>data ZZF12&#59<br/>&nbsp&nbsp&nbsp&nbspset zzF11&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzf12, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzf12  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payType (ref='FFS') key_doc_num  /param=ref desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payType 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspstrata key_doc_num&#59<br/>run&#59<br/>/*even stranger. it is kind of before-after analysis. Those turned to NFFS are more likely to be UGPF!*/<br/>s///<br/>t///","children":[{"idx":"CodeTask-xeAw1hpjIYgwn1R4","name":"ZZG UPR being UPCPF FFS vs NFFS","NodeDescription":"///t<br/>///s<br/>/*Usual prescribers, UPRs of FFS/NFFS type, and likelihood of being a UGPF (UPCPF)*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/>%print(data=vzc)&#59<br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZG1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPPRDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPR=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UPRs UPR1 - UPR6&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UPRs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPRDocID= scan(UPRs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPPRDocID ne 'na' and UGPPRDocID ne 'unknown'  then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate UGPPRDocID UGPPR&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPPRDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*The UPRs in 1) may have missing claims. And because of that, they may not be identified as UPCPs. <br/>&nbsp&nbsp&nbsp&nbspAmong them, some are of paytype FFS, some of NFFS. <br/>&nbsp&nbsp&nbsp&nbspThe question is:<br/>&nbsp&nbsp&nbsp&nbspIs it true that being an NFFS prescriber is more likely not to be identified as an UPCPF?<br/>*/<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspTo answer this question. the next step is to indicate the paytype for UPRs identified in 1)<br/>2. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZG1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZG2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPPRDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from vzc, get UPCPFs of the cohort patients*/<br/>data ZZg3&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59format upcpfdocid $11.&#59<br/>&nbsp&nbsp&nbsp&nbspIsUPCPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray upcpfs upcpf:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(upcpfs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspupcpfdocid= scan(upcpfs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif upcpfdocid ne 'na' and upcpfdocid ne 'unknown' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn upcpfdocid IsUPCPF&#59<br/>run&#59<br/><br/>/*4. link 2 and 3,for each UPR in 2), determine whether or not the UPR is identified as UPCPF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg2,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg3,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg4,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.IsUPCPF=., 0, 1) as IsUPCPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsn = t2.key_hsn and t1.UGPPRDocID = t2.upcpfdocid)<br/>)&#59<br/><br/><br/><br/>/*what is this? there is a cross over here<br/>&nbsp&nbsp&nbsp&nbsppatient a may see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsppatient b may also see doc 1 and 2<br/>&nbsp&nbsp&nbsp&nbsp...<br/>*/<br/>proc genmod data=zzg4 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') UGPPRDocID  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel IsUPCPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= UGPPRDocID (key_hsn)  /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID key_hsn&#59<br/>run&#59<br/><br/>/*It makes more sense to count the number of patients by doc<br/>&nbsp&nbsp&nbsp&nbspfor number of patients being UGPF, and for total number of patients<br/>*/<br/>%print(data=zzg4)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg4,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(IsUPCPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(UGPPRDocID, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(UGPPRDocID, payType)<br/>)&#59<br/>/*for docs acting both as a FFS and a NFFS for diff time periods, */<br/>%transpose(data=ZZG5, target=ZZG6a, rowhead=UGPPRDocID, colhead=paytype, contents=total)&#59<br/>data ZZG7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZG6a&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspTotal =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzG7a, table=PayClass)&#59<br/>%transpose(data=ZZG5, target=ZZG6b, rowhead=UGPPRDocID, colhead=paytype, contents=N_UGPF)&#59<br/>data ZZG7b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZG6b&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs ne . then PayClass='0f'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs =. then Payclass='1n'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs ne . and ffs ne . then Payclass='2b'&#59<br/>&nbsp&nbsp&nbsp&nbspif nffs=. and ffs =. then PayClass='3_'&#59<br/>&nbsp&nbsp&nbsp&nbspN_UGPF =sum(nffs, ffs)&#59<br/>run&#59<br/>%freq(data=zzg7b, table=PayClass)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg7a,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg7b,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payclass, t2.N_UGPF, t1.Total),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=UGPPRDocID payclass<br/>)&#59<br/><br/>/*A poisson model to est rate ratio of being UGPF*/<br/>data ZZg8&#59<br/>&nbsp&nbsp&nbsp&nbspset zzg7&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzg8, table=pct_ugpf *payClass)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzg8  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payClass (ref='0f') UGPPRDocID  /param=effect desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payClass /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payClass 0 1 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"Both vs FFS\" payClass 1 0 -1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS + Both vs FFS\" payClass 1 1 -2 /exp&#59<br/>run&#59<br/><br/><br/>/*What about those docs both act as FFS and NFFS?*/<br/>data ZZg9&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZg8&#59<br/>&nbsp&nbsp&nbsp&nbspif payClass='2b'&#59<br/>run&#59<br/>/*get the payType specfic data*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg4,<br/>&nbsp&nbsp&nbsp&nbspt2=zzg9,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg10,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, year(entryDate) as year),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=UGPPRDocID,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(UGPPRDocID, paytype, year, key_hsn)<br/>)&#59<br/>/*dose this make sense? It is a GEE binary analysis<br/>&nbsp&nbsp&nbsp&nbspon whether or not being Usual GP<br/>&nbsp&nbsp&nbsp&nbspby paytype<br/>&nbsp&nbsp&nbsp&nbsprepeated by patient<br/>&nbsp&nbsp&nbsp&nbspstratified by key_doc_num (being both NFFS, FFS),<br/>&nbsp&nbsp&nbsp&nbspnot a lot of cases though<br/>*/<br/>proc genmod data=zzg10 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass paytype (ref='FFS') UGPPRDocID  key_hsn /param=reference desc&#59<br/>&nbsp&nbsp&nbsp&nbspmodel IsUPCPF = paytype  /link=logit dist=bin type3&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject= key_hsn  /type=exch ecovb&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" paytype 1 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID &#59<br/>run&#59<br/>/*the result is interesting. Being a ususal prescriber of NFFS is way unlikely to be a usual care provider<br/>&nbsp&nbsp&nbsp&nbspsuggesting that many claims are missing....<br/>*/<br/><br/><br/>/*Poisson? for these cross over group?*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=zzg10,<br/>&nbsp&nbsp&nbsp&nbsptarget=zzg11,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.UGPPRDocID, t1.payType,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as Total,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(IsUPCPF) as N_UGPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(UGPPRDocID, payType),<br/>&nbsp&nbsp&nbsp&nbsporderby = %str(UGPPRDocID, payType)<br/>)&#59<br/>data ZZG12&#59<br/>&nbsp&nbsp&nbsp&nbspset zzG11&#59<br/>&nbsp&nbsp&nbsp&nbsplog_total = log(total)&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_UGPF = int(N_UGPF / Total * 10)&#59<br/>run&#59<br/><br/>%freq(data=zzg12, table=pct_ugpf *payType)&#59<br/><br/>title \"Poisson model \"&#59<br/><br/>proc genmod data=zzg12  &#59<br/>&nbsp&nbsp&nbsp&nbspclass payType (ref='FFS') UGPPRDocID  /param=ref desc &#59<br/>&nbsp&nbsp&nbsp&nbspmodel N_UGPF = payType /type3 dist=negbin  offset=log_total&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"NFFS vs FFS\" payType 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspstrata UGPPRDocID /missing&#59<br/>run&#59<br/>/*Prescribers of NFFS type are way less likely to be UGPF!*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-glcbbQCJxljMInFi","name":"ZZH Usual prescriber's PayType to ADH","NodeDescription":"///t<br/>///s<br/>/*does prescriber's pay type NFFS/FFS predict nonadherence?*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)<br/>)&#59<br/><br/><br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZH1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPPRDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPR=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UPRs UPR1 - UPR6&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UPRs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPPRDocID= scan(UPRs(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPPRDocID ne 'na'  then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate UGPPRDocID UGPPR&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPPRDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*<br/>2. the next step is to indicate the paytype for UPRs identified in 1)<br/> */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZH1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZH2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPPRDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from 2. get a distinct list of patients by whether or not having FFS NFFS docs (can be both)*/<br/>%distinct(data=ZZH2, target =ZZH3, vars=%str(key_hsn, PayType, UGPPR))&#59<br/>%transpose(data=zzh3, target=zzh4, rowhead=key_hsn, colhead=PayType, contents=UGPPR)&#59<br/>data ZZH5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZH4&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs =1 and nffs=. then PayClass = 'f'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=1 then payclass='n'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=1 and nffs=1 then PayClass = 'b'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=. then PayClass ='_'&#59<br/>run&#59<br/>%freq(data=zzh5, table=Payclass)&#59<br/><br/>/*link back to cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vzc,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZH5,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZH,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayClass=\"\", \"u\", t2.PayClass) as PayClass_UPR),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZH&#59<br/>&nbsp&nbsp&nbsp&nbspif RHA>10 then Northern=1&#59else Northern=0&#59<br/>&nbsp&nbsp&nbsp&nbspif Never_Changed=1 then any_changed=0&#59 else any_changed=1&#59<br/>&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO = Pre365_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif Pre365NRxDocSAO> 4 then Pre365NRxDocSAO=5&#59<br/>&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO=Followup_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif FollowUpNRXDocSAO> 4 then FollowUpNRXDocSAO=4&#59<br/>run&#59<br/><br/>proc genmod data=test2 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass PayClass_UPR (ref='f')  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence =PayClass_UPR/link=logit dist=bin&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"both vs ffs \" PayClass_UPR 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"nffs vs ffs \" PayClass_UPR 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"unknown vs ffs \" PayClass_UPR  0 0 1 /exp &#59<br/>run&#59<br/><br/>/*macro test_ZZH is for not matched,using the not matched cohort (VZC)*/<br/>%macro test_ZZH (data=, theVar=, where=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar where&#59<br/>&nbsp&nbsp&nbsp&nbspods select parameterEstimates Estimates type3&#59<br/>&nbsp&nbsp&nbsp&nbspTitle \"&theVar\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data= &data desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &where&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnorthern(ref='0') PayClass_UPR(ref='f')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO (ref='1')<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO(ref='1')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = &theVar northern &theVar *northern<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  qaippe resitype &theVar * resitype <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365_Medclass_statinAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPayClass_UPR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowup_Medclass_statinAHTNOH*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHosp_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_SP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_ER_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThirdPartyPay_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCharlson_Index<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPJR&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 1 vs 0\" &theVar 1/exp&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 10 vs 00\" &theVar 0 1 0 /exp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 11 vs 00\" &theVar 0 0 1 /exp&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Northern 1 vs 0\" Northern 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods select all&#59<br/>&nbsp&nbsp&nbsp&nbsptitle&#59<br/>%mend test_ZZH&#59<br/><br/><br/>%test_ZZH(data=test2, theVar=any_changed )&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-B7bSZ43FyDvRf1Kd","name":"ZZI UPCPF's  pay type to adh","NodeDescription":"///t<br/>///s<br/>/*ZZI PayTYpe to adherence */<br/>/*does prescriber's pay type NFFS/FFS predict nonadherence?*/<br/><br/>/*%VbsUnzip(*/<br/>/*&nbsp&nbsp&nbsp&nbsptgtDir=,*/<br/>/*&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vzc.zip),*/<br/>/*&nbsp&nbsp&nbsp&nbspsrcFile=%str(vzc.sas7bdat)*/<br/>/*)&#59*/<br/><br/>%print(data=vzc)&#59<br/><br/>/*1. get all UPRs of cohort memebers. Some patients had multiple UPRs*/<br/>data ZZI1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZC&#59<br/>&nbsp&nbsp&nbsp&nbspformat UGPFDocID $11.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPF=1&#59<br/>&nbsp&nbsp&nbsp&nbsparray UGPS UPCPF:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(UGPS)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUGPFDocID= scan(UGPS(i),1,\":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif UGPFDocID ne 'na' and strip(UGPFDocID) ne 'unknown' then output&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate UGPFDocID UGPF&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if strip(UGPFDocID) ne 'unknown'&#59 why those unknow is not deleted if the condition is put here, instead of in the 2 lines above*/<br/>run&#59<br/><br/>/*<br/>2. the next step is to indicate the paytype for UGPs identified in 1)<br/> */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZZI1,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.zzd,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZI2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.paytype),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.UGPFDocID = t2.key_doc_num and t1.entryDate = t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.paytype ne 'UNKW' and t2.paytype ne 'NMSB')<br/>)&#59<br/><br/>/*3. from 2. get a distinct list of patients by whether or not having FFS NFFS docs (can be both)*/<br/>%distinct(data=ZZI2, target =ZZI3, vars=%str(key_hsn, PayType, UGPF))&#59<br/>%transpose(data=zzI3, target=zzI4, rowhead=key_hsn, colhead=PayType, contents=UGPF)&#59<br/>data ZZI5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZI4&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs =1 and nffs=. then PayClass_UGPF = 'f'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=1 then PayClass_UGPF='n'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=1 and nffs=1 then PayClass_UGPF = 'b'&#59<br/>&nbsp&nbsp&nbsp&nbspif ffs=. and nffs=. then PayClass_UGPF ='_'&#59<br/>run&#59<br/>%freq(data=zzI5, table=PayClass_UGPF)&#59<br/><br/>/*link back to cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vzc,<br/>&nbsp&nbsp&nbsp&nbspt2=ZZI5,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZI,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.PayClass_UGPF=\"\", \"u\", t2.PayClass_UGPF) as PayClass_UGPF),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZZI&#59<br/>&nbsp&nbsp&nbsp&nbspif RHA>10 then Northern=1&#59else Northern=0&#59<br/>&nbsp&nbsp&nbsp&nbspif Never_Changed=1 then any_changed=0&#59 else any_changed=1&#59<br/>&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO = Pre365_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif Pre365NRxDocSAO> 4 then Pre365NRxDocSAO=5&#59<br/>&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO=Followup_Prscr_statinAHTNOH&#59<br/>&nbsp&nbsp&nbsp&nbspif FollowUpNRXDocSAO> 4 then FollowUpNRXDocSAO=4&#59<br/>run&#59<br/>%freq(data=test2, table=PayClass_UGPF * adherence)&#59<br/>proc genmod data=test2 desc&#59<br/>&nbsp&nbsp&nbsp&nbspclass PayClass_UGPF (ref='f')  key_hsn /param=reference &#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence =PayClass_UGPF/link=logit dist=bin&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"both vs ffs \" PayClass_UGPF 1 0 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"nffs vs ffs \" PayClass_UGPF 0 1 0 /exp &#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"unknown vs ffs \" PayClass_UGPF  0 0 1 /exp &#59<br/>run&#59<br/><br/>/*macro test_ZZI is for not matched,using the not matched cohort (VZC)*/<br/>%macro test_ZZI (data=, theVar=, where=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar where&#59<br/>&nbsp&nbsp&nbsp&nbspods select parameterEstimates Estimates type3&#59<br/>&nbsp&nbsp&nbsp&nbspTitle \"&theVar\"&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data= &data desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &where&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref='0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnorthern(ref='0') PayClass_UGPF(ref='f')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO (ref='1')<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO(ref='1')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence (ref='0') = &theVar northern &theVar *northern<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspage sex_desc  qaippe resitype &theVar * resitype <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365NRxDocSAO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPre365_Medclass_statinAHTNOH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPayClass_UGPF<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowUpNRXDocSAO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFollowup_Medclass_statinAHTNOH*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHosp_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_SP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVisits_ER_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThirdPartyPay_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCharlson_Index<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ANXIETY_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOOD_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MOODANXP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OSTEO_2DRUG<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_EPJR&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/type3 dist=bin link=logit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 1 vs 0\" &theVar 1/exp&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 10 vs 00\" &theVar 0 1 0 /exp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"&theVar 11 vs 00\" &theVar 0 0 1 /exp&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"Northern 1 vs 0\" Northern 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods select all&#59<br/>&nbsp&nbsp&nbsp&nbsptitle&#59<br/>%mend test_ZZI&#59<br/><br/><br/>%test_ZZI(data=test2, theVar=any_changed )&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-glcbbQCJxljMInFi"}]}],"custparents":[{"idx":"CodeTask-xeAw1hpjIYgwn1R4"}]}],"custparents":[{"idx":"CodeTask-47QaLlwY1h7Q44wY"}]}],"custparents":[{"idx":"CodeTask-kpt49up7VUF9xXPg"}]}],"custparents":[{"idx":"CodeTask-ViasKREJ44R4uJVe"}]}],"custparents":[{"idx":"CodeTask-kpvpcTvUPzprxvZV"}]}],"custparents":[{"idx":"EGTask-SF7U4hFBpxtTrllt"}]}],"custparents":[{"idx":"CodeTask-Aci5BDMMgR9LhbzQ"}]}],"custparents":[{"idx":"EGTask-mNdzSqhm2Bn1Jy5q"}]}],"custparents":[{"idx":"CodeTask-pzOsKgUBMFRexTrx"}]}],"custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}]},{"idx":"CodeTask-CljcMilWauaTBrim","name":"Tools and Preparation","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-eKhhDQkxVCHWsd8C","name":"Variables","NodeDescription":"///t<br/>///s<br/><br/><br/>%exportvars(VXA)&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-bcqKjfzgshVbRL4v","name":"studyOHDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Oral Hyperglycermics (OH) (AHFS 68:20:20, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean19.alldin_1_jas19_18oct2019,<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.ohdins,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner<br/>)&#59<br/>/*167*/<br/><br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.ohdins, target=_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.ohdins, table=gen_name)&#59<br/>/*n=167, there is no dup DINs*/<br/><br/>s///<br/>t///","children":[{"idx":"EGTask-OC42bAXMm7V8rMsY","name":"CopyDINS_ohdins","custparents":[{"idx":"CodeTask-bcqKjfzgshVbRL4v"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-cb1xaxfzL97QcEcF","name":"StudyAHTNDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS, the blood pressure lowering agents<br/>&nbsp&nbsp&nbsp&nbspin the AEC-I, and ARB class<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*AEC-I and ARBs (AHFS 24:08:00, and with 'pril' 'sartan' in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim, target=AHTNDINs_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=AHTNDINs_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data AHTNDINs_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset AHTNDINs_tmp1 AHTNDINs_tmp2&#59<br/>run&#59<br/>%distinct(data=AHTNDINs_tmp3, target=AHTNDINs_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:08, but not all are ACEI/ARB, those ARCE/ARB <br/>&nbsp&nbsp&nbsp&nbspmust have a genetic name containing 'pril' or 'sartan'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean19.alldin_1_jas19_18oct2019,<br/>&nbsp&nbsp&nbsp&nbspt2=AHTNDINs_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.AHTNDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"PRIL\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindex(upcase(gen_name), \"SARTAN\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*n=723*/<br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.AHTNDINs, target=AHTNDINs_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.AHTNDINs, table=gen_name)&#59<br/>/*n=723, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"EGTask-rdbuB2eZxzMerMhF","name":"CopyDINS_AHTNs","custparents":[{"idx":"CodeTask-cb1xaxfzL97QcEcF"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-7bnUtUXU7R2nqpvh","name":"make PIMs","NodeDescription":"///t<br/>///s<br/>/*Make PIM DINs*/<br/>/*&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*Antidepressants*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\DIN List Antidepressants.xlsx)&#59<br/>data PIMs1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs1 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"Drugs\"&#59<br/>run&#59<br/>%print (data=PIMs1)&#59<br/><br/>/*BENZO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs2&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs2 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"BENZO\"&#59<br/>run&#59<br/>%print (data=PIMs2)&#59<br/><br/>/*PSYCHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs3&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"PSYCHO\"&#59<br/>run&#59<br/>%print (data=PIMs3)&#59<br/><br/>/*ANTICHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs4&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs4(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"ANTICHO\"&#59<br/>run&#59<br/>%print (data=PIMs4)&#59<br/><br/>data PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMs1  PIMs2 PIMs3 PIMs4&#59<br/>run&#59<br/><br/>/*sort and remove the dup DINS per class*/<br/>%sort(data=PIMS_all, sorter=class DIN)&#59<br/>data localt.PIMs&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspby class DIN&#59<br/>&nbsp&nbsp&nbsp&nbspif first.DIN&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-fugAN6WsoMWNgKfZ","name":"StudyDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Statin (AHFS 24:06:00, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:06, but not all are Statins, those statins must have a genetic name containing 'statin'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=clean19.alldin_1_jas19_18oct2019, /*clean19.alldin_1_ond18_13feb2019,*/<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.StatinDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"STATIN\") ne 0)<br/>)&#59<br/>/*n=301 as of 20191120*/<br/>/*double check to ensure that there is no dup dins in remotetT.StatinDINs*/<br/>%distinct(data=remoteT.StatinDINs, target=_tmp5, vars=DIN)&#59<br/>/*n=301, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"EGTask-CV6ZbaPGihGVgjE1","name":"CopyDINS to Local","custparents":[{"idx":"CodeTask-fugAN6WsoMWNgKfZ"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-MFaCVD2HKG8H2ZiE","name":"MyMacros","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-zlO9ztVQoMSivIaE","name":"Test_remote","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>libname tt \"/sasdata/hisc/dw/dw0/Third_Party_Data/SHA (RIS 2019)\"&#59<br/><br/>%print(data=tt.hqc_ris_ultra_sound)&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-q65h3IrNGuXafJ8T","name":"Test_local","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-b3OezYBUd9h9Xqga","name":"escape","NodeDescription":"///t<br/>///s<br/>/*data x&#59a=1&#59run&#59*/<br/>)&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-nFFfnUzpOAcAde3z","name":"Beep","NodeDescription":"///t<br/>///s<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-YxMkyU68wHLjoZvY","name":"Learnings","NodeDescription":"///t<br/>///s<br/>/*Leanring*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=msbzzb,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD0,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(num_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*note, it does not work to set length by format $4. as paymode. The length will yet be 200.*/<br/>/*Instead, should set the length=4*/<br/><br/><br/>/*What is wrong*/<br/>%macro B(varA, VarB)&#59<br/><br/>%mend B&#59<br/>%macro A(var1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%B(&Var1)&#59<br/>%mend A&#59<br/>%A(&Var1=%str(v1_forVarA, v2_forVarB))?<br/><br/>/*Wrong!<br/>&nbsp&nbsp&nbsp&nbspmacro A should not only have 1 var, <br/>&nbsp&nbsp&nbsp&nbspit should have two vars instead, each for VarA and VarB in macro B<br/>*/<br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_doc_numc) as docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(distinct entryDate) as docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZk1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, t2.docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/>/*which docFreq will be kept in VZK3? the docFreq from VZJ1? from VZJ2?<br/>Answer: from VZJ1, the value in VZJ2 will be neglected<br/>*/<br/><br/>/*Note: there could be persons continuously covered until the 365th day since entry, but died<br/>&nbsp&nbsp&nbsp&nbspon the 365th day. These patients, if exist, should be excluded*/<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-nFFfnUzpOAcAde3z"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-cgblpitkLXgBWLXi","name":"UPC code","NodeDescription":"///t<br/>///s<br/>/*from:<br/>Z:\\My Project\\Projects\\PhD Thesis\\SAS code\\Master code - UPC (Sept 2014).sas<br/>*/<br/><br/><br/>/***************************************************************************************************  <br/> *   Programmer: Beliz Acan Osman with reference methodology from CIHI Continuity of PHC study, SK  *                                                  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   Date: July 2013                                           &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp                            *<br/> *   Project: Primary Health Care Hoshin - Patient Connetedness- CHRONIC DISEASE PROFILES           *<br/> *   Purpose: This code extracts physician information for the chronic disease cohorts &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspof SK FY 2006-2013 and in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   investigates the contunity of the care provided by GPs and NPs&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> ****************************************************************************************************/<br/>* Jan 2018<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. could not complete the ACSC specific UPC calculation as we are not calculating incidence/prevalence for ACSC conditions anymore.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTalked with Patrick about this January 9th. He will decide whether we should leave it as is or continue with inc/prev analysis.<br/><br/>* April 2017<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/><br/>* Jan 2016<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Took out the clinic piece we will not provide that this wall walk.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/><br/>* Sept 2015 PLT Wall Walk - Notes by Meric Osman & Beliz Acan Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. UPC by Clinic added. 2 sets of results,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa. UPC by physician (same as before)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspb. UPC by clinic (new) - see code Master Code - UPC_by_clinic (Aug 2015)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* June 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>* April 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>Old notes&#59<br/>* December 2014 RUN for January 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Additional slush numbers have been acquired and used (see below),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. Minor bug fixes.<br/><br/><br/>* August-September 2014 RUN for October 2014 PLT Wall Walk - Notes by Meric Osman<br/><br/>Changes/Updates (during Beliz's maternity leave)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. New MSB data has been acquired by HQC. This data includes physician specialty<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. As the physician specialty information is already in the data - DOC FILE is not being used<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. Previously, MSB extracted from 2006, however only last 3-4 years of inforamtion is needed (informed by team), thus shorter extraction (Apr 2010 onwards) has been done.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp4. Out of province DOC numbers are for SAS flat files (not for the ORACLE MSB file), thus not used (see below).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp5. Most upto date PHRS, Death files...etc. have been used (see below).<br/><br/><br/><br/>*MACROS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Meric/calc_age_discr.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>*DATASETS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let death_file &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.verf_dths_3_jfm17_01nov2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let phrs_res&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* EXCLUSIONS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let in_patient&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let slush&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= '76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/><br/>*LIBRARIES&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname phc &nbsp&nbsp&nbsp&nbsp'/SAS_data/dw0/HQC_share/Beliz/continuity/Jan 2018'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>*needed library for SASApp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname hqc meta library=\"HQC\"&#59<br/><br/>*DISEASE COHORTS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname copd   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/COPD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname asthma '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Asthma'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname chf    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CHF'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname cad    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CAD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname dm     '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/DM'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname mood   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Mood'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoptions mprint nosymbolgen nomlogic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoption compress=Y&#59<br/><br/><br/>options nosymbolgen nomlogic nomprint&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*****************************************************************************************************/<br/><br/><br/><br/><br/>%let phc_dos_start &nbsp&nbsp&nbsp&nbsp= '01Apr2010'd&#59<br/>%let phc_dos_end &nbsp&nbsp&nbsp&nbsp= '30SEP2017'd&#59<br/><br/><br/><br/>%Extract_MSB(<br/>   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp=&nbsp&nbsp&nbsp&nbspmsb_extract,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_start_dt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'31MAR2011'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_end_dt&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'19SEP2017'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdostart&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_start,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp    dosend&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_end)&#59*-Jan 2018:79,756,277, Apr2017: 73,926,659, -JuneWW16 62,303,134, -JanWW16 59,682,474- , JuneWW15 - 54,106,206&#59<br/><br/>proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from msb_extract&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 12Sep2017)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <br/>* Do a nodupkey - Only important thing for PHC is having the \"Record of Visit\" not the individual claims&#59<br/>proc sort data=msb_extract nodupkey out=msb_extract_nodup_all&#59 by key_hsn dos_1 key_doc_num spec&#59 run&#59*jan 2018-57,471,158 ,apr2017-53,370,242, june2016-45150575,Jan16-43,276,407--39,312,813&#59<br/><br/>*Note:&nbsp&nbsp&nbsp&nbspThere is no case that num_srv = 0 - HQC does not receive those claims (deleted at the source by eHealth)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssume all spec's starting with B (%72.13) as BB and also keep the pediatricians with couple exlusions, and WB - nurse practitioners (per CIHI),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDelete slush physician numbers & (NEW) out of province claims through mode = Z&nbsp&nbsp&nbsp&nbsp<br/> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRemember, in_patient&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K' (will be deleted)&#59<br/><br/>proc freq data = msb_extract_nodup_all&#59table num_srv&#59 run&#59<br/><br/>*There will be another exclusion in later steps regarding pediatricians and patient's age&#59<br/><br/>data msb_extract_nodup&#59 set msb_extract_nodup_all&#59<br/><br/>*apr2017 run had missing key_hsn - deleted&#59<br/>if key_hsn=\"\" then delete&#59<br/>if num_srv = 0 then delete&#59<br/>if los in:(&in_patient) then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B','C','WB') then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>*fy&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if '01APR2010'd LE dos_1 LE '31MAR2011'd then fy = 'FY2010/11'&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2011'd LE dos_1 LE '31MAR2012'd then fy = 'FY2011/12'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2012'd LE dos_1 LE '31MAR2013'd then fy = 'FY2012/13'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2013'd LE dos_1 LE '31MAR2014'd then fy = 'FY2013/14'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2014'd LE dos_1 LE '31MAR2015'd then fy = 'FY2014/15'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2015'd LE dos_1 LE '31MAR2016'd then fy = 'FY2015/16'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2016'd LE dos_1 LE '31MAR2017'd then fy = 'FY2016/17'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2017'd LE dos_1 LE '31MAR2018'd then fy = 'FY2017/18'&#59<br/>rename xtrc_date=xtrc_date_msb&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>run&#59*Jan 2018-7271258,apr2017-34,698,104 -- jun16-29,523,814--jan16  28,294,478--25,747,453&#59<br/>proc freq data=msb_extract_nodup&#59 table fy spec num_srv los&#59run&#59<br/><br/>/*1b. Add demographic information (RHA at time of service)*/<br/><br/>%demog_assign(prs_xtrc_dt='02OCT2017'd,<br/>                   ds_in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= msb_extract_nodup,<br/>                   ds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= cohort_master_apr17, <br/>                   strt_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   end_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &geo_file,<br/>incl_full_info=N)&#59*34,698,104&#59<br/><br/>proc freq data=cohort_master_apr17&#59 table sex_desc rha&#59run&#59<br/><br/>* Remove key_hsn's that we can NOT find in PHRS - 5,849 visits (previously - 1,084 visits)&#59<br/>* 34,607 times an RHA can NOT be assigned to a key_hsn - keep them for now&#59<br/><br/>data cohort_master_apr17_1&#59 set cohort_master_apr17&#59<br/><br/>if sex_desc = ''  then delete&#59<br/>if sex_desc&nbsp&nbsp&nbsp&nbsp= 'M' then male=1&#59 else male=0&#59<br/><br/>rename rha = rha_index&#59<br/><br/>drop tot_days mindiff_rha rhadays rhadiff mindiff_urb_rur urdays urdiff&#59<br/>run&#59* 37269992 (1266 visits dropped)&#59<br/>proc freq data=cohort_master_apr17_1&#59table fy sex_desc male rha_index&#59run&#59*28,758 missing RHA (apr2017), 35,499 missing rha--27,920 Rha cannot be assigned (roughly 10,000 people)&#59<br/><br/><br/>/*add age at date of service */<br/>* Note: There are handful of patients receiving services after their death date - very few thus not investigating - consider for future&#59<br/><br/>%calc_age_discr(ds_in=cohort_master_apr17_1,ds_out=cohort_master_1,refday_var=dos_1,agevar=age)&#59<br/><br/>proc freq data=cohort_master_1&#59 table age&#59run&#59* No missing age&#59<br/><br/>/*manipulate variables*/<br/><br/>* NOTE: There are some patients where best_dt < 01Apr2010, however, there are claims indicating that they have seen a physician after 01Apr2010 -  keep them (<1000 cases)&#59<br/><br/>data phc.cohort_master_3&#59 set cohort_master_1&#59<br/><br/>* Delete pediatrician claims if the patients is 18 and older&#59<br/>if age >= 18 and substr(spec,1,1)='C' then delete&#59<br/><br/>*For UPC calculation&#59<br/>n = 1&#59<br/><br/>run&#59*34,692,255&#59<br/>proc freq data=phc.cohort_master_3&#59 table n fy los&#59run&#59<br/>proc freq data=phc.cohort_master_3&#59 table age&#59 where substr(spec,1,1)='C'&#59run&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from phc.cohort_master_3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 14Mar2017)&#59<br/><br/><br/>* RHA assignment of patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp RHA's are assigned to patients AT THE TIME OF PHY SERVICE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp There are some patients who had assigned >1 RHA's within a fiscal year (probably due to a move)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp For those cases - assign the RHA where the patient was residing, received majority of services<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp If there is a draw, assign randomly&#59<br/><br/>* RHA frequencies&#59<br/>proc sql noprint&#59 <br/>create table rha_assign as <br/>  select key_hsn, fy, rha_index,<br/>  &nbsp&nbsp&nbsp&nbspsum (n)&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas rha_times<br/>from phc.cohort_master_3<br/>  group by key_hsn, fy, rha_index<br/>  order by key_hsn&#59<br/>run&#59*6,255,567&#59<br/>proc sort data=rha_assign&#59 by key_hsn fy descending rha_times&#59 run&#59*6,255,567 -- 1,261,810 unique patients&#59<br/>proc sort data=rha_assign nodupkey out=rha_assign_1&#59 by key_hsn fy&#59run&#59* 6,186,049&#59<br/><br/><br/>* It has been decided to ONLY include UPC to the PLT Wall - thus only calculate UPC&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*UPC index*/<br/><br/>* Sum the visits by EACH DOCTOR in EACH FY by EACH PATIENT&#59<br/>proc summary nway data=phc.cohort_master_3&#59<br/>class key_hsn key_doc_num fy&#59<br/>var n&#59<br/>output out=upc n=visits&#59<br/>run&#59<br/>proc freq data=upc&#59 table visits&#59run&#59<br/><br/>data upc_drop(drop=_type_ _freq_)&#59 set upc&#59run&#59* Notes:&nbsp&nbsp&nbsp&nbspType is all 7, Freq & visits are exactly same (delete them)&#59<br/><br/><br/>*&nbsp&nbsp&nbsp&nbspSum the total visits in EACH FY by EACH PATIENT<br/>Also keeps the maximum number of visits done to an individual physician&#59<br/>proc summary nway data=upc_drop&#59<br/>class key_hsn fy&#59<br/>var visits&#59<br/>output out=upc3 max=max_visits sum=visits&#59<br/>run&#59<br/><br/>proc sort data=upc&#59 by key_hsn fy&#59run&#59<br/>proc sort data=upc3&#59 by key_hsn fy&#59run&#59<br/><br/>* Delete cases where the patient had ONLY 1 visit within a fiscal year&#59<br/>data upc_1(drop=_type_ _freq_)&#59 set upc3&#59<br/>if visits = 1 then delete&#59<br/>run&#59<br/>proc freq data = upc_1&#59 table visits&#59run&#59<br/><br/>data UPC_index&#59<br/>set upc_1&#59<br/>UPC=(max_visits/visits)*100&#59<br/>format UPC 8.2&#59<br/>run&#59<br/>proc freq data=UPC_index&#59 table fy upc&#59run&#59<br/><br/>*Merge the RHA info&#59<br/>proc sort data=rha_assign_1&#59by key_hsn fy&#59run&#59<br/>proc sort data=UPC_index&#59by key_hsn fy&#59run&#59<br/><br/>data phc.UPC_final&#59<br/>merge UPC_index(in=b) rha_assign_1(in=m)&#59<br/><br/>by key_hsn fy&#59<br/>if b&#59<br/>format rha_name $22.&#59<br/>if rha_index = '1' then rha_name = \"Sun Country\"&#59<br/>if rha_index = '2' then rha_name = \"Five Hills\"&#59<br/>if rha_index = '3' then rha_name = \"Cypress\"&#59<br/>if rha_index = '4' then rha_name = \"Regina Qu'Appelle\"&#59<br/>if rha_index = '5' then rha_name = \"Sunrise\"&#59<br/>if rha_index = '6' then rha_name = \"Saskatoon\"&#59<br/>if rha_index = '7' then rha_name = \"Heartland\"&#59<br/>if rha_index = '8' then rha_name = \"Kelsey Trail\"&#59<br/>if rha_index = '9' then rha_name = \"Prince Albert\"&#59<br/>if rha_index = '10' then rha_name = \"Prairie North\"&#59<br/>if rha_index = '11' or rha_index = '12' or rha_index = '13' then rha_name = \"Northern Sask\"&#59<br/>if rha_index = ''  then rha_name = \"Missing\"&#59<br/><br/>run&#59<br/>proc freq data=phc.UPC_final order=freq&#59 table rha_index rha_name fy UPC&#59 run&#59<br/><br/>* Important Note (Meric) Aug 6, 2015: Above dataset created and saved phc.UPC_final. Run below to report to PLT Wall Walk.<br/><br/>* UPC by RHA&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* UPC by SK&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc sql&#59<br/>create table asthma_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from asthma.master)&#59<br/>quit&#59*Jan2018-5498078,April17:557,990 /// January16:463,710 /// October15: 416,059 /// June15 run:338,082 /// March15 run:331,387 /// Dec14 run:270,372 /// Aug14 run:232,809&#59<br/><br/><br/>* Asthma UPC by RHA&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Asthma  UPC by SK&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc sql&#59<br/>create table CAD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CAD.CAD)&#59<br/>quit&#59* April17:461,757 /// January16: 392,945 ///October15: 358,176 /// June15 run:313,105 /// March15 run:310,737 // Dec14 run:251,777 -Aug14 run:243,896&#59<br/><br/>* CAD UPC by RHA&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CAD  UPC by SK&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc sql&#59<br/>create table CHF_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CHF.CHF)&#59<br/>quit&#59*April17:305,696 /// January16: 261,091 /// October15: 237,316  /// June15 run:200,287 /// March15 run:199,151// Dec14 run:163,569 - Aug14 run:159,443&#59<br/><br/>* CHF UPC by RHA&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CHF  UPC by SK&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc sql&#59<br/>create table COPD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from COPD.COPD)&#59<br/>quit&#59*April17:396,216 /// January16: 330,876 /// October15: 295,995 /// June15 run:249,655 /// March15 run:247,427 // Dec14 run:200,578 - Aug14 run:194,410&#59<br/><br/>* COPD UPC by RHA&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* COPD UPC by SK&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc sql&#59<br/>create table DM_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from DM.DM)&#59<br/>quit&#59*April17:593,552 /// January16: 497,721 /// October15: 448,050 ///June15 run:382,400 /// March15 run:379,076 // Dec14 run:305,827 -Aug14 run:295,604&#59<br/><br/>* DM UPC by RHA&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* DM UPC by SK&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 6.Mood&#59<br/>proc sql&#59<br/>create table Mood_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from Mood.Mood)&#59<br/>quit&#59*April17: 1,000,000+ /// *January16: 1,872,423 /// October15: 1,690,695 /// June15 run:1,495,170 /// March15 run:1,469,429 // Dec14 run:1,196,115 - Aug14 run:1,092,251&#59<br/><br/>* Mood UPC by RHA&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Mood UPC by SK&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>**********************************************************************************<br/>**********************************************************************************<br/>**********************************************************************************<br/><br/>/* DATA PREPERATION FOR QIO */<br/><br/>* UPC by RHA&#59<br/>proc means data=phc.UPC_final&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=whole_pop_rha mean=result_connected&#59 run&#59<br/><br/>data whole_pop_rha_1&#59 set whole_pop_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc means data=asthma_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=asthma_rha mean=result_connected&#59 run&#59<br/><br/>data asthma_rha_1&#59 set asthma_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"asthma\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc means data=cad_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=cad_rha mean=result_connected&#59 run&#59<br/><br/>data cad_rha_1&#59 set cad_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"cad\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc means data=chf_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=chf_rha mean=result_connected&#59 run&#59<br/><br/>data chf_rha_1&#59 set chf_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"chf\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc means data=copd_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=copd_rha mean=result_connected&#59 run&#59<br/><br/>data copd_rha_1&#59 set copd_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"copd\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc means data=dm_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=dm_rha mean=result_connected&#59 run&#59<br/><br/>data dm_rha_1&#59 set dm_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"dm\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/> <br/><br/>* 6.Mood&#59<br/>proc means data=mood_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=mood_rha mean=result_connected&#59 run&#59<br/><br/>data mood_rha_1&#59 set mood_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"mood\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>*Combine all databases&#59<br/><br/>data phc.qio_connectedness&#59 retain date result_connected rha_name tag1&#59 set whole_pop_rha_1 &#59*asthma_rha_1 cad_rha_1 chf_rha_1 copd_rha_1 dm_rha_1 mood_rha_1<br/><br/>if rha_name = \"Cypress\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"chr\"&#59<br/>if rha_name = \"Sun Country\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"schr\"&#59<br/>if rha_name = \"Five Hills\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"fhhr\"&#59<br/>if rha_name = \"Regina Qu'Appelle\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"rqhr\"&#59<br/>if rha_name = \"Sunrise\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"sunhr\"&#59<br/>if rha_name = \"Saskatoon\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"shr\"&#59<br/>if rha_name = \"Heartland\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"hhr\"&#59<br/>if rha_name = \"Kelsey Trail\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"kthr\"&#59<br/>if rha_name = \"Prince Albert\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"paphr\"&#59<br/>if rha_name = \"Prairie North\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"pnhr\"&#59<br/>if rha_name = \"Northern Sask\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"northern\"&#59<br/><br/>if rha_name = \"Missing\" then delete&#59<br/><br/>rename rha_name = tag&#59<br/><br/>if fy = \"FY2010/11\" then date = \"20100630\"&#59<br/>if fy = \"FY2011/12\" then date = \"20110630\"&#59<br/>if fy = \"FY2012/13\" then date = \"20120630\"&#59<br/>if fy = \"FY2013/14\" then date = \"20130630\"&#59<br/>if fy = \"FY2014/15\" then date = \"20140630\"&#59<br/>if fy = \"FY2015/16\" then date = \"20150630\"&#59<br/>if fy = \"FY2016/17\" then date = \"20160630\"&#59<br/>if fy = \"FY2017/18\" then date = \"20170630\"&#59<br/>drop fy&#59<br/><br/>run&#59<br/>proc freq data=phc.qio_connectedness&#59 table tag tag1 date&#59run&#59<br/><br/><br/><br/>/*UPC taxonomy*/<br/>data taxupc&#59<br/>infile datalines truncover&#59<br/>length date $45. rate $45. region $45. acsc $45.&#59<br/>input date rate region acsc&#59<br/>datalines&#59<br/>number-of-data-columns duration tag tag . . . . . . <br/>1 fiscal-year connected-phys smarter . . . . . . <br/>date  result-connected-phys|percentage tag tag<br/>&#59 <br/>run&#59<br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/><br/>data phc.upc_apr17&#59<br/>set taxupc qio_connectedness &#59<br/>run&#59<br/><br/><br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/>proc sort data=qio_connectedness&#59 by  date region&#59<br/>run&#59<br/>proc transpose data=qio_connectedness out=moh&#59<br/>by date region&#59<br/>var acsc rate&#59<br/>run&#59<br/> <br/>data moh1&#59<br/>set moh&#59<br/>drop _name_&#59<br/>rename col2=asthma&#59<br/>rename col3=cad&#59<br/>rename col4=chf&#59<br/>rename col5=copd&#59<br/>rename col6=dm&#59<br/>rename col7=mood&#59<br/>if col1=. then delete&#59<br/>rename col1=all&#59<br/>run&#59<br/><br/><br/><br/>/* -------------------------------------------------------------------<br/>   Code generated by SAS Task<br/><br/>   Generated on: Thursday, January 21, 2016 at 11:23:17 AM<br/>   By task: List Data1<br/><br/>   Input Data: WORK.MOH1<br/>   Server:  Local<br/>   ------------------------------------------------------------------- */<br/><br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>/* -------------------------------------------------------------------<br/>   Sort data set WORK.MOH1<br/>   ------------------------------------------------------------------- */<br/>PROC SORT<br/>&nbsp&nbsp&nbsp&nbspDATA=WORK.MOH1(FIRSTOBS=1  KEEP=date asthma cad chf copd dm mood all region)<br/>&nbsp&nbsp&nbsp&nbspOUT=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/>TITLE&#59<br/>TITLE1 \"Report Listing\"&#59<br/>FOOTNOTE&#59<br/>FOOTNOTE1 \"Generated by the SAS System (&_SASSERVERNAME, &SYSSCPL) on %TRIM(%QSYSFUNC(DATE(), NLDATE20.)) at %TRIM(%SYSFUNC(TIME(), TIMEAMPM12.))\"&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp style=sasweb file=\"/SAS_data/dw0/HQC_share/Beliz/continuity/oct2016/by_options.xls\" options(suppress_bylines='yes')&#59<br/>/* End of custom user code. */<br/><br/>PROC PRINT DATA=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbspOBS=\"Row number\"<br/>&nbsp&nbsp&nbsp&nbspLABEL<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspVAR date asthma cad chf copd dm mood all&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp close&#59<br/>/* End of custom user code. */<br/>/* -------------------------------------------------------------------<br/>   End of task code.<br/>   ------------------------------------------------------------------- */<br/>RUN&#59 QUIT&#59<br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>TITLE&#59 FOOTNOTE&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-nbwvdnJMbVnPgccI","name":"Physician Pannel code","NodeDescription":"///t<br/>///s<br/>/*from<br/>P:\\2018 - Physician Panel Reports\\SAS code\\1. Patient Allocation to Physician Panels(Alberta Health).sas*/<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>/*vaheguru ji   Extract MSB data*/<br/>%include '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/coverage_days.sas'&#59<br/>libname ppr '/SAS_data/dw0/HQC_share/nsidhu/PPR/data_MS'&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp<br/>%Extract_MSB(xtrc_start_dt='31Mar2012'd,<br/>                   xtrc_end_dt='26Mar2018'd, <br/>                   excl_xtrc_dt=, <br/>                   ds_out=temp_msb, <br/>                   ds_out_hsn_only=, <br/>                   hsn_list=, <br/>                   hsn_file=, <br/>                   MDnumber=, <br/>                   diagcode=, <br/>&nbsp&nbsp&nbsp&nbsp       diag_file=, <br/>                   dostart='01Apr2013'd, <br/>                   dosend='31Mar2018'd, <br/>                   fscode=, <br/>                   loscode=, <br/>                   othercondition=, <br/>                   othernumber=, <br/>                   kept_vars=KEY_HSN KEY_DOC_NUM SPEC MG DIAG FSC NUM_SRV LOS CONTACTS AMT_APP MODE, <br/>                   debug=N)&#59&nbsp&nbsp&nbsp&nbsp<br/>data ppr.temp_msb1&#59<br/>set temp_msb&#59<br/>SPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>if SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>run&#59<br/><br/>/*<br/>Quality Checks: Check below for the chosen 4 physicians, <br/>Proc freq variable SPEC and LOS<br/>Check the earliest dos_1 for each of 4 physicians<br/>Extract the data of these 4 physicians from the physician mobility file to check the practice start dates<br/>*/<br/>proc freq data=ppr.temp_msb1&#59<br/>table spec los&#59<br/>run&#59<br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>set ppr.temp_msb1&#59<br/>/*<br/>if key_doc_num in ('51925304676' '42925324679' '27925304675' '63825354679' '05825374675' '73925324675') <br/>then key_doc_num='00123456789'&#59<br/>*/<br/><br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B') then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/>proc freq data=temp_msb2&#59<br/>tables spec&#59 run&#59<br/>/*Step 4 removing same day, same doctor visits: <br/>NOTE: There were 32003786 observations read from the data set WORK.TEMP_MSB2.<br/>NOTE: 5942281 observations with duplicate key values were deleted.<br/>NOTE: The data set PPR.TEMP_MSB2 has 26061505 observations and 14 variables.<br/>*/<br/>data ppr.temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=ppr.temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=ppr.temp_msb1x out=ppr.temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/>/*<br/>NOTE: There were 26061505 observations read from the data set PPR.TEMP_MSB2.<br/>NOTE: The data set WORK.TEMP_MSB_3YEAR has 15783671 observations and 14 variables.<br/>*/<br/>data temp_msb_3year&#59<br/>set ppr.temp_msb2&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/>run&#59<br/><br/><br/>/*checking coverage on Mar 31, 2018*/<br/>data temp_msb_3year&#59<br/>set temp_msb_3year&#59<br/>cover_dt1='1Dec2017'd&#59<br/>cover_dt='31Dec2017'd&#59 /*change these dates to 31Mar 2018 when data comes*/<br/>format cover_dt date9. cover_dt1 date9.&#59<br/>run&#59<br/><br/>%coverage_days(xtrc_dt='02JAN2018'd,<br/>&nbsp&nbsp&nbsp&nbspds_in=temp_msb_3year,<br/>&nbsp&nbsp&nbsp&nbspds_out=temp_msb_3year_covered, <br/>&nbsp&nbsp&nbsp&nbspstrt_dt_var=cover_dt,      <br/>&nbsp&nbsp&nbsp&nbspend_dt_var=cover_dt,<br/>&nbsp&nbsp&nbsp&nbspdef_strt_dt=07DEC1994,<br/>&nbsp&nbsp&nbsp&nbspdef_end_dt=&sysdate9,<br/>&nbsp&nbsp&nbsp&nbspcvrg_strt_dt_var=eff_date,<br/>&nbsp&nbsp&nbsp&nbspcvrg_end_dt_var=exp_date)&#59<br/>proc freq data=temp_msb_3year_covered&#59<br/>table cvgdays&#59<br/>run&#59<br/>/*keeping if covered on last day of month*/<br/>data temp_msb_3yearx&#59<br/>set temp_msb_3year_covered&#59<br/>if cvgdays=1&#59<br/>run&#59<br/><br/>proc sort data=temp_msb_3yearx out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/>proc sql noprint&#59 <br/>create table temp_msb_3year1 as <br/>select *, count(dos_1) as total_visits3<br/>from temp_msb_3yearx<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_3year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/>proc freq data=checkz&#59table total_visits3&#59run&#59<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_3year2 as <br/>select *, count(dos_1) as total_visits_phy3<br/>from temp_msb_3year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data ppr.visits_by_phy_3year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3&#59<br/>set temp_msb_3year2&#59<br/>upc3=(total_visits_phy3/total_visits3)*100&#59<br/>format upc3 6.2&#59<br/>run&#59<br/>proc sort data=ppr.visits_by_phy_3year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>/*Single provider*/<br/>data sole_visits ppr.after_sole_visits&#59/*sole=921798 1061676+rest left out=14861873=Total of 15783671*/<br/>set ppr.visits_by_phy_3year&#59<br/>if upc3=100 then output sole_visits&#59<br/>else output ppr.after_sole_visits&#59<br/>run&#59<br/>proc sort data=sole_visits&#59/*sorting this way? Idea is to keep the last visit date*/<br/>by key_hsn descending dos_1 key_doc_num&#59 <br/>run&#59<br/>proc sort data=sole_visits nodupkey out=ppr.sole_visits&#59/*729502 accounting for 921798 visits*/<br/>by key_hsn key_doc_num&#59 <br/>run&#59<br/>data ppr.sole_visits&#59<br/>set ppr.sole_visits&#59<br/>step=1&#59<br/>run&#59<br/><br/>/*192296 individuals keys are alloted physician based on sole provider*/<br/>proc sort data=ppr.sole_visits out=check1 nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*14861873 observations (or 938099 unique individuals) has to allocated doctor based on criteria below*/<br/>proc sort data=ppr.after_sole_visits out=check nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/>/*<br/>2. Majority Provider&#59 <br/>3. if tie then PHYSICAL EXAM(3B), CDM(64B), SUPPORTIVE CARE(52B), WELL BABY(4B) takes prority&#59<br/>4. if no physical then date of service takes priority<br/>*/  <br/>data after_sole_visitsx&#59<br/>retain key_hsn upc3 FSC physical_flag dos_1 key_doc_num&#59<br/>set ppr.after_sole_visits&#59<br/>/*if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59*/<br/>run&#59<br/>proc freq data=after_sole_visitsx&#59 tables physical_flag&#59 run&#59<br/>proc sort data=after_sole_visitsx&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=after_sole_visitsx out=after_sole_visitsxz nodupkey&#59 /*904902 accounting for 14084916 visits*/<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*to add which step contributed, i changed code as under and we get same result*/<br/>/*Here starts setp 2*/<br/>proc sort data=after_sole_visitsx out=step2A nodupkey&#59<br/>by key_hsn upc3 key_doc_num&#59<br/>run&#59<br/>proc sort data=step2A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step2B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step2A point=_n_&#59<br/>leadupc3=upc3&#59<br/>end&#59<br/>set step2A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadupc3=.&#59<br/>run&#59<br/>data step2C&#59<br/>set step2B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadupc3=.&#59<br/>end&#59<br/>run&#59<br/>data step2D&#59<br/>set step2C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if upc3 GT leadupc3 then step=2&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step2D&#59<br/>tables step&#59<br/>run&#59<br/>data step2E&#59/*741493 unique people got alloted in step 2*/<br/>set step2D&#59<br/>if step=2&#59<br/>run&#59<br/>proc sort data=step2E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]},{"idx":"CodeTask-rkVRJ7BAetfJYMzJ","name":"_0A ProjectRootPath","NodeDescription":"///t<br/>///s<br/>/*Get path of the current EG project file*/<br/><br/>%global thisProjectRootPath ThisEGPPath&#59<br/><br/>/*the following is put in a macro so that all the vars can be set as local*/<br/>%macro defineProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local RevEGPPath SearchSeg RevSearchSegPosition StartPosOftheRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLengthRevEGPPath theRevProjectRootPathLength theRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &ThisEGPPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*to reversely search and find the root folder<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFor example, the EGPPath is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\SAS code\\DataCreation_Project4_20190514.egp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe project root path is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., the sub string before '\\SAS code\\'.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that  '\\SAS code\\' appears twice in the EGPPath, the expected root path is before the last incidence of 'SAS code\\'. <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe following is a clumpsy way of doing it, but it works.<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. Make a reverse string of the EGPPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppge.41509102_4tcejorP_noitaerCataD\\edoc SAS\\133_51oiB_\\edoc SAS\\)narakaslAL(4tcejorP\\narkaSlAaniL\\srehcraeser_evitaroballoC\\:S<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevEGPPath =%sysfunc(reverse(&ThisEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevEGPPath&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The string segment to search is '\\SAS code\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphowever, in the revered EGPPath by step 1, the segment to search should also be reversed:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso it is like '\\edoc SAS\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let SearchSeg=\\SAS code\\&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSeg=%sysfunc(reverse(&SearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSeg&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. In the reversed EGPPath, search the first position of the reversed search segment<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSegPosition = %index(%nrbquote(&RevEGPPath), %nrbquote(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSegPosition&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. Determine the start position of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe position of the reversed search segment ('\\edoc SAS\\') is obtained in &RevSearchSegPosition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe reversed search segment ('\\edoc SAS\\') has a length of %length(&RevSearchSeg).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTherefore the start position of the target sub string is:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&RevSearchSegPosition + %length(&RevSearchSeg) .<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let StartPosOftheRevProjectRootPath = %eval(&RevSearchSegPosition + %length(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &StartPosOftheRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*5. Determine the length of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt should be the length of (&RevEGPPath) -  &StartPosOftheRevProjectRootPath +1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LengthRevEGPPath=%length(%nrbquote(&RevEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &LengthRevEGPPath &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPathLength = %eval(&LengthRevEGPPath -  &StartPosOftheRevProjectRootPath+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRevProjectRootPathLength&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*6. Get the substr from the reversed EGPPath, after the start position<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) such string is the reversed Project Root Path.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPath = %substr(%nrbquote(&RevEGPPath), &StartPosOftheRevProjectRootPath, &theRevProjectRootPathLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>&theRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*7. finally, Reverse the reversed project root path again. This time, the project root path is obtained!*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thisProjectRootPath = %sysfunc(reverse(%nrbquote(&theRevProjectRootPath)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &thisProjectRootPath&#59<br/><br/>%mend defineProjectRootPath&#59<br/>%defineProjectRootPath&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-eXfv2LrH9l3vohpU","name":"_0B Local Settings","NodeDescription":"///t<br/>///s<br/>/*include macro tools in drive S<br/>&nbsp&nbsp&nbsp&nbsp/LRECL to allow the length of a statement line to be 32767 bytes instead of the default 256<br/>*/<br/><br/>/*set global variables*/<br/>%global <br/>/*the new cohort creation sas tools*/<br/>&nbsp&nbsp&nbsp&nbspnccSASTools<br/>/*a local folder allowing data exchange between local and remote server*/<br/>&nbsp&nbsp&nbsp&nbspexchangeDir<br/>/*the xlsx file with project settings (i.e., InputForm.xlsm)*/<br/>&nbsp&nbsp&nbsp&nbspsettingsXls<br/>/*the xlsx file on R drive with hospital information*/<br/>&nbsp&nbsp&nbsp&nbsph_Infoxls <br/>/*the path including reports at local*/<br/>&nbsp&nbsp&nbsp&nbsplocalReportPath<br/>/*the xlsx file2 with data reports*/<br/>&nbsp&nbsp&nbsp&nbspAnalyticalReport <br/>&nbsp&nbsp&nbsp&nbspDataReport <br/>/*the xlsx file as the database dictionary*/<br/>&nbsp&nbsp&nbsp&nbspdicXls<br/>/* the folder on remote server containing common tool files for new cohort creation*/<br/>&nbsp&nbsp&nbsp&nbspremoteToolsPath<br/>&#59<br/><br/>/*including the sas macros for new cohort creation*/<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/>libname LCommon \"P:\\02 New project data creation\\CommonExchange\"&#59<br/><br/><br/>/*make a local folder for exchange between local and remote servers*/<br/>%let exchangeDir = &thisProjectRootPath.\\Data\\Exchange_Local_Remote&#59<br/>%put exchangeDir = &exchangeDir&#59<br/>/*check if such exchangeDir exists, if not, create it*/<br/>%macro mkExchangeDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &exchangeDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%local dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&exchangeDir))&#59 <br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&dirExist) = 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir \"&exchangeDir\"&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend mkExchangeDir&#59<br/>%mkExchangeDir&#59<br/><br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>/*the xlsx file with import information, such file is named as:*/<br/>%let settingsXls =&thisProjectRootPath.\\Input\\Forms\\InputForm.xlsm&#59<br/>%let h_Infoxls = %str(R:\\Data Warehouse\\Data Manuals\\Hospital %(CIHI DAD%)\\cihi_hosps_master_file.xlsx)&#59<br/><br/>/*the report in local drive S*/<br/>%let localReportPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Reports&#59<br/>/*libname localR \"&localReportPath\"&#59*/<br/>%let AnalyticalReport=Analytical Report.xlsx&#59<br/>%let DataReport=DataSum_Report.xlsx&#59<br/><br/>/*The following steps are to import file and var description in the data dictionary *******/<br/>%let dicXls = S:\\Reference\\Data Warehouse\\Data Manuals\\General Information\\HQC_MOH_DW_data_dictionary.xlsx&#59<br/><br/>/* the folder on remote server containing common tool files for new cohort creation*/<br/>%let remoteToolsPath = /sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools&#59<br/><br/>/*In the log file, display the physical location of the work directory*/<br/>%put >>> the local work directory is at %sysfunc(pathname(work))&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"EGTask-rFt8odCLtBb7Ilne","name":"Copy Macro file to Remote Server - Copy","children":[{"idx":"CodeTask-z4P6iTjKKWu2HwSk","name":"A_import settings - Copy","NodeDescription":"///t<br/>///s<br/>/*Import settings from the setting xls file (&settingXls)*/<br/><br/>data _null_&#59run&#59<br/><br/>%global  theMasterInputFile<br/>localParentFolder localDataFolder localReportFolder localTargetPath localDataPath localReportPath<br/>RemoteParentFolder RemoteSourcePath DataStartDate DataEndDate&#59<br/><br/>Filename setXls \"&settingsXls\"&#59<br/>%put >>> &settingsXls&#59<br/><br/>/*create a folder dedicated for the project (by rem id?)*/<br/>/*copy a back up of the setting xls file in the log directory*/<br/>/*add a file for log (create date, etc)*/<br/><br/>/*1.Import dates*/<br/>/*always create an empty data set first<br/>&nbsp&nbsp&nbsp&nbspotherwise, when the source excel table contains 0 records, the import proc won't run,<br/>&nbsp&nbsp&nbsp&nbspthe setting file won't be created<br/>&nbsp&nbsp&nbsp&nbsplater, no files were copied to the remote site to overwrite the old files<br/>&nbsp&nbsp&nbsp&nbspAs such, the old setting files will be used in getting data, which is wrong <br/>*/<br/>/*data translib.a1_MasterInput&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Items $100. Values $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import does not work, when the file is xlsm, the SAS is 64 bit, while the excel is 32 bit, and the PC file server is not installed or not properly installed<br/>&nbsp&nbsp&nbsp&nbspIn that case, use libname instead of DBMS works!<br/>*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a1_MasterInput*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"MasterInput\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=MasterInput,<br/> target= translib.a1_MasterInput,<br/> where=,<br/> keep = ,<br/> format=%str( Items $100. Value $100.)<br/>)&#59<br/><br/><br/><br/>/*Save an additional copy of a1<br/>This file should be uploaded to remote server into a common area in the first place.<br/>From this file, we can create the project parent folder on remote site, and create sub folders for data exchange, source, <br/>and target.<br/>*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'ProjectName'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('thisProjectName', Value)&#59<br/>run&#59<br/><br/><br/>/*Such file has to be named using a variable that is commonly recognized by both local and remote programs<br/>&nbsp&nbsp&nbsp&nbspAt this monment all project specific varaibles have not been defined yet on remote side.<br/>&nbsp&nbsp&nbsp&nbspThe clientprojectname is a nice one, as it can be recognized by both local and remote programs.<br/>*/<br/>%let thisProjectName=%lowcase(%sysfunc(dequote(&_clientprojectname)))&#59<br/>/*remove '.egp'*/<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, .egp, ))&#59<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, datacreation, ))&#59<br/>%let thisProjectName=%substr(&thisProjectName, 1, 29)&#59<br/>%put >>> &thisProjectName&#59<br/>/*This file has to be saved in the common folder (the Common exchange folder)<br/>&nbsp&nbsp&nbsp&nbspIt cannot be saved in a project specific folder, as at remote side, the project specific variables are not defined yet<br/>*/<br/>%let theMasterInputFile=a1_&thisProjectName &#59<br/>data LCommon.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Determine the local data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/><br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> &localTargetPath&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59 /*the folder to save requested raw data files*/<br/>libname localT \"&localTargetPath\"&#59<br/>%put >>> &localDataPath&#59<br/>/*the report in local drive S*/<br/>%let localReportPath=&localParentFolder.\\Output\\Reports&#59<br/>%put >>> &localReportPath&#59<br/>libname localR \"&localReportPath\"&#59<br/><br/><br/>/*2.Import the sourcefiles and fields*/<br/>data translib.A2_CohortDataVars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>/*proc import library=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.A2_CohortDataVars (*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=(Final_status=1) */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= final_status file_nick_name VarName_in_Raw_File*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"StudyFields\"&#59*/<br/>/*run&#59*/<br/><br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=StudyFields,<br/> target= translib.A2_CohortDataVars,<br/> where=%str(Final_status gt 0),<br/> keep = final_status file_nick_name VarName_in_Raw_File,<br/> format=%str( final_status 8. file_nick_name $100. VarName_in_Raw_File $100.)<br/>)&#59<br/><br/><br/><br/>/*3 import the case def ICD code list*/<br/>/*data translib.a3_ICDDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a3_ICDDx (where=(code ne \"\") keep= Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"ICD_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=ICD_Codes,<br/> target= translib.a3_ICDDx,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/>%print(data=translib.a3_ICDDx)&#59<br/><br/>/*4 import the case def procedure code list*/<br/>/*data translib.a4_IntvnDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a4_IntvnDx (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"Procedure_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=Procedure_Codes,<br/> target= translib.a4_IntvnDx,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/><br/>%print(data=translib.a4_IntvnDx)&#59<br/><br/>/*5 import the case def SK fee for service code list*/<br/>/*data translib.a5_FSC&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a5_FSC (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"SK_fee_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=SK_fee_Codes,<br/> target=translib.a5_FSC,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/><br/>%print(data=translib.a5_FSC)&#59<br/><br/>/*6 import the case def DINPIN list*/<br/>/*data translib.a6_DINDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Therapeutic_Class $100. Generic_Name $100. DIN $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a6_DINDx (where=(DIN ne \"\") keep=Therapeutic_Class Generic_Name DIN Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"DINs\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=DINs,<br/> target=translib.a6_DINDx,<br/> where=%str(DIN ne \"\"),<br/> keep = Therapeutic_Class Generic_Name DIN Disease Description ,<br/> format=%str(Therapeutic_Class $100. Generic_Name $100. DIN $100. Disease $100. Description $100.)<br/>)&#59<br/>%print(data=translib.a6_DINDx)&#59<br/><br/>/*7 import the list of source files for case definition*/<br/>/*data translib.a7_DxFile&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat DxFiles $100. Inclusion 8.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a7_DxFile (where=(Inclusion =1) )*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"DxFiles\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=DxFile,<br/> target=translib.a7_DxFiles,<br/> where=%str(Inclusion =1),<br/> keep =  ,<br/> format=%str(DxFiles $100. Inclusion 8.)<br/>)&#59<br/><br/>%print(data=translib.a7_DxFiles)&#59<br/><br/><br/>/*8 import the list of additional request*/<br/>/*data translib.a8_AddRequest&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Class $100. Description $100. SourceData $100. Syntax $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a8_AddRequest  (where=(syntax ne '') )*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"Additional request\"&#59*/<br/>/*run&#59*/<br/><br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=Additional_request,<br/> target=translib.a8_AddRequest,<br/> where=%str(syntax ne ''),<br/> keep =  ,<br/> format=%str(Class $100. Description $100. SourceData $100. Syntax $100.),<br/> debug=<br/>)&#59<br/><br/>%print(data=translib.a8_AddRequest)&#59<br/><br/>/*9 import cohort exclusion criteria*/<br/>/*data translib.a9_CohortExclusion&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source $100. Criteria $100. Syntax $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a9_CohortExclusion*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"cohort_exclusion\"&#59*/<br/>/*run&#59*/<br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=cohort_exclusion,<br/> target=translib.a9_CohortExclusion,<br/> where=,<br/> keep =  ,<br/> format=%str(Source $100. Criteria $100. Syntax $100. Description $100.),<br/> debug=<br/>)&#59<br/><br/>%print(data=translib.a9_CohortExclusion)&#59<br/><br/>%put >>> &h_Infoxls&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the source xls file is open by other users, the import program may report error<br/>&nbsp&nbsp&nbsp&nbspin that case, open the Excel application (do not have to open the source xls file, just the Excel App), <br/>&nbsp&nbsp&nbsp&nbspthen run the following import program<br/>*/<br/>/*10 import hospital info*/<br/><br/><br/>proc import datafile=\"&h_Infoxls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbspout=translib.a10_hospInfo<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"facilities\"&#59<br/>run&#59<br/>%print(data=translib.a10_hospInfo)&#59<br/><br/>%put &dicXls&#59<br/>/*import ed data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp1  /*if required by HQC*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"ed (NACRS)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp1)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_ed_a2012'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp1 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf6=strip(upcase(f6))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf7=strip(upcase(f7))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f6='' and f7 ='' and f10 ='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import hospital data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp11<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Hosp (DAD)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp11)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp12&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_hosp'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp11 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf5=strip(upcase(f5))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf14=strip(upcase(f14))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf15=strip(upcase(f15))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf16=strip(upcase(f16))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f15&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f14&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f16&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f5='' and f14 ='' and f15 ='' and f16='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import phrs data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp21<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"PHRS\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp21)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp22&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_phrs_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp21 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import drug claim variable description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp31<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Drug plan\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp31)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp32&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_dp_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp31 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb billing variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp41<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Claims (MSB)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp41)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp42&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp41 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb mobility doc info variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp51<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Mobility (MSB docs)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp51 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*create an emtpy data set for var description*/<br/>&nbsp&nbsp&nbsp&nbspData importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Append  descriptions from source data files*/<br/>&nbsp&nbsp&nbsp&nbspdata importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91 importDIc_tmp2 importDIc_tmp12 importDIc_tmp22 importDIc_tmp32 importDIc_tmp42 importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(varname, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then varname =substr(varname, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>/*Determine the remote data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59<br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> RemoteParentFolder = &RemoteParentFolder&#59<br/>%let RemoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>>RemoteSourcePath= &RemoteSourcePath&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*import data from MDS LTC (MDS_ASSESSMENT_F_2015)  <br/>&nbsp&nbsp&nbsp&nbspfor diagnoses (if in DXFiles, long_term_care =1), <br/>&nbsp&nbsp&nbsp&nbspit is not to get any dxlist (not like the ICD list, etc), rather it is go run a specific macro so as to get the study patients.<br/>&nbsp&nbsp&nbsp&nbspe.g., to have dementia patients by running specific macros,<br/>&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbspto have all who admitted into LTC within a certain period of time (like the Frailty-HRPIM study)<br/><br/>&nbsp&nbsp&nbsp&nbspfor MDS_LTC data requested for a cohort, the fields are from two sources:<br/>&nbsp&nbsp&nbsp&nbsp1) by default, get key_hsn, create_date,  MDS_AB1, AB1b, A3, and R4, these fields has been specified in A2_CohortDataVars<br/>&nbsp&nbsp&nbsp&nbsp2) fields specified in sheet 'vars_MDS_LTC'<br/><br/>&nbsp&nbsp&nbsp&nbspNote that the two sources may have overlapping vars&#59 therefore they are putting together to have a list of distinct vars.<br/>&nbsp&nbsp&nbsp&nbspThe distinct vars are then added to A2_CohortDataVars<br/>*/<br/>/*21 import data vars from sheet 'vars_mds_ltc' LTC file*/<br/>data translib.a2_vars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status $100. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>%print(data=translib.a2_cohortdatavars)&#59<br/>/*data importDIc_tmp201&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat variable $100.  &#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=importDIc_tmp201 (keep=variable where=(variable ne ''))*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"vars_MDS_LTC\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/>&nbsp&nbsp&nbsp&nbsp srcFile= &settingsXls,<br/>&nbsp&nbsp&nbsp&nbsp sheet=vars_MDS_LTC,<br/>&nbsp&nbsp&nbsp&nbsp target=importDIc_tmp201,<br/>&nbsp&nbsp&nbsp&nbsp where=%str(variable ne ''),<br/>&nbsp&nbsp&nbsp&nbsp keep =variable  ,<br/>&nbsp&nbsp&nbsp&nbsp format=%str(variable $100. )<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>data importDIc_tmp202&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. &#59<br/>&nbsp&nbsp&nbsp&nbspset importDIc_tmp201&#59<br/>&nbsp&nbsp&nbsp&nbsprename variable = VarName_in_Raw_File&#59<br/>&nbsp&nbsp&nbsp&nbspfinal_status =1&#59<br/>&nbsp&nbsp&nbsp&nbspfile_nick_name='mds_ltc'&#59<br/>run&#59<br/>/*get ltc vars already input into a2 from sheet 'StudyFields'*/<br/>data importDIc_tmp203&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspif file_nick_name='mds_ltc' &#59<br/>run&#59<br/><br/>/*from _tmp202, remove those already appeared in _tmp203*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=importDIc_tmp202,<br/>&nbsp&nbsp&nbsp&nbsptarget=importDIc_tmp204,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(VarName_in_Raw_File not in (select  VarName_in_Raw_File from importDIc_tmp203))<br/>)&#59<br/><br/>/*attach vars in _tmp202 to a2*/<br/>data translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars &nbsp&nbsp&nbsp&nbspimportDIc_tmp204&#59<br/>&nbsp&nbsp&nbsp&nbspVarName_in_Raw_File=upcase(strip(VarName_in_Raw_File))&#59<br/>run&#59<br/>%sort(data =  translib.a2_cohortdatavars, sorter=file_nick_name VarName_in_Raw_File)&#59<br/><br/><br/>/*get dictionary for mds_ltc vars*/<br/>/*import description of variables from mds_ltc */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp205<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"MDS-LTC\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'mds_ltc'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp205 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and trailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc lagvar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='') &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For some of the vars, the description is in two rows. The var name appears in the first row, but not the second row<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat lagVar1 $100. lagDesc $1000. lagNote $1000. lagMeta $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagVar1 = lag(variable)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagdesc = lag(description)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagNotes = lag(notes)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagMeta = lag(metadoc)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif variable='' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvariable = lagVar1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription = strip(Lagdesc) || ' ' || description&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes = strip(lagNotes) || ' ' || notes&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc = strip(LagMeta) || ' ' || metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=importDIc_tmp207, sorter=variable obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp208&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby variable obs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop obs lagVar1 lagdesc lagNotes lagMeta&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset  translib.A11_DataVarDic importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(variable, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then variable =substr(variable, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/**getting macro file (full path) and command lines for getting dx from MDS_LTC files**/<br/><br/>%macro getLTCMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*by default, always have a empty macro (for a later task, there has to be a file to be transferred)*/<br/>&nbsp&nbsp&nbsp&nbsp/*create an empty sas file. If A12 does not contain a real sas file, transfer the empty sas file*/<br/>&nbsp&nbsp&nbsp&nbspfilename EmpSAS \"&localDataPath.\\empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfile EmpSAS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspput &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbspproc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=translib.a12_DxMDSLTC (where = (strip(theFile) ne ''))*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=yes&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Dx_MDS_LTC_Macro\"&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsprun&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp%myImportXls(<br/>&nbsp&nbsp&nbsp&nbsp srcFile= &settingsXls,<br/>&nbsp&nbsp&nbsp&nbsp sheet=Dx_MDS_LTC_Macro,<br/>&nbsp&nbsp&nbsp&nbsp target=translib.a12_DxMDSLTC,<br/>&nbsp&nbsp&nbsp&nbsp where=%str(strip(theFile) ne ''),<br/>&nbsp&nbsp&nbsp&nbsp keep =  ,<br/>&nbsp&nbsp&nbsp&nbsp format=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%nobs(data=translib.a12_DxMDSLTC)&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&nobs=0) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata translib.a12_DxMDSLTC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat thePath $1000. theFile $100. theLines $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePath = \"&localDataPath\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheFile =\"empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend getLTCMacro&#59<br/>%getLTCMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete importDIc_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*************************************************************************************/<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-4J9KUcN7icSJ7T9p","name":"_0C Define Master Input file on remote side","NodeDescription":"///t<br/>///s<br/>%global theMasterInputFile remoteToolsPath&#59<br/>%let remoteToolsPath = /sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools&#59<br/>%include \"&remoteToolsPath./tools_ncc.sas\" /LRECL=32767&#59<br/><br/>%let thisProjectName=%lowcase(%sysfunc(dequote(&_clientprojectname)))&#59<br/>/*remove '.egp'*/<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, .egp, ))&#59<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, datacreation, ))&#59<br/>%let thisProjectName=%substr(&thisProjectName, 1, 29)&#59<br/><br/><br/>%let theMasterInputFile = a1_&thisProjectName.&#59<br/>%put >>> &theMasterInputFile&#59<br/><br/>%let remoteCommonExchange= \"\"&#59<br/><br/>/*Also need to let the remote site know the local project rootpath*/<br/><br/>%global thisProjectRootPath ThisEGPPath&#59<br/><br/>/*the following is put in a macro so that all the vars can be set as local*/<br/>%macro defineProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local RevEGPPath SearchSeg RevSearchSegPosition StartPosOftheRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLengthRevEGPPath theRevProjectRootPathLength theRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &ThisEGPPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*to reversely search and find the root folder<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFor example, the EGPPath is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\SAS code\\DataCreation_Project4_20190514.egp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe project root path is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., the sub string before '\\SAS code\\'.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that  '\\SAS code\\' appears twice in the EGPPath, the expected root path is before the last incidence of 'SAS code\\'. <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe following is a clumpsy way of doing it, but it works.<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. Make a reverse string of the EGPPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppge.41509102_4tcejorP_noitaerCataD\\edoc SAS\\133_51oiB_\\edoc SAS\\)narakaslAL(4tcejorP\\narkaSlAaniL\\srehcraeser_evitaroballoC\\:S<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevEGPPath =%sysfunc(reverse(&ThisEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevEGPPath&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The string segment to search is '\\SAS code\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphowever, in the revered EGPPath by step 1, the segment to search should also be reversed:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso it is like '\\edoc SAS\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let SearchSeg=\\SAS code\\&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSeg=%sysfunc(reverse(&SearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSeg&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. In the reversed EGPPath, search the first position of the reversed search segment<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSegPosition = %index(%nrbquote(&RevEGPPath), %nrbquote(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSegPosition&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. Determine the start position of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe position of the reversed search segment ('\\edoc SAS\\') is obtained in &RevSearchSegPosition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe reversed search segment ('\\edoc SAS\\') has a length of %length(&RevSearchSeg).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTherefore the start position of the target sub string is:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&RevSearchSegPosition + %length(&RevSearchSeg) .<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let StartPosOftheRevProjectRootPath = %eval(&RevSearchSegPosition + %length(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &StartPosOftheRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*5. Determine the length of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt should be the length of (&RevEGPPath) -  &StartPosOftheRevProjectRootPath +1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LengthRevEGPPath=%length(%nrbquote(&RevEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &LengthRevEGPPath &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPathLength = %eval(&LengthRevEGPPath -  &StartPosOftheRevProjectRootPath+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRevProjectRootPathLength&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*6. Get the substr from the reversed EGPPath, after the start position<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) such string is the reversed Project Root Path.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPath = %substr(%nrbquote(&RevEGPPath), &StartPosOftheRevProjectRootPath, &theRevProjectRootPathLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>&theRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*7. finally, Reverse the reversed project root path again. This time, the project root path is obtained!*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thisProjectRootPath = %sysfunc(reverse(%nrbquote(&theRevProjectRootPath)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &thisProjectRootPath&#59<br/><br/>%mend defineProjectRootPath&#59<br/>%defineProjectRootPath&#59<br/>s///<br/>t///","children":[{"idx":"EGTask-VTeI9BWINEdAmjuw","name":"0D_Copy masterInputfile to remote common folder","children":[{"idx":"CodeTask-fyg8ArcwraAqLyCk","name":"Remote settings - Copy","NodeDescription":"///t<br/>///s<br/>/*Settings on remote server*/<br/><br/>data _null_&#59run&#59<br/><br/>/*set raw file names*/<br/>%global<br/>&nbsp&nbsp&nbsp&nbspThisEGPPath <br/>&nbsp&nbsp&nbsp&nbspexchangeDir Rexchange  dp_benefitFile dp_nonbenefitFile dp_specFile ed_a2012File ed_b2012File<br/>&nbsp&nbsp&nbsp&nbsphospitalFile MSBFile MSB_DFile MSB_DocInfoFile PHRS_InfoFile PHRS_CovFile PHRS_RSDCFile PHRS_ArrvFile<br/>&nbsp&nbsp&nbsp&nbspPHRS_ResiFile PHRS_Resi_cleanFile PHRS_retrFile VerfMortFile MDS_LTC_File AnalyticalReport DataReport alldinfile<br/>&nbsp&nbsp&nbsp&nbspMortDateVar MortFile_vital MortFile_PHRS<br/>&nbsp&nbsp&nbsp&nbspThisProjectType<br/>&nbsp&nbsp&nbsp&nbspCleanHospFile CleanDINFile CleanMortVitalFile CleanMortPHRSFile<br/>&#59<br/><br/><br/>/*set initial values of the source files from the cleaned file folders*/<br/>%let hospitalFile =&#59<br/>%let MortFile_vital=&#59<br/>%let MortFile_PHRS=&#59<br/>%let alldinfile=&#59<br/><br/><br/>/*The first thing is to get the master input information from the data in the common folder.*/<br/>libname RCommon \"/sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools/CommonExchange\"&#59<br/>%print(data=RCOMMON.&theMasterInputFile)&#59<br/>/*get remote path*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59quit&#59<br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> &RemoteParentFolder&#59<br/><br/>/*determine whether there are customized cleaned files<br/>&nbsp&nbsp&nbsp&nbspSometimes the project is not going to use the latest cleaned file, rather, a specific version will be used<br/>&nbsp&nbsp&nbsp&nbspthe following is to set to the specific cleaned file if it is customized<br/>*/<br/>%let CleanHospFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanHospFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanHospFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanHospFile&#59<br/><br/>%let CleanDINFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanDINFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanDINFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanDINFile&#59<br/><br/>%let CleanMortVitalFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanMortVitalFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanMortVitalFile', Value)&#59<br/>run&#59quit&#59<br/><br/>%put >>> &CleanMortVitalFile&#59<br/><br/>%let CleanMortPHRSFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanMortPHRSFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanMortPHRSFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanMortPHRSFile&#59<br/><br/><br/>/*Set the filename for the customzied cleaned files*/<br/>%macro setCustomCleanFile(theCustFileSrc=, theCustFileLib=, theSrcVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local theCustFileSrc theLength theCusSrcFileName theExtName theCustFileLib<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRevtheCusSrcFileName FileNameLength thePos thePath theFileName theLength2  theSrcVar<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName =&&theCustFileSrc&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theCusSrcFileName= &theCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theLength=%length(&theCusSrcFileName)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &theLength=0 %then %goto exit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName=%sysfunc(strip(&theCusSrcFileName))&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&theLength<9)%then %let theLength=9&#59<br/>&nbsp&nbsp&nbsp&nbsp/*add the file extension name if it is missing*/<br/>&nbsp&nbsp&nbsp&nbsp%let theExtName=%substr(&theCusSrcFileName, %eval(&theLength-8), 9)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &theExtName ne %str(.sas7bdat) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName =&theCusSrcFileName..sas7bdat&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theCusSrcFileName= &theCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*determine the folder, and the file name*/<br/>&nbsp&nbsp&nbsp&nbsp/*reverse the string, and find the first '/'. */<br/>&nbsp&nbsp&nbsp&nbsp%let RevtheCusSrcFileName =%sysfunc(reverse(&theCusSrcFileName))&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> RevtheCusSrcFileName=&RevtheCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%let FileNameLength= %index(&RevtheCusSrcFileName, /)&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> FileNameLength=&FileNameLength&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theLength2= %length(&theCusSrcFileName)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let thePos=%eval( &theLength2- &FileNameLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let thePath=%substr(&theCusSrcFileName, 1, &thePos)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theFileName = %substr(&theCusSrcFileName, &thePos+2 , &FileNameLength-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the extension name (the data set name in SAS data steps does not include extension names)*/<br/>&nbsp&nbsp&nbsp&nbsp%let theFileName = %sysfunc(tranwrd(&theFileName, %str(.sas7bdat), ))&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%put >>> thePath = &thePath&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theFileName = &theFileName&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*make a libname for the Path*/<br/>&nbsp&nbsp&nbsp&nbsplibname &theCustFileLib \"&thePath\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*set the value of the source file (e.g., let the hospitalfile = the customized file)*/<br/>&nbsp&nbsp&nbsp&nbsp%let &theSrcVar =&theCustFileLib..&theFileName&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*if the file dose not exist, create an error*/<br/>&nbsp&nbsp&nbsp&nbsp%if %sysfunc(exist(&&&theSrcVar))=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the file &theCusSrcFileName does not exist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCustomCleanFile_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &&&theSrcVar (obs= 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp%print(data=&&&theSrcVar)&#59*/<br/><br/>%exit:<br/><br/>%mend setCustomCleanFile&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanHospFile, theCustFileLib=custHF, theSrcVar=hospitalFile)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanDINFile, theCustFileLib=custDF, theSrcVar=alldinfile)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanMortVitalFile, theCustFileLib=custMVF, theSrcVar=MortFile_vital)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanMortPHRSFile, theCustFileLib=custMPF, theSrcVar=MortFile_PHRS)&#59<br/><br/><br/>/*determine the source of mortality file. For non research projects, do not use vital statistics*/<br/>%let ThisProjectType=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif lowcase(strip(items))='projecttype'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ThisProjectType', value)&#59<br/>run&#59<br/>%put >>> ThisProjectType= &ThisProjectType&#59<br/><br/><br/><br/>/*check if such RemoteParentFolder exists, if not, create it*/<br/>%macro mkRemoteParentFolderDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &RemoteParentFolder&#59<br/>&nbsp&nbsp&nbsp&nbsp%local dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&RemoteParentFolder))&#59 <br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&dirExist) = 0 %then %do&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./Source&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./Target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./FileExchangeBetweenLocalAndRemote&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend mkRemoteParentFolderDir&#59<br/>%mkRemoteParentFolderDir&#59<br/><br/>/*delete the master input file in the common exchange folder<br/>&nbsp&nbsp&nbsp&nbspthe lib name has to be specified separately in the proc datasets statement.<br/>&nbsp&nbsp&nbsp&nbspIt won't work by the following<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"delete rcommon.&theMasterInputFile\"&#59<br/>*/<br/>proc datasets nolist lib=rcommon&#59<br/>&nbsp&nbsp&nbsp&nbspdelete &theMasterInputFile&#59<br/>run&#59quit&#59<br/><br/><br/>/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>%put >>> &ThisEGPPath&#59<br/><br/><br/>libname Clean \"/sasdata/hisc/shared_data/HQC_share/Clean\"&#59<br/>/*The following part is to set clean folders for each year*/<br/>%macro setCleanLibs&#59<br/>&nbsp&nbsp&nbsp&nbsp%local curSysYear theYear yearTag theCleanRoot theCleanFolder thelibname dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theCleanRoot = /sasdata/hisc/shared_data/HQC_share/Clean/&#59<br/>&nbsp&nbsp&nbsp&nbsp/*determine the curent year*/<br/>&nbsp&nbsp&nbsp&nbsp%let curSysYear=%sysfunc(year(\"&sysdate\"d))&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &curSysYear&#59<br/>&nbsp&nbsp&nbsp&nbsp%do theYear = 2017 %to &curSysYear&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag = %substr(&theYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the year specific clean folders*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCleanFolder= &theCleanRoot.&theYear. Data/Clean files&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check if the specified clean folder exists*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&RemoteParentFolder))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &dirExist = 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the folder &theCleanFolder exists&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the libname*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thelibname = Clean&yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> creating &thelibname for the folder \"&theCleanFolder\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*define the libnames*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname &theLibname \"&theCleanFolder\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend setCleanLibs&#59<br/>%setCleanLibs&#59<br/><br/>/*do not use the folder 'exchange'. That one is quite confusing*/<br/><br/>/*assign the address for the exchange folder between local and remote<br/>&nbsp&nbsp&nbsp&nbsptheexChangeDir is the LOCAL exchange folder<br/>*/<br/>%let exchangeDir =&thisProjectRootPath.\\Data\\Exchange_Local_Remote&#59<br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>/*This folder should be project specific!!!*/<br/>%let Rexchange =  &RemoteParentFolder./FileExchangeBetweenLocalAndRemote&#59<br/>libname RexLib \"&RExchange\"&#59<br/><br/>/*%let localDataPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Data&#59*/ /* the folder to save requested raw data files*/<br/><br/>/*the following file may have to be identified manually*/<br/><br/><br/>%let dp_benefitFile=hqc.dp_claim&#59<br/>%let dp_nonbenefitFile=hqc.dp_claim_non_ben&#59<br/>%let dp_specFile = hqc.dp_drug&#59<br/><br/>%let ed_a2012File=hqc.ED_F_2012&#59<br/>%let ed_b2012File=hqc.nacrs&#59<br/><br/>%let MSBFile=hqc.MSB_BILLING&#59<br/>%let MSB_DFile=hqc.MSB_Doctor&#59<br/>%let MSB_DocInfoFile=hqc.MSB_DOCTOR_MOBILITY&#59<br/><br/>%let PHRS_InfoFile = hqc.PHRS_PERS_INFO&#59<br/>%let PHRS_CovFile = hqc.PHRS_PERS_PROG&#59<br/>%let PHRS_RSDCFile=hqc.phrs_pers_rsdc&#59<br/>%let PHRS_ArrvFile = HQC.phrs_pers_arrv&#59<br/>%let PHRS_ResiFile = HQC.phrs_pers_resc&#59<br/>%let PHRS_retrFile = HQC.PHRS.PERS_RETR&#59<br/><br/>/*The following file cannot be changed, as it is the latest one with income quintile info*/<br/>%let PHRS_Resi_cleanFile=clean17.PHRS_PERS_RESC_3_AMJ17_02NOV2017&#59 /*this is the last file with income quintile, AMJ = Apr May Jun*/<br/><br/>/*For the following files, there are different versions. Either the latest, or a customized file will be select for this project*/<br/>%macro setCleanFiles(theRaw=, startChars=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local curYear YearTag startChars  nTrials theRaw theRawFileName debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If theRaw file has been defined (i.e., by a customized source), exit the macro and do not overwrite the defined value*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&&&theRaw) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> The raw file &theRaw has been defined, and is not overwritten&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto exit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Determine the source of the cleaned hospitalization file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The logic is to select the latest file (by modified date) among all versions.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is either in a clean folder of the current year, or the previous year <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(at the begining of the year, the clean folder is created, but the clean file was not available yet).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*list out all files in the clean file folder of the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%sysfunc(year(\"&sysdate\"d))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &curYear&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials=0&#59<br/><br/>%repeat:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>>>>>>>>>>>>>>>>>>>>>> &theRaw&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output Members=setCleanFiles_tmp1&#59 /*Note: this line must precede the following proc statement lines. Otherwise the output goes nowhere*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets library=&theLibname  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let startChars=%lowcase(&startChars)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the output data set with all file names, select the target files (e.g., hospital files are characterized by the begining 'cihi'*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCleanFiles_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(lowcase(name)) in: (\"&startChars\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Check the number of variables in _tmp2*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=setCleanFiles_tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If nobs =0, there is no such file in the clean folder of the current year. It must be that files of the first year is not available yet<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is in the clean folder of the last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &nobs =0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*redefine the year tag to last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%eval(&curYear - 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials = %eval(&nTrials +1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> number of trials = &nTrials&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*repeat the process to get the files in the redefined clean folder*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %eval(&nTrials < 3) %then %do&#59  /*After trying for 3 times, yet there is no such files, quit*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto repeat&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> There is no such files in the recent 3 years. Nothing is defined for the source file &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=setCleanFiles_tmp2, sorter=Lastmodified)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp2 (obs=max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theRawFileName', name)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &theRaw = %lowcase(Clean&yearTag..&theRawFileName)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete setCleanFiles_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59 /*it is critical to have the statement 'quit', as it releases proc dataset from suppressing ods tables (the suppressing was set by the option nolist)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%exit:<br/><br/>%mend setCleanFiles&#59<br/>%setCleanFiles(theRaw=hospitalFile, startChars=cihi_EOC)&#59<br/>%setCleanFiles(theRaw=alldinfile, startChars=alldin_)&#59<br/>%setCleanFiles(theRaw=MortFile_vital, startChars=verf_dths_)&#59<br/>%setCleanFiles(theRaw=MortFile_PHRS, startChars=PHRS_DTHS_)&#59<br/><br/><br/><br/><br/>%macro setMortFileSource&#59<br/> &nbsp&nbsp&nbsp&nbsp%if %length(&ThisProjectType) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*note that the combination of %lowcase, %sysfunc, and strip cannot deal with null values, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., if &ThisProjectType has nothing in it, the following line will report error*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisProjectType=%lowcase(%sysfunc(strip(&ThisProjectType)))&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &ThisProjectType&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %lowcase(&ThisProjectType) = %str(usevital) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For nonresearch projects, use vital mortality data*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let VerfMortFile = &MortFile_vital&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let MortDateVar=ddt_Vit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For research projects, use phrs mortality data*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let VerfMortFile = &MortFile_PHRS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let MortDateVar=ddt_NoVit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend setMortFileSource&#59<br/>%setMortFileSource&#59<br/>%put >>> ThisProjectType= &ThisProjectType&#59<br/>%put >>> VerfMortFile= &VerfMortFile&#59<br/>%put >>> MortDateVar=&MortDateVar&#59<br/><br/>%let MDS_LTC_File = hqc.MDS_ASSESSMENT_F_2015&#59<br/><br/>%let AnalyticalReport=Analytical Report.xlsx&#59<br/>%let DataReport=DataSum_Report.xlsx&#59<br/><br/><br/>/*include the raw file extracing macros*/<br/><br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_CIHI.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/Addquotes.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/reformat_datevars.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_share/Xinya/Macros/GEO_INCQTL_assign.sas' /LRECL=32767&#59<br/><br/>/*the following is for calculating the Charlson-elixer score*/<br/>%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/ExpandLst.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/VarExist.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/IsEmptyDS.sas' /LRECL=32767&#59<br/><br/>%put >>> the remote work directory is at %sysfunc(pathname(work))&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-qFLN4gyUPK5Spbts","name":"_0D del Master Input at local","NodeDescription":"///t<br/>///s<br/>/*Delete the master input file in the local common exchange folder*/<br/>proc datasets nolist lib=lcommon&#59<br/>&nbsp&nbsp&nbsp&nbspdelete &theMasterInputFile&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"CodeTask-fyg8ArcwraAqLyCk"}]},{"idx":"EGTask-dYkWbPbhNQoHHbWo","name":"A1_Copy data sets in transLib to Remote Server - Copy","children":[{"idx":"CodeTask-qpDp6MsYNFpcAD8r","name":"B_Remote_get settings into macro variables - Copy","NodeDescription":"///t<br/>///s<br/>/*get the project start date. It is also the last Xtrc Date*/<br/><br/>data _null_&#59run&#59<br/><br/>%global <br/>&nbsp&nbsp&nbsp&nbspProjectName<br/>&nbsp&nbsp&nbsp&nbspProjectStartDate<br/>&nbsp&nbsp&nbsp&nbspContact<br/>&nbsp&nbsp&nbsp&nbspEmail<br/>&nbsp&nbsp&nbsp&nbspDataStartDate<br/>&nbsp&nbsp&nbsp&nbspDataEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartDate<br/>&nbsp&nbsp&nbsp&nbspEntryEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartYear<br/>&nbsp&nbsp&nbsp&nbspEntryEndYear<br/>&nbsp&nbsp&nbsp&nbspEntryYears&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_Cover<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_MDS_LTC<br/>&nbsp&nbsp&nbsp&nbspLPath_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspFile_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspCommand_MDSLTC_DxMacro<br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspremoteSourcePath<br/>&nbsp&nbsp&nbsp&nbspremoteReportPath<br/>&nbsp&nbsp&nbsp&nbspremoteTargetPath<br/>&nbsp&nbsp&nbsp&nbsplocalParentFolder<br/>&nbsp&nbsp&nbsp&nbsplocalDataPath<br/>&nbsp&nbsp&nbsp&nbsplocalTargetPath<br/><br/>&#59<br/><br/>/*remote parent path has been defined in program _0C*/<br/><br/><br/>/*the source files on remote server*/<br/>%let remoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>> &remoteSourcePath&#59<br/>libname remoteS \"&remoteSourcePath\"&#59<br/>/*the target files on remote server*/<br/>%let remoteTargetPath=&RemoteParentFolder./Target&#59<br/>libname remoteT \"&remoteTargetPath\"&#59<br/>/*the report on remote server*/<br/>%let remoteReportPath=&RemoteParentFolder./Reports&#59<br/>libname remoteR \"&remoteReportPath\"&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RexLib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%put >>> &localParentFolder&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59<br/>%put >>> localDataPath=&localDataPath&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> localTargetPath = &localTargetPath&#59<br/><br/><br/>/*copy all files from remote exchange to remoteS*/<br/>proc datasets lib=Rexlib&#59<br/>&nbsp&nbsp&nbsp&nbspcopy out=remoteS&#59<br/>run&#59<br/><br/>Proc delete data=Rexlib._all_&#59<br/>run&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items='ProjectStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*in the source data, the date values are characters<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the folloiwng steps, the character date values are changed to numberical datavalues, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen put into macro variables<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWhy not directly put characters into macro variable values?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbecause the original character is like 'yyyymmdd', while the required data format is 'ddmmmyyyy'<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let ProjectStartDate=%bquote('&ProjectStartDate')d&#59<br/>%let ProjectStartDate=%substr(&ProjectStartDate, 1, %length(&ProjectStartDate))&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/><br/>/*changes made in 20190228<br/>The value of lastxtrcdate used to be determined by the ProjectStartDate. <br/>In Yuan's VH project, the start date was in Apr 15 2018. Later the team deceided to have updated report <br/>by including more recent data, including a cleaned resc file. For that file, it should include an xtrc_date of <br/>Jul 03 2018. Such date is after the project start date. <br/><br/>Update by including more recent data could happen frequently. In that case, setting the lastXtrcDate to the ProjectStartDate <br/>is not appropriate.<br/><br/>Starting from 2019-02-28, the setting of lastXtrcDate has changed by taking the 'EarliestProjectStartDatePlus180', <br/>which is 'EarlistProjectStartDate' +180 days (see the formula xls cell in sheet 'MasterInput' of the xls input form)  as the lastXtrcDate. <br/>This would be sufficient to include more recent data in cleaned files.  <br/><br/>Values on that sheet will be read into the SAS set 'remoteS.al_MasterInput' , and used to determine the lastxtrcdate, as the following. <br/>*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items='EarliestProjectStartDatePlus180'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*in the source data, the date values are characters<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the folloiwng steps, the character date values are changed to numberical datavalues, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen put into macro variables<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWhy not directly put characters into macro variable values?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbecause the original character is like 'yyyymmdd', while the required data format is 'ddmmmyyyy'<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('LastXtrcDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let LastXtrcDate=%bquote('&LastXtrcDate')d&#59<br/>%let LastXtrcDate=%substr(&LastXtrcDate, 1, %length(&LastXtrcDate))&#59<br/>%put >>> LastXtrcDate = &LastXtrcDate&#59<br/><br/>/*get the data start and end dates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*get the cohort entrydates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryStartDate=%bquote('&EntryStartDate')d&#59<br/>%let EntryStartDate=%substr(&EntryStartDate, 1, %length(&EntryStartDate))&#59<br/>%put >>> EntryStartDate = &EntryStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryEndDate=%bquote('&EntryEndDate')d&#59<br/>%let EntryEndDate=%substr(&EntryEndDate, 1, %length(&EntryEndDate))&#59<br/>%put >>> EntryEndDate = &EntryEndDate&#59<br/><br/>%let EntryStartYear = %sysfunc(year(&EntryStartDate))&#59<br/>%put >>> EntryStartYear=&EntryStartYear&#59<br/>%let EntryEndYear = %sysfunc(year(&EntryEndDate))&#59<br/>%put >>> EntryEndYear=&EntryEndYear&#59<br/>%let EntryYears = %eval(&EntryEndYear - &EntryStartYear +1)&#59<br/>%put >>> EntryYears=&EntryYears&#59<br/><br/><br/>/*The  project name, contact, and email*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='ProjectName'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectName', value)&#59<br/>run&#59<br/>%put >>> ProjectName = &ProjectName&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Contact'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Contact', value)&#59<br/>run&#59<br/>%put >>> Contact = &Contact&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Email'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Email', value)&#59<br/>run&#59<br/>%put >>> Email = &Email&#59<br/><br/><br/>/*the following part is to determine the xtrc_date for each sources<br/>&nbsp&nbsp&nbsp&nbspMSB, Drug claims, coverage period (same for demo, resitype)<br/>&nbsp&nbsp&nbsp&nbspThe cleaned hospital file does not require xtrc date<br/>&nbsp&nbsp&nbsp&nbsp?? How about the mortality record file (verfdt), the emergancy file (f_2012)<br/><br/>*/<br/>%put >>> &dataStartDate&#59<br/>/*the xtrc_dates*/<br/>/*determine the msb xtrc_date***********/<br/>%freq(data=clean.xtrc_dates, table=ds)&#59<br/>%sort(data=clean.xtrc_dates, target=b11, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/><br/>data b12&#59<br/>&nbsp&nbsp&nbsp&nbspset b11&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'msb_billing'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b12, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b13&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_MSB=%str(%')&Xtrc_Start_MSB.%str(%')d&#59<br/>%let Xtrc_Start_MSB= %substr(&Xtrc_Start_MSB, 1, %length(&Xtrc_Start_MSB))&#59<br/>%put >>> &Xtrc_Start_MSB&#59<br/><br/>%sort(data=b12, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b14&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_MSB=%str(%')&Xtrc_End_MSB.%str(%')d&#59<br/>%let Xtrc_End_MSB= %substr(&Xtrc_End_MSB, 1, %length(&Xtrc_End_MSB))&#59<br/>%put >>> &Xtrc_End_MSB&#59<br/>/******************************************/<br/><br/>/*determine the benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b21, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b22&#59<br/>&nbsp&nbsp&nbsp&nbspset b21&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b22, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b23&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_Ben=%str(%')&Xtrc_Start_DP_Ben.%str(%')d&#59<br/>%let Xtrc_Start_DP_Ben= %substr(&Xtrc_Start_DP_Ben, 1, %length(&Xtrc_Start_DP_Ben))&#59<br/>%put >>> &Xtrc_Start_DP_Ben&#59<br/><br/>%sort(data=b22, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b24&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_Ben=%str(%')&Xtrc_End_DP_Ben.%str(%')d&#59<br/>%let Xtrc_End_DP_Ben= %substr(&Xtrc_End_DP_Ben, 1, %length(&Xtrc_End_DP_Ben))&#59<br/>%put >>> &Xtrc_End_DP_Ben&#59<br/>/******************************************/<br/><br/>/*determine the non-benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b31, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b32&#59<br/>&nbsp&nbsp&nbsp&nbspset b31&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b32, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b33&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_NBen=%str(%')&Xtrc_Start_DP_NBen.%str(%')d&#59<br/>%let Xtrc_Start_DP_NBen= %substr(&Xtrc_Start_DP_NBen, 1, %length(&Xtrc_Start_DP_NBen))&#59<br/>%put >>> &Xtrc_Start_DP_NBen&#59<br/><br/>%sort(data=b32, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b34&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_NBen=%str(%')&Xtrc_End_DP_NBen.%str(%')d&#59<br/>%let Xtrc_End_DP_NBen= %substr(&Xtrc_End_DP_NBen, 1, %length(&Xtrc_End_DP_NBen))&#59<br/>%put >>> &Xtrc_End_DP_NBen&#59<br/>/******************************************/<br/><br/>*&xtrc_cover&#59<br/>/*determine the coverage xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b41, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>/*%freq(data=b41, table=ds)&#59*/<br/>data b42&#59<br/>&nbsp&nbsp&nbsp&nbspset b41&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'phrs_pers_prog'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b42, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b43&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_Cover=%str(%')&Xtrc_Start_Cover.%str(%')d&#59<br/>%let Xtrc_Start_Cover= %substr(&Xtrc_Start_Cover, 1, %length(&Xtrc_Start_Cover))&#59<br/>%put >>> &Xtrc_Start_Cover&#59<br/><br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b44&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 end=last&#59<br/>&nbsp&nbsp&nbsp&nbspif last&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_Cover=%str(%')&Xtrc_End_Cover.%str(%')d&#59<br/>%let Xtrc_End_Cover= %substr(&Xtrc_End_Cover, 1, %length(&Xtrc_End_Cover))&#59<br/>%put >>> &Xtrc_End_Cover&#59<br/>/******************************************/<br/><br/><br/>/*2019-09-23<br/>&nbsp&nbsp&nbsp&nbspconsider that the study's lastxtrcdate is '01Jan2011'd, <br/>&nbsp&nbsp&nbsp&nbspwhile the earliest Xtrc_Start_Info (which is, as of 2019-09-23, always the same as the Xtrc_Start_Cover) is '01Jan2013'd. <br/>&nbsp&nbsp&nbsp&nbspIn that case, there will be no records earlier than the &LastXtrcDate.<br/>&nbsp&nbsp&nbsp&nbspTo correct it, when getting phrs info data, the following is added<br/>*/ <br/><br/>%put >>> Xtrc_Start_Cover=&Xtrc_Start_Cover&#59<br/>%put >>> Xtrc_End_Cover=&Xtrc_End_Cover&#59<br/>%put >>> LastXtrcDate=&LastXtrcDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_Cover=&Xtrc_Start_Cover&#59<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_Cover=&Xtrc_End_Cover&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59<br/>&nbsp&nbsp&nbsp&nbspnew_LastXtrcDate=max(Xtrc_End_Cover, LastXtrcDate)&#59<br/>&nbsp&nbsp&nbsp&nbspformat new_LastXtrcDate date9. Xtrc_Start_Cover date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('new_LastXtrcDate', put(new_LastXtrcDate, date9.))&#59 <br/>run&#59<br/>%let new_LastXtrcDate=%str(%')&new_LastXtrcDate.%str(%')d&#59<br/>%let new_LastXtrcDate= %substr(&new_LastXtrcDate, 1, %length(&new_LastXtrcDate))&#59<br/>%let LastXtrcDate=&new_LastXtrcDate&#59<br/>%put >>> new_LastXtrcDate = &new_LastXtrcDate, i.e. LastXtrcDate is now &new_LastXtrcDate&#59<br/>/******/<br/><br/><br/>/*determine the drug spec xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b51, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b52&#59<br/>&nbsp&nbsp&nbsp&nbspset b51&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim' or ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b52, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b53&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_SPEC=%str(%')&Xtrc_Start_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_Start_DP_SPEC= %substr(&Xtrc_Start_DP_SPEC, 1, %length(&Xtrc_Start_DP_SPEC))&#59<br/>%put >>> &Xtrc_Start_DP_SPEC&#59<br/><br/>%sort(data=b52, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b54&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_SPEC=%str(%')&Xtrc_End_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_End_DP_SPEC= %substr(&Xtrc_End_DP_SPEC, 1, %length(&Xtrc_End_DP_SPEC))&#59<br/>%put >>> &Xtrc_End_DP_SPEC&#59<br/>/******************************************/<br/><br/>/***get xtrc_date for mds_ltc data****************************/<br/>data b61&#59<br/>&nbsp&nbsp&nbsp&nbspset clean.xtrc_dates&#59<br/>&nbsp&nbsp&nbsp&nbspif xtrc_date < = &LastXtrcDate  and ds='mds_assessment_f_2015'&#59<br/>run&#59<br/>%sort(data=b61, sorter=descending xtrc_date)&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset b61 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_MDS_LTC',  put(xtrc_date, date9.))&#59 <br/>run&#59<br/>%let XTRC_MDS_LTC=%str(%')&XTRC_MDS_LTC.%str(%')d&#59<br/>%let XTRC_MDS_LTC= %substr(&XTRC_MDS_LTC, 1, %length(&XTRC_MDS_LTC))&#59<br/>%put >>> &XTRC_MDS_LTC&#59<br/><br/>/****************************************************/<br/><br/>/*get the file (full path) and macro command for getting dx info from MDS_LTC*/<br/>%macro getMDSMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*initially, let the following variables = nothing*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let File_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let Command_MDSLTC_DxMacro =&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data =remoteS.A12_DXMDSLTC )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path, file name and command lines*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset remoteS.A12_DXMDSLTC (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('LPath_MDSLTC_DxMacro',  thePath)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('File_MDSLTC_DxMacro',  theFile)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('Command_MDSLTC_DxMacro',  theLines)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*remove the slash at the end of the path*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %substr(&LPath_MDSLTC_DxMacro, %length(&LPath_MDSLTC_DxMacro), 1) = \\ %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%substr(&LPath_MDSLTC_DxMacro, 1, %eval(%length(&LPath_MDSLTC_DxMacro)-1))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro= %sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the local macro file to get dx data from MDS_LTC = %str(&LPath_MDSLTC_DxMacro.\\&File_MDSLTC_DxMacro)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the remote macro file to get dx data from MDS_LTC = %str(&remoteSourcePath.\\&File_MDSLTC_DxMacro)&#59<br/>%mend getMDSMacro&#59<br/>%getMDSMacro&#59<br/><br/>%freq(source=clean.xtrc_dates, table=ds)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"CodeTask-pZdInLJfziFHV8cl","name":"reclass.macros.v4","custparents":[{"idx":"CodeTask-qpDp6MsYNFpcAD8r"}]},{"idx":"CodeTask-lDZLJZBAVmSFdXXI","name":"cstatmacs.v1","custparents":[{"idx":"CodeTask-qpDp6MsYNFpcAD8r"}]}],"custparents":[{"idx":"EGTask-dYkWbPbhNQoHHbWo"}]},{"idx":"CodeTask-6S7dx9WcsZuqAI83","name":"A2_at Local, del files in transDir - Copy","NodeDescription":"///t<br/>///s<br/>/**/<br/>/*%delData(data=translib.a1_MasterInput translib.a2_vars */<br/>/*translib.a3_icddx translib.a4_intvndx translib.a5_fsc translib.a6_dindx*/<br/>/*translib.a7_dxfiles)&#59*/<br/><br/>Proc delete data=translib._all_&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"EGTask-dYkWbPbhNQoHHbWo"}]}],"custparents":[{"idx":"CodeTask-fyg8ArcwraAqLyCk"}]}],"custparents":[{"idx":"EGTask-VTeI9BWINEdAmjuw"}]}],"custparents":[{"idx":"CodeTask-4J9KUcN7icSJ7T9p"}]}],"custparents":[{"idx":"CodeTask-z4P6iTjKKWu2HwSk"}]},{"idx":"CodeTask-TWjLXkAFWvqbGBjs","name":"VX0_Setting parameters","NodeDescription":"///t<br/>///s<br/>/*Settings parameters for analyses*/<br/><br/>%global EntryEndDate washoutdays runindays followdays&#59<br/><br/>%let EntryEndDate = '31Dec2017'd&#59<br/>%let washoutdays = %eval(365*5)&#59<br/>%let runindays =365&#59<br/>%let followdays =365&#59<br/>libname locald \"&localDatapath\"&#59<br/><br/>%let theChronicConditionDataPath=P:\\Chronics_SKPop(YaoS)_142\\Output\\Result data&#59<br/>%let theChronicConditionData = popdata_allepi_30nov19&#59<br/><br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\Util\\ExpandLst.sas' /LRECL=32767&#59<br/>/*%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59 do not load this as it has conflict with the VarExist macro in mymacros*/<br/>%include 'R:\\Macros\\Util\\IsEmptyDS.sas' /LRECL=32767&#59<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-z4P6iTjKKWu2HwSk"}]}],"custparents":[{"idx":"EGTask-rFt8odCLtBb7Ilne"}]}],"custparents":[{"idx":"CodeTask-eXfv2LrH9l3vohpU"}]}],"custparents":[{"idx":"CodeTask-rkVRJ7BAetfJYMzJ"}]}],"custparents":[{"idx":"CodeTask-CljcMilWauaTBrim"}]}],"custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}]},{"idx":"MYd901f4f1-edbc-48ad-a443-87a2d3cc2675","name":"Compress (slim) files","custparents":[{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"},{"idx":"ProjectCollection-cmSbt48MqRzD7t79"}],"children":[{"idx":"CodeTask-Cyi72WHtF1TQ611E","name":"VXA_Z MapIDs","NodeDescription":"///t<br/>///s<br/>/*VXA_Z. Mapping of key_hsn and physician IDs*/<br/>/*only to run once<br/>NOTE: Do not change the mapping. Otherwise the slim files would be messed up for wrong mapping.<br/>*/<br/><br/>%macro mapIDs&#59<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_keyhsn_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_keyhsn_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_keyhsn_pop, sorter=descending key_hsn)&#59<br/>data VXA_Z0&#59<br/>&nbsp&nbsp&nbsp&nbspset master_keyhsn_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/><br/>/*VXA_Z1. make a uniq code (key_hsnc)with 4 chars to represent a unqiue key_hsn<br/>&nbsp&nbsp&nbsp&nbspfor a number between 1 and 128**4 (i.e., 2097152), turn it to a 4-char string<br/>&nbsp&nbsp&nbsp&nbspeach char represents a number between 1 to 128*/<br/>data master_patientIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z0 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C4 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note! order matters, first to have N1, then N2, then N3, then N4*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128^3 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^3 divided by 128^2 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**3)/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the third left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - (N1*128+N2)*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3=int((i-(N1*128+N2)*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N4 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN4 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC4=byte(N4)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspKey_HSNC=C1||C2||C3||C4&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=VXA_Z1, target=test2, vars=Key_HSNC)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_patientIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_patientIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/><br/><br/>/*mapping physician ids*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docnum_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docnum_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_docnum_pop, sorter=descending key_doc_num)&#59<br/>data VXA_Z1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_docnum_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*As there are less then 9999 docs in the province (at least for now), two chars will be enough*/<br/>data master_DocIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z1 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C2 $1.&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc=C1||C2&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DocIDmap_pop, target=test2, vars=key_doc_numc)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DocIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DocIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>/*mapping dins*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_din_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_din_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_din_pop, sorter=descending din)&#59<br/>data VXA_Z2&#59<br/>&nbsp&nbsp&nbsp&nbspset master_din_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*Three chars will be enough*/<br/>data master_DINmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z2 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C3 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note: order matters, first to have N1, then N2, then N3, then N4.*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdinStr=C1||C2||C3&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DINmap_pop, target=test2, vars=dinStr)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DINmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DINmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%mend mapIDs&#59<br/>s///<br/>t///","children":[{"idx":"CodeTask-We8IE9hdkkiXt2Gj","name":"Q alldin","NodeDescription":"///t<br/>///s<br/>/*Question is the alldin file complete?<br/>No. There are dins in dp claim files, but not in alldins. However, there are also dins in alldin file, but not in dp claims (ben and nonben) <br/>&nbsp&nbsp&nbsp&nbspThe mapping here takes all dins from both alldin file, and the dp claim files (ben and nonben)<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"CodeTask-Cyi72WHtF1TQ611E"}]}],"custparents":[{"idx":"MYd901f4f1-edbc-48ad-a443-87a2d3cc2675"}]},{"idx":"CodeTask-M2658koY8QUDvDge","name":"VXA_V SlimMasters","NodeDescription":"///t<br/>///s<br/>/*VXA_V. Make smaller master files*/<br/>/*only to run once*/<br/>%macro makeSlimMaster&#59<br/>/*VXA_V0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXA_V1. the dp files are too big, to make it slim:<br/> keep only din key_hsn key_prscr_num and Rx_ddddd<br/>*/<br/><br/>/*VXA_V1a. compress the dp_benefit file*/<br/>/*%print(data=master_dp_benefit_pop)&#59*/<br/>data VXA_V1a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_benefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*110358616*/<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_benefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_benefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*VXA_V1b. compress the dp_nonbenefit file*/<br/>/*%print(data=master_dp_nonbenefit_pop)&#59*/<br/>data VXA_V1b1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_nonbenefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3). Some records cannot be mapped, why the dins in master_DINmap_pop is incomplete?<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_nonbenefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_nonbenefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*Making Slim MSB Pop (originally in VZB)*/<br/>/*VXA_V11B1. replace the key_doc_num with compressed doc id.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb_pop,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(VXA_V11B1 (drop=key_doc_num dos_1)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>/*VXA_V11B2. replace the patient id with compressed patient id.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V11B1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(master_msb_pop_slim (drop=key_hsn)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localDataPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=master_msb_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=master_msb_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*Making Slim Hosp Pop (originally in VZB)*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp_pop.sas7bdat)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_hosp_pop,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(master_hosp_pop_slim (drop=key_hsn)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localDataPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=master_hosp_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=master_hosp_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%beep&#59<br/><br/>%mend makeSlimMaster&#59<br/>s///<br/>t///","custparents":[{"idx":"MYd901f4f1-edbc-48ad-a443-87a2d3cc2675"}]}],"NodeDescription":"<p>///t</p><p>The introduction vidios on ideas of compression:</p><p><br></p><p>The play list: <a href=\"https://www.youtube.com/playlist?list=PLRAq-063t1uSt7Yr-4iyJ8jNXO_me1-KW\" target=\"_blank\">https://www.youtube.com/playlist?list=PLRAq-063t1uSt7Yr-4iyJ8jNXO_me1-KW</a></p><p><br></p><p>Video one:</p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/azSXTcms31s?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p><p>t///</p>"}],"NodeDescription":"<p><br></p><p><br></p>"}