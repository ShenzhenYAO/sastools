{"idx":"edd76f6a-da61-4d5b-939a-6f6cb3f079db","name":"Project 2","NodeDescription":"<iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/-U4srIxu_CU?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/lXqkTpUiov8?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/7PjDwL7It88?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/lNRwE-AB5d4?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/tDP1zZllO6U?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/1pe7rtu01BQ?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/PUlAceJEGz8?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/brGAYUFR-t0?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/etPMlsfVmnI?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>","children":[{"idx":"MY231139d1-be6b-4871-90ce-2855f7c50aa2","name":"Scientific Protocol","custparents":[{"idx":"edd76f6a-da61-4d5b-939a-6f6cb3f079db"}],"children":[],"NodeDescription":"<p><br></p><p>[_W][to do]</p><p>The project 2 will use the statin cohort prepared in project 1.</p><p>The sas egp is</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\SAS code\\PhD_GPCharactStatin_20200228.egp</p><p>The patient cohort is in VXM_FS, the first program for project 2 is ZXA.</p><p><br></p><p>Several reports by ZXA can be found at:</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\Reports\\ReportZXA.xlsx</p><p><br></p><p><br></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>A 2-year period should bring enough power for the analysis. The following chart shows within a 2-year period of time, around 20,000 patients can be identified in the analyses</li></ol><table><tbody><tr><td data-row=\"1\">EntryYear</td><td data-row=\"1\"># Patients</td></tr><tr><td data-row=\"3\" class=\"ql-align-right\">2012</td><td data-row=\"3\" class=\"ql-align-right\">9253</td></tr><tr><td data-row=\"4\" class=\"ql-align-right\">2013</td><td data-row=\"4\" class=\"ql-align-right\">8407</td></tr><tr><td data-row=\"5\" class=\"ql-align-right\">2014</td><td data-row=\"5\" class=\"ql-align-right\">8841</td></tr><tr><td data-row=\"6\" class=\"ql-align-right\">2015</td><td data-row=\"6\" class=\"ql-align-right\">9062</td></tr><tr><td data-row=\"7\" class=\"ql-align-right\">2016</td><td data-row=\"7\" class=\"ql-align-right\">9357</td></tr><tr><td data-row=\"8\" class=\"ql-align-right\">2017</td><td data-row=\"8\" class=\"ql-align-right\">9575</td></tr></tbody></table><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>For each USP, the number of statin patients were also stable. The following chart shows that for &gt;70%, the deviation is &lt; 25% of the mean number of statin patients over the different time periods</li></ol><p><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeEAAAEhCAYAAABIohi6AAAgAElEQVR4Ae2d7c8sSVmH5++a/8MYSVRidD5sjNEPkIiJIRp4EhLZ2UOOurCsuxyfs7wouAqTsNkIKhKyERFcOefs88CC4AaPyJsbIGAs8+uZ6q7u6e6pfqm+Z7qvSSbz0tV9d11V09dUdXX16oMf/KB797vfzRMG1AHqAHWAOkAdmLAOyL8rCZgHBCAAAQhAAALTEpB/kfC0zIkGAQhAAAIQyAggYSoCBCAAAQhAwIgAEjYCT1gIQAACEIAAEqYOQAACEIAABIwIIGEj8ISFAAQgAAEIIGHqAAQgAAEIQMCIABI2Ak9YCEAAAhCAABKmDkAAAhCAAASMCCBhI/CEhQAEIAABCHST8G7jVqvV/rneupuc343brg/f++WbXb7UheutVm69LdYsEvEOAhCAAAQgkJjAwUehorKIoadKfnOu3mE7t6nz3c3Wravrt2Spg4R3bpNveC/dQqb7z0eZ2ufMbVZrl3tXOxh+btk5FkEAAhCAAATGIrDbrNxqs3N6LfuqzW+S7bHDNpv1oUEp/23cvtmptP593F53kHB5gzdbvwP6vkXC+ndRzm0GoBB4ebt8ggAEIAABCKQkcCzhcrSS3xocpl7hvccKCZ/abjnK/lNPCVelu/+cd1Wvin8ZykxVwqUM1u2Vc+76+rp0J487d+40pORrCEAAAhBYEgH5QPLyT/miy6NdlmW/NTtsm3dHS8YxXqvbx14Srtup0sazvvV9k7wubZ+d1Y7ygAAEIAABCAz1QZuEq86qfhb9I4fpNKt6fLPTrfvxUbG9vZ0lnO1Qfm64qTIUfeh1GRCA2B30EYZC99vhFQIQgAAELpvAUB80SbjOb6cdVpwHzrfbYXBWJwkrQLVrubYog5bw/p/B8UntfKBW7QaOvxwK/XiLfAMBCEAAApdIYKgPclkGmW/0W3Uwcemzuq4LvxXbDQd6BUFq3sZLOGhmF+d+/Sgw/RMIL1Hy3x8iZlIullfGadXs1vFXQ6Efb5FvIAABCEDgEgn09UEm2pKrDgJt9dvxJUreYWoll3p1g+34NKf4xkv41JYSL+8LPfFusXkIQAACEJiYwJx8gIQnrjyEgwAEIACBYQSQ8DB+vdaeE/ReAFgJAhCAAAQyAnPyAS1hKjUEIAABCFwUASRsUFxzgm6Aj5AQgAAEZkNgTj6gJTybaklGIAABCCyDABI2KOc5QTfAR0gIQAACsyEwJx/QEp5NtSQjEIAABJZBAAkblPOcoBvgIyQEIACB2RCYkw9oCc+mWpIRCEAAAssggIQNynlO0A3wERICEIDAbAjMyQe0hGdTLckIBCAAgWUQQMIG5Twn6Ab4CAkBCEBgNgTm5ANawrOplmQEAhCAwDIIIGGDcp4TdAN8hIQABCAwGwJz8gEt4dlUSzICAQhAYBkEkLBBOc8JugE+QkIAAhCYDYE5+YCW8GyqJRmBAAQgsAwCSNignOcE3QAfISEAAQjMhsCcfEBLeDbVkoxAAAIQWAYBJGxQznOCboCPkBCAAARmQ2BOPqAlPJtqSUYgAAEILIMAEjYo5zlBN8BHSAhAAAKzITAnH9ASnk21JCMQgAAElkEACRuU85ygG+AjJAQgAIHZEJiTD2gJz6ZakhEIQAACyyCAhA3KeU7QDfAREgIQgMBsCMzJB7SEZ1MtyQgEIACBZRBAwgblPCfoBvgICQEIQGA2BObkA1rCs6mWZAQCEIDAMgggYYNynhN0A3yEhAAEIDAbAnPyAS3h2VRLMgIBCEBgGQSQsEE5zwm6AT5CQgACEJgNgUE+2G3carVym10Fx+F7LdNzvb0pEtQu27nNIe0q3NjN1q3XWxesXWyn5h0t4RoofAUBCEAAAt0JPP7hz9yr33ozf37yi991H/384/z5zo99w4XPl778ve5BnHN9JbzbrJyEqdfQm85JqGuXe1cizT/XL9ts1gdR37jteuP2Tlda/z4ua0g4jhOpIAABCCyCQBeRvu3e19wvvPffBj0l6a6PvhL2cY4krJZu2cqZqLPWcMOyorVcSPhouz5gyysSboHDIghAAAKXSOBnP/+/vDWqlulnXv1+3hqV9N718W/mLdIxRDpExG+9+7Az4qurq6w1LIHpeX193WkbVVnebNdHEtZ3knDzsm3eHe3TlbqwI/cICUeCIhkEIACBqQl8+79/WpJp2LX7/pffyEWqLl7JbIgMLdftylXiGvIYR8LBWV91X6slnXVj15xTbtlZJNwCh0UQgAAEhhKYunvXUqZ9Yr/nr/+9M+IpJCxR+xZuY1d1tufFeeBc7h0GZyHhzsXPChCAwNIIVFukn3jlv/Lu3et/+M9Si9S6e7ePCK3WUQv++2/+vHN1GlvC+xZsw8Cs0iAtd2jt+rQ6H+zfu2DA185tIkdII+HOxc8KEIDAnAj4lqq6eu9++j8yof72c7cX27VrJVTFDUc+q4Ubdp/rvHQ4cvrNn/5v72rUV8JqqfpLkPavhUBd5TKk0jithmX+vHGekaA7urR+nuD4TTcJhztStXy4LOoaq+OdafumL/S2bbIMAhBYDoE62VoK61xjTyXSITVvTj7oIOGwea0meHgxc/11VPtrrtqWxReDdvTRo0eTP29vb+N3kpQQgIA5AXVvqsWlLmM/eOktd766qJatWvKhTMMWqa7NHatFalXYC5VwGXepGa5WcKXt7U9qZ038pmXlTbZ+EvT79+9P/pT4eUAAAudHYO6y1R+HUKTqKg9l+qXX/yeX6euPf3J+BZRwj5Cw27eEvVubr6Nqu8YqGN5dU1i67kug/VPXhSHhGlB8BYGZE7h02b7jha/nMtX1uaFI59Aqtah+i5dwVbrVzyoU31JuW9al8AQdCXchRloIXB4BDdZRC8+POD6XbmSNeA5bpaFINTVj2L3bZ7Tv5ZWU7R4vWsKZVCuDsupE67uj25Z1KUYk3IUWaSFwGQQ0WEqjZnXu1nJEsgTru3slVO0Xj/MlsFgJZ8O7fR90WD5t11G1LQu3ceI9Ej4BiMUQuAACr73xY6eW4/ZT33a/8fSjyQdLIdsLqCQRu7hMCQfXPxXXWQV3i6hcolRydduyCOBKgoQjQZEMAmdCwM9frK5byW/KrmVkeyaVINFuLFPCiWDGbhYJx5IiHQRsCOhc6Oce/sA999nvOA1GSn0drB89rK5siZ5uZJtyt4iKhA2oI2ED6ISEQAsBTeWo0b06l/rEM68lk24oW137K9ky+KmlYBawCAkbFDISNoBOSAgEBCQ/SVCX2aS8Y49GIqt1q1Y1A6SCAuBtTgAJ5yime4OEp2NNJAiIgC4XknR1fjVl17K2r+5kXZo0ZD5hSm05BJCwQVkjYQPohFwkAXUzqyWaYiCVWtCa2F9y10hpHhDoQwAJ96E2cB0kPBAgq0PgBIFXbn6UdTWP2erVtb86Z6xrgSV3HhAYgwASHoNix20g4Y7ASA6BCALq/tXgqrEGVmlUtEZHS+gMnoooAJL0IoCEe2EbthISHsaPtSEQEtCAJ8lyyAArdVf7uZA1aIsHBKYigISnIh3EQcIBDN5CoCcBDX7SOdk+Xc5qLWumK814tbS79vTEzWqJCCDhRGDbNouE2+iwDALNBDRzlc7J9p2bWa1dyZsHBM6FABI2KAkkbACdkBdNQOdkdTeiPl3O6mrWCGkGU110FZjtziNhg6JFwgbQCXmRBHTpj7qN+3Y5q7uZ63UvsugXs9NI2KCokbABdEJeFAF1OWu2qT7y1YQZmqGKBwQugQASNiglJGwAnZBnT0Bdzpptqs9tAdXlrGt4GWR19sXMDlYIIOEKkCk+IuEpKBPjUghInBJon1mtJGzNWMV1vJdS2uxnlQASrhKZ4DMSngAyIc6egLqM+94mUOupy5oHBC6dABI2KEEkbACdkGdDQPLsO6uVBmkxT/PZFCU7MgIBJDwCxK6bQMJdiZF+DgR0iZCu0+062Epdzro8iS7nOdQC8lAlgISrRCb4jIQngEyIsyKg87Zdz/lqQg61mjVBBw8IzJUAEjYoWSRsAJ2QJgTUddx1ditNRcn8zSbFRVADAkjYCPr9+/fd1M9Hjx4Z5JaQSySgCTJ0U4XYrmfNhKX0uhkDDwgsiQASNihtWsIG0Ak5GQHNzRx7ra8GaOn2g3Q5T1Y8BDozAkjYoECQsAF0QiYnoIFTsXc1UstX54l5QGDpBJCwQQ1AwgbQCZmUgFqzsTdX0AhpRjonLQ42fkEEkLBBYSFhA+iETEJAlx3FTrihLmrmdE5SDGz0ggn0lvBu41arVf5cb28KCo3Ldm7j19nsivQ3W7deb12whWJZh3fKy6p3hjoEGpoUCQ8lyPrWBHQOV9fuxl52pGkpuZuRdakR/xwJ9HOWZLp2uXcl0dXG7bVat2yf9ma7dntZ37jtOkzv3w8jhIRPjLhmdPSwCsbaewJdLjvS5UnMcEXNgUAzgdElrFZw2Mp1zu02q0y+dRLWskry5p09sQQJI+ETVYTFQwioJasWbcxlR2oh645IjHoeQpx1l0Dg6urKSV7+eX19HZftrPXru6OLlqxEW5VwId+iO1ot4uL7uJCnUiFhJHyqjrC8JwGdy4297EjniHWumAcEIHCagMTV55HJVl3QXsaH5my7hINIWk/r+PVX+9ZykKLzWySMhDtXGlZoJ6BRzLHzPWt0tEZJ84AABOIJ9JKwupxLA6l0jnffrVwnYd8dXeyVWsT71nPeHS0Zl7ZZpI59h4SRcGxdIV0EgS7zPev6YC47ioBKEghUCIwj4X03c9YYzlq21UFbwWcnYRefcwm7ndsg4bRTWTIwq1L7+VhL4PXHP+l02ZFmyOIBAQj0I9BLwofBVrGXKIUDr47OAwfd0WG6PrmhJUxLuE+9YZ0DAX/ZUczAK6XRJUpcdkT1gcAwAn0lPCxqmrWRMBJOU7MWsFW1ZjWPc4yAuexoARWCLE5GAAlPhroIJOhT30FJ8eiOLsqAd3sCOo/b5bIj5num5kBgXAJIeFyeUVtDwlGYSJSYwGde/X6n+Z657ChxgbD5RRJAwgbFjoQNoBMyJyCZvvNj34jqetZlR5I1DwhAIA0BJJyGa+tWkXArHhYmIuAHXjHfcyLAbBYCPQgg4R7Qhq6ChIcSZP2uBDTwSgOqYgZeaYAWlx11JUx6CPQjgIT7cRu0FhIehI+VOxDQwKvtp74dJV9/2RHzPXcATFIIDCSwbAkf7rlYvkB5P/1XeBF0aTLsxvs0xpcEEo5nRcr+BDSFpM7pxrR+Nd+zJungAQEITEtgsRLWVF2SazFllwdfzMHpvylem+/TWKQ5/Q4Jn2ZEiv4Eusx4JUl/8ovf7R+MNSEAgUEEFithT62ThFvu0+i3F/OKhGMokaYrAT/wKqblqzTM99yVMOkhMD4BJHx0Q+Pj7mjfXV13d4qjeThrykj3hxRo/9T9I5msowYUX/UmoIFUsbcaZOBVb8ysCIHRCSDhIwlXGGfngPe3fOor4coWMxkj4SoVPvch0OVWgwy86kOYdSCQlgASPiVh3d5ptb/tU52E1Z293t50KiVBR8KdkJG4hoCmkOwy8IoZr2og8hUEjAkg4VMSDlrC7uR9GuNKEwnHcSJVPYHX3vhx9K0GmfGqniHfQuBcCCxWwtno6NXKFZci+Zsc72+OXHy/74rOC6xyiZI/X5wvj3iDhCMgkeSIgG4b+NxnvxN1yZG6nnVjBm41eISRLyBwVgQWK2HLUkDClvQvM/YrNz+KHnilmbFe/dabl5lR9hoCCyOAhA0KHAkbQL/QkI9/+DP3ro9/M6r1qzmhdZ6YGa8utLDZ7UUSQMIGxY6EDaBfYEgJNfZmCxI1A68usJDZ5cUTQMIGVQAJG0C/oJAaeBV7swVdG/y5hz+4oNyxqxCAQEgACYc0JnqPhCcCfWFhNIhKg6liZ7x6/8tvMPDqwsqY3YVAlQASrhKZ4DMSngDyhYX4zKvfjx549bZ7X3NqLfOAAAQunwASNihDJGwA/UxDqvUbe6tBP/DqTLPCbkEAAj0IIOEe0IaugoSHEpzH+mrNah7nmO5nDbzSFJU8IACBeRFAwgbliYQNoJ9ZyNiRzxp4pZsz8IAABOZJAAkblCsSNoB+JiG73HDh+h/+k4FXZ1Ju7AYEUhFAwqnItmwXCbfAmfEizWIVc7tBDbx6/fFPZkyCrEEAAp4AEvYkJnxFwhPCPpNQatXGnPvV3NDMeHUmhcZuQGACAkh4AsjVEEi4SmS+nzXt5Dte+PpJAetuR5ofmgcEILAsAkjYoLyRsAF0g5CSasz9fiVpRj4bFBAhIXAGBJCwQSEgYQPoE4ZUd7Jms4rpfv7o5x9PuGeEggAEzo0AEjYoESRsAH2ikLqJQsy8zxqgxe0GJyoUwkDgjAkgYYPCQcIG0CcIqaknY+56pIk3NFMWDwhAAAJDJLzbrNxq5Z8bt/M4d5vg+5Vbb28OS3Zu49Nv8tTO3Wzder11PpXfTNdX5WU1JENdA/ZNj4T7kjvP9WKnnpSgP/nF755nJtgrCEDAhEBfZ2UCDkWa771Eu3a5dyXYw+eb7fog5Bu3XXtpK71/n2+k1xskfP++u9/yfPToUS+wrNRMIHbqSXVRc9OFZo4sgcBSCfSTcIs41QquyFnCVmu4TsJaVkneuyiQcIuAJWck3Ltu1a4YO/Wkbk9I93MtQr6EwOIJXF1dOcnLP6+vr08zybqP127tu5b1ejCpROvf+w0V8i26o8tS9imHvSJhJDysBkWuHTv1pLqfdZ6YBwQgAIEmAhJX50fWxRx2Ie/lKg+3SziIpG3sV8hlXpw7DtJ1eIuEkXCH6tIvqW6mEDv1pEZK84AABCDQRmAcCTvnu5XrJOy7o4v9KLqz/XpjDM5Cwki4qGMJ3jH1ZAKobBICCyfQS8JOA6uCc7nB4KtMpg0Ds/aotW4xcCuXsNu5zcAR0kgYCSf5OTP1ZBKsbBQCEHAuOxfcC0QmXn95UiBkbaxyiVI48Ko4P3yIGmwnTNdnn5AwEu5Tb1rX+dzDHzD1ZCshFkIAAkMI9GsJD4mYbl0kjIRHq11dpp5UNzUPCEAAAn0IIOE+1AauI+ht1/OmWsYlSnEFx9STcZxIBQEIDCeAhIcz7LwFJNwZ2WQrvPTl7zH15GS0CQQBCCBhgzqAhA2gR4SMufORrv3VJB08IAABCIxBAAmPQbHjNpBwR2CJk+v8r26qcOrWg0w9mbgg2DwEFkgACRsUOhI2gN4QUrNfve3e104KePupbzP1ZANDvoYABPoTQML92fVeEwn3Rjfqiq8//ol74pnXWgXM1JOjImdjEIBAhQASrgCZ4iMSnoJyewxNP/nWuw9bBazuZ6aebOfIUghAYBgBJDyMX6+1kXAvbKOtpJsqqIXbdg74HS98ne7n0YizIQhAoIkAEm4ik/B7JJwQ7olNx8z/rPO/GqzFAwIQgEBqAkg4NeGa7SPhGiiJv5JUJde21q+WMftV4oJg8xCAQIkAEi7hmOYDEk7P+fb21mmGMD3/5dWH7u3Pt3c/S8AvvPwgX8ev2/VVcXlAAAIQiCWAhGNJjZgOCY8Is2FTkqem/3zm3l+4X7vzz60t4Lc8+RX35J/9zShTiSouDwhAAAKxBJBwLKkR0yHhEWE2bEoyvPv8i06CbeuC/tWnvuT+5EOfGEXAkj4SbigQvoYABGoJIOFaLGm/RMJp+Wrrf/V3D90vPvmvrQL+9Tv/5J6999HRBIyE05crESAwNwLLlvDhxsdHNzKu3BB5vb0pyr1tWZGq9R0SbsUzeOEnv/jdVvmqZfybd7/gnr/+yKgCRsKDi44NQGBxBBYr4d1m5VabndNrWcI7t1mtXe7dm61b55/blsXXHSQcz6prypibMLz9T/9+dPlKwEi4a2mRHgIQWKyEfdEfSVgt3bKVM1FnreG2ZX6DEa9IOAJSxySxN2H4gw+8lEzASLhjoZEcAhBwSLjSEr7Zro8krO8k4bZlbXXp+vo6Ay3Yel5dXSUVgW+VVV/nOmgo5iYMOj/8nmd3ybnPlXFb/WYZBCDQnwASnkDC1eIR9Kogp/g8R0FE3YThya9kI6VhXK2JfIYABKwJIOEICavLuqkl7Jd1KUgk3IVWc9qYmzDoGmFdKzyFgBVjjn90mkuAJRCAwFACSLgiYVcaiOVc6XPbsg4lgYQ7wGpIGnMThs37XkkyArpN6Ei4ocD4GgIQqCWwWAmrBbtahc9gRHTlMqTSOK22ZbWIj79EwsdMunwTcxOGP/zwA/fn1x+erAXsxYyEu5QkaSEAgcVK2LLokXA/+l1uwiAZejFO+YqE+5Uta0FgqQSQsEHJI+Hu0N/86f+6d37sGycn4VA3tR5IuDtj1oAABKYngISnZ55dpjRl68zHutRW2uMf/sz99nO3rQJ+692HTgO1/AMJexK8QgAC50wACRuUDi3heOivvfFjJ8G23YThiWdec7pUKXwg4ZAG7yEAgXMlgIQNSgYJx0F/5eZH7i132u8D/LZ7X3OarKP6QMJVInyGAATOkQASNigVJHwa+ide+a/W1q9axu/6+DedzhXXPZBwHRW+gwAEzo0AEjYoESTcDF3dz+944esnBawbNbQ9rCT84MGDbFCY4k/5vL29bcPBMghA4EwJIGGDgkHCx9DVoo25A5JawLpV4amHlYQt455iwnIIQOD8CCBhgzJBwmXoL335eycHX0m+Oj/8uYc/KK/c8MlShn40+pSvyi8PCEDg8ggMlXB2Y6FV5Za8lUmlsrsAZmh0O97DJFXhLFSaDXK9dTcD8Skvq6EZGrgPUasj4T2m2K5nCVgjpJU+9oGEY0mRDgIQsCQwyFkHeW5L0y833/fe3xHQuRu3XW/cLsu40vv3w0gg4cON5ZtaYOfSWurS9SwB6xyxrhXu8kDCXWiRFgIQsCLQX8IS6X66ZU3DnDdsW+57Xyfh0roDISDhC5CwZrQ6dd2vxOtbvzHnf+vqDRKuo8J3EIDAuRHQ/eUlL//U/edjHoVQnQtFmnVP50beb6lIW3RH+zsDFl3VMVHb0yDhM5awJtOIGfXsBXz30/9Re/1vexUoliLhggXvIACB8yUgcXV+ZHf0K7qQ4yUcRNI2JOtsW/vzxEOFjITPUMLqen7us985ecmRl68m3+hy7jeoUqW3SLiEgw8QgMCZEugl4crAK39HQN+6XVVawpJ0WbDFeeBc4Ifzy0MGZyHhM5Owup5/4+lHUQJWF3Xfrue63xYSrqPCdxCAwLkR6CXhSiZyker7rGUb3Jq3+jkblFUsL9bduc3AEdJI+EwkPHXXc6U+Zh+RcB0VvoMABM6NwOgSVgYrLeWwYVycHz6QCLqjw3R9OCFhYwl37Xr+rWe+6l7+wsNkM0s1jRJP+b2l/Pv8aFgHAhCwJTCGhG1zUERHwoYS7tL1/JYnv+Le9cyn3VxlmDJfTduW/HlAAAKXRwAJG5SZoDcdTFN+n+JA3bXr+e1/+vfu+euPJM+/ZYs0ZRk2bdtqzmqruMyVbXDgImQSAkg4Cdb2jc5Bwl27njfve8Xdff7F5PL1klqahJeY3/ZfGUshcBkEkLBBOV26hLt0Pf/K+76avOvZizd8XaKUwvxP9d6Ss8FPl5AQGJ0AEh4d6ekNXqqEu3Y9665I//Lqw8lav6F4LOUQ7sdU75eY39O/NFJA4PwJIGGDMro0CXftetbMWH7CjSXKYSrxhnGWyNngp0tICIxOAAmPjvT0Bi9Jwl26njXhhm5LGD6WKIdQjlO9XyLnsJ7xHgKXSgAJG5TcJUj41W+92WmuZ3U9q8VcfSxRDlOJN4yzRM7VusZnCFwiASRsUGrnLGHdMvA9f/3vUVNNar7nsOu5DuUS5RDKcar3S+RcV9/4DgKXRgAJG5SYlYTbrunUAKr3vfjA/dJT+9sI+hsqNL1q1PO9lx5EzXY1lYjCOEuUUpj/qd5bcjb46RISAqMTQMKjIz29QSsJNx0wNXvVLz/15ejWb5cJN5pippYEce9PMirdkvPpXxopIHD+BJCwQRmdi4Sfeu5F9+t3/ilavn0m3LA8SKcWfd32ye908jf46RISAqMTQMKjIz29QWsJP/2hv3S/efcL0fJVK/k9z+56tayQ0nRSqvtTkPo7y/I9/UsjBQTOnwASNigjKwnrvO/vPv130fLVjRZ+//1/6/78+sO9BCwBWB6kUwuobvvkd7o/HQY/XUJCYHQCSHh0pKc3aCHhP/jAS06DqZoGWlW/13nfZ+99tLd8vaCQ0nRS8synfLUs39O/NFJA4PwJIGGDMppSwk/+2d+4X7vzz9HyfeLuK+5PPvSJwfL1IrA8SPt9mPKV/E73p8Pgp0tICIxOAAmPjvT0BqeQsEQqoVZbuE2ff/WpL7k/evZTo8nXiw8pTSclz3zKV8vyPf1LIwUEzp8AEjYoo5QSVheyupKbZFv9Xud93/mBlwed92076FsepNv2K9Uy8jvdnw6Dny4hITA6ASQ8OtLTG0whYQ2ekkwl1apomz5rkNbz1x8ZvfUbCg4pTSelkPtU7y3L9/QvjRQQOH8CSNigjMaWsLqR1Z3cJNvq97o8SZcpTXGgtjxIT5G/agzyO92fDoOfLiEhMDoBJDw60tMbHEvCd59/sdN53yfe/1WngVpVcaT8jJSmk1LKcmzatlX5tk3Bqn1K8by9vT394yYFBDoSQMIdgY2RfKiEdd73d/74H6Nbvuqi1iVKFgdMi5gSBnGRf9Mfh77fq07xgMDYBJDw2EQjttdXwjrvq8kzfvHJf40SsNL93tOfyc/7WojJIiYSnkbAS+OMhCMObiTpTAAJl5DduO165Var4LnZFSl2m9Ky9famWNbhXR8J67xvl5ss/NYff949c+8vSl3PFkK0iLk0OZDfaf50IOEOBzmSRhNAwiVUewmH3i0W79xmtXa5d2+2bh1+LhKefNdVwjqPWx1c1fRZN2TQjRl0YK4+LYRoERMpHZd9tS6M9RJKP30AAA3YSURBVHlJ5YuETx7aSNCDABIuQWuRsFrBFTvvNivXpzXcVcIxN1tQK1m3JGw7uFocMC1iImEk3PY76LsMCZcOlnwYiQASLoE87o723r3Zro8krO9iJHx9fe0E2j+vrq5aZVk9SLRNO6nzvjpPHHO9r4UQLWIiYSRc/Q2N8RkJlw6WfBiJABJuA5mdA944nRUeIuFqCEHvclCQZOu6nzVCustNFiyEaBETCSPhLr+v2LRIuHok4/MYBJBwK8XiPHCdhKfqjtao6HAqSnVP6xrh2IOHT2chRIuYyi9xpxHxkjgrrzwgMDYBJNxGNGgJu+pArOrntu1UlnVtCXuJDn21OGBaxETC0wh4aZyRcOVAxsdRCCDhEka1fIPLk1b7rug8SeUSJX++OF8e+QYJp5cE8k/PGAlH/uBJBoEWAki4BU6qRUg4vSCQcHrGSDjVEYLtLolAbwmHjcL11pVmrQiXrcKreIKGZtiKVM9udRs9CkF5WfXOUI+AfVdBwukFgYTTM0bCfY8ArAeBgkA/Z+3cJpfm/qqe4kqdYixTFiU4dVpc0aN1fE+v0vv3xX71eYeEaybo0IHSPy3EZBFzaXIgv0Ud93U9xavqMg8IjE2gn4TLe1HI1TmnVnDYys2+2reGi3SFhDXAuJK8vPEOn5BwINy6g5CFEC1iIqVppLQ0zki4w9GYpNEENG+E5OWfmlei22PfEvYirbuSp5Bv0R2tlnPxfbeITamRMBI2bfUvTUpLyy8Sbjr08v0QAhLXkEdVutXP2natbNVNLXNn3dX7AclFl3a/PULCSBgJn6gDEueYzyX1dCDhfgdm1monMETCmXDzc8P7OHUSPp7TojgPnHdHjzA4CwmfOMBaHDAtYi6thUZ+x/1j0fQnBQm3y4Sl/Qj0lbDkWT33m+1BMBCr9rNT93VxM6Jcwi4c7NU/L4yObhGxhRAtYiKlaaS0NM5IuN+BmbXaCfSScNCFXNx6NxjhXLlEyZ8v1p4cdU0H2wrTte91/VJawi0CtjpgIuFphAjn9JyRcP2Bl2+HEegl4WEhk62NhJFwfr4TKaWXktUfO6u4SDjZsXvRG0bCBsUv6DqQTP20EJNFTKuDNHGnq9MW9QoJGxwsFxASCRsUMhJOf7C2OEgj4fTl6v+4WpQvEjY4WC4gJBI2KGQknP5gbXGQRsLpyxUJGxywCJmUABJOird+40g4/cEaCadnvLQ/HbSE649nfDuMABIexq/X2kg4vSCQcHrGSLjXz5+VIFAigIRLOKb5gITTCwIJp2eMhKc5XhBl3gSQsEH5IuH0gkDC6RkjYYODByFnRwAJGxQpEk4vCCScnvHSJPzgwQOnejX18/b21uAoRcipCCDhqUgHcZBwekEg4fSMlyZhyzoVHD54OzMCSNigQJFwekFYHjAlp6mf5Dc9c0vGBocpQk5EAAlPBDoMg4TnfcCcWsBLa5Fa5RcJh0cx3o9FAAmPRbLDdpAwEh5b1JaCGDsvMduzyK9FTP+Ho8PhhaQXRgAJGxQYEkbCMaLpksZSEF32c6y0Fvm1iCleistjvgSQsEHZImEkPJaM/HYsBeH3YcpXi/xaxBRTRmUbHKQnDImEJ4TtQyFhJDy2sKwEsaS4S8qr6qfyyyM9ASScnvFRBCSMhJHwsDpgIUSLmF6GY9eXmO0h4aNDd5IvkHASrO0bRcLDDsCxB5CYdGOnWeKBemyGMduz4GwRUyws47YfyVg6BgEkPAbFjttAwkg4RjRd0lgeqLvs51hpLfJrEVO8LON2PLSRvAcBJNwD2tBVkDASHktGfjuWB2q/D1O+WuTXIqaYWsYdeqxj/dMEkPBpRqOnQMJIeGxhWR6ox85LzPYs8msREwmPfvg9uw0iYYMiQcJIOEY0XdIsURBd+IyRdomMDQ6PiwuJhA2KHAkj4TGkEG5jiYII8z/F+yUyNjg8Li4kEjYociSMhMeWxhIFMTbDU9tbImODw+PiQiJhgyJHwkj41AG/6/IlCqIro6Hpl8jY4PC4uJBI2KDIkTASHiqE6vpLFESVQerPS2NsNV2mVdzb21sDGziHhA2wI2EkPLYwliYIi/xaxFQ9IW7644U4W8kfCSPhpDeg5wAyzQEEzuk5wzg94yX+6UDCSBgJ3x/v4MKBejyWbb0FFpwtYi5RSkvjjISRMBJGwr3rwJIOmEvKK/Kf5s+kOCNhJNz7ANzWUvHLOHBN82OGc3rOME7PeInyR8JdJLzbuNVqlT/X25sua+dpBd1LaspXi4OIRcwl/pDhnF4QME7PeIm/3d4SbvTRzm28pza73DvuZuvW663rZ61iM23vlJdV7wy1bTlbpoytXe5dZSj8fHL9IgESTv9j5oCZnvHSDpjUKepUikZTP2c1++hmu3b7BuKN2643bq9hpffvCxeN/S6thPWvI/xX4ZzbbVaHzHbLChJO/2PmgJmeMRKGcQopLe2320vCLT6qk7BcVdFXN2lFpk4qYWWsKuEis+17eH19nZ181w7qeXV1Vfrsv+d1zwcOcKAOUAeWUgeqPpAvTj3afVR0R6tFHOupUzFjlqvMknVHt2c6ZveKNNpRi4dFXIuYYkvcaWrYkjgvKa/8hqb5/fTlHO0jnTZVEzg7fbofz9R3LFMMEf1GJpXwkO7omAyNncbiIGIRs2/FHoM3+R2D4ultWHC2iEldPl0XxkpxSeVbJ+FjHxXngfPu6MSDs8QwmYT3/yTGG5g1VsXpsh2LSmYRU0yI26Vm9E+7JM5Lyiu/of6/ia5r9qpX1YHB1c9Og7IKX+USdju3SThCWnlJJ2GRrQwJ73ui++7du13LaZT0FnEtYgoWcUepMic3siTOS8orv6GTVX+0BL3rVYuPjs4DB93Rfb0Vk+H0Eo7ZC9JAAAIQgAAEFkgACS+w0MkyBCAAAQicBwEkfB7lwF5AAAIQgMACCSDhBRY6WYYABCAAgfMggITPoxzYCwhAAAIQWCABJLzAQifLEIAABCBwHgSQ8HmUA3sBAQhAAAILJICEF1joZBkCEIAABM6DABI+j3JgLyAAAQhAYIEEkPACC50sQwACEIDAeRCYj4Qr05EVd70oblFVuq3iKJNya67R/V02VqvDaz6/WYK4hzzmIXwdSp332riJ8x7mqTpva7hsFd6fegTm4bZLcdPmN5tc3tehVTF/bVbE4T6NnN/muGnzq3z52KX6nDCv/udyHDdlXtu2fTyt73jHrba4bctG+A0d7hufHxNXG7fL4KeP68v4kl5nImFVnODAFUzMrR/cvmKrAvjKoPT+/ZDi2leq0kHksLmx42oycf2JKCYV9/udNu/NcVPmPZwwfR+nfHBKVdZtcafK70FOeaVKWb5hfqtxU+Y3M7Bbr7duW7pxesq85j/Mmrgp89q8bacbAyQ7brXFbV42xnHLHzP8Eap4TRu3iHNZ7+YhYf17zg9a+wJQRdCBu65SHYusb6F1q1RjxD3axkR5P4qb3XFk5SrYM5BjMy+2d2g5VIJq31KUdSnuhPn1+clgTlS+ilWKmzS/+t3s/0iV6lXyvDbETZ7X+t9JdnObZHW5+djkkuZXfyyaGjjN+1T81pRmv36pbvQ9RF/AerOQsAqwKuGiUFUpihszF9+PUTr7SlV0u4Q/tjRxqxVzqrxX4/ofcvq8l3+4U+XX5684RqYt6yxfvju6CLrvsg0+q9YWdXh4HWuK6/OfonyL/d+L32cv2xf/4fDzLNKOk1ffo1KuzynLtnnbafPbHDdl2Wa3r12v3drXZb3mZdq2T8PLd4wjusU2FiDhAKu6qVUhgltU+R9lkKr/W/2Tr/sXOGLc8sGj2oW43/XiwBVkZeA+VOMGW96/TZT36oGq+lnBU+S3Lk4pz4ny6/OzOpyPrtuPFPmtxi3lVR/Gym/22ytaSmG9SprXlrjJ8nq04TLHpPmtxm4qvzHLVtuqcN53uYeNk2DHmvZp4LEqiHARb2crYf24y4LVP61KN4cKuzT4ZmiZKUZwvjLb3Lhxw4OWNl/3Q06R92rcY1Lj5z3LW6V8pshvXdwp8lvEKFhOkd+6uMV3/l2xT/6b/QG2428qO/BWBjMeBpslzWtL3CI//t1IefWbK70W206a31JMfSjiHi2qXab0HctWGz6ScLm3oxy7bp96xi1v+KI+zULC+4IP5JdVhOBzdg6k+FwIpTwwZXDJHf2zU/fLuHGLfT/sbTWv1c8j5f0obhXWyHlXvKIbKwhWzV/188D8NsYNdiF7O2Z+ta28y67cWkpat9vipsxvsO1SvaqWZfXzwLINwtYMcAyWjlm2wWazt+G2q/mrfh4xv409GdqpcJ+ynRxy3Np3OefV+ShPAZBR4wbbvbC385CwoGcFWvzDzitBXXdlVjH2acN03ctO/9qKmNWuaP3TLbXGB8TN5FCKVcg9Zd6b4ybMe8CpOCdZdGEmy29r3IT5zQ62zfUoWX5b46bMb/FLK0l4wt9xOW7KvLZvO13ZtsVtW1Zzeif4XUQdL4P0+v0W6ySOW1Sri3o3HwlfFHZ2FgIQgAAEIOAcEqYWQAACEIAABIwIIGEj8ISFAAQgAAEIIGHqAAQgAAEIQMCIABI2Ak9YCEAAAhCAABKmDkAAAhCAAASMCCBhI/CEhQAEIAABCCBh6gAEIAABCEDAiAASNgJPWAhAAAIQgAASpg5AAAIQgAAEjAggYSPwhIUABCAAAQhkEn7ve9+bTZ2lDzxhQB2gDlAHqAPUgWnqgPz7//EUWOJS7CR2AAAAAElFTkSuQmCC\"></p><p>3a. The percentage of adherent patients is also stable over different periods. The following shows that within different inclusion period, the mean/median # of adherent patients did not change much (slightly increased though)</p><table><tbody><tr><td data-row=\"1\">InclusionPeriods</td><td data-row=\"1\">mean</td><td data-row=\"1\">median</td></tr><tr><td data-row=\"2\" class=\"ql-align-right\">1213</td><td data-row=\"2\" class=\"ql-align-right\">52.4%</td><td data-row=\"2\" class=\"ql-align-right\">53.8%</td></tr><tr><td data-row=\"3\" class=\"ql-align-right\">1314</td><td data-row=\"3\" class=\"ql-align-right\">52.2%</td><td data-row=\"3\" class=\"ql-align-right\">52.2%</td></tr><tr><td data-row=\"4\" class=\"ql-align-right\">1415</td><td data-row=\"4\" class=\"ql-align-right\">53.5%</td><td data-row=\"4\" class=\"ql-align-right\">53.3%</td></tr><tr><td data-row=\"5\" class=\"ql-align-right\">1516</td><td data-row=\"5\" class=\"ql-align-right\">53.7%</td><td data-row=\"5\" class=\"ql-align-right\">55.3%</td></tr><tr><td data-row=\"6\" class=\"ql-align-right\">1617</td><td data-row=\"6\" class=\"ql-align-right\">54.9%</td><td data-row=\"6\" class=\"ql-align-right\">55.1%</td></tr></tbody></table><p>3b. The percentage of adherent patients per USP was also stable. Each USP was categorized into 2 categories, each for High/low % of adherent patients within different 2-year periods (e.g., 1213, 1516,etc.) 291 USPs consistently having no 2-year periods that the number of adherent patients were above median. 244 USPs consistently having all periods that the number of adherent patients were above median. &gt;70% USPs consistently belonged to the H/L group for majority (80%) of the periods.</p><p><img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeEAAAEhCAYAAABIohi6AAAgAElEQVR4Ae2dXZKrNhBGWRcLYimZt8SVqjzm0bMEbyV1y3cvSrVAIAks899t5rjKY7AE3Zxu6UMCPNW///7r/vjjD94wIAfIAXKAHCAHTswB0d9KBJgXBCAAAQhAAALnEhD9RYTPZY41CEAAAhCAgCeACJMIEIAABCAAASUCiLASeMxCAAIQgAAEEGFyAAIQgAAEIKBEABFWAo9ZCEAAAhCAACJMDkAAAhCAAASUCCDCSuAxCwEIQAACEECEyQEIQAACEICAEgFEWAk8ZiEAAQhAAAKLRPh5q11VVd27drdnAPh0tzp83302j1Do3KOJtqtcPWw41GEJAhCAAAQg8MMILBDhh2vqmwu66wW5F9pWhPvVBOLDNVUk2M+bq+P1pC4rEIAABCAAgZ9DYIEIp1AeTTyiLYiwjIIzdU63TffLGgQgAAEIQOCnEFgkwsl0dCKs4+noUJyOmFus8t27Ken7/Z78J4+///77p8SE44QABCAAgR9CYJEIx0y8uEbT03FZew24cXJVeK0IJ/tzzgty/h3rEIAABCAAgU8msFqEncuu9SYUhrIpEV4zHS2O8oIABCAAAQhcicB8Ec6v7fo7ntvR7ghIXJbfiJWvjzae/gIRnubCtxCAAAQg8LkE5ouwy6/7xgIsI9/4EaW4zI0eUQrXi5dgQ4SX0KIuBCAAAQh8AoEFIqx7OIiwLn+sQwACEIDA/gQQ4f2ZskcIQAACEIDALAKI8CxMVIIABCAAAQjsTwAR3p8pe4QABCAAAQjMIoAIz8JEJQhAAAIQgMD+BBDh/ZmyRwhAAAIQgMAsAojwLExUggAEIAABCOxPABHenyl7hAAEIAABCMwigAjPwkQlCEAAAhCAwP4EEOH9mbJHCEAAAhCAwCwCiPAsTFSCAAQgAAEI7E8AEd6fKXuEAAQgAAEIzCKACM/CRCUIQAACEIDA/gQQ4f2ZskcIQAACEIDALAKI8CxMVIIABCAAAQjsTwAR3p8pe4QABCAAAQjMIoAIz8JEJQhAAAIQgMD+BBDh/ZmyRwhAAAIQgMAsAojwLExUggAEIAABCOxP4Hoi/GhcVVXtu765Z8wsLqtqd0sKnXNdefOIN2IZAhCAAAQgcAyBi4nwwzW98D7dra5cHZT2eXN11bheX73gDuuPpnJV83DyiQgfk2zsFQIQgAAEUgIXE+H04J63uhdhWRaRHV4P10yMhhHhgRBLEIAABCBwLIELi3A7Eu51Nxv5OpeVd5wR4WMTjr1DAAIQgMBA4LIiPB75yiXf7lpxuGbMSHjIBJYgAAEIQOB0ApcUYS/A/bXhV0xlOnq4JhxqMRIOJPiEAAQgAIGjCVxOhP1ot5+Dfo3vVT1E+DUzSiAAAQhAYF8Ci0TYjzBfTeUmj/9EdyWLv6Wymccjjr59+Tug8ynnbrSbl2VC7UW5PzbZx8QjTG8doAIEIAABCEBgPoEFIhw//uNces01u9PYC14QsVLZMkfn16YmBCAAAQhAwD6BBSKcHoyMHPtncGWkOzGy9OWlsnSXxbVZI+HiHiiEAAQgAAEI2CKwSIST6ehIdNNRcXuA8p2IcKlsCQpEeAkt6kIAAhCAwCcQWCTC8QF5ce3uQC4Jbaks3l++fL/fnTgX3l9fX3kV1iEAAQhAAAIfTWC1CDs3XOudEtowXV0qW0JOHOUFAQhAAAIQuBKB+SKcX9v1dzzHdx6HG7Gc3LXl6nB3cbws5PL1mTQR4ZmgqAYBCEAAAh9DYL4Idz/z2P+HovyHLrwoD48HRZeMR48oJWUzUSHCM0FRDQIQgAAEPobAAhHWPSZEWJc/1iEAAQhAYH8CiPD+TNkjBCAAAQhAYBaBjxLhX79+OWvv379/zwJNJQhAAAIQgEBO4KNE+Pv721l7y0kBLwhAAAIQgMAaAojwRmFHhNekHdtAAAIQgIAQQIQRYVoCBCAAAQgoEUCEEWGl1MMsBCAAAQggwogwrQACEIAABJQIIMKIsFLqYRYCEIAABBBhRJhWAAEIQAACSgQQYURYKfUwCwEIQAACiDAiTCuAAAQgAAElAogwIqyUepiFAAQgAAFEGBGmFUAAAhCAgBIBRBgRVko9zEIAAhCAACKMCNMKIAABCEBAiQAijAgrpR5mIQABCEAAEUaEaQUQgAAErkPg0biqqtp3fXPPiSN73mpf3jzGhaWyce3t3yDCiPD2LGIPEIAABEwQeLimF96nu9WVq2+ZDD9vrq5v7tZUbiTCpbKDjg8RRoQPSi12CwEIQECXgIxqUxEWYa6d6PJjJMKlsuOOAxFGhI/LLvYMAQhAQI1AOxKOR7uxKOciXCo78hAQYUT4yPxi3xCAAARUCPhru6kCu7pqXLgMnIiwTEO/KjvYe0QYET44xdg9BCAAgXMJeAHurw13tuMbtsKNW1V3zbhUdrDriDAifHCKsXsIQAAC5xGQEW4Vj4BfmE5GwlmdUllWdfMqIowIb04idgABCEDABAE/rdw9ntSPdocp6NjHktCWyuJ97LGMCCPCe+QR+4AABCAAgRUElolwPG+ezLe3d6H1D0jLGUg8HRBvF+bgFzorjn5vFMwjtv/169fCI6E6BCAAAQhAoCWwQIRLD0GPbwUfAD9cU7XPZfnv/HRBtD5ULC4hwkU8FEIAAhCAwAcSWCDC6dHFz1Q5VxBhGQXHo2LXPiSdPkCd7ntqDRGeosJ3EIAABCDwyQRWinAuuuPp6KC7o2e1nHOpgM/DhwjP40QtCEAAAhD4HAKrRHhKWJND9teA2zvSpurOEeH7/e7EufD++vrimnACmRUIQAACEPh0AotF2ItqclPWFILhOvCUCMvt30xHT3HjOwhAAAIQ+EkEFomwiGd+fXcSVjQSdvmNWPn65A7GX4qjR9zdvHWf3B09jhXfQAACEIDAPALzRbj4ELSMfOMHpLOHo7NHlML14nkutrUQ4SW0qAsBCEAAAp9AYL4IKx8NIqwcAMxDAAIQUCTw+/dvJzOPFt/i29oXIrzxB0CYjl6bemwHAQhAYD4B6Wu3Xj48avstOoAII8LzWwE1IQABCCgRQISVwAezTEcHEnxCAAIQ+HkEEGHlmCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACAv8R+Oqqmrf9c0944DEZVXl6ltUWiqL91FYRoQLcCiCAAQgcHECiLB7uKYX3qe71bHQPlxT1a7X3efN1f16qWx+1iDC81lREwIQgMDVCCDCWUSft3oY7cpIt3kkNR5NJ9KlsmSL8goiXOZDKQQgAIErE0CEk+i2I+GguyLIuQgHkS6VJbvMVu73u78OLOIr76+vL/f9/W3uLYnBCwIQgAAEjiWACEd8c2HN16XqVhGOzPlFRsI5EdYhAAEI/BwCiHAXay+4/bXh9sspEQ7T0aWyJemDCC+hRV0IQAAC1yKACPubo6vRtLMPc3Ijlh8GDzdmlcoW5AgivAAWVSEAAQhcjAAi7MW0ezwpPKZUNa6/HSt7DClcL/Z5UCqbmSiI8ExQVIMABCBwQQKIsHJQEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQYUX4YhoRVg4A5iEAAQgoEkCEFeGLaURYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAgCIBRFgRvphGhJUDgHkIQAACigQQ4QD/0biqqlzzCF/I59Pd6sp/L2X+HVfotgll9e0ZbzxrGRGehYlKEIAABC5JABF2zj2aylXNw3/GGhtEOP0u5MHDNVXtet193lwdr4dqbz4R4TeAKIYABCBwYQKIcBRcEeNUcNuRcPpdt4GMgrMC2X7paBgRjgLAIgQgAIEfRgARjgL+SoTDdLN8Bt193uqRCMt370T4fr/768AivvL++vpy39/f5t6SGLwgAAEIQOBYAohwxHcswlGhLPprwI2Ty8ZrRTjbIzdm5UBYhwAEIPCDCCDCUbDfirAbrgNPiTDT0RFMFiEAAQhA4C0BRDhC9FaEo5Gwy2/Eytej/ZYWuSZcokMZBCAAgWsTQITD3dHhEST/Ge56lpFv/IhSOxXdp0T2iFK4XtyXz1hAhGdAogoEIACBixJAhJUDiwgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACCvCF9OIsHIAMA8BCEBAkQAirAhfTCPCygHAPAQgAAFFAoiwInwxjQgrBwDzEIAABBQJIMKK8MU0IqwcAMxDAAIQUCSACAf4j8ZVVeWaR/ii++y+lzJ517fnUKFUNtQqLiHCRTwUQgACELg0AUTYOfdoKlc1D/+ZivDDNVXtet193lzdr5fK5ucMIjyfFTUhAAEIXI0AIhxFVMQ4EWEZ6SZftILtR8Olsmif7xYR4XeEKIcABCBwXQKIcBTbXISft3okwvKdiHCpLNrl20VE+C0iKkAAAhC4LAFEOArtGSJ8v9/9zVgivvL++vpy39/f5t6SGLwgAAEIQOBYAohwxHeOCEudVyPhUBbt8u0iI+G3iKgAAQhA4LIEEOEotLkIu+RGLOeS9VJZtM93i4jwO0KUQwACELguAUQ43B3dPYLUPooU3RGdPYaU3KdVKpuZM4jwTFBUgwAEIHBBAoiwclARYeUAYB4CEICAIgFEWBG+mEaElQOAeQhAAAKKBBBhRfhiGhFWDgDmIQABCCgSQIQV4YtpRFg5AJiHAAQgoEgAEVaEL6YRYeUAYB4CEICAIgFEWBG+mEaElQOAeQhAAAKKBBBhRfhiGhFWDgDmIQABCCgSQIQV4YtpRFg5AJiHAAQgoEgAEVaEL6YRYeUAYB4CEICAIgFEWBG+mEaElQOAeQhAAAKKBBBhRfhiGhFWDgDmP5DA093qyrU/Mdt99r8nWyr7wEPF5csTQISVQ4wIKwcA8x9IoBXaXneTIyiVJRUPWimfBPj/Q97/Tn30G/UHecNu7RNAhJVjhAgrBwDzH0igJLSlsjMOtWT/4Zr65p6dG16Qp88kznAUG0YIIMLKgUCElQOA+Q8kMB5tDlpWKjvjUEsinNpf8//H0z2wdgUCiLByFBFh5QBg/vMJ+H8p2rjH1JGUyqbqb/6ufBKQTEcPZw6brbKDzyWACCvHDhFWDgDmL0Dg4Zrq1fXVUtkJh144CfCCHE1Pn+ANJgwSQISVg4IIKwcA859PoCB0rlR2ypGXTgJKZac4hxEDBBBh5SAgwsoBwPwHEhDxih9RiqeiS2UKhxqfBMhyPAUdlym4hkkbBBBh5TggwsoBwDwEdiVQOgnIrxfHJw+7OsHOPogAIqwcLERYOQCYhwAEIKBIABFWhC+mEWHlAGAeAhCAwAwC4c72+IpCe8/BcGmkvoWnwGfssKuCCM9ndUhNRPgQrOwUAhCAwH4EnjdX1zd3ayo3iHB2Y53UeXmX/mtXEOHXbE4pQYRPwYwRCEAAAisJyLX89hE4+YGVXoTzG+2cc2t+gAURXhmWvTZDhPciyX4gAAEI7E9ApqHDNHMswn56ulfk1m5cd64niPBcUgfVQ4QPAstuIQABCGwl4KeYh7vYEeH5QEXbKvlj/YUIW48Q/kEAAj+WgH+We7jxKvz7TBkZT42EmY4eMgUR/v523xveMkWy5uUTs/8hhYmfEuySOpvFWWOKbU4gcEY8f//+7STfrL3FL14QiAnEI2GX34iVr8cbFpaZjn4JJ3+wvpr4tZvhDClcM3i5uxcF1xoJl/9VmySw/GJQksgvuPC1BQLnxNNqJyR+8YJATGDUd2Uj5TWDC6v5L4O4LW1gh5FwK8LTUPe5NV2Cey0RjtP19Z2Co0RON2PNKAGJ29TJ5tZ4Wu2E/vvvP3Ojc2Elb0bpRhvJCres5r9tEd7p1nSJ19VEOJm+nD6DYSS8oqFqbXJGPK12Qlb92to5auUSdqcJXDXPdhsJhwvx8hk0xXdMYaXjKt9NjRJy7Pf73QuvOCjvr6+vTddut1z3LW0ribH15TlN/Ku2rSOnrX6x/ToCR8XTaidk1S9EeF3+Wt3qqnm2gwhnIfNz/+2t6ltEONvr5UbC6fFl0/ZdISKcUkp++m7ipEVq+5yLTgSzPZy0ekw8rXZCVv1ChE9K95PMXDXP9hdhN3RAUyL86nrZuziKo6URqVaZJMbiVz5NH524xPtChBMarumFt70PYTSjInddjn4yL97HQcsnxdNqJ2TVr9Ui7NtjdzNpn3Nt7oSTvHbmb+KphoNSjN06f41fq59/Z3eVDnRB3V+EY0HJb0XP1xdk1qVE2OV3lA8PuQsSEd94er9a8TurC9B+ZFXpDFMRFqYTP5l3ytGdE0+rYmfVr3UiHN/pnp/sxWXdrEt2ue3wdCucIHjbXfnZbh1+3A4RLjCWkW8sGqmgJFOIG6YJryXCBZwUzSDQdo5xRxOL8lVnEKyKnVW/1olwmn5xXqUlr59qyOvttx6fBOQnCN3J+4Ufbbxqnu0/Et4v45I9IcIJjh+94qcEUwV2dTWc/CHC236A5t3UW15+1c7RdTNWaarVwyxVXKDQIl+dIJD/5+b/1pM9RHjDr2Vtha/Qbj/epBfg7DpdPtsSpvLT6eqPP3Sz18SuKsKjk70shSZzMatz3Op4NijYQoQR4ZALu34yEt4V50fuTDoX+SWxdy86oXM7oSuK8DyBHW5CfZeTe5eXThC25r/Vn0e9Yp5JXjASZiQ83T+8ucHDdwIbrvFPGy1862/qi+89kOVhCjrecmsnFO/L0rLVTsiqX2tnql6e7EmbiE8CfRuZzsEj8+bdCcLW/LcaT6t+rc2zkCOIMCIccqH/DJ3Qy8as9ShQ7+HPXLDaCVn1a1XnWDzZa6eAw+WOVyeBR2ZnaJslGy/bbWmjqMxqPK36tSrPIt6IMCIcpUO6ON2YpSPSehQo9e+nrVnthKz6tbVzNJdfxROE/R5ttBpPq35tzTNEGBF+2ddMibBMhYUbnqbKX+6Mgs0ErHZCVv3a2jluDtiH7sBqPK36tTXPEGFE+GVXMRJZfyY+XAMblb/cEwV7ELDaCVn1a2vnuEfMPnEfVuNp1a+teYYIbxThK/8bt5HIdjdrDdfE2hulwsj4Ezuc3GfLd4Za7YSs+rW1c8xz46esW42nVb+25hkivFGEr5oY0uGMRDjrhd6VZ9U/YtV6PKXBW3tbZ/YRiWfISavxtOoXIqzcKV0xMURc09Hu9A/VI8LnCqLVXLPq19bO0ZAunuqK1Xha9WtrnjES3ijiV02MU1u9IWPW42ltFBw6IIt+Bd8MpddHuGK1DVj1a2ueIcKI8Ed0DGc5ab2hWxQ768zOyp2r2LEaT6t+IcIbRXRrp3bVxDiyQ+Hmp3XT2FZzzapf0rat3jgpbcDqy2o8rfqFCCPCL2/UkaS1+LLemLaemB21vVVuVv0KneNR8diyX6ttU/oLq/G06lfIs7V9LdPRG0X8qomxNqHmbGed2ZbO9chtrXKz6lfoHI+Mydp9Wx2hSyytxtOqXyHP5vR9U3UQYUR4Ki8O/c56Y1rbsR69nVVuVv0KnePRcVmzf5gtvyRjndnaThMRRoTX5s7q7aw3pjWd6hnbWOVm1S+JiVXfrPoFs+UnB4HZ2g4REUaE1+bO6u3ogNY39DPEfqkN4rk8njC7HrO1HSIijAivzZ3V29EBLe+Awtn2UoE8oz7xXB5PmF2P2doOERG+sAhbvvnjDHFYY4PO8Xqd45o8OHob8ux6eYYIbxTTtY2OxnS9xrQ2F47ezmquWfVL4mHVN6t+wWx5fxaYIcKI8Oh5YasN3apfoTHJp8W3VW5W/bIcT5gtb2PWmSHCSh2n9cRATJY1duK5jJdlobPsG3l2vTxDhBHh0ejNakO36pflTtuyb8TzeoIi+WbtbT3PEGGlpLGeGNYakmUxwbd1HS9tYDk3mF2PmV0RfjTJ/6atb89Vvspt3AjKssS12tCt+oUIL8uv0B6J53JuMLses1XC5pw7+BGlh2uq6B/CP2+ujtcXeI0IXydp6YCWx9LyCQLxXB5PmF2P2QI5S6oeK8IyCm4eicFHU7k1o2FE+DpJSwe0PJaIMMzCzMPRn1bbp1W/QttMhG7ByqEi/LzVIxGW7+aI8P1+98N0cVDeX19fyXr4ns+WDxzgQA6QA+SATg789ddfC2Q3rSoxq+TPEa8tIpz7c5SPuZ2l61b9kuOw6ptVvywzs+wb8Vzaa9htm+TZ8lhuZSbt51QR3jIdvQ7PsVvRAS3nC7PlzGQLq9ys+gUz8mwdgeVbbWkDsu1hIuzyG7Hy9QXHuuUgF5hZXNWqX3IgVn2z6pdlZpZ9I56Luw2zbZM8Wx7Lrcyk/RwnwuJd9ohSdp/W7CP+559/Ztc9s6JVv4SBVd+s+mWZmWXfiOfyHgdmMAsEjhfhYIlPCEAAAhCAAAQSAohwgoMVCEAAAhCAwHkEEOHzWGMJAhCAAAQgkBBAhBMcrEAAAhCAAATOI4AIn8caSxCAAAQgAIGEACKc4GAFAhCAAAQgcB4BRPg81liCAAQgAAEIJAQQ4QQHKxCAAAQgAIHzCCDC57HGEgQgAAEIQCAhcF0Rzn6pa/jPTfI/jitXyTv++S75Sc365p4Jnh1XYn9yO3FZFf+rxxN8jW0nfj3dre44jXid4Jdzzv8DkGA7+z/Ur8vO8U0yI/gQp1H+C3Hn5l0pZuNfrzvXN/nxvDifGtf/k9M4B8/O/66JT/qW+eX7jCr4fXCeFW2X4nywX6FLzPwbckkpzzp/krYovi728yR+gWP388LH/mxlZOy8RQFZu1tQ1Og3q6XjbBNGEjluUGH5CC8frukFrm1AQ9Jq+lryq/VzlNSd+BzPMPatE7zemddlp8W3O2m7NZXr3XKasZS8fR0zp+ybF7kBVNTItJl1JweTvkVuyqJ06F290/IsuBDZLsX5HL+mYhb6z6myti8+yreQW/KZhvG1L6/aQ9Ocrw/XHAknCdtmsQRIhGMqEcbBC5l/zOfgQ9qwgzUtXxO/Ch36UG84kTmaYWASGMWfcdk5vslxtx1LctzqeVcQYVXfpDMMnXQcOQv5X/AtcTVle06eBQdS20tFOMnRsMtNn1Pi1sVXMc9Gx1nwJT6hCihke5ntyAcYo/2GDXb6vKQISwMJZ6yB09BoJIEG2MP3oebRn2mDsuNr6ldo6O0UXMtrOMs8h6FnE6ajB+M+QK/Ljvctzpm4gerHso3hVMxUffOzBrWrQyzlMxpRhuXQ8ga+x8fS/6e3etq34I//lA69n82Sb07wLTgwsv06zqf55WcXw+WF4QRLM8/itijoSr68Lrudrg8/UIRDZvsouVo6gyihhmniqN6Oi3nw8/WQPCM/xMcDfZ3yIzls6QimRjMH+xV88P4lnWAo6RrbVNkRvvlcGTqduOFPMZTvzo5lTyaKmapvGbMgFG06l06Y+yNp2+gR+V/wbbCen6AOJX7piDzrTbyxLfWiOPebycKBfvl8kv7A85t7UhV5d4BvcVtsD/91bs1qDwf4GBHoF3+MCEuA0s5QzmTbzrQPnkCf6sx7XNsWfOCz/U8lw9m+Tvk1PlLhFV1n9xXOZDhlP3g5VXaQb77DCyOA4VNyy0IsA5H2c+Ci6mtZ6IoAAAInSURBVJvvqIcTF/EttDlVv8SRgm89y1ci5ysclGfBeNF2X+nctik+Jf3YcKKgGc+QU4FKyZdSWbv9wXENTl72xizfsCLByNf99c6hfAheesNPxGnzotjIp938TnPf8vWDfX3pV37Eo85AGt6BDMWejHzCK7ZfKvP1D/Yt+BSJSWv25ur4ROXkWEZutYsxs9yXfP3QPBs66RGn3I98/VC/xJuCbx1QaSPpCXxXcLhv7cnKtO3gw9RI+OD8l7xKRFgEq7spKo9fvn4gs6Ef79jktuP1eFmqJ+sH84tCJ4uXHAn7Y/Qd0DBSiftzOQtKEtsHoK0b18tYrV+N9j9cr4tGBlq+Fv1qG9akvz5nj2bYdo7T9ktl0p6O9m1IhVHD14plm/T99ayWW5RjUq7pW5ZrSTvT9Eu4lHzzZRnHLvyH59lL29ptsz05GNpmdpJycjz9QCK+3yA+ES748qo9HB7XLn/Cx3VFOBwhnxCAAAQgAAGjBBBho4HBLQhAAAIQuD4BRPj6MeYIIQABCEDAKAFE2GhgcAsCEIAABK5PABG+fow5QghAAAIQMEoAETYaGNyCAAQgAIHrE0CErx9jjhACEIAABIwSQISNBga3IAABCEDg+gQQ4evHmCOEAAQgAAGjBBBho4HBLQhAAAIQuD4BRPj6MeYIIQABCEDAKAFE2GhgcAsCEIAABK5PwIvwn3/+6f+Tg6zwhgE5QA6QA+QAOXBODoj+/g9yAwKKFcyUFQAAAABJRU5ErkJggg==\"></p>","_substeps":{"idx":"776fb04e-2874-4d24-895d-cd6b99712592","name":"substeps","custparents":[{"idx":"MY985829e8-14f7-4a67-86ac-167da3d62fa4"},{"idx":"MY231139d1-be6b-4871-90ce-2855f7c50aa2"}],"children":[{"idx":"MY02eba6c8-164c-401d-bbc6-0295a3e73cd5","name":"Introduction","custparents":[{"idx":"776fb04e-2874-4d24-895d-cd6b99712592"}],"children":[],"_substeps":{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e","name":"substeps","custparents":[{"idx":"MY02eba6c8-164c-401d-bbc6-0295a3e73cd5"}],"children":[{"idx":"MY1ab790b4-79cd-445f-8c16-6007966bb38f","name":"physician characteristics impact adh","custparents":[{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e"}],"children":[{"idx":"MY156e3eff-8cca-4417-9edf-4c785aecf367","name":"Physician impact fit into the framework","custparents":[{"idx":"MY1ab790b4-79cd-445f-8c16-6007966bb38f"},{"idx":"MY1ab790b4-79cd-445f-8c16-6007966bb38f"}],"NodeDescription":"<p>///t</p><p>According to a well-accepted world health organization (WHO) framework,<sup>(1)</sup> determinants of non-adherence can be classified into five categories: patient-related; socio-economic environmental; disease-related; treatment-related; and healthcare provider/system-related.<sup>(1)</sup> Physicians can affect determinants in all five of these categories, given their broad responsibilities pertaining to diagnosis, education, prescribing, and follow-up. Indeed, preliminary studies have linked physician roles to medication adherence through activities such as counseling/ education,<sup>(2-6)</sup> follow up after prescribing a new medication, <sup>(7-10)</sup> and choice of prescriptions. <sup>(11-13)</sup></p><p>t///</p>"},{"idx":"MY8f981243-fde9-4c5b-a979-1703f8608d0d","name":"physician impact through trust and communication","custparents":[{"idx":"MY1ab790b4-79cd-445f-8c16-6007966bb38f"}],"NodeDescription":"<p>///t</p><p>It is highly possible that many of the activities associated with medication adherence may simply be indicators of effective relationships rather than independent, causal factors. If so, the strength of the patient physician relationship may be a more important factor than the number of follow-up visits or the time spent on educational activities. Evidence supporting the importance of a strong physician-patient relationship is clear: patient reported trust and communication are consistently associated with high adherence.<sup>(1, 14-19)</sup></p><p>t///</p>"}]},{"idx":"MYa094ea87-7ef9-4ddd-b87d-c0d682fd8a62","name":"Concordance to adherence","custparents":[{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e"}],"NodeDescription":"<p>///t</p><p>The literature <a href=\"#_msocom_1\" target=\"_blank\">[BD1]</a>suggests that a trustful relationship between physicians and patients can be influenced where these individuals had concordance/disconcordance on certain characteristics, i.e., whether or not share similar demographic or racial characteristics<a href=\"#_msocom_2\" target=\"_blank\">[LL2]</a>. For example, African-Americans patients under care of white physicians (i.e., disconcordance on ethnicity) was associated with suboptimal medication adherence.<sup>(20)</sup> On the contrary, white patients under care of white physicians (i.e., racial concordance) was associated with improved medication adherence.<sup>(21)</sup>Concordance can be based on characteristics other than race, such as age, or sex. Although patient age and sex have been tested frequently in adherence studies <a href=\"#_msocom_3\" target=\"_blank\">[EC3]</a>in the past with inconsistent results,<sup>(22)</sup> it is possible that the impact of age and sex may depend on concordance between patients and their physicians’<a href=\"#_msocom_4\" target=\"_blank\">[LL4]</a> demographic characteristics. To date, such associations have not been fully explored. Findings of studies examining physician-patient concordance (i.e., physicians and his/her patients share the same characteristics such as age, sex, or ethnicity) <a href=\"#_msocom_5\" target=\"_blank\">[LL5]</a>may be relevant to the impact of relationships with medication adherence.</p><p><a href=\"#_msoanchor_1\" target=\"_blank\">[BD1]</a>COME BACK TO THIS!!</p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[LL2]</a>Here again, explain what you mean by discordance. </p><p><span style=\"background-color: yellow;\">[SY] Added</span></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[EC3]</a>Do you mean the impact of the age and sex of the patient? If so, maybe explicitly state that.</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_4\" target=\"_blank\">[LL4]</a>Why limit this statement to GP? In the paragraph above, you do not focus specifically on GPs </p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_5\" target=\"_blank\">[LL5]</a>I would recommend that you add an explanation here about what you mean by concordance. </p><p><span style=\"background-color: yellow;\">[SY] Added</span></p><p>t///</p>"},{"idx":"MY37f76870-7957-47a7-9954-bb2e12c35949","name":"Aim of the study","custparents":[{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e"}],"NodeDescription":"<p>///t</p><p>The aim of this study <a href=\"#_msocom_1\" target=\"_blank\">[BD1]</a>was to examine the impact of patient-physician concordance of age or <a href=\"#_msocom_2\" target=\"_blank\">[BD2]</a>sex on the probability of medication adherence. <a href=\"#_msoanchor_1\" target=\"_blank\">[BD1]</a>We may consider adding a couple of sentences outlining how concordance could impact adherence at not only the individual level but could also partially explain the occurrence of high performing physicians who have higher than avg rates of opt adherence ….. not sure if this is necessary but perhaps it wouldassesst the reader in understanding the obectives?</p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[BD2]</a>Should this be “or” instead of “and”</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p>t///</p>"},{"idx":"MYeb018578-ad22-4a1c-953a-567b932cf96f","name":"a previous version","custparents":[{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e"},{"idx":"MY02552ac5-2736-4403-bb66-c89f5fd64c5e"}],"children":[],"_substeps":{"idx":"8843db73-4be1-4a10-a5d5-8a1ef2784bbc","name":"substeps","custparents":[{"idx":"MY02eba6c8-164c-401d-bbc6-0295a3e73cd5"},{"idx":"MYeb018578-ad22-4a1c-953a-567b932cf96f"}],"children":[{"idx":"47c1a2fd-dd78-402a-bf07-b2d24eae6282","name":"physician characteristics impact adh","custparents":[{"idx":"8843db73-4be1-4a10-a5d5-8a1ef2784bbc"}],"children":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19","name":"Physician impact fit into the framework","custparents":[{"idx":"47c1a2fd-dd78-402a-bf07-b2d24eae6282"},{"idx":"47c1a2fd-dd78-402a-bf07-b2d24eae6282"}],"children":[{"idx":"14565741-158e-4c1a-bf41-e2f733db4e46","name":"Patient-related","custparents":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19"}],"NodeDescription":"<p>///tWithin patient-related factors, patients' knowledge and beliefs about their illness, and their self-efficacy in engagement of medication are associated with medication adherence.(Ref) Physicians can improve patients' health beliefs through counseling/education activities. Studies suggested that counseling (e.g., providing advice, recommendation, or instruction to patients on medication) improves medication adherence.(60-63) Forgetfulness (i.e., patients forget to take medication as instructed) has been identified as a barrier of adherence.(Ref) Physicians can remind patients, and help patients overcome forgetfulness during routine encounters.(Ref) Studies suggested that reminding activities by physicians improves medication adherence. (74-76, 77)&nbsp;<p></p>&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>///h</p><p>Patient-related factors represent the resources, knowledge, attitudes, beliefs, perceptions and expectations</p><p>of the patient.</p><p>Patients’<strong> knowledge and beliefs about their illness, motivation to manage</strong> it, <strong>confidence (self-efficacy)</strong> in</p><p>their ability to engage in illness-management behaviours, and expectations regarding the outcome of</p><p>treatment and the consequences of poor adherence, interact in ways not yet fully understood to influence</p><p>adherence behaviour.</p><p>Some of the patient-related factors reported to affect adherence are: <strong>forgetfulness</strong>; psychosocial stress;</p><p>anxieties about possible adverse effects; low motivation; inadequate knowledge and skill in managing</p><p>the disease symptoms and treatment; lack of self-perceived need for treatment; lack of perceived effect</p><p>of treatment; negative beliefs regarding the efficacy of the treatment;misunderstanding and nonacceptance</p><p>of the disease; disbelief in the diagnosis; lack of perception of the health risk related to the</p><p>disease;misunderstanding of treatment instructions; lack of acceptance of monitoring; low treatment</p><p>expectations; low attendance at follow-up, or at counselling, motivational, behavioural, or psychotherapy</p><p>classes; hopelessness and negative feelings; frustration with health care providers; fear of dependence;</p><p>anxiety over the complexity of the drug regimen, and feeling stigmatized by the disease.</p><p>Perceptions of personal need for medication are influenced by symptoms, expectations and experiences</p><p>and by illness cognitions (19). Concerns about medication typically arise from beliefs about side-effects</p><p>and disruption of lifestyle, and from more abstract worries about the long-term effects and dependence.</p><p>They are related to negative views about medicines as a whole and suspicions that doctors over-prescribe</p><p>medicines (20,21) as well as to a broader “world view” characterized by suspicions of chemicals in</p><p>food and the environment (22) and of science, medicine and technology (23).</p><p>A patient’s motivation to adhere to prescribed treatment is influenced by the value that he or she places</p><p>on following the regimen (cost-benefit ratio) and the degree of confidence in being able to follow it (24).</p><p>Building on a patient’s intrinsic motivation by increasing the perceived importance of adherence, and</p><p>strengthening confidence by building self-management skills, are behavioural treatment targets that</p><p>must be addressed concurrently with biomedical ones if overall adherence is to be improved.</p><p>h///</p>"},{"idx":"8918dd1a-4207-4927-bba7-3fcfe808bc34","name":"Socio-economic environmental","custparents":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19"}],"NodeDescription":"<p>///tWithin socio-economic factors, low income level (i.e., affordability to high cost medications) has been identified as a barrier to medication adherence. Physicians can help overcoming the barrier by prescribing more affordable medications.(Ref) Culture beliefs about illness and treatment are related to medication adherence. Physicians can improve patients' health beliefs through counseling/education activities.(Ref) In particular, such counseling activities would be more efficient if physician share the same cultural or linguistic background with their patients.(Ref) Studies have suggested that ethnic concordance between physicians and patients improves adherence.(Ref)<p></p>&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>///h</p><p>Some factors reported to have a significant effect on adherence are:</p><p>poor socioeconomic status,</p><p>income, high cost of medication,</p><p>choose of affordable,</p><p>culture and lay beliefs about illness and treatment</p><p>h///</p>"},{"idx":"88a012df-b395-473e-ac4b-678d94972a16","name":"Disease related","custparents":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19"}],"NodeDescription":"<p>///tWithin condition-related factors, coexisting diseases, and substance abuse can impair patients' adherence behavior.(Ref) Physicians can provide treatment on such comorbidities and abuse problems. Consequently, patients adherence behavior can be improved.(Ref)<p></p>&nbsp;&nbsp;t///</p><p>///h</p><p>Condition-related factors represent particular illness-related demands faced by the patient. Some strong</p><p>determinants of adherence are those related to the <strong>severity of symptoms</strong>, level of disability (physical,</p><p>psychological, social and vocational), rate of progression and <strong>severity of the disease</strong>, and the availability</p><p>of effective treatments.Their impact depends on how they influence patients’ risk perception, the</p><p>importance of following treatment, and the priority placed on adherence. Co-morbidities, such as</p><p>depression (18) (in diabetes or HIV/AIDS), and drug and alcohol abuse, are important modifiers of adherence</p><p>behaviour.</p><p>h///</p>"},{"idx":"485fbe29-1fef-4f9e-bc02-d55a41e88d85","name":"Treatment related","custparents":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19"}],"NodeDescription":"<p>///tWithin treatment-related factors, complexity of the medical regimen is a barrier of medication adherence.(Ref) Physicians can reduce polypharmacy, and choose to prescribe drugs of simpler forms. Studies suggested that prescription choices by physicians has impact to medication adherence. (58,104,106)<p></p>&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>There are many therapy-related factors that affect adherence. Most notable are those related to the</p><p>complexity of the medical regimen, duration of treatment, previous treatment failures, frequent</p><p>changes in treatment, the immediacy of beneficial effects, side-effects, and the availability of medical</p><p>support to deal with them.</p><p>Unique characteristics of diseases and/or therapies do not outweigh the common factors affecting</p><p>adherence, but rather modify their influence. Adherence interventions should be tailored to the needs</p><p>of the patient in order to achieve maximum impact.</p>"},{"idx":"ab090978-e188-4b73-b6ad-dcbd6a1d2e5c","name":"Healthcare provider related","custparents":[{"idx":"31a57e2d-cbc2-4f52-89bb-d710c4798b19"}],"NodeDescription":"<p>///tWithin healthcare provider-related factors, a good and sustained patient-provider relationship may improve adherence.(Ref..LONGTERM) Studies suggested that a trustful relationship between physicians and patients improves medication adherence.(78-84, 99,100)&nbsp;Continuity of care (under care of the same physician) is associated with better adherence.(95-98)&nbsp;Some provider factors may have negative impact on medication adherence. These include, lack of knowledge and experience in disease management, overworking, short consultations. Although these are important factors, little has been done to examine their impairment.<p></p>&nbsp;Given the importance of physicians' role in medication adherence, few studies have been focusing on physician characteristics, and to elucidating how these characteristics are related to medication adherencet///</p><p>Relatively little research has been conducted on the effects of health care team and system-related</p><p>factors on adherence.Whereas a good patient-provider relationship may improve adherence (17),</p><p>there are many factors that have a negative effect.These include, poorly developed health services</p><p>with inadequate or non-existent reimbursement by health insurance plans, poor medication distribution</p><p>systems, lack of knowledge and training for health care providers on managing chronic diseases,</p><p>overworked health care providers, lack of incentives and feedback on performance, short consultations,</p><p>weak capacity of the system to educate patients and provide follow-up, inability to establish</p><p>community support and self-management capacity, lack of knowledge on adherence and of effective</p><p>interventions for improving it.</p>"}],"NodeDescription":"<p>///tDeterminants of non-adherence can be classified into five categories according to a well-accepted clinically oriented framework: patient-related factors; socio-economic environmental factors; disease related factors; treatment related factors; and healthcare provider/system related factors.(13, 39, 42) Physicians can affect these determinants in all of the five categories.<p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>///h</p><p>From lit review v20190709</p><p>Determinants of non-adherence are often classified by a clinically oriented framework containing five categories: patient-related factors; socio-economic environmental factors; disease related factors; treatment related factors; and healthcare provider/system related factors.(13, 39, 42) Within</p><p><br></p><p><br></p><p><br></p><p>From lit review v20170703</p><p>Physicians play an important role in medication adherence. Of the aforementioned five categories of adherence determinants, three are potentially impacted by physicians. For example, physicians can influence patients’ knowledge about the disease, treatments, and other management strategies . A study found that lack of support by physicians was associated with poor adherence.(46) Furthermore, studies suggested that physicians may play an important role in enhancing medication adherence by providing simple and specific educational messages,(47) or clear instructions on therapeutic plan and strategies.(48) Another study reported that patients receiving physician counselling on disease and medication knowledge were more likely to continue with medication (OR=2.7, 1.6 to 4.8) comparing with patients not receiving counselling.(49)</p><p>Physician follow up were also related to mediation adherence.(50) Early follow up by physicians were associated with higher adherence level (OR=1.11, 1.01 to 1.22) among patients receiving statin.(51) Risk of non-adherence reduced when having higher visits with the prescribing physician (OR per 0.5 increase, 0.77 [CI, 0.70 to 0.85]).(52)</p><p>Adherence can also be influenced by the interpersonal experience between physicians and patients. Positive relationships have been strongly associated with medication adherence.(53) Simpson and colleagues reported that patient–provider relationship is a positive predictor of high levels of adherence.(54) A review on 48 studies showed that better physician-patient collaboration is associated with better patient adherence(55) . Positive relationships are particularly related to physicians’ communication skill.(56,57) A study suggested that ineffective communication were associated with patient’s poor understanding of disease, potential complications, and suboptimal medication adherence .(22) Another study showed that poor communication by physicians was associated with 19% higher risk of medication non-adherence.(58) On the contrary, training physicians in communication skills results in substantial and significant improvements in patient adherence (OR=1.62) comparing with physician receiving no training”(58)</p><p>Physicians can also impact complexity of medication regimens.(59) Avoidance of polypharmacy and multiple daily doses are associated with better adherence. In a study among diabetes patients, 79% receiving once-daily dosing exhibited optimal adherence, compared to 38% receiving three doses per day(60). Physician ordered … more details. And it is about convenience … 91% of the patients adhered to the more convenient, pre-packed medication, while only 42% adhered when provided less convenient form of syrup.(61)</p><p>Physician characteristics may also impact medication adherence. One study (female to female) reported that women on estrogen replacement therapy were more likely to be noncompliant when visiting a male versus a female physician.(62) . Another study suggested that female physicians were more patient-centered than male physicians, which is more valued by patients.(63) Physicians’ practicing patterns may also affect adherence.</p><p><br></p><p><br></p><p>h///</p>"},{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db","name":"Criticism of the current studies","custparents":[{"idx":"47c1a2fd-dd78-402a-bf07-b2d24eae6282"},{"idx":"47c1a2fd-dd78-402a-bf07-b2d24eae6282"}],"children":[{"idx":"c55de8b4-4c4c-4d70-a842-662ecab5fe15","name":"Limited study size","custparents":[{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"}],"NodeDescription":"<p>///tSmall sample size is often a limitation in these studies. Schoenthaler and colleagues performed a study on whether patient-physician racial concordance modifies the association between communication and medication adherence. The study only included 597 patients of 69 providers.(Schoenthaler, 22270266) In this study, the communication–adherence association was not significantly modified in race-concordant relationships.(Schoenthaler, 22270266) However, the null result may due to lack of statistic power. In another study by Hall and colleagues on association between physician sex and patient satisfaction, 497 patients nested in 71 physicians were included.(24731957) All the study subjects were from the same hospital. Issues may arise on generalizability of results from this sample.(24731957)&nbsp;t///</p><p><br></p><p>///h</p><p>A study by &lt;authoer&gt; and colleagues on &lt;impact of factors&gt; to &lt;outcome &gt; only included &lt;n of cases&gt;.</p><p><br></p><p>issues: statistic power, generalizability</p><p>&lt;study by whom&gt; &lt;what is it about&gt; &lt;what is the size&gt;</p><p><br></p><p>The final sample comprised <span style=\"background-color: rgb(255, 255, 0);\">597 </span>patients and 69 providers (27 white and 42 black), yielding <span style=\"background-color: rgb(255, 255, 0);\">207 </span>race discordant relationships and 390 race-concordant relationships. (57. Schoenthaler, 22270266). Purpose: The purpose of this paper is to determine whether racial composition of the relationship modified the association between ratings of provider communication and medication adherence. Results: The communication–adherence association was significantly modified in race-discordant relationships (p0.04).</p><p><br></p><p>Encounters between physicians (N = <span style=\"background-color: rgb(255, 255, 0);\">71</span>) and patients (N = <span style=\"background-color: rgb(255, 255, 0);\">497</span>) in a hospital were videotaped and patients’ satisfaction was measured.</p><p>Purpose: To compare male and female physicians on patient-centeredness and patients’ satisfaction in three practice settings within a hospital; to test whether satisfaction is more strongly predicted by patient-centeredness in male than female physicians. (86, Hall, 24731957)</p><p><br></p><p><br></p><p><strong style=\"background-color: rgb(255, 255, 0);\">723 </strong>hypertensive African-American and white patients receiving care from <strong style=\"background-color: rgb(255, 255, 0);\">205</strong>white and African-American providers at 119 primary care clinics (109, Schoenthaler, 24266617)</p><p>7186</p><p><br></p><p>This is big</p><p>We studied <span style=\"background-color: rgb(255, 255, 0);\">131,277</span> adult diabetes patients in Kaiser Permanente Northern California in 2005. (110, Traylor, 20571929)</p><p>Data from the Taiwan National Health Insurance was used to investigate <span style=\"background-color: rgb(255, 255, 0);\">7,186</span> DN patients, nested within <span style=\"background-color: rgb(255, 255, 0);\">2960 </span>randomly assigned primary care physicians in Taiwan over the course of 1 year of treatment. ()</p><p>Among patients presenting in <span style=\"background-color: rgb(255, 255, 0);\">174 </span>general practices in Funen County, Denmark, <span style=\"background-color: rgb(255, 255, 0);\">4860 </span>adult first-time users of antidepressants (Schoenthaler, 24266617)</p><p><br></p><p>The final sample comprised <span style=\"background-color: rgb(255, 255, 0);\">597 </span>patients and 69 providers (27 white and 42 black), yielding <span style=\"background-color: rgb(255, 255, 0);\">207 </span>race discordant relationships and 390 race-concordant relationships. (57. Schoenthaler, 22270266). Purpose: The purpose of this paper is to determine whether racial composition of the relationship modified the association between ratings of provider communication and medication adherence. Results: The communication–adherence association was significantly modified in race-discordant relationships (p0.04).</p><p><br></p><p>An epidemiologic study was carried out in <span style=\"background-color: rgb(255, 255, 0);\">2106 </span>women 46-63 years of age to determine risk factors associated with their compliance or noncompliance with estrogen replacement therapy (ERT). Data were obtained from prescription refill and medical claims information from centralized prescription and medical claims databases of a United Healthcare-affiliated health plan in Minnesota.(111, Berman, 9140856)</p><p><br></p><p><br></p><p><br></p><p>Template form the literature review:</p><p>Confined by cost and feasibility, small sample size is frequently a limitation of adherence RCTs. Nieuwlaat and colleagues performed a special review on 109 adherence RCTs. Forty four (nearly 40%) were conducted with fewer than 60 participants per group.(66) The authors argued that studies with fewer than 60 subjects per group may have issues in statistical power, i.e., insufficient to detect an absolute difference of 25% in adherence.(66) In 771 adherence RCTs reviewed by Conn and colleagues, the median sample size was 98.(112) In seven RCTs on adherence to secondary prevention medications reviewed by Adler et al, three (almost half) included 30 to 34 patients per group.(150) Four out of twelve RCTs on adherence to antiepileptic medications were conducted with 22 to 81 patients,(149) while 50% (4/8) of RCTs on adherence to smoking cessation medications included less than 100 patients.(152) In 39 RCTs on adherence to asthma regimens reviewed by Normansell et al, twenty (&gt; 50%) were conducted with 12 to 111 patients.(151)</p><p>h///</p>"},{"idx":"91555359-5c4a-4ae9-8c96-d95fa273fc6e","name":"Self-report adherence","custparents":[{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"},{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"}],"NodeDescription":"<p>///tAnother issue of these studies is the validity of self-reported data. In a study by Schoenthaler and colleagues on whether medication adherence mediates the association between ethnic concordance and blood pressure, medication adherence was recalled by patients answering a question: \"In a typical week, how close do you come to following your doctor’s recommendations about medications?\".(24266617) Self-report adherence measures are disadvantaged by imprecision and susceptibility to bias.(113, Haynes, 18425859)<p></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p>///h</p><p>A study by &lt;authoer&gt; and colleagues on &lt;impact of factors&gt; to &lt;outcome &gt; only included &lt;n of cases&gt;.</p><p><br></p><p>Another issue of these surveys is the validity of self-reported data.(49, 153-156) Laan’s review included a study by Cuffee and colleagues on association between discrimination and adherence to blood pressure lowering medications.(160) The outcome (i.e., non-adherence) was self-reported.(160) As discussed previously, data collected by self-report is not as reliable as objective measures.</p><p><br></p><p>To examine the associations between racial/ethnic concordance and blood pressure (BP) control, and to determine whether patient trust and medication adherence mediate these associations.(109, Schoenthaler, 24266617)</p><p><br></p><p>h///</p>"},{"idx":"277221e0-72c0-4320-af6a-aaefaf457266","name":"Limited covariates","custparents":[{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"}],"NodeDescription":"<p>///tA third limitation is that studies often missed important physician characteristics. In a study by Huang and colleagues on how physicians influence the use of blood pressure lowering medications among patients, physicians' workload, and familiarity on study medication were not examined.(22641577). In studies on impact by ethical concordance to medication adherence, physician's country of medical training were often not examined probably due to lack of data.(24266617, 22270266,20571929) <p></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>///h</p><p><br></p><p>A study by &lt;authoer&gt; and colleagues on &lt;impact of factors&gt; to &lt;outcome &gt; only included &lt;n of cases&gt;.</p><p><br></p><p>Ideal: age, sex, specialty, workload, experience, country of medicine training, panel size, years of service, familiarity on study medication, (paymode, sex/age-concordance)</p><p><br></p><p>huang</p><p>This study identified all patients with diabetes in 2006 within a large claim database to investigate how the <strong>characteristics of physicians influence</strong> the use of ACEI/ARB among</p><p>patients.</p><p>The registry for medical personnel provides information on the ID, sex, date of birth of physicians, DOC, and the specialty of the physician. In addition, the physician characteristics (physician level) included the area of specialization, work experience, and characteristics related to the hospital.</p><p><strong>Missing: workload, medicine training country, familiarity on study medication, Not for GP</strong></p><p><br></p><p>Schoenthaler 24266617)</p><p>To examine the associations between<strong> racial/ethnic concordance</strong> and <strong>blood pressure (BP) control</strong>, and to determine whether patient trust and medication adherence mediate these associations.</p><p>Physician’s data included sex, age, medical specialty, and clinic location (rural/inner city/suburban).</p><p><strong>Missing: workload, experience, medicine training country, years of service, familiarity on study medication</strong></p><p><br></p><p>halls</p><p>age, sex, specialty, position, settings (departments in a hospital) (Table 1)</p><p><strong>Missing: workload, medicine training country, years of service, familiarity on study medication, NOT for GP</strong></p><p><br></p><p>Schoenthaler 22270266)</p><p>Provider-level demographic data collected included age, sex, place of birth, duration of practice at the site, type of provider (i.e., physician, nurse practitioner), and specialty.</p><p>and provider characteristics (place of birth, type of provider, cultural competency training, and years at site),</p><p><strong>Missing: workload, medicine training country, familiarity on study medication</strong></p><p><br></p><p>Traylor (20571929)</p><p>The models also controlled for physician age, gender, language proficiency, panel size and number of diabetic patients in panel as fixed effects</p><p><strong>Missing: medicine training country, years of service, familiarity on study medication</strong></p><p><br></p><p><br></p><p><br></p><p>Hansen</p><p>Variables describing the GP, practice structure, workload, accessibility, use of counselling, and general and antidepressant prescribing were included (variables appear in Table 2).</p><p><br></p><p>h///</p>"},{"idx":"6a407e18-6ab6-4fbd-b190-b74f403a7ee8","name":"Untapped area","custparents":[{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"},{"idx":"265eea18-3a9f-4ca1-82dc-b465332ef6db"}],"NodeDescription":"<p>///tSeveral factors may potentially have influence to medication adherence. Policy makers have expected that physicians not paid upon number of service claims (i.e., physicians of non-fee-for-service or NFFS payment type) would spend more time with individual patients.(Ref) If so, NFFS physicians should have better influence on adherence than physicians paid by number of service claims (i.e., fee-for-service or FFS payment type). The impact of physician payment type to medication adherence was not examined. Studies found that physicians’ age and sex are associated with their patients' medication adherence.(hall24731957, berman 9140856) However, the impact to medication adherence by patient-physician concordance of age or sex has rarely been examined.<p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>///h</p><p>From lit rev</p><p><br></p><p>h///</p>"}],"NodeDescription":"<p>///t.&nbsp;<p></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p><br></p><p>[to do]</p>"}]},{"idx":"ac232c8f-24ab-4b78-83b5-5d10fceab8a1","name":"questions remained","custparents":[{"idx":"8843db73-4be1-4a10-a5d5-8a1ef2784bbc"}],"NodeDescription":"<p>///tThe literature suggests that:<p></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Lack of studies in large population</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Lack of studies with objective measure of adherence</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Lack of studies on physician factors like sex/age concordance</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Lack of studies on service type (FFS/NFFS)</li></ol><br><p></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Individuals have latent effect .... which cannot be captured by fixed factors</li></ol>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"29eea7fd-d3cd-46aa-851b-7bbf0fc49a96","name":"New approach","custparents":[{"idx":"8843db73-4be1-4a10-a5d5-8a1ef2784bbc"}],"children":[{"idx":"d8afc7c4-0e8c-4307-98d2-1a8bb3c30812","name":"age sex has been reported","custparents":[{"idx":"29eea7fd-d3cd-46aa-851b-7bbf0fc49a96"}]},{"idx":"5a8ade44-9072-49f1-b8a9-96a4b1cca8cb","name":"not conclusive, inconsistent","custparents":[{"idx":"29eea7fd-d3cd-46aa-851b-7bbf0fc49a96"}]},{"idx":"12120e8b-2ded-45b2-8661-f6b37266aeb6","name":"Perhaps due to lack of check on physician impact like age, sex cocordnance…","custparents":[{"idx":"29eea7fd-d3cd-46aa-851b-7bbf0fc49a96"}]},{"idx":"8257c086-2507-479b-993c-160ed56fdf0b","name":"Have been done in this field? No?...","custparents":[{"idx":"29eea7fd-d3cd-46aa-851b-7bbf0fc49a96"}]}]},{"idx":"7d763157-f803-474a-b1a2-94d301a5dc30","name":"a previous version","custparents":[{"idx":"8843db73-4be1-4a10-a5d5-8a1ef2784bbc"}]}]}}]}},{"idx":"9bb6cfc6-42f3-4adf-a339-1f68b045c915","name":"Methods","custparents":[{"idx":"776fb04e-2874-4d24-895d-cd6b99712592"},{"idx":"776fb04e-2874-4d24-895d-cd6b99712592"}],"children":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3","name":"substeps","custparents":[{"idx":"9bb6cfc6-42f3-4adf-a339-1f68b045c915"}],"children":[{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9","name":"Hypotheses and Study Objectives","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"}],"children":[{"idx":"4edcc6d4-e852-4409-8c9e-4e1b255a0b66","name":"Obj1 to describe","custparents":[{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9"},{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9"}],"NodeDescription":"<p>///t</p><p><u>Objective 1: </u><a href=\"#_msocom_1\" target=\"_blank\">[BD1]</a> To d<u>escribe and rank phyisicians based on the prevalence of optimal adherence witin their patient panel.</u></p><p><a href=\"#_msoanchor_1\" target=\"_blank\">[BD1]</a>Do you think it would help make this more clear if we had the first objective that was simply to “Describe and rank phyisicians based on the prevalence of optimal adherence witin their “patient pool”(I wish we could come up with a better term other than “pool”.Let’s keep thinking about possible terms that might be better. </p><p>t///</p><p><br></p>"},{"idx":"8e51f4ce-0836-47d9-a856-15bac8c3ea39","name":"Obj2 %concord to % adh doc level","custparents":[{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9"},{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9"}],"NodeDescription":"<p>///t</p><p><br></p><p><u>Objective 2: To determine if a high proportion of age and/or sex concordant patients in a prescriber’s patient pool </u><a href=\"#_msocom_1\" target=\"_blank\">[LL1]</a><u>is associated with an increased prevalence of optimal </u><a href=\"#_msocom_2\" target=\"_blank\">[BD2]</a><u>adherence.</u></p><p>Hypothesis: A high proportion of age and /or sex concordance within a prescribers’ patient pool (?) patients is associated with an increased prevalence of optimal medication adherence<a href=\"#_msocom_3\" target=\"_blank\">[BD3]</a>.</p><p><a href=\"#_msoanchor_1\" target=\"_blank\">[LL1]</a>You have one hypothesis but two objectives. I do not see a good fit between the objectives and the hypothesis. Why do you not mention the prescriber in your hypothesis?</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[BD2]</a>To determine if the prevalenceof optimal adherence within a prescriber’s patient pool is associated with the extent of age and/or sex concordance</p><p><br></p><p>[I;M NOT SURE IF THIS IS BETTER… JUST EXPERIMENTING WITH DIFFERENT WAYS OF SAYING IT…. PLEASE FEEL FREE TO IGNORE.I FIND THIS SO DIFFICULT TO WRITE.</p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[BD3]</a>What about…</p><p>t///</p>","children":[]},{"idx":"MYe3a53468-adc2-437d-9c2b-4e3008b38715","name":"Obj3 concord to adh individual level","custparents":[{"idx":"f40e6747-7b08-4f85-ba36-c087dd5671f9"}],"NodeDescription":"<p>///t</p><p><u>Objective 3: To determine if age/sex concordance with a prescriber increases the probability of achieving optimal adherence for individual patients.</u></p><p>Hypothesis: at individual patient level, age and /or sex concordant between a patient and a prescriber is associated with an increased prevalence of optimal medication adherence.</p><p>t///</p>"}],"NodeDescription":"<p><br></p><p><br></p>"},{"idx":"17d3933d-e38b-4155-9e46-f51b8ca3d1d8","name":"Study design","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"}],"NodeDescription":"<p><br></p>","children":[{"idx":"MY353630a8-5727-4d7e-ae85-7568c0811d45","name":"study design and population","custparents":[{"idx":"17d3933d-e38b-4155-9e46-f51b8ca3d1d8"}],"NodeDescription":"<p>///t</p><p><br></p><p><strong>Study design and population</strong></p><p>A retrospective cohort study was performed including individuals who initiated a new statin medication treatment between January 1, 2012 and December 31, 2017, and general practitioner (GP) physicians who prescribed for these individuals within a 365- day follow-up period on and after the initiation of statin.<a href=\"#_msocom_1\" target=\"_blank\">[EC1]</a><a href=\"#_msoanchor_1\" target=\"_blank\">[EC1]</a>As written here it sounds like you identified a cohort of GPs first, but based on the inclusion criteria section below, it seems like you identified the patients first and then found the physician cohort. Likely not a big deal, but might want to be consistent with how things are described to help the readers follow. </p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p>&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"MY1bb78808-851b-4e7c-964e-b29fba507a0e","name":"Source of data","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"},{"idx":"17d3933d-e38b-4155-9e46-f51b8ca3d1d8"}],"NodeDescription":"<p>///t</p><h3>Sources of data</h3><p>Data were extracted from health administrative <a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>databases in the province of Saskatchewan, Canada. These databases include a personal registry file for the provincial health plan<a href=\"#_msocom_2\" target=\"_blank\">[g2]</a>, a physician claims file, a physician registry file, a hospital discharge abstract database, and a prescription drug claims file. Descriptions of these databases, and variables used in this study can be found in Appendix 1<a href=\"#_msocom_3\" target=\"_blank\">[SY3]</a>.<sup>(23)</sup></p><p>“health administrative…” or “administrative health…”</p><p><span style=\"background-color: yellow;\">[SY]Changed</span></p><p>Suggest “ a person registry file for the provincial health plan, …”</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[SY3]</a>Like in project 1, remove the appendix 1</p><p>And put the descriptions back into the text</p><p>t///</p>"},{"idx":"MYc58ef518-64e1-4545-91c8-5811ed447088","name":"Patient and physician inclusion criteria","custparents":[{"idx":"17d3933d-e38b-4155-9e46-f51b8ca3d1d8"}],"NodeDescription":"<p>///t</p><h3>Patient and physician inclusion criteria</h3><p>Individuals included in this study were new statin users who were identified by the following criteria: 1) received <a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>a statin medication (DINs listed in Appendix 2) within the inclusion period; 2) did not receive statin medications within a washout-period of 1,825 days prior to the index date (i.e., the date of receiving the first dispensation of a statin medication within the inclusion period).</p><p>Several exclusion criteria were applied before assembling the final cohort, including: 1) missing age or sex information in the personal registration file; 2) less than 18 years old on the index date; 3) not continuously registered for healthcare service within the washout period, or a follow-up period of 365 days after and including the index date; 4) deceased, or termination of benefits during the follow-up period; 5) admitted to a long term care facility within the washout or follow-up period; 6) unable to obtain sufficient data for analysis (e.g., hospitalized in an out-of-province acute care facility during follow-up); 7) pregnant <a href=\"#_msocom_2\" target=\"_blank\">[EC2]</a>within <a href=\"#_msocom_3\" target=\"_blank\">[LL3]</a>365 days prior to the index date, or within the follow-up period (Appendix 9); 8) not receiving statin medications from any general practitioners (GPs, see Appendix 7) within the follow-up period.</p><p>A single prescriber (i.e., statin prescriber) was identified for each individual in the cohort using the following criteria: a) was the most frequently identified prescriber for an individual’s statin dispensations during the follow-up period; and b) was identified as a GP in the physician registration file<a href=\"#_msocom_4\" target=\"_blank\">[LL4]</a>. Prescribers were excluded if they had missing data on age, or sex, or were not connected to at least six individuals during the study<a href=\"#_msocom_5\" target=\"_blank\">[EC5]</a><a href=\"#_msocom_6\" target=\"_blank\">[g6]</a>. <a href=\"#_msocom_7\" target=\"_blank\">[LL7]</a></p><p>Keeping your tenses consistent… you are describing things that happened in the past.</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[EC2]</a>Like project 1, explain how this was determined.</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[LL3]</a>You call this a “washout period” above. Be sure to be consistent in your language. </p><p><span style=\"background-color: yellow;\">[SY] delete the run-in period. </span></p><p><span style=\"background-color: yellow;\">The run-in period is for determination of baseline characteristics. </span></p><p><span style=\"background-color: yellow;\">Here the 365 period prior to index is to exclude pregnant patients. It is kind of wash-out, but the previously defined 5-year washout period is not applicable (5years would be too long to exclude pregnant women). </span></p><p><span style=\"background-color: yellow;\">I do not want to create a second washout period, which would be confusing. So I simply deleted the ‘run-in period’. </span></p><p><br></p><p><a href=\"#_msoanchor_4\" target=\"_blank\">[LL4]</a>So, if an individual had a statin prescribed by a specialist, that specialist and his/her patients would also be excluded? Right? This needs to be clarified. </p><p><span style=\"background-color: yellow;\">[SY] changed, adding into the exclusion criteria</span></p><p><a href=\"#_msoanchor_5\" target=\"_blank\">[EC5]</a>Should have a paragraph describing the adherence measure up here since it’s the same for both objectives. Then you can discuss the time period adherence was measured over, which is missing in your discussion of adherence below. </p><p><span style=\"background-color: yellow;\">[SY] The definition of adherence moved here</span></p><p>agreed</p><p><a href=\"#_msoanchor_7\" target=\"_blank\">[LL7]</a>Doesn’t this also mean that you would exclude the individual patients if their prescriber was excluded? This must be addressed in the exclusion criteria above.</p><p><span style=\"background-color: yellow;\">[SY] added into the exclusion criteria</span></p><p>t///</p>"}]},{"idx":"MYb2f759b6-1c58-4114-871b-02262e68bb46","name":"Obj 1 describing % adh % concordance","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"}],"children":[{"idx":"MY29b57940-d1eb-4e6e-bbe9-58d13a7dd77c","name":"Adherence to statin medication","custparents":[{"idx":"MYb2f759b6-1c58-4114-871b-02262e68bb46"}],"NodeDescription":"<p>///t</p><h3>Prevalence of optimal adherence linked to specific prescribers</h3><p><a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>Statin adherence was calculated for each individual and was then used to calculate the prescriber-specific prevalence of optimal statin adherence. We measured individual adherence to statin medications using the proportion of days <a href=\"#_msocom_2\" target=\"_blank\">[LL2]</a>covered (PDC<a href=\"#_msocom_3\" target=\"_blank\">[BD3]</a>).<sup>(24)</sup> We included all dispensations of statin within the follow-up period (i.e., 365 days after and including the index date). Days supply was estimated for each dispensation using the number of pills dispensed<a href=\"#_msocom_4\" target=\"_blank\">[EC4]</a><a href=\"#_msocom_5\" target=\"_blank\">[5]</a><a href=\"#_msocom_6\" target=\"_blank\">[g6]</a>, assuming dosing of one pill per day. Overlapping supply days between refills were accumulated. Switching between different classes of statin medications was allowed. Hypothetically, if an individual received 30 pills of a statin medication on June 1, 2015, and received the following 30 pills of another class of statin medication on June 15, 2015, the individual was considered having 60 days supply (regardless of statin classes) between June 1, 2015, and July 30, 2015. PDC was calculated by the following formula:<a href=\"#_msocom_7\" target=\"_blank\">[BD7]</a></p><p>PDC = <a href=\"#_msocom_8\" target=\"_blank\">[g8]</a></p><p>Where number of days covered by the study medications = number of days supply truncated at the end of the follow-up period; Number of eligible days in the follow-up period = the 365 days after and including the index date but excluding days staying in a hospital for acute care. Optimal adherence was defined as PDC&gt;= 80%.<sup>(25)</sup> Details of the PDC method have been described in the literature<a href=\"#_msocom_9\" target=\"_blank\">[EC9]</a>,<sup>(24, 25)</sup></p><p><strong>The prescriber-specific prevalence of optimal adherence was calculated by summing, within each prescriber, the number of individuals with PDC&gt;=80% and dividing by the total number of individual patients for that prescriber. We then created a </strong>dichotomous variable, for use in our regression modeling, to differentiate prescribers with “higher” vs “lower” prevalence of individual patients with optimal adherence, based on whether they were above or below the median level of provider-specific optimal adherence in the study<a href=\"#_msocom_10\" target=\"_blank\">[BD10]</a>.<a href=\"#_msocom_11\" target=\"_blank\">[g11]</a></p><p><strong>A bit awkward - perhaps try “Statin adherence was calculated for each new statin user [or patient/subject] and this was then usedto calculate the prescriber-specific prevalence of optimal statin adherence.”</strong></p><p><strong>Then you could start the next sentence: “Individual patients’ adherence….”</strong></p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[LL2]</a>The calculation is percentage of days covered, not proportion</p><p><span style=\"background-color: olive;\">[SY] to be discussed</span></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[BD3]</a>All this could go up in the section above..</p><p><a href=\"#_msoanchor_4\" target=\"_blank\">[EC4]</a>Similar comment to project 1. Did you use the quantity or the actual days supply variable? If you used the days supply variable, then why the need to estimate it based on dosing…would you not just use what was reported as the days supply? </p><p><span style=\"background-color: yellow;\">[SY] wording changed. The days supply was calculated from # of tablets per dispensation, as there is no days supply variable in the database.</span></p><p><strong>Similar comment to project 1. Did you use the quantity or the actual days supply variable? If you used the days supply variable, then why the need to estimate it based on dosing…would you not just use what was reported as the days supply? </strong></p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><strong>This is a ‘technical term’ of the database - which essentially means “number of pills”.For greater clarity here for the reader who may not be entirely familiar with the drug database - you could just say “using the number of pills dispensed…” here.</strong></p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_7\" target=\"_blank\">[BD7]</a>Do you think this explanation is necessary?Did someone ask you to provide it?I am thinking it is not needed.</p><p>Since you talk about PDC as a percentage, you need to include multiplication of the right hand side of the equation by 100.</p><p><span style=\"background-color: yellow;\">[SY ]Changed</span></p><p><a href=\"#_msoanchor_9\" target=\"_blank\">[EC9]</a>See suggestions I provided for Project 1 for this part (how hospitalizations were identified, etc…)</p><p><span style=\"background-color: yellow;\">[SY ]Changed</span></p><p><a href=\"#_msoanchor_10\" target=\"_blank\">[BD10]</a>THIS COULD ALSO GO IN THE DESCRIPTION OF OBJECTIVE 1 IF YOU THINK THAT WOULD WORK.</p><p>This paragraph is not entirely clear and includes several ideas.Note: I put options for wording in [square brackets]. This example also shows the benefit of switching to “subject” terminology.</p><p><br></p><p>Suggest “The prescriber-specific prevalence [or proportion] of optimal adherence was calculated by summing, within each prescriber, the number of [patients/subjects] with PDC&gt;=80% and dividing by the total number of [patients/subjects] for that prescriber.We then created a dichotomous variable, for use in our regression modeling, to differentiate providers with “higher” vs “lower” prevalence of patients [subjects] with optimal adherence, based on whether they were above or below the median level of provider-specific optimal adherence in the study.</p><p><span style=\"background-color: yellow;\">[SY ]Changed</span></p><p><br></p><p><br></p><p>t///</p>"},{"idx":"MYd8b405c9-2447-452d-8db4-d0b8f650bde5","name":"age and sex concordance","custparents":[{"idx":"MYb2f759b6-1c58-4114-871b-02262e68bb46"}],"NodeDescription":"<p>///t</p><h3>Determining age/sex concordance between individuals and their statin prescriber</h3><p>For each individual, the GP prescriber’s age was determined on the index date (i.e., date of first statin dispensation). Individuals<a href=\"#_msocom_1\" target=\"_blank\">[g1]</a> were categorized as age concordant if their age at the index date fell within 5 years above or below the prescriber’s age. The proportion of age concordant individuals was calculated for each statin prescriber (using the number of age-concordant individuals <a href=\"#_msocom_2\" target=\"_blank\">[2]</a>divided by the total number of individuals for that prescriber). Sex concordance was also determined based on an exact match between the individual and the statin prescriber. The proportion of sex concordant individuals was calculated for each statin prescriber using the same method as in calculation of proportion of age concordant individuals.<a href=\"#_msocom_3\" target=\"_blank\">[3]</a></p><p>I do agree with Charity.I think if you early on define ‘subjects’s as patients who are new statin users then you can avoid a lot of awkward language later on… bc you can just say “subjects” and the reader will know that you mean patients newly prescribed statins.</p><p><br></p><p>You don’t need to keep using this term since you’ve described your patient population already.</p><p><span style=\"background-color: yellow;\">[SY] changed</span></p><p>You don’t need to keep using this term since you’ve described your patient population already.</p><p><span style=\"background-color: yellow;\">[SY] changed</span></p><p>t///</p>"},{"idx":"MYdbbf5d2b-f300-4bd9-8a3a-f3af27460444","name":"Description statistics","custparents":[{"idx":"MYb2f759b6-1c58-4114-871b-02262e68bb46"}],"NodeDescription":"<p>///t</p><p>[_Q] what discriptions</p><p><br></p><p>t///</p><p>[to do]</p>"}]},{"idx":"35a2f8f6-0aa6-478c-9526-fae5e0081c82","name":"Obj 2 doc level % concord to % adh","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"},{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"}],"NodeDescription":"<p>///t<p></p><strong>Objective 1: To examine the extent to which certain GP characteristics were associated with having a high proportion of adherent statin users.</strong><p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p>","children":[{"idx":"MYe8612163-c3b8-43cd-91b9-5ae946acbe6f","name":"Statistical analysis (logistic regression)","custparents":[{"idx":"35a2f8f6-0aa6-478c-9526-fae5e0081c82"}],"NodeDescription":"<p>///t</p><p>t///</p>","children":[]}]},{"idx":"MY18912ac4-4c8e-4874-88cb-88a73a464d9a","name":"Obj 3 individual level concord to adh","custparents":[{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"},{"idx":"MYed04c7f6-ab7f-4a4d-8e6d-33dbfc9f81b3"}],"NodeDescription":"<p>///t</p><p>Objective 2: To investigate the extent to which age or sex concordance between a GP and a patient is associated with the patient's adherence to statin medications</p><p><br></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Age, sex, service year, fee for service time,etc</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Logistic regression model</li></ol><p><br></p><p>t///</p>","children":[{"idx":"MYf971bf44-212d-4d86-a567-79d57d7176b2","name":"Statistical analysis","custparents":[{"idx":"MY18912ac4-4c8e-4874-88cb-88a73a464d9a"}],"NodeDescription":"<p>///t</p><p>Logistic regression models were built to test the effect of age and sex concordance on the probability of medication adherence for individual patients. The primary independent variables were the age, and sex concordance measures <a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>of each individual. The dependent variable was the occurrence of optimal medication adherence (i.e., yes or no) of individuals after the one-year follow-up period. First, two univariate models were tested respectively, one using age concordance as the independent variable, the other using sex concordance<a href=\"#_msocom_2\" target=\"_blank\">[LL2]</a> as the independent variable. Odds ratio of age concordance, and sex concordance were obtained from the univariate models. </p><p>Next<a href=\"#_msocom_3\" target=\"_blank\">[g3]</a>, a multivariable model was built to test the effect of age and sex concordance adjusted by prescriber-related and patient-related covariates. The generalized estimating equations (GEE) method was used to account for the clustering effect of individual patients within prescribers.<sup>(27)</sup> The identification numbers of the<a href=\"#_msocom_4\" target=\"_blank\">[BD4]</a><a href=\"#_msocom_5\" target=\"_blank\">[BD5]</a>prescribers were used as the repeat term in the GEE models.<a href=\"#_msocom_6\" target=\"_blank\">[g6]</a> The prescriber-related covariates (Appendix 3) included prescribers’ experience (i.e., age, years since graduation, country of graduation), physician salary model (i.e., fee-for-service or non-fee-for-service), and status of comprehensive continuity of care (i.e., the connected prescriber as the usual care provider, and providing complete medical examination as well<a href=\"#_msocom_7\" target=\"_blank\">[BD7]</a>). The literature suggests a five-dimension framework of factors that are potentially associated with medication adherence: patient-related, socioeconomic-related, disease-related, treatment related, and healthcare system-related factors.<sup>(1)</sup> Based on this framework, patient-related covariates (see Appendix 8) were included in the adjusted model. Multicollinearity among the covariates was examined by the variance inflation factor (VIF) obtained from a regression model<a href=\"#_msocom_8\" target=\"_blank\">[LL8]</a>. For covariates with a VIF greater than 2.5, a decision is made to keep the covariate that was more relevant to the analysis<a href=\"#_msocom_9\" target=\"_blank\">[BD9]</a>, using the same principles as in analysis for objective one. Two-way interactions between the primary independent <a href=\"#_msocom_10\" target=\"_blank\">[LL10]</a>variable and the covariates were examined. Interactions with a p value &lt; 0.05 were retained in the model. GEE models using different types of working covariance matrix <a href=\"#_msocom_11\" target=\"_blank\">[LL11]</a>were compared and the one with the smallest quasi-Akaike's information criterion (QAIC) statistic was selected as the final model. Odds ratio (95% CI) of age concordance and sex concordance were obtained from the robust estimators of the final model.</p><p>A bit confusing… here the language used describes a single independent variable -as a single measure of age/sex concordance - whereas above you described two separate independent variables age concordance and sex concordance.If you still intend to be referring to those two variables (which I think you do) then you need to pluralize “variables” and “measures” in this sentence.</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[LL2]</a>Explain what you mean. You fit one model with age and one model with sex – right? </p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p>Inserted a a paragraph break here.</p><p><a href=\"#_msoanchor_4\" target=\"_blank\">[BD4]</a></p><p><a href=\"#_msoanchor_5\" target=\"_blank\">[BD5]</a>I took out “statin” because I don’t’ think we referred to them that way previously..I think they are just “prescribers”…right?</p><p>You had this stuff about GEE at the end like an “add on” but in fact you would have done GEE models from the start - so I think it best incorporated here.The rest of the paragraph about GEE I put at the bottom of this para.</p><p><span style=\"background-color: yellow;\">[SY] Yep, thanks</span></p><p><a href=\"#_msoanchor_7\" target=\"_blank\">[BD7]</a>It would be nice if our first paper was published before we submit this so we could cite it here.Otherwise, we may have to clarify this description.</p><p><a href=\"#_msoanchor_8\" target=\"_blank\">[LL8]</a>Same comment as above. </p><p><span style=\"background-color: yellow;\">[SY] changed</span></p><p><a href=\"#_msoanchor_9\" target=\"_blank\">[BD9]</a>To be made more specific</p><p><a href=\"#_msoanchor_10\" target=\"_blank\">[LL10]</a>Not sue what this phrase means. </p><p><span style=\"background-color: yellow;\">[SY] changed, also made change in the previous paragraph. “The primary independent variables were the age, and sex concordance measuresof each individual”</span></p><p><a href=\"#_msoanchor_11\" target=\"_blank\">[LL11]</a>Not clear what you mean. Explain</p><p><span style=\"background-color: yellow;\">[SY] changed to ‘working covariatnce matrix”</span></p><p>t///</p>","children":[{"idx":"MY7c23f0a0-f77c-4dc9-95bd-60b02f1b9ce8","name":"univariate","custparents":[{"idx":"MYf971bf44-212d-4d86-a567-79d57d7176b2"}],"NodeDescription":"<p>///t</p><p>Logistic regression models were built to test the effect of age and sex concordance on the probability of medication adherence for individual patients. The primary independent variables were the age, and sex concordance measures <a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>of each individual. The dependent variable was the occurrence of optimal medication adherence (i.e., yes or no) of individuals after the one-year follow-up period. First, two univariate models were tested respectively, one using age concordance as the independent variable, the other using sex concordance<a href=\"#_msocom_2\" target=\"_blank\">[LL2]</a> as the independent variable. Odds ratio of age concordance, and sex concordance were obtained from the univariate models. </p><p>A bit confusing… here the language used describes a single independent variable -as a single measure of age/sex concordance - whereas above you described two separate independent variables age concordance and sex concordance.If you still intend to be referring to those two variables (which I think you do) then you need to pluralize “variables” and “measures” in this sentence.</p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[LL2]</a>Explain what you mean. You fit one model with age and one model with sex – right? </p><p><span style=\"background-color: yellow;\">[SY] Changed</span></p><p>t///</p>"},{"idx":"MYf679c5c4-91e5-4605-8faf-d1a954b3d118","name":"Multivariate","custparents":[{"idx":"MYf971bf44-212d-4d86-a567-79d57d7176b2"}],"NodeDescription":"<p>///t</p><p>Next<a href=\"#_msocom_1\" target=\"_blank\">[g1]</a>, a multivariable model was built to test the effect of age and sex concordance adjusted by prescriber-related and patient-related covariates. The generalized estimating equations (GEE) method was used to account for the clustering effect of individual patients within prescribers.<sup>(27)</sup> The identification numbers of the<a href=\"#_msocom_2\" target=\"_blank\">[BD2]</a><a href=\"#_msocom_3\" target=\"_blank\">[BD3]</a>prescribers were used as the repeat term in the GEE models.<a href=\"#_msocom_4\" target=\"_blank\">[g4]</a> The prescriber-related covariates (Appendix 3) included prescribers’ experience (i.e., age, years since graduation, country of graduation), physician salary model (i.e., fee-for-service or non-fee-for-service), and status of comprehensive continuity of care (i.e., the connected prescriber as the usual care provider, and providing complete medical examination as well<a href=\"#_msocom_5\" target=\"_blank\">[BD5]</a>). The literature suggests a five-dimension framework of factors that are potentially associated with medication adherence: patient-related, socioeconomic-related, disease-related, treatment related, and healthcare system-related factors.<sup>(1)</sup> Based on this framework, patient-related covariates (see Appendix 8) were included in the adjusted model. Multicollinearity among the covariates was examined by the variance inflation factor (VIF) obtained from a regression model<a href=\"#_msocom_6\" target=\"_blank\">[LL6]</a>. For covariates with a VIF greater than 2.5, a decision is made to keep the covariate that was more relevant to the analysis<a href=\"#_msocom_7\" target=\"_blank\">[BD7]</a>, using the same principles as in analysis for objective one. Two-way interactions between the primary independent <a href=\"#_msocom_8\" target=\"_blank\">[LL8]</a>variable and the covariates were examined. Interactions with a p value &lt; 0.05 were retained in the model. GEE models using different types of working covariance matrix <a href=\"#_msocom_9\" target=\"_blank\">[LL9]</a>were compared and the one with the smallest quasi-Akaike's information criterion (QAIC) statistic was selected as the final model. Odds ratio (95% CI) of age concordance and sex concordance were obtained from the robust estimators of the final model.</p><p>Inserted a a paragraph break here.</p><p><a href=\"#_msoanchor_2\" target=\"_blank\">[BD2]</a></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[BD3]</a>I took out “statin” because I don’t’ think we referred to them that way previously..I think they are just “prescribers”…right?</p><p>You had this stuff about GEE at the end like an “add on” but in fact you would have done GEE models from the start - so I think it best incorporated here.The rest of the paragraph about GEE I put at the bottom of this para.</p><p><span style=\"background-color: yellow;\">[SY] Yep, thanks</span></p><p><a href=\"#_msoanchor_5\" target=\"_blank\">[BD5]</a>It would be nice if our first paper was published before we submit this so we could cite it here.Otherwise, we may have to clarify this description.</p><p><a href=\"#_msoanchor_6\" target=\"_blank\">[LL6]</a>Same comment as above. </p><p><span style=\"background-color: yellow;\">[SY] changed</span></p><p><a href=\"#_msoanchor_7\" target=\"_blank\">[BD7]</a>To be made more specific</p><p><a href=\"#_msoanchor_8\" target=\"_blank\">[LL8]</a>Not sue what this phrase means. </p><p><span style=\"background-color: yellow;\">[SY] changed, also made change in the previous paragraph. “The primary independent variables were the age, and sex concordance measuresof each individual”</span></p><p><a href=\"#_msoanchor_9\" target=\"_blank\">[LL9]</a>Not clear what you mean. Explain</p><p><span style=\"background-color: yellow;\">[SY] changed to ‘working covariatnce matrix”</span></p><p>t///</p>"}]},{"idx":"MY0d6d8684-e02a-43a6-9ce2-6235d2c694a4","name":"sensitivity analyses","custparents":[{"idx":"MY18912ac4-4c8e-4874-88cb-88a73a464d9a"}],"children":[{"idx":"MY5b57d4b1-24e0-4b48-9037-811227fea197","name":"10 years concordance","custparents":[{"idx":"MY0d6d8684-e02a-43a6-9ce2-6235d2c694a4"},{"idx":"MY0d6d8684-e02a-43a6-9ce2-6235d2c694a4"}],"NodeDescription":"<p>///t</p><p>The analyses were repeated for alternative measures of concordance. First, age concordance was measured by a broader range of years (i.e., if the age difference between an individual and his/her statin prescriber was within ± 10 years, age concordance =1; otherwise age concordance =0).</p><p>t///</p>"},{"idx":"MY4e752de1-c201-4564-9a6d-9bebc2ac39ef","name":"4 levels of concordance instead of 2","custparents":[{"idx":"MY0d6d8684-e02a-43a6-9ce2-6235d2c694a4"},{"idx":"MY0d6d8684-e02a-43a6-9ce2-6235d2c694a4"}],"NodeDescription":"<p>///t</p><p>Second, age concordance <a href=\"#_msocom_1\" target=\"_blank\">[SY1]</a>were measured by four subgroups<a href=\"#_msocom_2\" target=\"_blank\">[g2]</a>: 1) the statin prescriber is younger than the new statin user by more than five years; 2) the statin prescriber is younger by up to five years; 3) the statin prescriber is of the same age, or older by up to five years; and 4) the statin prescriber is older by more than five years. Sex concordance <a href=\"#_msocom_3\" target=\"_blank\">[SY3]</a>was also measured by four groups: 1) the statin prescriber and the new statin user were both females; 2) the statin prescriber and the new statin user were both males; 3) the statin prescriber was a female, and the new statin user was a male; 4) the statin prescriber was a male, and the new statin user was a female<a href=\"#_msocom_4\" target=\"_blank\">[EC4]</a>. <a href=\"#_msoanchor_1\" target=\"_blank\">[SY1]</a></p><p><span style=\"background-color: yellow;\">The original word ‘age/sex’ concordance was misleading. </span></p><p><span style=\"background-color: yellow;\">Age concordance is measured separately from sex concordance.</span></p><p><span style=\"background-color: yellow;\">This part is to define 4 groups on age concordance</span></p><p>I think you mean just “age concordance” here not age/sex.</p><p><span style=\"background-color: yellow;\">[SY]Changed</span></p><p><a href=\"#_msoanchor_3\" target=\"_blank\">[SY3]</a><span style=\"background-color: yellow;\">This part is to define sex concordance in 4 groups</span></p><p><a href=\"#_msoanchor_4\" target=\"_blank\">[EC4]</a>Maybe you’re measuring this already and I just missed it, but what about if the age AND sex are concordant, the sex is concordant but not age, the age is concordant but not sex, neither are concordant? </p><p><span style=\"background-color: yellow;\">[SY]Age concordance and sex concordance are measured and analyzed separately.</span></p><p><br></p><p>t///</p>"}]}]}]},{"idx":"MYed5cb1c1-6a9f-49e5-ad4a-d8c887d3b29e","name":"a previous version","custparents":[{"idx":"9bb6cfc6-42f3-4adf-a339-1f68b045c915"}],"children":[],"_substeps":{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98","name":"substeps","custparents":[{"idx":"9bb6cfc6-42f3-4adf-a339-1f68b045c915"},{"idx":"MYed5cb1c1-6a9f-49e5-ad4a-d8c887d3b29e"}],"children":[{"idx":"96000e4b-6979-40b0-bb7e-3d89eab84705","name":"Idea","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"NodeDescription":"<ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Have all the GPs who were USPs of new statin patients recruited in project one.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Examine the GP characteristics associated with USPs having high percentage of patients who were adherent to statin medications.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Examine the effect of age/sex concordance to individual patient adherence </li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span>adjusted by USP characteristics, </li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span>+ adjusted by patient-USP pair specific factor (like age/sex concordance, UPC index, compCOC)</li><li data-list=\"ordered\" class=\"ql-indent-1\"><span class=\"ql-ui\" contenteditable=\"false\"></span>+ adding patient characteristics</li></ol><p><br></p><p><br></p>"},{"idx":"12fd4c5b-f529-487b-96d1-83e017754173","name":"Hypotheses and Study Objectives","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"children":[{"idx":"c4dcfeaa-6391-409e-aacc-d8af7b03ea65","name":"Obj1 USP vars to HiPCTAdhPts","custparents":[{"idx":"12fd4c5b-f529-487b-96d1-83e017754173"},{"idx":"12fd4c5b-f529-487b-96d1-83e017754173"}],"NodeDescription":"<p>///t<p></p><br><p></p>Question: Do certain GPs performed better in helping their patients be adherent?<p></p><strong>Research question</strong>: To what extent were certain GP characteristics associated with having a high proportion of adherent statin users.<p></p><strong>Objective 1:</strong>To examine the extent to which certain GP characteristics were associated with having a high proportion of adherent statin users.<p></p><strong>Hypothesis:</strong> Some GPs out performed the others in helping their patients adherent to statin medications.<p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p>At USP level, aggregated/average values as USP characteristics (gradyear, age, sex)</p><p>Logistic regression models</p><p><br></p>"},{"idx":"0b388ce3-df8c-43de-9c4f-cd13f7d3fcb5","name":"Obj2 Age/sex concordance to adh","custparents":[{"idx":"12fd4c5b-f529-487b-96d1-83e017754173"},{"idx":"12fd4c5b-f529-487b-96d1-83e017754173"}],"NodeDescription":"<p>///t<p></p><br><p></p><strong>Research question:</strong> To what extent was age/sex concordance (between GPs and their patients) associated with patients' adherence to statin medications.<p></p><strong>Objective 2:</strong> To investigate the extent to which <span style=\"background-color: rgb(255, 255, 0);\">age or sex concordance</span> (between a statin patient and his/her USP) were associated with the patient's adherence to statin medications<p></p><strong>Hypothesis:</strong> Age concordance between a GP and a patient was associated with patients' adherence. Sex concordance between a GP and a patient was associated with patients' adherence.<p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p><p>USP level char,</p><p>Patient specific char 1) of a pair between a USP and a statin new user; 2) patient individual characteristics</p><p><br></p><p>[_Q] How to define age / sex concordance [whose younger? what side of sex concordance (both males, both females)].</p>","children":[]}],"NodeDescription":"<p><br></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>the proportion of adherent pts diff among GPs -&gt; there are good /bad GPs</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>the distribution of % of UCP, USP, CMEP, CompCOC differs -&gt; 1) UCP, USP, CMEP, ComCOC are different 2) the UCP % differs for good/bad GPs, same for the % of USP, CMEP.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Age sex concordance in individual patient-GP relationship</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Physician char, patient char, random effect, % explained by between/within cluster factors, and cluster effects.</li></ol><p><br></p>"},{"idx":"04779785-d692-4da3-9439-4ec96e37826b","name":"Source of data","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"NodeDescription":"<p>///t<p></p><strong>Source of data</strong><p></p>Data were extracted from administrative databases in the province of Saskatchewan, Canada. These databases include a patient registration file, a physician service claims file, a the physician registration file, a hospital discharge abstract database, and a prescription drug claims file. Descriptions of these databases, and variables used in this study can be found in Appendix 1.(28)<p></p>&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"166c7aa3-b54d-42f4-9a1f-4d5fd3a504f9","name":"Study design","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"NodeDescription":"<p><br></p>","children":[{"idx":"6115cee4-b8e8-44ca-adba-dd319d631f24","name":"study design and population","custparents":[{"idx":"166c7aa3-b54d-42f4-9a1f-4d5fd3a504f9"}],"NodeDescription":"<p>///t<p></p><strong>Study design and population</strong><p></p>A retrospective cohort study was performed including GPs in Saskatchewan who were identified as usual prescribers of new statin users between January 1, 2012 to December 31, 2017 (i.e., the inclusion period)<p></p>&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"852d0e83-d291-48e9-b1e3-46e924a88999","name":"New users of statin medications","custparents":[{"idx":"166c7aa3-b54d-42f4-9a1f-4d5fd3a504f9"}],"NodeDescription":"<p>///t</p><p>Patients participated in this study were new statin users who were identified by the following criteria:1) receiving a statin medication (DINs listed in Appendix xx) within the inclusion period; 2) Not receiving statin medications within a washout-period of 1,825 days prior to the index date (i.e., the date of receiving the first dispensation of a statin medication within the inclusion period). </p><p>Several exclusion criteria were applied before assembling the final patient pool, including: 1) missing age or sex information in the patient registration file; 2) less than 18 years old on the cohort entry date; 3) not continuously registered for healthcare service within the washout period, or a follow-up period of 365 days on and after the index date; 4) deceased, or termination of benefits during the follow-up period; 5) admitted to a long term care facility within the washout or follow-up period; 6) unable to obtain sufficient data for analysis (e.g., stayed in an out-province facility for acute care during follow-up); 7) pregnant within the run-in period of 365 days prior to the index date, or within the follow-up period;</p><p>t///</p>"},{"idx":"993fccd7-f407-4021-9cd2-8aa750d26f33","name":"USPs of the new users","custparents":[{"idx":"166c7aa3-b54d-42f4-9a1f-4d5fd3a504f9"}],"NodeDescription":"<p>///t</p><p>Physicians participated in this study was usual statin prescribers (USPs) defined by the following criteria: a) was the prescriber who were most frequently identified from statin dispensation claims of a study patient within the follow-up period; b) was identified as a GP in the physician registration file (Appendix 5). Certain GPs were unqualified for the study and excluded, if: 1) missing data on age, sex; 2) having less than 6 statin new users through the entire inclusion period.</p><p>t///</p>"},{"idx":"dc9e96ec-4c9d-4579-a197-f8f02474822b","name":"Pool of new users per USP","custparents":[{"idx":"166c7aa3-b54d-42f4-9a1f-4d5fd3a504f9"}],"NodeDescription":"<p>///t</p><p>The statin new users were grouped by their USPs. In case that multiple USPs were identified, the study patient was randomly assigned to one of the USPs. </p><p>t///</p>"}]},{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388","name":"Obj 1","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"NodeDescription":"<p>///t<p></p><strong>Objective 1: To examine the extent to which certain GP characteristics were associated with having a high proportion of adherent statin users.</strong><p></p>&nbsp;&nbsp;&nbsp;&nbsp;t///</p>","children":[{"idx":"aba654b3-e2d7-43c1-84a9-58d9efebe2d3","name":"Hypotheses","custparents":[{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"}],"NodeDescription":"<p>///t</p><p><strong>Hypothesis</strong></p><p>We hypothesized that certain GPs would have a higher proportion of patients adherent to statin medications than others. We also hypothesized that certain GP characteristics (e.g., age, sex, workload, and prescribing habit) were associated with having higher proportion of adherent patients.&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"97c17138-02eb-461f-b3e0-9fa81fb68e3a","name":"USP Characters","custparents":[{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"}],"children":[{"idx":"5c48b197-010c-4194-8503-92b28eec8e76","name":"From the Physician registry file","custparents":[{"idx":"97c17138-02eb-461f-b3e0-9fa81fb68e3a"}],"NodeDescription":"<p>///t</p><p><br></p><p><strong>USPs' demographic and education characteristics</strong></p><p>USPs' demographic and education background were obtained from the physician registry file. Data included sex, year of birth, year of graduation from a medical school, and place of graduation. With the data, we determined each USP's age, and years since graduation on the index date of a study patient. We then calculated the mean age, and the mean years since graduation of a USP among all his/her patients.</p><p>&nbsp;&nbsp;&nbsp;t///</p>"},{"idx":"28c14dbb-9fbf-40d2-9edd-2f264267cdd4","name":"From the MSB file","custparents":[{"idx":"97c17138-02eb-461f-b3e0-9fa81fb68e3a"}],"NodeDescription":"<p>///t</p><p><strong>USPs' practice-related characteristics</strong></p><p>Practice-related characteristics were obtained from the physician service claim file.&nbsp;These characteristics were used to estimate a USP's work load. To obtain such data, a USP-user observation period was defined specifically for each USP and a study patient (i.e., a new statin user), from 365 days prior to the index date of the study patient through 365 days on and after the index date. We counted all visits, and all patients of the study USP with each observation period. We then calculated the mean number of visits, and the mean number of patients of all observation periods of each USP. The derived figures were used to estimate each USP's work load.</p><p>t///</p>"},{"idx":"232aff18-2edb-4229-8ed0-3a9bf40b0390","name":"From the Rx file","custparents":[{"idx":"97c17138-02eb-461f-b3e0-9fa81fb68e3a"}],"NodeDescription":"<p>///t</p><p><strong>USPs' prescription related characteristics</strong></p><p>Prescribing related characteristics were obtained from the pharmacy claim file.&nbsp;The data were used to estimate a USP's intensity of prescription, and familiarity of statin medications. We counted prescriptions of all medications, and prescriptions of statin medications within each USP-user observation period. We then calculated the mean number of prescriptions of statin medications, and the mean number of all medications of all observation periods of a USP. We also calculated the percentage of statin prescriptions over all prescriptions for all observation periods of a USP. The derived figures were used to estimate prescription intensity, and familiarity of statin medication.</p><p>t///</p>"}],"NodeDescription":"<p>///t<p></p><strong>Characteristics of the study USPs</strong><p></p>We assessed USP characteristics, including demographic information, education background, practice-related factors, and prescribing related factors. <p></p>&nbsp;&nbsp;t///</p>"},{"idx":"9f0cc871-edf1-4e9e-a391-3338abc92b14","name":"Adherence to statin medication","custparents":[{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"},{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"},{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"},{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"},{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"}],"NodeDescription":"<p>///t</p><p><strong>Percentage of adherent patients</strong></p><p>We investigated percentage of adherent patients of each USP.</p><p><br></p><p>First, we measured medication adherence to statin medications of each study patient.(33) The calculation was based on a method called proportion of days covered (PDC).(33) We included all dispensation claims of statin within the follow-up period (i.e., 365 days on or after the index date) for a study patient. Days supply was estimated for each dispensation, assuming dosing of one tablet per day. Overlapping supply days between refills were truncated. PDC was calculated by the following formula:</p><p>PDC = (Number of days covered by the study medications)/(Number of eligible days in the follow-up period),</p><p>Where number of days covered by the study medications = number of days supply truncated at the end of the follow-up period; Number of eligible days in the follow-up period = the 365 days on or after the cohort entry date, i.e., following the date of the earliest antidepressant dispensation excluding days staying in hospitals for acute care. Optimal adherence was defined as PDC&gt;= 80%.(34) Details of the PDC method have been described in the literature.(33, 34)</p><p><br></p><p>Next, we counted the number of study patients who achieving optimal adherence within each USP group. We then calculated the percentage of adherent patients over all study patients for each USP. We assessed the mean and median percentage of adherent users of all USPs. The median percentage was used as a threshold to categorize the USPs. A dichotomous term was created to indicate a USP's impact on adherence. USPs with a percentage of adherent users equal to or higher than the median were marked as having more adherent users (i.e., the 'More' group). USPs with a percentage of adherent users lower than the median were marked as having fewer adherent users (i.e., the 'Fewer' group).</p><p><br></p><p>t///</p>"},{"idx":"2ec90ae0-5ef3-4172-b9fb-475da16837e2","name":"Statistical analysis (logistic regression)","custparents":[{"idx":"ca2748e9-0f44-4f8b-9d8d-e12ac2999388"}],"NodeDescription":"<p>///t</p><p>Logistic regression models were built to test the effect of the interested USP characteristics. The dependent variable was the dichotomous mark of USPs' impact on adherence (i.e., 'More' or 'Fewer'). The independent variables included sex, country of medical training, mean age, mean years since graduation, mean number of patients, mean number of visits, mean number of prescription of statin medications, mean number of prescription of all medications, and percentage of statin prescriptions.</p><p>First, univariate models were tested for each independent variable. Those with a p-value higher than 0.20 were retained for the follow analysis. Next, multicollinearity among the retained independent variables was examined by the variance inflation factor (VIF) obtained from a regression model. Variables with a VIF greater than 2.5 were excluded. The remaining variables were tested by a multi-variable model. Odds ratio of each variable from the multi-variable models were reported.</p><p>t///</p>"}]},{"idx":"bda26493-16d2-44f6-807a-429661daa882","name":"Obj 2","custparents":[{"idx":"e2f7cc38-e9f7-460d-a9d6-db87fad87f98"}],"NodeDescription":"<p>///t</p><p>Objective 2: To investigate the extent to which age or sex concordance between a GP and a patient is associated with the patient's adherence to statin medications</p><p><br></p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Age, sex, service year, fee for service time,etc</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Logistic regression model</li></ol><p><br></p><p>t///</p>","children":[{"idx":"a0a1547e-a77b-4930-ab77-934c3aef7800","name":"Hypothesis and age/sex concordance","custparents":[{"idx":"bda26493-16d2-44f6-807a-429661daa882"}],"NodeDescription":"<p>///t</p><p><strong>Age and sex concordance</strong></p><p>We hypothesized that age concordance between a USP and a study patient were associated with the patients' adherence. To test the hypothesis, we categorized the study patients into four groups based on the difference of age between a USP, and a study patient: 1) the USP is younger than the study patient for more than 5 years; 2) the USP is younger for up to 5 years; 3) the USP is of the same age, or older for up to 5 years; and 4) the USP is older for more than 5 years. We also hypothesized that sex concordance between a USP and a study patient were associated with the patients' adherence. To test the hypothesis, we categorized the study patients into four groups based on the difference of sex between a USP, and a study patient: 1) the USP and the study patient were both females; 2) the USP and the study patient were both males; 3) the USP was a female, and the study patient was a male; 4) the USP was a male, and the study patient was a female. </p><p><br></p><p>t///</p>"},{"idx":"33387149-baf1-4cee-9e8d-2f847b9a435e","name":"GP related covariates","custparents":[{"idx":"bda26493-16d2-44f6-807a-429661daa882"}],"NodeDescription":"<p>///t</p><p><strong>USP-related covariates</strong></p><p>The USP characteristics identified in objective one were used as covariates to adjust the effect of age/sex concordance on patients' medication adherence. Among these covariates, a USP's sex, and country of medical training were fixed for all patients of the same USP. The other covariates identified in objective one were measured specifically for each USP-user observation period (i.e., age/years since graduation on the index date , number of visits/visiting patients, number of prescriptions of all/statin medications, and percentage of statin prescriptions over all prescriptions). In addition, more USP related covariates were measured, including: 1) the remuneration type of the USP [i.e., fee-for-service (FFS) or non-fee-for-service (NFFS)] within each USP-user observation period (i.e., from 365 days prior to the index date through 365 days on and after the index date); 2) whether or not providing comprehensive continuity of care(i.e., the USP being the most frequently visited GP of the study patient, and providing complete medical examination for the patient).</p><p>t///</p><p><br></p>"},{"idx":"d0a177a6-e36b-4adc-9116-bff2aecaa199","name":"Patient related covariates","custparents":[{"idx":"bda26493-16d2-44f6-807a-429661daa882"}],"NodeDescription":"<p>///t</p><p><strong>Patient-related covariates</strong></p><p>The literature suggests a five-dimension framework of factors that are potentially associated with medication adherence: patient-related, socioeconomic-related, disease-related, treatment related, and healthcare system-related factors.(16) Based on this framework, patient-related covariates (Appendix 10) were measured to adjust the effect on medication adherence by age/sex concordance.</p><p>//tt</p>"},{"idx":"ee7042db-35ce-4260-b33c-ab158be8ee49","name":"Statistical analysis","custparents":[{"idx":"bda26493-16d2-44f6-807a-429661daa882"}],"NodeDescription":"<p>///t</p><p>Logistic regression models were built to test the effect of age and sex concordance on medication adherence. The dependent variable was the status of optimal medication adherence (i.e., yes or no) of individual study patients, as measured in objective one. The primary independent variable was age concordance, or sex concordance respectively. First, univariate logistic regression models were tested for each primary independent variable. Odds ratio of age concordance and sex concordance were obtained from the univariate models. Next, multivariable models were built to test the effect of age and sex concordance in the same multivariable model adjusted by aforementioned USP-related, and patient-related covariates. Multicollinearity among the independent variables was examined by the variance inflation factor (VIF) obtained from a regression model. Variables with a VIF greater than 2.5 were excluded. Two-way interactions between the primary interested variable and the covariates were examined. Interactions with a p value &lt; 0.05 were retained in the model. As a USP appeared for multiple times, the data was clustered. The generalized estimating equations (GEE) method was used to account for the cluster effect. The IDs of the USPs were used as the repeat term in the GEE model. The GEE models were compared using different types of variance-covariance matrix. The one with the smallest statistic of quarsi Akaike information criterion (QAIC) was selected to obtain odds ratio of age concordance and sex concordance the robust estimating results. </p><p>t///</p>"}]}]}}]}],"NodeDescription":"<p>///t</p><p>based on</p><p>f:\\personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Submissions to committee\\Proposals\\PhD2 The impact of age and sex concordance on medication adherence_20200415.docx</p><p><br></p><p>t///</p>"}},{"idx":"MYe43680cb-d907-4acc-960c-44d7e20b15d8","name":"Analysis","custparents":[{"idx":"edd76f6a-da61-4d5b-939a-6f6cb3f079db"}],"children":[{"idx":"MY63762c5b-22b2-4ae1-b67d-e52a129f2dc5","name":"glimmix","custparents":[{"idx":"MYe43680cb-d907-4acc-960c-44d7e20b15d8"}],"NodeDescription":"<p>///t</p><p><br></p><p>F:\\Personal\\Library\\Learning\\Statistics\\MultiLevel Random mixed effect\\Glimmix Mix EG43.egp</p><p>F:\\Personal\\Dropbox\\Project\\SDP Impact\\Sharpen the saw\\Skovgaard's Lecture and examples\\Glimmix MOR example\\MOR example.egp</p><p>F:\\Personal\\Library\\Learning\\Statistics\\MultiLevel Random mixed effect</p><p><br></p><p>t///</p><p>[to do][_Q]</p>"}],"NodeDescription":"<p>///t</p><p>1. Have all the GPs new statin/antidepressant patients within the inclusion period of 1 year.</p><p>2. Exam the GP’s % of patients achieving optimal adherence. Categorize the GPs as ‘Good’ (with &gt; median % of patients achieving good adherence), or bad (with &lt; median % of patietns achieving good adherence</p><p>3. Exam the GP characteristics (Not a clustered model) (all at GP level) a. demo related, b. practice related</p><p><strong>Maybe skip this step 3, as it is so prone to bias...(GP could have different patients, and GP's characteristics could change for diff time periods ( 2 years around the entry date)</strong></p><p>4. Exam the likelihood of individual patient adherence, adding patient covariates, patient-GP pair specific (like age/sex concordance, and COC status, CMEP, prescribing, compCOC), repeated model, the cluster effects, etc.</p><p>t///</p><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/SqBp6l4jcII?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/n2glrr49i-M?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/D50f_cMwyq4?showinfo=0\" data-blot-formatter-unclickable-bound=\"true\"></iframe><p><br></p>","_substeps":{"idx":"MY5fd7a565-a7d3-42f7-8c5d-87183473461a","name":"substeps","custparents":[{"idx":"MYe43680cb-d907-4acc-960c-44d7e20b15d8"}],"children":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248","name":"Pilot 2","custparents":[{"idx":"MY5fd7a565-a7d3-42f7-8c5d-87183473461a"}],"children":[{"idx":"MY4fa9504c-91d6-41b0-80c4-3733f4f0e598","name":"USP and Patient cohort","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}],"NodeDescription":"<p>///t</p><p>t///</p><p>USP and new statin users entered in 2016 and 2017 (USP having 6+ patients)</p><table><tbody><tr><td data-row=\"row-gonl\"><br></td><td data-row=\"row-gonl\">USPs</td><td data-row=\"row-gonl\">New statin users</td></tr><tr><td data-row=\"row-l3l7\">ZXXA1</td><td data-row=\"row-l3l7\">1345</td><td data-row=\"row-l3l7\">18932</td></tr><tr><td data-row=\"row-hm3l\">ZXXA (excluding USPs with &lt; 10 statin new users)</td><td data-row=\"row-hm3l\">603</td><td data-row=\"row-hm3l\">15960</td></tr><tr><td data-row=\"row-9k0u\">ZXXA (excluding USPs with &lt; 6 statin new users)</td><td data-row=\"row-9k0u\">828</td><td data-row=\"row-9k0u\">17643</td></tr></tbody></table><p><br></p>"},{"idx":"MY03b2cb13-c4cc-48ad-9464-98f5515a3a17","name":"USP characteristics","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}],"children":[{"idx":"MY7c5f29f5-93ea-49f1-b43b-41907a83cde8","name":"From Mobility file","custparents":[{"idx":"MY03b2cb13-c4cc-48ad-9464-98f5515a3a17"}]},{"idx":"MY0f4fa5c3-8d9e-4cb2-9ec2-ef58125f6055","name":"From MSB","custparents":[{"idx":"MY03b2cb13-c4cc-48ad-9464-98f5515a3a17"}]},{"idx":"MY71a86c39-6c5d-4301-b4b8-691f6b016861","name":"From Rx","custparents":[{"idx":"MY03b2cb13-c4cc-48ad-9464-98f5515a3a17"}]}],"NodeDescription":"<p>///t</p><p>t///</p><p>Adding USP charateristics (Sex, birth year, grad year, grad country code, and grad country N ( 1 for domestic in Canada, 0 for foreign)</p><table><tbody><tr><td data-row=\"row-gonl\"><br></td><td data-row=\"row-gonl\">USPs</td><td data-row=\"row-gonl\">New statin users</td></tr><tr><td data-row=\"row-9k0u\">ZXXA (excluding USPs with &lt; 6 statin new users)</td><td data-row=\"row-9k0u\">828</td><td data-row=\"row-9k0u\">17643</td></tr><tr><td data-row=\"row-3soe\">ZXXB</td><td data-row=\"row-3soe\">791</td><td data-row=\"row-3soe\">17216</td></tr></tbody></table><p><br></p>"},{"idx":"MYf66aa205-1d33-4570-8559-0da4055d147d","name":"PCT of Adh Patients","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}]},{"idx":"MYd9c3838d-5cf3-44a2-8051-64e2565922b2","name":"Data USPF aggregated","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}],"children":[{"idx":"MY3532a70c-0e97-4139-8f07-830c9de9be4f","name":"Logistic, Doc HiPctAdhPt as outcome, Doc Means ","custparents":[{"idx":"MYd9c3838d-5cf3-44a2-8051-64e2565922b2"}],"children":[{"idx":"MY09fb201b-04bf-4e46-9a78-6e00f83a4dd9","name":"Results","custparents":[{"idx":"MY3532a70c-0e97-4139-8f07-830c9de9be4f"}],"NodeDescription":"<p>///t</p><p>t///</p><p>Neither doc age nor doc sex were related to high % of adh patients</p><p>However, the following two are to be noted;</p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Strong and significantly high likelihood to have high % adh patients among Canada trained USPs as opposed to foreigned trained USPs</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Weirdly, number of patients who visited the USP were reversely linked to the likelihood of having high % of adherent patients. (e.g., USPs with lower number of visiting patients were less likely to having high % of adherent patients). Which is against the workload assumption.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Also weirdly, number of prescriptions were reversely linked to the likelihood of having high % of adherent patients. (e.g., USPs with lower number of prescriptions (of all medications to all patients) were less likely to having high % of adherent patients). Which is against the workload assumption.</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>There was interaction between USP's training country and # of patients. For Canada trained USPs, more number of total reduced the likelihood of having high % of adherent patients.  For foreign trained USPs, more number of patients increased increased the likelihood of having high % of adherent patients. </li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Cannot test grad years as it is highly correlated to doc age. Cannot test % of statin in all, as it might violate the causality rule (Docs with more adherent patients were of course having more statin Rx).</li></ol><p><br></p><p><br></p>"}]}]},{"idx":"MY8f7f9eef-7d43-4068-9ac7-8137cb59294e","name":"Data with USPF related vars at pt level","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}],"children":[{"idx":"MY14b8a114-317e-40e4-b838-4ab5b621ebed","name":"GEE, Pt Adh as outcome, Doc related vars","custparents":[{"idx":"MY8f7f9eef-7d43-4068-9ac7-8137cb59294e"}],"children":[{"idx":"MY12556f4f-2e26-4e04-b310-ff739e83b120","name":"Results","custparents":[{"idx":"MY14b8a114-317e-40e4-b838-4ab5b621ebed"}]}]},{"idx":"MYd08642bd-10a1-4fa4-be45-f5f61d54287e","name":"Wrong models","custparents":[{"idx":"MY8f7f9eef-7d43-4068-9ac7-8137cb59294e"}],"children":[{"idx":"MYf5b40485-007e-4574-9844-705f3ffb43f7","name":"GEE, Doc HiPctAdhPt as Y","custparents":[{"idx":"MYa732d90a-5ce7-4933-bd9d-28b152054e24"},{"idx":"MYd08642bd-10a1-4fa4-be45-f5f61d54287e"}]},{"idx":"MYa872d7d4-82ac-4897-aa5a-6a7206fac892","name":"Conditional logistic regression, Doc HiPctAdhPt as Y","custparents":[{"idx":"MYa732d90a-5ce7-4933-bd9d-28b152054e24"},{"idx":"MYd08642bd-10a1-4fa4-be45-f5f61d54287e"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[_L][_W] noninformative outcome vars (for all records of the same doc, the outcome is the same, therefore there is nothing to compare)</p>"}]}]},{"idx":"MY26483ce1-4a1d-4c16-ab2e-57fa60c10820","name":"Data USPF and patient related vars at pt level","custparents":[{"idx":"MYfae9ba9b-2fb1-471c-b212-39d2ac6af248"}],"children":[{"idx":"MY8e379e61-74e7-4bb9-9f2f-bf6b3d901738","name":"GEE, Pt Adh as outcome, Doc and patient vars","custparents":[{"idx":"MY26483ce1-4a1d-4c16-ab2e-57fa60c10820"}]},{"idx":"MY6c909443-6c35-4b8d-8eff-576ed4a76a1e","name":"Glimmix","custparents":[{"idx":"MY2da04b60-f5a9-4e63-ae83-f9839aa46823"},{"idx":"MY26483ce1-4a1d-4c16-ab2e-57fa60c10820"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[_Q][to do]</p><p>This is a great paper on glimmix</p><p><a href=\"https://www.sas.com/content/dam/SAS/support/en/sas-global-forum-proceedings/2018/2179-2018.pdf\" target=\"_blank\">https://www.sas.com/content/dam/SAS/support/en/sas-global-forum-proceedings/2018/2179-2018.pdf</a></p><p><br></p><p>The Proc glimmix is probmatic</p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>it has problems of insufficient memory</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>It has problems of non-convergence</li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>it shows weird results that are way different from the results from GEE</li></ol><p>The following might help as it compares Glimmix, R ...</p><p><a href=\"https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-11-77\" target=\"_blank\">https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-11-77</a></p><p><br></p><p><br></p>","children":[{"idx":"MY8be760a9-e1a0-41c0-942b-79e8d2f6671d","name":"Resources on Glimmix Methods","custparents":[{"idx":"MY6c909443-6c35-4b8d-8eff-576ed4a76a1e"}],"NodeDescription":"<p>///t</p><p>t///</p><p>[_Q][_W][to do]</p><p><br></p><p>Lots of sources in</p><p><a href=\"https://shenzhenyao.wordpress.com/2019/10/07/source-for-mor-icc-median-odds-ratio/\" target=\"_blank\">https://shenzhenyao.wordpress.com/2019/10/07/source-for-mor-icc-median-odds-ratio/</a></p><p>on</p><p>ICC, MOR</p><p>In which:</p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>formulas to calculate ICC, MOR: <a href=\"https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-12-28\" target=\"_blank\">https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-12-28</a></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>MOR (page 46-58): <a href=\"http://staff.pubhealth.ku.dk/~jufo/courses/rm/lectures/varcomp2-2x2.pdf\" target=\"_blank\">http://staff.pubhealth.ku.dk/~jufo/courses/rm/lectures/varcomp2-2x2.pdf</a></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Multiple membership multiple models (patients treated by 2 nurses) <a href=\"https://www.ihrp.uic.edu/files/CrossClassMultiMember-Hedeker2014.pdf\" target=\"_blank\">https://www.ihrp.uic.edu/files/CrossClassMultiMember-Hedeker2014.pdf</a></li></ol><p>Also, a lot of papers listed in the blog, many related to ICC, MOR.</p><p><br></p><p>Other sources:</p><ol><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>Analyzing multiple membership hierarchical data using PROC GLIMMIX (for project 3) <a href=\"https://www.lexjansen.com/wuss/2017/100_Final_Paper_PDF.pdf\" target=\"_blank\">https://www.lexjansen.com/wuss/2017/100_Final_Paper_PDF.pdf</a></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>ICC :Multilevel Models for Categorical Data Using SAS® PROC GLIMMIX: The Basics <a href=\"https://support.sas.com/resources/papers/proceedings15/3430-2015.pdf\" target=\"_blank\">https://support.sas.com/resources/papers/proceedings15/3430-2015.pdf</a></li><li data-list=\"ordered\"><span class=\"ql-ui\" contenteditable=\"false\"></span>On multiple membership, and cross classified models:An Introduction and Integration of Cross-Classified, Multiple Membership, and Dynamic Group Random-Effects Models. (for project 3) <a href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4784720/\" target=\"_blank\">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4784720/</a></li></ol><p><br></p>"}]}]}]},{"idx":"MY80f4cef9-3356-4549-844d-17522357844b","name":"History","custparents":[{"idx":"MY5fd7a565-a7d3-42f7-8c5d-87183473461a"}],"children":[{"idx":"MYd52a6a07-dd66-4d43-bbe9-00b8e874f134","name":"Pilot 1 (old)","custparents":[{"idx":"MY80f4cef9-3356-4549-844d-17522357844b"}]}]}]}},{"idx":"MY089e473e-ec8b-47fe-a40f-0f1d90ca0ba7","name":"SAS Program","custparents":[{"idx":"edd76f6a-da61-4d5b-939a-6f6cb3f079db"}],"children":[{"idx":"MYe17d2a31-6562-4b1c-8662-c557351ebbdf","name":"substeps","custparents":[{"idx":"MY089e473e-ec8b-47fe-a40f-0f1d90ca0ba7"}],"children":[{"idx":"3c2278f0-3974-441a-adf0-a1feabb1113a","name":"PhD_GPCharactStatin_20200317","children":[{"idx":"MYce87a9e2-0b0c-4ab9-97e4-55fcdba4771f","name":"Tools and others","custparents":[{"idx":"3c2278f0-3974-441a-adf0-a1feabb1113a"}],"children":[],"_substeps":{"idx":"MYd643174e-b046-43cb-9b6d-525c736ddfab","name":"substeps","custparents":[{"idx":"MYce87a9e2-0b0c-4ab9-97e4-55fcdba4771f"}],"children":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3","name":"Tools and Preparation","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[{"idx":"719ec8a7-2624-45bc-9b10-40ab014f4291","name":"studyOHDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Oral Hyperglycermics (OH) (AHFS 68:20:20, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 68:20:20*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '068' and mnr_clss='20' and sub_clss='20'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean19.alldin_1_jas19_18oct2019,<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.ohdins,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner<br/>)&#59<br/>/*167*/<br/><br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.ohdins, target=_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.ohdins, table=gen_name)&#59<br/>/*n=167, there is no dup DINs*/<br/><br/>s///<br/>t///","children":[{"idx":"0b91a7c1-a63d-494f-a0e6-2537d8e22df0","name":"CopyDINS_ohdins","custparents":[{"idx":"719ec8a7-2624-45bc-9b10-40ab014f4291"}]}],"custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"edd93466-ef55-456b-90f7-ca39d70778e8","name":"StudyAHTNDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS, the blood pressure lowering agents<br/>&nbsp&nbsp&nbsp&nbspin the AEC-I, and ARB class<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*AEC-I and ARBs (AHFS 24:08:00, and with 'pril' 'sartan' in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim, target=AHTNDINs_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:08*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=AHTNDINs_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='08'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data AHTNDINs_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset AHTNDINs_tmp1 AHTNDINs_tmp2&#59<br/>run&#59<br/>%distinct(data=AHTNDINs_tmp3, target=AHTNDINs_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:08, but not all are ACEI/ARB, those ARCE/ARB <br/>&nbsp&nbsp&nbsp&nbspmust have a genetic name containing 'pril' or 'sartan'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= clean19.alldin_1_jas19_18oct2019,<br/>&nbsp&nbsp&nbsp&nbspt2=AHTNDINs_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.AHTNDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"PRIL\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspindex(upcase(gen_name), \"SARTAN\") ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*n=723*/<br/>/*double check to ensure that there is no dup dins in remotetT.AHTNDINs*/<br/>%distinct(data=remoteT.AHTNDINs, target=AHTNDINs_tmp5, vars=DIN)&#59<br/>%freq(data=remoteT.AHTNDINs, table=gen_name)&#59<br/>/*n=723, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"c6c4166b-1646-4a17-a6f3-780c1085717a","name":"CopyDINS_AHTNs","custparents":[{"idx":"edd93466-ef55-456b-90f7-ca39d70778e8"}]}],"custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"71ba919c-37e3-40f7-b418-286f9400d81a","name":"make PIMs","NodeDescription":"///t<br/>///s<br/>/*Make PIM DINs*/<br/>/*&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*Antidepressants*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\DIN List Antidepressants.xlsx)&#59<br/>data PIMs1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs1 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"Drugs\"&#59<br/>run&#59<br/>%print (data=PIMs1)&#59<br/><br/>/*BENZO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs2&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs2 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"BENZO\"&#59<br/>run&#59<br/>%print (data=PIMs2)&#59<br/><br/>/*PSYCHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs3&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs3 (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"PSYCHO\"&#59<br/>run&#59<br/>%print (data=PIMs3)&#59<br/><br/>/*ANTICHO*/<br/>%let thePIMxlsFile =%str(P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS\\PIM drugs in dementia - Beers 2015 for Sask.xlsx)&#59<br/>data PIMs4&#59<br/>&nbsp&nbsp&nbsp&nbspformat DIN1 8. genName $100. DIN $8. class $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>proc import datafile=\"&thePIMxlsFile\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=excel<br/>&nbsp&nbsp&nbsp&nbspout=PIMs4(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= DIN genname class<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"ANTICHO\"&#59<br/>run&#59<br/>%print (data=PIMs4)&#59<br/><br/>data PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMs1  PIMs2 PIMs3 PIMs4&#59<br/>run&#59<br/><br/>/*sort and remove the dup DINS per class*/<br/>%sort(data=PIMS_all, sorter=class DIN)&#59<br/>data localt.PIMs&#59<br/>&nbsp&nbsp&nbsp&nbspset PIMS_all&#59<br/>&nbsp&nbsp&nbsp&nbspby class DIN&#59<br/>&nbsp&nbsp&nbsp&nbspif first.DIN&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"ef6e32c0-bdd6-4b4e-b4c2-54a791f02c46","name":"StudyDINs","NodeDescription":"///t<br/>///s<br/>/*Making Study DINS*/<br/>data _null_&#59 run&#59<br/>/*Statin (AHFS 24:06:00, and with statin in the generic names)*/<br/><br/>/*get all DINs from the cleanned allDIN file*/<br/>/*the problem is that in both of the following file, there is no AHFS class (maybe because AHFS class is not unique <br/>&nbsp&nbsp&nbsp&nbspand will cause dup of DINs)*/<br/>/*%print(data = clean18.alldin_4_jas18_15oct2018)&#59*/<br/>/*%print(data = hqc.dp_drug)&#59*/<br/>/*%print(data=hqc.dp_claim)&#59*/<br/><br/>/*get the dins from dp_claim, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim, target=_tmp1, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*get the dins from dp_claim_non_ben, if with AHFS of 24:06*/<br/>%distinct(source=hqc.dp_claim_non_ben, target=_tmp2, vars=DIN, filters=%str(mjr_clss = '024' and mnr_clss='06'))&#59<br/>/*merge the above two to have a distince DIN list*/<br/>data _tmp3&#59<br/>&nbsp&nbsp&nbsp&nbspset _tmp1 _tmp2&#59<br/>run&#59<br/>%distinct(data=_tmp3, target=_tmp4, vars=DIN)&#59<br/><br/><br/>/*the above DINS are of AHFS 24:06, but not all are Statins, those statins must have a genetic name containing 'statin'*/<br/>/*get the DINs if the generic name contains statin*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=clean19.alldin_1_jas19_18oct2019, /*clean19.alldin_1_ond18_13feb2019,*/<br/>&nbsp&nbsp&nbsp&nbspt2=_tmp4,<br/>&nbsp&nbsp&nbsp&nbsptarget=remoteT.StatinDINs,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=DIN,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(index(upcase(gen_name), \"STATIN\") ne 0)<br/>)&#59<br/>/*n=301 as of 20191120*/<br/>/*double check to ensure that there is no dup dins in remotetT.StatinDINs*/<br/>%distinct(data=remoteT.StatinDINs, target=_tmp5, vars=DIN)&#59<br/>/*n=301, there is no dup DINs*/<br/>s///<br/>t///","children":[{"idx":"a8426af5-2325-4b59-ac2c-a5003efeea8f","name":"CopyDINS to Local","custparents":[{"idx":"ef6e32c0-bdd6-4b4e-b4c2-54a791f02c46"}]}],"custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"53cffab1-770d-454b-af88-0ba471c7a4af","name":"MyMacros","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"239cc64b-416a-4141-8587-4201f8f1bf21","name":"Test_remote","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/><br/>/*For the following files, there are different versions. Either the latest, or a customized file will be select for this project*/<br/>%macro setCleanFiles(theRaw=, startChars=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local curYear YearTag startChars  nTrials theRaw theRawFileName debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If theRaw file has been defined (i.e., by a customized source), exit the macro and do not overwrite the defined value*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&&&theRaw) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> The raw file &theRaw has been defined, and is not overwritten&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto exit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Determine the source of the cleaned hospitalization file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The logic is to select the latest file (by modified date) among all versions.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is either in a clean folder of the current year, or the previous year <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(at the begining of the year, the clean folder is created, but the clean file was not available yet).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*list out all files in the clean file folder of the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%sysfunc(year(\"&sysdate\"d))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> sysdate = &sysdate&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put the curYear is >>> &curYear&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials=0&#59<br/><br/>%repeat:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>>>>>>>>>>>>>>>>>>>>>> &theRaw&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output Members=setCleanFiles_tmp1&#59 /*Note: this line must precede the following proc statement lines. Otherwise the output goes nowhere*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets library=&theLibname  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let startChars=%lowcase(&startChars)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the output data set with all file names, select the target files (e.g., hospital files are characterized by the begining 'cihi'*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCleanFiles_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(lowcase(name)) in: (\"&startChars\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Check the number of variables in _tmp2*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=setCleanFiles_tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If nobs =0, there is no such file in the clean folder of the current year. It must be that files of the first year is not available yet<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is in the clean folder of the last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &nobs =0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*redefine the year tag to last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%eval(&curYear - 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials = %eval(&nTrials +1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> number of trials = &nTrials&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*repeat the process to get the files in the redefined clean folder*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %eval(&nTrials < 3) %then %do&#59  /*After trying for 3 times, yet there is no such files, quit*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto repeat&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> There is no such files in the recent 3 years. Nothing is defined for the source file &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=setCleanFiles_tmp2, sorter=Lastmodified)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp2 (obs=max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theRawFileName', name)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &theRaw = %lowcase(Clean&yearTag..&theRawFileName)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete setCleanFiles_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59 /*it is critical to have the statement 'quit', as it releases proc dataset from suppressing ods tables (the suppressing was set by the option nolist)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%exit:<br/><br/>%mend setCleanFiles&#59<br/>%setCleanFiles(theRaw=hospitalFile, startChars=cihi_EOC)&#59<br/>%setCleanFiles(theRaw=alldinfile, startChars=alldin_)&#59<br/>%setCleanFiles(theRaw=MortFile_vital, startChars=verf_dths_)&#59<br/>%setCleanFiles(theRaw=MortFile_PHRS, startChars=PHRS_DTHS_)&#59<br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"a4f177b1-b60e-41df-aa46-859a2e2d4a19","name":"Test_local","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"957425d9-dfe2-4e28-934b-543a75775de0","name":"escape","NodeDescription":"///t<br/>///s<br/>/*data x&#59a=1&#59run&#59*/<br/>)&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"45a56f21-21a0-4c83-b031-d785d5e6af30","name":"Beep","NodeDescription":"///t<br/>///s<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"b277aaa7-6fed-4c0a-98e9-98a98e243f56","name":"Learnings","NodeDescription":"///t<br/>///s<br/>/*Leanring*/<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=msbzzb,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZZD0,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, key_doc_num, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(num_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*note, it does not work to set length by format $4. as paymode. The length will yet be 200.*/<br/>/*Instead, should set the length=4*/<br/><br/><br/>/*What is wrong*/<br/>%macro B(varA, VarB)&#59<br/><br/>%mend B&#59<br/>%macro A(var1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%B(&Var1)&#59<br/>%mend A&#59<br/>%A(&Var1=%str(v1_forVarA, v2_forVarB))?<br/><br/>/*Wrong!<br/>&nbsp&nbsp&nbsp&nbspmacro A should not only have 1 var, <br/>&nbsp&nbsp&nbsp&nbspit should have two vars instead, each for VarA and VarB in macro B<br/>*/<br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_doc_numc) as docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(distinct entryDate) as docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZk1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, t2.docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/>/*which docFreq will be kept in VZK3? the docFreq from VZJ1? from VZJ2?<br/>Answer: from VZJ1, the value in VZJ2 will be neglected<br/>*/<br/><br/>/*Note: there could be persons continuously covered until the 365th day since entry, but died<br/>&nbsp&nbsp&nbsp&nbspon the 365th day. These patients, if exist, should be excluded*/<br/><br/><br/>/*about logistic regression*/<br/>%macro logisticEstTerms&#59<br/><br/>%let UPCCutOff =50&#59<br/>/*VXT_FS4.  Make UPCIndex category*/<br/>%print(data=vxt_fs4)&#59<br/>data VXT_FS4a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXT_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndexF_Cat='L'&#59/*low*/<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF >= UPCIndexFP&UPCCutOff  then UPCIndexF_Cat='H'&#59/*high*/<br/>&nbsp&nbsp&nbsp&nbspCombTerm_FS = strip(UPCIndexF_Cat) || strip(CompFS)&#59<br/>&nbsp&nbsp&nbsp&nbspif docpaytype_fs ne 'UNKW'&#59<br/>run&#59<br/><br/>%let theXVar = CombTerm_FS&#59<br/><br/>Title \"&theXVar\"&#59<br/>%freq(data=VXT_FS4a, table=&theXVar * NorthN)&#59<br/><br/>/*hypothesis:<br/>In North regions, GPs are shifting,<br/>it is more likely to have a lower UPC I if patients sees GPs more frequently. <br/>conversely, it is more likely to have a higher UPC index if patients only sees GP for fewer times.<br/>As such, the UPC index is not a good measure here, actually it is misleading<br/>... prove it<br/>&nbsp&nbsp&nbsp&nbsp... the visits, the upc index <br/>*/<br/><br/>Title \"&theXVar, + covariates \"&#59<br/>/*support.sas.com/kb/24/455.html*/<br/>proc logistic data=VXT_FS4a descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') NorthN (Ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=ref<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  &theXVar NorthN   &theXVar *NorthN  /scale=none aggregate link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp/*stratified analysis*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 1*/<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '1')&#59<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '0')&#59<br/>&nbsp&nbsp&nbsp&nbsp/*for method 2 to 4, must set param=glm!*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 2*/<br/>/*&nbsp&nbsp&nbsp&nbsplsmeans &theXVar * NorthN / ilink oddsratio diff&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 3*/<br/>/*&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '1') diff oddsratio&#59 */<br/>/*&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '0') diff oddsratio&#59 */<br/>&nbsp&nbsp&nbsp&nbsp/*method 4. This is tricky... the 1/0 codes are not straitforward*/<br/>/*&nbsp&nbsp&nbsp&nbsplsmestimate NorthN * &theXVar  'L1 vs L0 in North Regions' 0 0 1   /exp&#59 */ <br/>&nbsp&nbsp&nbsp&nbsp/*method 5*/<br/>&nbsp&nbsp&nbsp&nbspestimate 'L1 vs L0'   &theXVar 0 0 1  /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate 'NorthN vs non-NorthN'  NorthN 1  /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp/*&theXVar*NorthN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theXVar levels [0, 0, 1] (a)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNorthN levels [1] (b)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso combined: <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(a) * (b) = [0*1, 0*1, 1*1 ] = [0,0,1]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphence &theXVar*NorthN 0 0 1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspestimate \"&theXVar * NorthN (L1 vs L0)\"  &theXVar *NorthN   0 0 1 /exp&#59<br/>&nbsp&nbsp&nbsp&nbspestimate \"L1 vs L0 in  NorthN\"  &theXVar 0 0 1   &theXVar *NorthN  0 0 1   /exp&#59<br/>run&#59<br/>title&#59<br/><br/><br/><br/>Title \"&theXVar, + covariates \"&#59<br/>/*support.sas.com/kb/24/455.html*/<br/>proc logistic data=VXT_FS4a descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L') CombTerm_FS (ref='L0') sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') NorthN (Ref='0')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=glm<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar NorthN     &theXVar*NorthN   /scale=none aggregate link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp/*stratified analysis*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 1*/<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '1')&#59<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '0')&#59<br/>&nbsp&nbsp&nbsp&nbsp/*for method 2 to 4, must set param=glm!*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 2*/<br/>&nbsp&nbsp&nbsp&nbsplsmeans &theXVar * NorthN / ilink oddsratio diff&#59<br/>&nbsp&nbsp&nbsp&nbsp/*method 3*/<br/>&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '1') diff oddsratio&#59 <br/>&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '0') diff oddsratio&#59 <br/>&nbsp&nbsp&nbsp&nbsp/*method 4. This is tricky... see the exanalation below*/<br/>&nbsp&nbsp&nbsp&nbsplsmestimate &theXVar * NorthN  'L1 vs L0 in North Regions' 0 0 0 0 1 0 -1 0   /exp&#59 <br/>&nbsp&nbsp&nbsp&nbsp/*method 5*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate 'L1 vs L0'   &theXVar 0 0 1 -1  /exp&#59 in glm, this is not L1 vs L0*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate 'NorthN vs non-NorthN'  NorthN 1 -1  /exp&#59 in glm, this is not North vs south*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate \"&theXVar * NorthN (L1 vs L0)\"  &theXVar*NorthN  0 0 1 0 0 /exp&#59 note this is meaning less, won't report */<br/>&nbsp&nbsp&nbsp&nbspestimate \"L1 vs L0 in  NorthN\"  &theXVar 0 0 1 -1 NorthN * &theXVar 0 0 0 0 1 0 -1 0  /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Explanation of the above:<br/>&nbsp&nbsp&nbsp&nbspNorthN = [N, S] (i.e., north regions vs south regions)<br/>&nbsp&nbsp&nbsp&nbsp&theXVar =[H0, H1, L1, L0]<br/>&nbsp&nbsp&nbsp&nbsp &theXVar * NorthN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<Note the order of multiplication!><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe order is NOT determined by the order of vars appearing in the model, nor by the order of vars appearing in the estimate statement.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., the following two statements are the same and do not affect the order of multiplication) )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp model adherence_adjust (ref='0') = &theXVar NorthN     &theXVar*NorthN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =  NorthN  &theXVar   NorthN*&theXVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(the following two statements are the same and do not affect the order of multiplication)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"...\" &theXVar 0 0 1 -1 NorthN * &theXVar 0 0 0 0 1 0 -1 0 /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestimate \"...\" &theXVar 0 0 1 -1 &theXVar * NorthN 0 0 0 0 1 0 -1 0 /exp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspInstead, the order IS determined by the order of vars specified in the class statement. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn this case, the term &theXVar(CombTerm_FS) is prior to the term NorthN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptherefore, the multiplication order is   &theXVar * NorthN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp=  [H0, H1, L1, L0] * [N,S]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<Note. when breaking it down, H0 gets to multiply N, and then S  first, then H1 gets to multiply N, and S, ....<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowing that order.><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= [NH0, SH0, NH1, SH1, NL1, SL1, NL0, SL0] (a)<br/>&nbsp&nbsp&nbsp&nbspTo compare L1N vs L0N:<br/>&nbsp&nbsp&nbsp&nbsp[0,0, 0, 0, 1, 0, -1, 0] <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., in (a), the 5th [0, 0, 0, 0, 1, 0, 0, 0] vs the 7th [0, 0, 0, 0, 0, 0, 1, 0],<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp[0, 0, 0, 0, 1, 0, 0, 0]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   - [0, 0, 0, 0, 0, 0, 1, 0]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= [0,0, 0, 0, 1, 0, -1, 0] &nbsp&nbsp&nbsp&nbsp <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>run&#59<br/>title&#59<br/><br/><br/>Title \"&theXVar, + covariates \"&#59<br/>/*support.sas.com/kb/24/455.html*/<br/>proc logistic data=VXT_FS4a descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass UPCIndexF_Cat (ref='L')  sex_desc(ref='M') qaippe(ref='1') resitype(ref='URBAN') <br/>&nbsp&nbsp&nbsp&nbspqaippeN(ref='1') resitypeN(ref='0') NorthN (Ref='0') CombTerm_FS (ref='L0') /*Note that this time NorthN comes first*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=glm<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') = &theXVar NorthN     &theXVar*NorthN   /scale=none aggregate link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsp/*stratified analysis*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 1*/<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '1')&#59<br/>&nbsp&nbsp&nbsp&nbspoddsratio &theXVar / at (NorthN = '0')&#59<br/>&nbsp&nbsp&nbsp&nbsp/*for method 2 to 4, must set param=glm!*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 2*/<br/>/*&nbsp&nbsp&nbsp&nbsplsmeans &theXVar * NorthN / ilink oddsratio diff&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*method 3*/<br/>/*&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '1') diff oddsratio&#59 */<br/>/*&nbsp&nbsp&nbsp&nbspslice &theXVar * NorthN / sliceby(NorthN = '0') diff oddsratio&#59 */<br/>&nbsp&nbsp&nbsp&nbsp/*method 4. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThis time the order of vars in the class statement has changed, NorthN prior to &theXVar<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHowever, in the lsmestimate, it still use the same 1/0 orders as in the previous test<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOf course such orders are wrong, and the result is wierd <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsplsmestimate &theXVar * NorthN  'L1 vs L0 in North Regions' 0 0 0 0 1 0 -1 0   /exp&#59 <br/>&nbsp&nbsp&nbsp&nbsp/*method 5*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate 'L1 vs L0'   &theXVar 0 0 1 -1  /exp&#59 in glm, this is not L1 vs L0*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate 'NorthN vs non-NorthN'  NorthN 1 -1  /exp&#59 in glm, this is not North vs south*/<br/>/*&nbsp&nbsp&nbsp&nbspestimate \"&theXVar * NorthN (L1 vs L0)\"  &theXVar*NorthN  0 0 1 0 0 /exp&#59 note this is meaning less, won't report */<br/>&nbsp&nbsp&nbsp&nbspestimate \"L1 vs L0 in  NorthN\" &theXVar 0 0 1 -1 &theXVar*NorthN  0 0 1 -1 0 0 0 0  /exp&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Explanation of the above:<br/><br/>&nbsp&nbsp&nbsp&nbsp&theXVar =[H0, H1, L1, L0]<br/>&nbsp&nbsp&nbsp&nbspNorthN = [N, S] (i.e., north regions vs south regions)<br/>&nbsp&nbsp&nbsp&nbspNote that in the class statement, NorthN comes first, while &theXVar comes later. <br/>&nbsp&nbsp&nbsp&nbspTherefore the multiplication order is &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNorthN  * &theXVar<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= [N, S]  * [H0, H1, L1, L0]  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<Note the order of multiplication!> This time, N gets to time H0, H1, L1, L0 first, followed by S<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= [NH0, NH1, NL1, NL0, SH0, SH1, SL1, SL0] (a)<br/>&nbsp&nbsp&nbsp&nbspTo compare L1N vs L0N:<br/>&nbsp&nbsp&nbsp&nbsp[0,0, 1, -1, 0, 0, 0, 0] <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., in (a), the 3th [0, 0, 1, 0, 0, 0, 0, 0] vs the 4th [0, 0, 0, 1, 0, 0, 0, 0],<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp[0, 0, 1, 0, 0, 0, 0, 0]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   - [0, 0, 0, 1, 0, 0, 0, 0]<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= [0, 0, 1, -1, 0, 0,0, 0] <br/>&nbsp&nbsp&nbsp&nbspAs such, the 0/1 coding order in this test is different from the order in the previous test <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>run&#59<br/>title&#59<br/><br/>%mend logisticEstTerms&#59<br/><br/><br/>%macro notrun&#59<br/>/*in this example, the statement length does not work to keep the F1 length of 500!*/<br/>data VXC_R1&#59<br/>/*&nbsp&nbsp&nbsp&nbsplength F1 $500.&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat F1 $500.&#59 /*length does not wor ()*/<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 2 then F1 = \"Received statin medications between Jan 1,2012 and Dec 31, 2017\" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 3 then F1 = \"Excluding those missing age/sex information \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 5 then F1 = \"Excluding those le 18 on cohort entry \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 7 then F1 = \"Excluding those not continuously registered for healthcare service within the washout period of 1825 days, or a follow-up period of 365 days \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 9 then F1 = \"Excluding those receiving statin medications within the washout period\"&#59 <br/>&nbsp&nbsp&nbsp&nbspif _n_ in (1,2,3,5,7,9)&#59<br/>&nbsp&nbsp&nbsp&nbsprename F1=Steps F3 = Remaining&#59<br/>run&#59<br/>%mend&#59<br/><br/>%macro notrun&#59<br/>/*wrong*/<br/>Data VXG_RT5a&#59<br/>&nbsp&nbsp&nbsp&nbspmidPoint=0&#59 N_Patients=0&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a1&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var &#59<br/>&nbsp&nbsp&nbsp&nbspkeep _var_ _count_  _midpt_ midPoint N_Patients &#59<br/>&nbsp&nbsp&nbsp&nbspif _count_ < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients =N_Patients+ _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint=midPoint+_midpt_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain midPoint&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint=_midpt_&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/><br/>/*wrong*/<br/>Data VXG_RT5a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a1&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var &#59<br/>&nbsp&nbsp&nbsp&nbspkeep _var_ _count_  _midpt_ midPoint N_Patients &#59<br/>&nbsp&nbsp&nbsp&nbspif _count_ < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients =N_Patients+ _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint=midPoint+_midpt_&#59 <br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint=_midpt_&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/><br/>/*correct*/<br/>Data VXG_RT5a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a1&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var &#59<br/>&nbsp&nbsp&nbsp&nbspkeep _var_  midPoint N_Patients &#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients + _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint+_midpt_&#59 <br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmidPoint=_midpt_&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspIF &nbsp&nbsp&nbsp&nbspN_Patients >=6&#59<br/>run&#59<br/>%mend &#59<br/><br/><br/><br/>%macro notrun&#59<br/><br/>/*wrong, grpcat has been defined, &group cannot be renamed to grpcat*/<br/>&nbsp&nbsp&nbsp&nbspdata _tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat var $10. groupvar $50. grpcat $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset meanstats_SPR&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar=symget('var')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupvar=symget('group')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &group = grpcat &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>/*correct*/<br/>data _tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset meanstats_SPR&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar=symget('var')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupvar=symget('group')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &group = grpcat &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend &#59<br/><br/><br/>%macro notrun&#59<br/>/*again, var names before rename*/<br/><br/>/*wrong*/<br/>data teestt3._XPilot4&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot50b&#59<br/>&nbsp&nbsp&nbsp&nbsprename SameGP_UCPW_UCPF=X99_C_CatC&#59<br/>&nbsp&nbsp&nbsp&nbsplabel SameGP_UCPW_UCPF = \"SameGP_UCPW_UCPF CatC\"&#59<br/>&nbsp&nbsp&nbsp&nbspif X99_C_CatC=0 then X99_C_CatN=1&#59<br/>&nbsp&nbsp&nbsp&nbspelse X99_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspLabel X99_C_CatN=\"SameGP_UCPW_UCPF CatN\"&#59<br/>run&#59<br/><br/>/*again, var names before rename*/<br/>data teestt3._XPilot4&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot50b&#59<br/>&nbsp&nbsp&nbsp&nbsprename SameGP_UCPW_UCPF=X99_C_CatC&#59<br/>&nbsp&nbsp&nbsp&nbsplabel SameGP_UCPW_UCPF = \"SameGP_UCPW_UCPF CatC\"&#59<br/>&nbsp&nbsp&nbsp&nbspif SameGP_UCPW_UCPF=0 then X99_C_CatN=1&#59<br/>&nbsp&nbsp&nbsp&nbspelse X99_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspLabel X99_C_CatN=\"SameGP_UCPW_UCPF CatN\"&#59<br/>run&#59<br/><br/>%mend&#59<br/>s///<br/>t///","custparents":[{"idx":"45a56f21-21a0-4c83-b031-d785d5e6af30"}]}],"custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"2238ae63-a02b-4021-885a-cf2a98d1a1cc","name":"UPC code","NodeDescription":"///t<br/>///s<br/>/*from:<br/>Z:\\My Project\\Projects\\PhD Thesis\\SAS code\\Master code - UPC (Sept 2014).sas<br/>*/<br/><br/><br/>/***************************************************************************************************  <br/> *   Programmer: Beliz Acan Osman with reference methodology from CIHI Continuity of PHC study, SK  *                                                  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   Date: July 2013                                           &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp                            *<br/> *   Project: Primary Health Care Hoshin - Patient Connetedness- CHRONIC DISEASE PROFILES           *<br/> *   Purpose: This code extracts physician information for the chronic disease cohorts &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspof SK FY 2006-2013 and in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> *   investigates the contunity of the care provided by GPs and NPs&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*<br/> ****************************************************************************************************/<br/>* Jan 2018<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. could not complete the ACSC specific UPC calculation as we are not calculating incidence/prevalence for ACSC conditions anymore.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTalked with Patrick about this January 9th. He will decide whether we should leave it as is or continue with inc/prev analysis.<br/><br/>* April 2017<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Mode = Z codes are excluded from UPC calculation - New Knowledge: these codes represent out of province claims<br/><br/>* Jan 2016<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1.Took out the clinic piece we will not provide that this wall walk.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/><br/>* Sept 2015 PLT Wall Walk - Notes by Meric Osman & Beliz Acan Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. UPC by Clinic added. 2 sets of results,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa. UPC by physician (same as before)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspb. UPC by clinic (new) - see code Master Code - UPC_by_clinic (Aug 2015)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2.Used most upto date MSB & PHRS & Death & Doc Num files<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* June 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>* April 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Used most upto date MSB & PHRS file<br/><br/>Old notes&#59<br/>* December 2014 RUN for January 2015 PLT Wall Walk - Notes by Meric Osman<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. Additional slush numbers have been acquired and used (see below),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. Minor bug fixes.<br/><br/><br/>* August-September 2014 RUN for October 2014 PLT Wall Walk - Notes by Meric Osman<br/><br/>Changes/Updates (during Beliz's maternity leave)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. New MSB data has been acquired by HQC. This data includes physician specialty<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. As the physician specialty information is already in the data - DOC FILE is not being used<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp3. Previously, MSB extracted from 2006, however only last 3-4 years of inforamtion is needed (informed by team), thus shorter extraction (Apr 2010 onwards) has been done.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp4. Out of province DOC numbers are for SAS flat files (not for the ORACLE MSB file), thus not used (see below).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp5. Most upto date PHRS, Death files...etc. have been used (see below).<br/><br/><br/><br/>*MACROS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%INCLUDE '/SAS_data/dw0/HQC_share/Meric/calc_age_discr.sas'&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>*DATASETS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let death_file &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.verf_dths_3_jfm17_01nov2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let phrs_res&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= clean17.phrs_pers_resc_4_jas17_01dec2017&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/><br/>* EXCLUSIONS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let in_patient&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let slush&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= '76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/><br/>*LIBRARIES&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname phc &nbsp&nbsp&nbsp&nbsp'/SAS_data/dw0/HQC_share/Beliz/continuity/Jan 2018'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>*needed library for SASApp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname hqc meta library=\"HQC\"&#59<br/><br/>*DISEASE COHORTS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname copd   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/COPD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname asthma '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Asthma'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname chf    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CHF'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname cad    '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/CAD'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname dm     '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/DM'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname mood   '/SAS_data/dw0/HQC_share/Shan/ACSC/17 Nov/Data/Mood'&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoptions mprint nosymbolgen nomlogic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoption compress=Y&#59<br/><br/><br/>options nosymbolgen nomlogic nomprint&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*****************************************************************************************************/<br/><br/><br/><br/><br/>%let phc_dos_start &nbsp&nbsp&nbsp&nbsp= '01Apr2010'd&#59<br/>%let phc_dos_end &nbsp&nbsp&nbsp&nbsp= '30SEP2017'd&#59<br/><br/><br/><br/>%Extract_MSB(<br/>   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp=&nbsp&nbsp&nbsp&nbspmsb_extract,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_start_dt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'31MAR2011'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspxtrc_end_dt&nbsp&nbsp&nbsp&nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp'19SEP2017'd,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdostart&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_start,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp    dosend&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &nbsp&nbsp&nbsp&nbsp&phc_dos_end)&#59*-Jan 2018:79,756,277, Apr2017: 73,926,659, -JuneWW16 62,303,134, -JanWW16 59,682,474- , JuneWW15 - 54,106,206&#59<br/><br/>proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from msb_extract&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 12Sep2017)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <br/>* Do a nodupkey - Only important thing for PHC is having the \"Record of Visit\" not the individual claims&#59<br/>proc sort data=msb_extract nodupkey out=msb_extract_nodup_all&#59 by key_hsn dos_1 key_doc_num spec&#59 run&#59*jan 2018-57,471,158 ,apr2017-53,370,242, june2016-45150575,Jan16-43,276,407--39,312,813&#59<br/><br/>*Note:&nbsp&nbsp&nbsp&nbspThere is no case that num_srv = 0 - HQC does not receive those claims (deleted at the source by eHealth)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssume all spec's starting with B (%72.13) as BB and also keep the pediatricians with couple exlusions, and WB - nurse practitioners (per CIHI),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDelete slush physician numbers & (NEW) out of province claims through mode = Z&nbsp&nbsp&nbsp&nbsp<br/> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRemember, in_patient&nbsp&nbsp&nbsp&nbsp= 'B' '2' 'K' (will be deleted)&#59<br/><br/>proc freq data = msb_extract_nodup_all&#59table num_srv&#59 run&#59<br/><br/>*There will be another exclusion in later steps regarding pediatricians and patient's age&#59<br/><br/>data msb_extract_nodup&#59 set msb_extract_nodup_all&#59<br/><br/>*apr2017 run had missing key_hsn - deleted&#59<br/>if key_hsn=\"\" then delete&#59<br/>if num_srv = 0 then delete&#59<br/>if los in:(&in_patient) then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B','C','WB') then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>*fy&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if '01APR2010'd LE dos_1 LE '31MAR2011'd then fy = 'FY2010/11'&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2011'd LE dos_1 LE '31MAR2012'd then fy = 'FY2011/12'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2012'd LE dos_1 LE '31MAR2013'd then fy = 'FY2012/13'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2013'd LE dos_1 LE '31MAR2014'd then fy = 'FY2013/14'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2014'd LE dos_1 LE '31MAR2015'd then fy = 'FY2014/15'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2015'd LE dos_1 LE '31MAR2016'd then fy = 'FY2015/16'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2016'd LE dos_1 LE '31MAR2017'd then fy = 'FY2016/17'&#59<br/>&nbsp&nbsp&nbsp&nbspelse if '01APR2017'd LE dos_1 LE '31MAR2018'd then fy = 'FY2017/18'&#59<br/>rename xtrc_date=xtrc_date_msb&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>run&#59*Jan 2018-7271258,apr2017-34,698,104 -- jun16-29,523,814--jan16  28,294,478--25,747,453&#59<br/>proc freq data=msb_extract_nodup&#59 table fy spec num_srv los&#59run&#59<br/><br/>/*1b. Add demographic information (RHA at time of service)*/<br/><br/>%demog_assign(prs_xtrc_dt='02OCT2017'd,<br/>                   ds_in &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= msb_extract_nodup,<br/>                   ds_out&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= cohort_master_apr17, <br/>                   strt_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   end_dt_var&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= dos_1,<br/>                   geo_file&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp= &geo_file,<br/>incl_full_info=N)&#59*34,698,104&#59<br/><br/>proc freq data=cohort_master_apr17&#59 table sex_desc rha&#59run&#59<br/><br/>* Remove key_hsn's that we can NOT find in PHRS - 5,849 visits (previously - 1,084 visits)&#59<br/>* 34,607 times an RHA can NOT be assigned to a key_hsn - keep them for now&#59<br/><br/>data cohort_master_apr17_1&#59 set cohort_master_apr17&#59<br/><br/>if sex_desc = ''  then delete&#59<br/>if sex_desc&nbsp&nbsp&nbsp&nbsp= 'M' then male=1&#59 else male=0&#59<br/><br/>rename rha = rha_index&#59<br/><br/>drop tot_days mindiff_rha rhadays rhadiff mindiff_urb_rur urdays urdiff&#59<br/>run&#59* 37269992 (1266 visits dropped)&#59<br/>proc freq data=cohort_master_apr17_1&#59table fy sex_desc male rha_index&#59run&#59*28,758 missing RHA (apr2017), 35,499 missing rha--27,920 Rha cannot be assigned (roughly 10,000 people)&#59<br/><br/><br/>/*add age at date of service */<br/>* Note: There are handful of patients receiving services after their death date - very few thus not investigating - consider for future&#59<br/><br/>%calc_age_discr(ds_in=cohort_master_apr17_1,ds_out=cohort_master_1,refday_var=dos_1,agevar=age)&#59<br/><br/>proc freq data=cohort_master_1&#59 table age&#59run&#59* No missing age&#59<br/><br/>/*manipulate variables*/<br/><br/>* NOTE: There are some patients where best_dt < 01Apr2010, however, there are claims indicating that they have seen a physician after 01Apr2010 -  keep them (<1000 cases)&#59<br/><br/>data phc.cohort_master_3&#59 set cohort_master_1&#59<br/><br/>* Delete pediatrician claims if the patients is 18 and older&#59<br/>if age >= 18 and substr(spec,1,1)='C' then delete&#59<br/><br/>*For UPC calculation&#59<br/>n = 1&#59<br/><br/>run&#59*34,692,255&#59<br/>proc freq data=phc.cohort_master_3&#59 table n fy los&#59run&#59<br/>proc freq data=phc.cohort_master_3&#59 table age&#59 where substr(spec,1,1)='C'&#59run&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp proc sql&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   select min(dos_1) as earliest format=date9., max(dos_1) as latest format=date9. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   from phc.cohort_master_3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp quit&#59*(01Apr2010 , 14Mar2017)&#59<br/><br/><br/>* RHA assignment of patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp RHA's are assigned to patients AT THE TIME OF PHY SERVICE<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp There are some patients who had assigned >1 RHA's within a fiscal year (probably due to a move)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp For those cases - assign the RHA where the patient was residing, received majority of services<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp If there is a draw, assign randomly&#59<br/><br/>* RHA frequencies&#59<br/>proc sql noprint&#59 <br/>create table rha_assign as <br/>  select key_hsn, fy, rha_index,<br/>  &nbsp&nbsp&nbsp&nbspsum (n)&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas rha_times<br/>from phc.cohort_master_3<br/>  group by key_hsn, fy, rha_index<br/>  order by key_hsn&#59<br/>run&#59*6,255,567&#59<br/>proc sort data=rha_assign&#59 by key_hsn fy descending rha_times&#59 run&#59*6,255,567 -- 1,261,810 unique patients&#59<br/>proc sort data=rha_assign nodupkey out=rha_assign_1&#59 by key_hsn fy&#59run&#59* 6,186,049&#59<br/><br/><br/>* It has been decided to ONLY include UPC to the PLT Wall - thus only calculate UPC&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp /*UPC index*/<br/><br/>* Sum the visits by EACH DOCTOR in EACH FY by EACH PATIENT&#59<br/>proc summary nway data=phc.cohort_master_3&#59<br/>class key_hsn key_doc_num fy&#59<br/>var n&#59<br/>output out=upc n=visits&#59<br/>run&#59<br/>proc freq data=upc&#59 table visits&#59run&#59<br/><br/>data upc_drop(drop=_type_ _freq_)&#59 set upc&#59run&#59* Notes:&nbsp&nbsp&nbsp&nbspType is all 7, Freq & visits are exactly same (delete them)&#59<br/><br/><br/>*&nbsp&nbsp&nbsp&nbspSum the total visits in EACH FY by EACH PATIENT<br/>Also keeps the maximum number of visits done to an individual physician&#59<br/>proc summary nway data=upc_drop&#59<br/>class key_hsn fy&#59<br/>var visits&#59<br/>output out=upc3 max=max_visits sum=visits&#59<br/>run&#59<br/><br/>proc sort data=upc&#59 by key_hsn fy&#59run&#59<br/>proc sort data=upc3&#59 by key_hsn fy&#59run&#59<br/><br/>* Delete cases where the patient had ONLY 1 visit within a fiscal year&#59<br/>data upc_1(drop=_type_ _freq_)&#59 set upc3&#59<br/>if visits = 1 then delete&#59<br/>run&#59<br/>proc freq data = upc_1&#59 table visits&#59run&#59<br/><br/>data UPC_index&#59<br/>set upc_1&#59<br/>UPC=(max_visits/visits)*100&#59<br/>format UPC 8.2&#59<br/>run&#59<br/>proc freq data=UPC_index&#59 table fy upc&#59run&#59<br/><br/>*Merge the RHA info&#59<br/>proc sort data=rha_assign_1&#59by key_hsn fy&#59run&#59<br/>proc sort data=UPC_index&#59by key_hsn fy&#59run&#59<br/><br/>data phc.UPC_final&#59<br/>merge UPC_index(in=b) rha_assign_1(in=m)&#59<br/><br/>by key_hsn fy&#59<br/>if b&#59<br/>format rha_name $22.&#59<br/>if rha_index = '1' then rha_name = \"Sun Country\"&#59<br/>if rha_index = '2' then rha_name = \"Five Hills\"&#59<br/>if rha_index = '3' then rha_name = \"Cypress\"&#59<br/>if rha_index = '4' then rha_name = \"Regina Qu'Appelle\"&#59<br/>if rha_index = '5' then rha_name = \"Sunrise\"&#59<br/>if rha_index = '6' then rha_name = \"Saskatoon\"&#59<br/>if rha_index = '7' then rha_name = \"Heartland\"&#59<br/>if rha_index = '8' then rha_name = \"Kelsey Trail\"&#59<br/>if rha_index = '9' then rha_name = \"Prince Albert\"&#59<br/>if rha_index = '10' then rha_name = \"Prairie North\"&#59<br/>if rha_index = '11' or rha_index = '12' or rha_index = '13' then rha_name = \"Northern Sask\"&#59<br/>if rha_index = ''  then rha_name = \"Missing\"&#59<br/><br/>run&#59<br/>proc freq data=phc.UPC_final order=freq&#59 table rha_index rha_name fy UPC&#59 run&#59<br/><br/>* Important Note (Meric) Aug 6, 2015: Above dataset created and saved phc.UPC_final. Run below to report to PLT Wall Walk.<br/><br/>* UPC by RHA&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* UPC by SK&#59<br/>proc report data=phc.UPC_final missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc sql&#59<br/>create table asthma_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from asthma.master)&#59<br/>quit&#59*Jan2018-5498078,April17:557,990 /// January16:463,710 /// October15: 416,059 /// June15 run:338,082 /// March15 run:331,387 /// Dec14 run:270,372 /// Aug14 run:232,809&#59<br/><br/><br/>* Asthma UPC by RHA&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Asthma  UPC by SK&#59<br/>proc report data=asthma_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc sql&#59<br/>create table CAD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CAD.CAD)&#59<br/>quit&#59* April17:461,757 /// January16: 392,945 ///October15: 358,176 /// June15 run:313,105 /// March15 run:310,737 // Dec14 run:251,777 -Aug14 run:243,896&#59<br/><br/>* CAD UPC by RHA&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CAD  UPC by SK&#59<br/>proc report data=CAD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc sql&#59<br/>create table CHF_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from CHF.CHF)&#59<br/>quit&#59*April17:305,696 /// January16: 261,091 /// October15: 237,316  /// June15 run:200,287 /// March15 run:199,151// Dec14 run:163,569 - Aug14 run:159,443&#59<br/><br/>* CHF UPC by RHA&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* CHF  UPC by SK&#59<br/>proc report data=CHF_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc sql&#59<br/>create table COPD_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from COPD.COPD)&#59<br/>quit&#59*April17:396,216 /// January16: 330,876 /// October15: 295,995 /// June15 run:249,655 /// March15 run:247,427 // Dec14 run:200,578 - Aug14 run:194,410&#59<br/><br/>* COPD UPC by RHA&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* COPD UPC by SK&#59<br/>proc report data=COPD_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc sql&#59<br/>create table DM_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from DM.DM)&#59<br/>quit&#59*April17:593,552 /// January16: 497,721 /// October15: 448,050 ///June15 run:382,400 /// March15 run:379,076 // Dec14 run:305,827 -Aug14 run:295,604&#59<br/><br/>* DM UPC by RHA&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* DM UPC by SK&#59<br/>proc report data=DM_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>* 6.Mood&#59<br/>proc sql&#59<br/>create table Mood_UPC as select * from phc.UPC_final<br/>where key_hsn in<br/>(select key_hsn from Mood.Mood)&#59<br/>quit&#59*April17: 1,000,000+ /// *January16: 1,872,423 /// October15: 1,690,695 /// June15 run:1,495,170 /// March15 run:1,469,429 // Dec14 run:1,196,115 - Aug14 run:1,092,251&#59<br/><br/>* Mood UPC by RHA&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy rha_name UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define rha_name&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/>* Mood UPC by SK&#59<br/>proc report data=Mood_UPC missing&#59 <br/>column fy UPC,(n mean)&#59<br/>define fy &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ group&#59<br/>define UPC&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/ analysis&#59<br/>run&#59<br/><br/><br/>**********************************************************************************<br/>**********************************************************************************<br/>**********************************************************************************<br/><br/>/* DATA PREPERATION FOR QIO */<br/><br/>* UPC by RHA&#59<br/>proc means data=phc.UPC_final&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=whole_pop_rha mean=result_connected&#59 run&#59<br/><br/>data whole_pop_rha_1&#59 set whole_pop_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>* ACSC Drilldown&#59<br/><br/>* 1.Asthma&#59<br/>proc means data=asthma_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=asthma_rha mean=result_connected&#59 run&#59<br/><br/>data asthma_rha_1&#59 set asthma_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"asthma\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 2.CAD&#59<br/>proc means data=cad_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=cad_rha mean=result_connected&#59 run&#59<br/><br/>data cad_rha_1&#59 set cad_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"cad\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 3.CHF&#59<br/>proc means data=chf_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=chf_rha mean=result_connected&#59 run&#59<br/><br/>data chf_rha_1&#59 set chf_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"chf\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 4.COPD&#59<br/>proc means data=copd_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=copd_rha mean=result_connected&#59 run&#59<br/><br/>data copd_rha_1&#59 set copd_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"copd\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/><br/>* 5.DM&#59<br/>proc means data=dm_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=dm_rha mean=result_connected&#59 run&#59<br/><br/>data dm_rha_1&#59 set dm_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"dm\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/> <br/><br/>* 6.Mood&#59<br/>proc means data=mood_UPC&#59<br/>class fy rha_name&#59<br/>var upc&#59<br/>output out=mood_rha mean=result_connected&#59 run&#59<br/><br/>data mood_rha_1&#59 set mood_rha&#59<br/>if fy = \"\" then delete&#59<br/>if rha_name = \"\" then rha_name=\"sk\"&#59<br/>format tag1 $char12.&#59<br/>tag1 = \"mood\"&#59<br/>drop _type_ _freq_&#59<br/>run&#59<br/><br/>*Combine all databases&#59<br/><br/>data phc.qio_connectedness&#59 retain date result_connected rha_name tag1&#59 set whole_pop_rha_1 &#59*asthma_rha_1 cad_rha_1 chf_rha_1 copd_rha_1 dm_rha_1 mood_rha_1<br/><br/>if rha_name = \"Cypress\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"chr\"&#59<br/>if rha_name = \"Sun Country\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"schr\"&#59<br/>if rha_name = \"Five Hills\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"fhhr\"&#59<br/>if rha_name = \"Regina Qu'Appelle\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"rqhr\"&#59<br/>if rha_name = \"Sunrise\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"sunhr\"&#59<br/>if rha_name = \"Saskatoon\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"shr\"&#59<br/>if rha_name = \"Heartland\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"hhr\"&#59<br/>if rha_name = \"Kelsey Trail\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"kthr\"&#59<br/>if rha_name = \"Prince Albert\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"paphr\"&#59<br/>if rha_name = \"Prairie North\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"pnhr\"&#59<br/>if rha_name = \"Northern Sask\" &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen rha_name = \"northern\"&#59<br/><br/>if rha_name = \"Missing\" then delete&#59<br/><br/>rename rha_name = tag&#59<br/><br/>if fy = \"FY2010/11\" then date = \"20100630\"&#59<br/>if fy = \"FY2011/12\" then date = \"20110630\"&#59<br/>if fy = \"FY2012/13\" then date = \"20120630\"&#59<br/>if fy = \"FY2013/14\" then date = \"20130630\"&#59<br/>if fy = \"FY2014/15\" then date = \"20140630\"&#59<br/>if fy = \"FY2015/16\" then date = \"20150630\"&#59<br/>if fy = \"FY2016/17\" then date = \"20160630\"&#59<br/>if fy = \"FY2017/18\" then date = \"20170630\"&#59<br/>drop fy&#59<br/><br/>run&#59<br/>proc freq data=phc.qio_connectedness&#59 table tag tag1 date&#59run&#59<br/><br/><br/><br/>/*UPC taxonomy*/<br/>data taxupc&#59<br/>infile datalines truncover&#59<br/>length date $45. rate $45. region $45. acsc $45.&#59<br/>input date rate region acsc&#59<br/>datalines&#59<br/>number-of-data-columns duration tag tag . . . . . . <br/>1 fiscal-year connected-phys smarter . . . . . . <br/>date  result-connected-phys|percentage tag tag<br/>&#59 <br/>run&#59<br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/><br/>data phc.upc_apr17&#59<br/>set taxupc qio_connectedness &#59<br/>run&#59<br/><br/><br/><br/>data qio_connectedness &#59<br/>retain date rate region acsc&#59<br/>set phc.qio_connectedness &#59<br/><br/>*rename result_connected=rate&#59<br/>rename tag=region&#59<br/>rename tag1=acsc&#59<br/>rate=trim (left (put(result_connected, 12.2)))&#59<br/>drop result_connected&#59<br/><br/> <br/>run&#59<br/>proc sort data=qio_connectedness&#59 by  date region&#59<br/>run&#59<br/>proc transpose data=qio_connectedness out=moh&#59<br/>by date region&#59<br/>var acsc rate&#59<br/>run&#59<br/> <br/>data moh1&#59<br/>set moh&#59<br/>drop _name_&#59<br/>rename col2=asthma&#59<br/>rename col3=cad&#59<br/>rename col4=chf&#59<br/>rename col5=copd&#59<br/>rename col6=dm&#59<br/>rename col7=mood&#59<br/>if col1=. then delete&#59<br/>rename col1=all&#59<br/>run&#59<br/><br/><br/><br/>/* -------------------------------------------------------------------<br/>   Code generated by SAS Task<br/><br/>   Generated on: Thursday, January 21, 2016 at 11:23:17 AM<br/>   By task: List Data1<br/><br/>   Input Data: WORK.MOH1<br/>   Server:  Local<br/>   ------------------------------------------------------------------- */<br/><br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>/* -------------------------------------------------------------------<br/>   Sort data set WORK.MOH1<br/>   ------------------------------------------------------------------- */<br/>PROC SORT<br/>&nbsp&nbsp&nbsp&nbspDATA=WORK.MOH1(FIRSTOBS=1  KEEP=date asthma cad chf copd dm mood all region)<br/>&nbsp&nbsp&nbsp&nbspOUT=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/>TITLE&#59<br/>TITLE1 \"Report Listing\"&#59<br/>FOOTNOTE&#59<br/>FOOTNOTE1 \"Generated by the SAS System (&_SASSERVERNAME, &SYSSCPL) on %TRIM(%QSYSFUNC(DATE(), NLDATE20.)) at %TRIM(%SYSFUNC(TIME(), TIMEAMPM12.))\"&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp style=sasweb file=\"/SAS_data/dw0/HQC_share/Beliz/continuity/oct2016/by_options.xls\" options(suppress_bylines='yes')&#59<br/>/* End of custom user code. */<br/><br/>PROC PRINT DATA=WORK.SORTTempTableSorted<br/>&nbsp&nbsp&nbsp&nbspOBS=\"Row number\"<br/>&nbsp&nbsp&nbsp&nbspLABEL<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspVAR date asthma cad chf copd dm mood all&#59<br/>&nbsp&nbsp&nbsp&nbspBY region&#59<br/>RUN&#59<br/><br/>/* Start of custom user code. */<br/>ods tagsets.excelxp close&#59<br/>/* End of custom user code. */<br/>/* -------------------------------------------------------------------<br/>   End of task code.<br/>   ------------------------------------------------------------------- */<br/>RUN&#59 QUIT&#59<br/>%_eg_conditional_dropds(WORK.SORTTempTableSorted)&#59<br/>TITLE&#59 FOOTNOTE&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"11fcd084-e85d-47fb-a0d9-8b41a6418b46","name":"Physician Pannel code","NodeDescription":"///t<br/>///s<br/>/*from<br/>P:\\2018 - Physician Panel Reports\\SAS code\\1. Patient Allocation to Physician Panels(Alberta Health).sas*/<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>/*vaheguru ji   Extract MSB data*/<br/>%include '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/coverage_days.sas'&#59<br/>libname ppr '/SAS_data/dw0/HQC_share/nsidhu/PPR/data_MS'&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp<br/>%Extract_MSB(xtrc_start_dt='31Mar2012'd,<br/>                   xtrc_end_dt='26Mar2018'd, <br/>                   excl_xtrc_dt=, <br/>                   ds_out=temp_msb, <br/>                   ds_out_hsn_only=, <br/>                   hsn_list=, <br/>                   hsn_file=, <br/>                   MDnumber=, <br/>                   diagcode=, <br/>&nbsp&nbsp&nbsp&nbsp       diag_file=, <br/>                   dostart='01Apr2013'd, <br/>                   dosend='31Mar2018'd, <br/>                   fscode=, <br/>                   loscode=, <br/>                   othercondition=, <br/>                   othernumber=, <br/>                   kept_vars=KEY_HSN KEY_DOC_NUM SPEC MG DIAG FSC NUM_SRV LOS CONTACTS AMT_APP MODE, <br/>                   debug=N)&#59&nbsp&nbsp&nbsp&nbsp<br/>data ppr.temp_msb1&#59<br/>set temp_msb&#59<br/>SPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>if SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>run&#59<br/><br/>/*<br/>Quality Checks: Check below for the chosen 4 physicians, <br/>Proc freq variable SPEC and LOS<br/>Check the earliest dos_1 for each of 4 physicians<br/>Extract the data of these 4 physicians from the physician mobility file to check the practice start dates<br/>*/<br/>proc freq data=ppr.temp_msb1&#59<br/>table spec los&#59<br/>run&#59<br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>set ppr.temp_msb1&#59<br/>/*<br/>if key_doc_num in ('51925304676' '42925324679' '27925304675' '63825354679' '05825374675' '73925324675') <br/>then key_doc_num='00123456789'&#59<br/>*/<br/><br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B') then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/>proc freq data=temp_msb2&#59<br/>tables spec&#59 run&#59<br/>/*Step 4 removing same day, same doctor visits: <br/>NOTE: There were 32003786 observations read from the data set WORK.TEMP_MSB2.<br/>NOTE: 5942281 observations with duplicate key values were deleted.<br/>NOTE: The data set PPR.TEMP_MSB2 has 26061505 observations and 14 variables.<br/>*/<br/>data ppr.temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=ppr.temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=ppr.temp_msb1x out=ppr.temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/>/*<br/>NOTE: There were 26061505 observations read from the data set PPR.TEMP_MSB2.<br/>NOTE: The data set WORK.TEMP_MSB_3YEAR has 15783671 observations and 14 variables.<br/>*/<br/>data temp_msb_3year&#59<br/>set ppr.temp_msb2&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/>run&#59<br/><br/><br/>/*checking coverage on Mar 31, 2018*/<br/>data temp_msb_3year&#59<br/>set temp_msb_3year&#59<br/>cover_dt1='1Dec2017'd&#59<br/>cover_dt='31Dec2017'd&#59 /*change these dates to 31Mar 2018 when data comes*/<br/>format cover_dt date9. cover_dt1 date9.&#59<br/>run&#59<br/><br/>%coverage_days(xtrc_dt='02JAN2018'd,<br/>&nbsp&nbsp&nbsp&nbspds_in=temp_msb_3year,<br/>&nbsp&nbsp&nbsp&nbspds_out=temp_msb_3year_covered, <br/>&nbsp&nbsp&nbsp&nbspstrt_dt_var=cover_dt,      <br/>&nbsp&nbsp&nbsp&nbspend_dt_var=cover_dt,<br/>&nbsp&nbsp&nbsp&nbspdef_strt_dt=07DEC1994,<br/>&nbsp&nbsp&nbsp&nbspdef_end_dt=&sysdate9,<br/>&nbsp&nbsp&nbsp&nbspcvrg_strt_dt_var=eff_date,<br/>&nbsp&nbsp&nbsp&nbspcvrg_end_dt_var=exp_date)&#59<br/>proc freq data=temp_msb_3year_covered&#59<br/>table cvgdays&#59<br/>run&#59<br/>/*keeping if covered on last day of month*/<br/>data temp_msb_3yearx&#59<br/>set temp_msb_3year_covered&#59<br/>if cvgdays=1&#59<br/>run&#59<br/><br/>proc sort data=temp_msb_3yearx out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/>proc sql noprint&#59 <br/>create table temp_msb_3year1 as <br/>select *, count(dos_1) as total_visits3<br/>from temp_msb_3yearx<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_3year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/>proc freq data=checkz&#59table total_visits3&#59run&#59<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_3year2 as <br/>select *, count(dos_1) as total_visits_phy3<br/>from temp_msb_3year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data ppr.visits_by_phy_3year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3&#59<br/>set temp_msb_3year2&#59<br/>upc3=(total_visits_phy3/total_visits3)*100&#59<br/>format upc3 6.2&#59<br/>run&#59<br/>proc sort data=ppr.visits_by_phy_3year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>/*Single provider*/<br/>data sole_visits ppr.after_sole_visits&#59/*sole=921798 1061676+rest left out=14861873=Total of 15783671*/<br/>set ppr.visits_by_phy_3year&#59<br/>if upc3=100 then output sole_visits&#59<br/>else output ppr.after_sole_visits&#59<br/>run&#59<br/>proc sort data=sole_visits&#59/*sorting this way? Idea is to keep the last visit date*/<br/>by key_hsn descending dos_1 key_doc_num&#59 <br/>run&#59<br/>proc sort data=sole_visits nodupkey out=ppr.sole_visits&#59/*729502 accounting for 921798 visits*/<br/>by key_hsn key_doc_num&#59 <br/>run&#59<br/>data ppr.sole_visits&#59<br/>set ppr.sole_visits&#59<br/>step=1&#59<br/>run&#59<br/><br/>/*192296 individuals keys are alloted physician based on sole provider*/<br/>proc sort data=ppr.sole_visits out=check1 nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*14861873 observations (or 938099 unique individuals) has to allocated doctor based on criteria below*/<br/>proc sort data=ppr.after_sole_visits out=check nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/>/*<br/>2. Majority Provider&#59 <br/>3. if tie then PHYSICAL EXAM(3B), CDM(64B), SUPPORTIVE CARE(52B), WELL BABY(4B) takes prority&#59<br/>4. if no physical then date of service takes priority<br/>*/  <br/>data after_sole_visitsx&#59<br/>retain key_hsn upc3 FSC physical_flag dos_1 key_doc_num&#59<br/>set ppr.after_sole_visits&#59<br/>/*if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59*/<br/>run&#59<br/>proc freq data=after_sole_visitsx&#59 tables physical_flag&#59 run&#59<br/>proc sort data=after_sole_visitsx&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=after_sole_visitsx out=after_sole_visitsxz nodupkey&#59 /*904902 accounting for 14084916 visits*/<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*to add which step contributed, i changed code as under and we get same result*/<br/>/*Here starts setp 2*/<br/>proc sort data=after_sole_visitsx out=step2A nodupkey&#59<br/>by key_hsn upc3 key_doc_num&#59<br/>run&#59<br/>proc sort data=step2A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step2B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step2A point=_n_&#59<br/>leadupc3=upc3&#59<br/>end&#59<br/>set step2A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadupc3=.&#59<br/>run&#59<br/>data step2C&#59<br/>set step2B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadupc3=.&#59<br/>end&#59<br/>run&#59<br/>data step2D&#59<br/>set step2C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if upc3 GT leadupc3 then step=2&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step2D&#59<br/>tables step&#59<br/>run&#59<br/>data step2E&#59/*741493 unique people got alloted in step 2*/<br/>set step2D&#59<br/>if step=2&#59<br/>run&#59<br/>proc sort data=step2E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]},{"idx":"48530000-ea00-439b-9f71-0c8ebb8be0e5","name":"_0A ProjectRootPath","NodeDescription":"///t<br/>///s<br/>/*Get path of the current EG project file*/<br/><br/>%global thisProjectRootPath ThisEGPPath&#59<br/><br/>/*the following is put in a macro so that all the vars can be set as local*/<br/>%macro defineProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local RevEGPPath SearchSeg RevSearchSegPosition StartPosOftheRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLengthRevEGPPath theRevProjectRootPathLength theRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &ThisEGPPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*to reversely search and find the root folder<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFor example, the EGPPath is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\SAS code\\DataCreation_Project4_20190514.egp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe project root path is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., the sub string before '\\SAS code\\'.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that  '\\SAS code\\' appears twice in the EGPPath, the expected root path is before the last incidence of 'SAS code\\'. <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe following is a clumpsy way of doing it, but it works.<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. Make a reverse string of the EGPPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppge.41509102_4tcejorP_noitaerCataD\\edoc SAS\\133_51oiB_\\edoc SAS\\)narakaslAL(4tcejorP\\narkaSlAaniL\\srehcraeser_evitaroballoC\\:S<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevEGPPath =%sysfunc(reverse(&ThisEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevEGPPath&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The string segment to search is '\\SAS code\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphowever, in the revered EGPPath by step 1, the segment to search should also be reversed:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso it is like '\\edoc SAS\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let SearchSeg=\\SAS code\\&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSeg=%sysfunc(reverse(&SearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSeg&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. In the reversed EGPPath, search the first position of the reversed search segment<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSegPosition = %index(%nrbquote(&RevEGPPath), %nrbquote(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSegPosition&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. Determine the start position of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe position of the reversed search segment ('\\edoc SAS\\') is obtained in &RevSearchSegPosition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe reversed search segment ('\\edoc SAS\\') has a length of %length(&RevSearchSeg).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTherefore the start position of the target sub string is:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&RevSearchSegPosition + %length(&RevSearchSeg) .<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let StartPosOftheRevProjectRootPath = %eval(&RevSearchSegPosition + %length(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &StartPosOftheRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*5. Determine the length of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt should be the length of (&RevEGPPath) -  &StartPosOftheRevProjectRootPath +1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LengthRevEGPPath=%length(%nrbquote(&RevEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &LengthRevEGPPath &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPathLength = %eval(&LengthRevEGPPath -  &StartPosOftheRevProjectRootPath+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRevProjectRootPathLength&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*6. Get the substr from the reversed EGPPath, after the start position<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) such string is the reversed Project Root Path.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPath = %substr(%nrbquote(&RevEGPPath), &StartPosOftheRevProjectRootPath, &theRevProjectRootPathLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>&theRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*7. finally, Reverse the reversed project root path again. This time, the project root path is obtained!*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thisProjectRootPath = %sysfunc(reverse(%nrbquote(&theRevProjectRootPath)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &thisProjectRootPath&#59<br/><br/>%mend defineProjectRootPath&#59<br/>%defineProjectRootPath&#59<br/>s///<br/>t///","children":[{"idx":"f4f84569-2e7d-440a-9a32-c2973b66d248","name":"_0B Local Settings","NodeDescription":"///t<br/>///s<br/>/*include macro tools in drive S<br/>&nbsp&nbsp&nbsp&nbsp/LRECL to allow the length of a statement line to be 32767 bytes instead of the default 256<br/>*/<br/><br/>/*set global variables*/<br/>%global <br/>/*the new cohort creation sas tools*/<br/>&nbsp&nbsp&nbsp&nbspnccSASTools<br/>/*a local folder allowing data exchange between local and remote server*/<br/>&nbsp&nbsp&nbsp&nbspexchangeDir<br/>/*the xlsx file with project settings (i.e., InputForm.xlsm)*/<br/>&nbsp&nbsp&nbsp&nbspsettingsXls<br/>/*the xlsx file on R drive with hospital information*/<br/>&nbsp&nbsp&nbsp&nbsph_Infoxls <br/>/*the path including reports at local*/<br/>&nbsp&nbsp&nbsp&nbsplocalReportPath<br/>/*the xlsx file2 with data reports*/<br/>&nbsp&nbsp&nbsp&nbspAnalyticalReport <br/>&nbsp&nbsp&nbsp&nbspDataReport <br/>/*the xlsx file as the database dictionary*/<br/>&nbsp&nbsp&nbsp&nbspdicXls<br/>/* the folder on remote server containing common tool files for new cohort creation*/<br/>&nbsp&nbsp&nbsp&nbspremoteToolsPath<br/>&#59<br/><br/>/*including the sas macros for new cohort creation*/<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/>libname LCommon \"P:\\02 New project data creation\\CommonExchange\"&#59<br/><br/><br/>/*make a local folder for exchange between local and remote servers*/<br/>%let exchangeDir = &thisProjectRootPath.\\Data\\Exchange_Local_Remote&#59<br/>%put exchangeDir = &exchangeDir&#59<br/>/*check if such exchangeDir exists, if not, create it*/<br/>%macro mkExchangeDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &exchangeDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%local dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&exchangeDir))&#59 <br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&dirExist) = 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir \"&exchangeDir\"&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend mkExchangeDir&#59<br/>%mkExchangeDir&#59<br/><br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>/*the xlsx file with import information, such file is named as:*/<br/>%let settingsXls =&thisProjectRootPath.\\Input\\Forms\\InputForm.xlsm&#59<br/>%let h_Infoxls = %str(R:\\Data Warehouse\\Data Manuals\\Hospital %(CIHI DAD%)\\cihi_hosps_master_file.xlsx)&#59<br/><br/>/*the report in local drive S*/<br/>%let localReportPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Reports&#59<br/>/*libname localR \"&localReportPath\"&#59*/<br/>%let AnalyticalReport=Analytical Report.xlsx&#59<br/>%let DataReport=DataSum_Report.xlsx&#59<br/><br/>/*The following steps are to import file and var description in the data dictionary *******/<br/>%let dicXls = S:\\Reference\\Data Warehouse\\Data Manuals\\General Information\\HQC_MOH_DW_data_dictionary.xlsx&#59<br/><br/>/* the folder on remote server containing common tool files for new cohort creation*/<br/>%let remoteToolsPath = /sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools&#59<br/><br/>/*In the log file, display the physical location of the work directory*/<br/>%put >>> the local work directory is at %sysfunc(pathname(work))&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"a9735957-f809-4dbf-ae06-48274912fa37","name":"Copy Macro file to Remote Server - Copy","children":[{"idx":"bcfd45fe-4a14-4bfb-98b8-f5375d0712bc","name":"A_import settings - Copy","NodeDescription":"///t<br/>///s<br/>/*Import settings from the setting xls file (&settingXls)*/<br/><br/>data _null_&#59run&#59<br/><br/>%global  theMasterInputFile<br/>localParentFolder localDataFolder localReportFolder localTargetPath localDataPath localReportPath<br/>RemoteParentFolder RemoteSourcePath DataStartDate DataEndDate&#59<br/><br/>Filename setXls \"&settingsXls\"&#59<br/>%put >>> &settingsXls&#59<br/><br/>/*create a folder dedicated for the project (by rem id?)*/<br/>/*copy a back up of the setting xls file in the log directory*/<br/>/*add a file for log (create date, etc)*/<br/><br/>/*1.Import dates*/<br/>/*always create an empty data set first<br/>&nbsp&nbsp&nbsp&nbspotherwise, when the source excel table contains 0 records, the import proc won't run,<br/>&nbsp&nbsp&nbsp&nbspthe setting file won't be created<br/>&nbsp&nbsp&nbsp&nbsplater, no files were copied to the remote site to overwrite the old files<br/>&nbsp&nbsp&nbsp&nbspAs such, the old setting files will be used in getting data, which is wrong <br/>*/<br/>/*data translib.a1_MasterInput&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Items $100. Values $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import does not work, when the file is xlsm, the SAS is 64 bit, while the excel is 32 bit, and the PC file server is not installed or not properly installed<br/>&nbsp&nbsp&nbsp&nbspIn that case, use libname instead of DBMS works!<br/>*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a1_MasterInput*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"MasterInput\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=MasterInput,<br/> target= translib.a1_MasterInput,<br/> where=,<br/> keep = ,<br/> format=%str( Items $100. Value $100.)<br/>)&#59<br/><br/><br/><br/>/*Save an additional copy of a1<br/>This file should be uploaded to remote server into a common area in the first place.<br/>From this file, we can create the project parent folder on remote site, and create sub folders for data exchange, source, <br/>and target.<br/>*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'ProjectName'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('thisProjectName', Value)&#59<br/>run&#59<br/><br/><br/>/*Such file has to be named using a variable that is commonly recognized by both local and remote programs<br/>&nbsp&nbsp&nbsp&nbspAt this monment all project specific varaibles have not been defined yet on remote side.<br/>&nbsp&nbsp&nbsp&nbspThe clientprojectname is a nice one, as it can be recognized by both local and remote programs.<br/>*/<br/>%let thisProjectName=%lowcase(%sysfunc(dequote(&_clientprojectname)))&#59<br/>/*remove '.egp'*/<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, .egp, ))&#59<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, datacreation, ))&#59<br/>%let thisProjectName=%substr(&thisProjectName, 1, 29)&#59<br/>%put >>> &thisProjectName&#59<br/>/*This file has to be saved in the common folder (the Common exchange folder)<br/>&nbsp&nbsp&nbsp&nbspIt cannot be saved in a project specific folder, as at remote side, the project specific variables are not defined yet<br/>*/<br/>%let theMasterInputFile=a1_&thisProjectName &#59<br/>data LCommon.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Determine the local data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/><br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> &localTargetPath&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59 /*the folder to save requested raw data files*/<br/>libname localT \"&localTargetPath\"&#59<br/>%put >>> &localDataPath&#59<br/>/*the report in local drive S*/<br/>%let localReportPath=&localParentFolder.\\Output\\Reports&#59<br/>%put >>> &localReportPath&#59<br/>libname localR \"&localReportPath\"&#59<br/><br/><br/>/*2.Import the sourcefiles and fields*/<br/>data translib.A2_CohortDataVars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>/*proc import library=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.A2_CohortDataVars (*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=(Final_status=1) */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep= final_status file_nick_name VarName_in_Raw_File*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"StudyFields\"&#59*/<br/>/*run&#59*/<br/><br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=StudyFields,<br/> target= translib.A2_CohortDataVars,<br/> where=%str(Final_status gt 0),<br/> keep = final_status file_nick_name VarName_in_Raw_File,<br/> format=%str( final_status 8. file_nick_name $100. VarName_in_Raw_File $100.)<br/>)&#59<br/><br/><br/><br/>/*3 import the case def ICD code list*/<br/>/*data translib.a3_ICDDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a3_ICDDx (where=(code ne \"\") keep= Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"ICD_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=ICD_Codes,<br/> target= translib.a3_ICDDx,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/>%print(data=translib.a3_ICDDx)&#59<br/><br/>/*4 import the case def procedure code list*/<br/>/*data translib.a4_IntvnDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a4_IntvnDx (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"Procedure_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=Procedure_Codes,<br/> target= translib.a4_IntvnDx,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/><br/>%print(data=translib.a4_IntvnDx)&#59<br/><br/>/*5 import the case def SK fee for service code list*/<br/>/*data translib.a5_FSC&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a5_FSC (where=(code ne \"\") keep=Source_file Code_Version Code Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"SK_fee_Codes\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=SK_fee_Codes,<br/> target=translib.a5_FSC,<br/> where=%str(code ne \"\"),<br/> keep = Source_file Code_Version Code Disease Description ,<br/> format=%str(Source_file $100. Code_Version $100. Code $100. Disease $100. Description $100.)<br/>)&#59<br/><br/>%print(data=translib.a5_FSC)&#59<br/><br/>/*6 import the case def DINPIN list*/<br/>/*data translib.a6_DINDx&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Therapeutic_Class $100. Generic_Name $100. DIN $100. Disease $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a6_DINDx (where=(DIN ne \"\") keep=Therapeutic_Class Generic_Name DIN Disease Description)*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"DINs\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=DINs,<br/> target=translib.a6_DINDx,<br/> where=%str(DIN ne \"\"),<br/> keep = Therapeutic_Class Generic_Name DIN Disease Description ,<br/> format=%str(Therapeutic_Class $100. Generic_Name $100. DIN $100. Disease $100. Description $100.)<br/>)&#59<br/>%print(data=translib.a6_DINDx)&#59<br/><br/>/*7 import the list of source files for case definition*/<br/>/*data translib.a7_DxFile&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat DxFiles $100. Inclusion 8.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a7_DxFile (where=(Inclusion =1) )*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"DxFiles\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=DxFile,<br/> target=translib.a7_DxFiles,<br/> where=%str(Inclusion =1),<br/> keep =  ,<br/> format=%str(DxFiles $100. Inclusion 8.)<br/>)&#59<br/><br/>%print(data=translib.a7_DxFiles)&#59<br/><br/><br/>/*8 import the list of additional request*/<br/>/*data translib.a8_AddRequest&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Class $100. Description $100. SourceData $100. Syntax $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a8_AddRequest  (where=(syntax ne '') )*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"Additional request\"&#59*/<br/>/*run&#59*/<br/><br/><br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=Additional_request,<br/> target=translib.a8_AddRequest,<br/> where=%str(syntax ne ''),<br/> keep =  ,<br/> format=%str(Class $100. Description $100. SourceData $100. Syntax $100.),<br/> debug=<br/>)&#59<br/><br/>%print(data=translib.a8_AddRequest)&#59<br/><br/>/*9 import cohort exclusion criteria*/<br/>/*data translib.a9_CohortExclusion&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat Source $100. Criteria $100. Syntax $100. Description $100.&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=translib.a9_CohortExclusion*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"cohort_exclusion\"&#59*/<br/>/*run&#59*/<br/>%myImportXls(<br/> srcFile= &settingsXls,<br/> sheet=cohort_exclusion,<br/> target=translib.a9_CohortExclusion,<br/> where=,<br/> keep =  ,<br/> format=%str(Source $100. Criteria $100. Syntax $100. Description $100.),<br/> debug=<br/>)&#59<br/><br/>%print(data=translib.a9_CohortExclusion)&#59<br/><br/>%put >>> &h_Infoxls&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the source xls file is open by other users, the import program may report error<br/>&nbsp&nbsp&nbsp&nbspin that case, open the Excel application (do not have to open the source xls file, just the Excel App), <br/>&nbsp&nbsp&nbsp&nbspthen run the following import program<br/>*/<br/>/*10 import hospital info*/<br/><br/><br/>proc import datafile=\"&h_Infoxls\"<br/>&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbspout=translib.a10_hospInfo<br/>&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>getnames=yes&#59<br/>sheet=\"facilities\"&#59<br/>run&#59<br/>%print(data=translib.a10_hospInfo)&#59<br/><br/>%put &dicXls&#59<br/>/*import ed data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp1  /*if required by HQC*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"ed (NACRS)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp1)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_ed_a2012'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp1 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf6=strip(upcase(f6))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf7=strip(upcase(f7))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f6='' and f7 ='' and f10 ='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import hospital data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp11<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Hosp (DAD)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp11)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp12&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_hosp'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp11 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf5=strip(upcase(f5))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf14=strip(upcase(f14))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf15=strip(upcase(f15))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf16=strip(upcase(f16))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f15&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f14&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f16&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f5='' and f14 ='' and f15 ='' and f16='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import phrs data description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp21<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"PHRS\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp21)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp22&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_phrs_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp21 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/>&nbsp&nbsp&nbsp&nbsp<br/>/*import drug claim variable description*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp31<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Drug plan\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp31)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp32&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_dp_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp31 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb billing variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp41<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Claims (MSB)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp41)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp42&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp41 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/*import description of msb mobility doc info variables*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp51<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Phys Mobility (MSB docs)\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'master_msb'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp51 (firstOBS=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf11=strip(upcase(f11))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f11 ='' and f10='')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*create an emtpy data set for var description*/<br/>&nbsp&nbsp&nbsp&nbspData importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Append  descriptions from source data files*/<br/>&nbsp&nbsp&nbsp&nbspdata importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91 importDIc_tmp2 importDIc_tmp12 importDIc_tmp22 importDIc_tmp32 importDIc_tmp42 importDIc_tmp52&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp91&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(varname, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then varname =substr(varname, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>/*Determine the remote data/target/reports folder*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59<br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> RemoteParentFolder = &RemoteParentFolder&#59<br/>%let RemoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>>RemoteSourcePath= &RemoteSourcePath&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*import data from MDS LTC (MDS_ASSESSMENT_F_2015)  <br/>&nbsp&nbsp&nbsp&nbspfor diagnoses (if in DXFiles, long_term_care =1), <br/>&nbsp&nbsp&nbsp&nbspit is not to get any dxlist (not like the ICD list, etc), rather it is go run a specific macro so as to get the study patients.<br/>&nbsp&nbsp&nbsp&nbspe.g., to have dementia patients by running specific macros,<br/>&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbspto have all who admitted into LTC within a certain period of time (like the Frailty-HRPIM study)<br/><br/>&nbsp&nbsp&nbsp&nbspfor MDS_LTC data requested for a cohort, the fields are from two sources:<br/>&nbsp&nbsp&nbsp&nbsp1) by default, get key_hsn, create_date,  MDS_AB1, AB1b, A3, and R4, these fields has been specified in A2_CohortDataVars<br/>&nbsp&nbsp&nbsp&nbsp2) fields specified in sheet 'vars_MDS_LTC'<br/><br/>&nbsp&nbsp&nbsp&nbspNote that the two sources may have overlapping vars&#59 therefore they are putting together to have a list of distinct vars.<br/>&nbsp&nbsp&nbsp&nbspThe distinct vars are then added to A2_CohortDataVars<br/>*/<br/>/*21 import data vars from sheet 'vars_mds_ltc' LTC file*/<br/>data translib.a2_vars&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status $100. file_nick_name $100. VarName_in_Raw_File $100.&#59<br/>&nbsp&nbsp&nbsp&nbspdelete&#59<br/>run&#59<br/>%print(data=translib.a2_cohortdatavars)&#59<br/>/*data importDIc_tmp201&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspformat variable $100.  &#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete&#59*/<br/>/*run&#59*/<br/>/*proc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbspout=importDIc_tmp201 (keep=variable where=(variable ne ''))*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*getnames=yes&#59*/<br/>/*sheet=\"vars_MDS_LTC\"&#59*/<br/>/*run&#59*/<br/><br/>%myImportXls(<br/>&nbsp&nbsp&nbsp&nbsp srcFile= &settingsXls,<br/>&nbsp&nbsp&nbsp&nbsp sheet=vars_MDS_LTC,<br/>&nbsp&nbsp&nbsp&nbsp target=importDIc_tmp201,<br/>&nbsp&nbsp&nbsp&nbsp where=%str(variable ne ''),<br/>&nbsp&nbsp&nbsp&nbsp keep =variable  ,<br/>&nbsp&nbsp&nbsp&nbsp format=%str(variable $100. )<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>data importDIc_tmp202&#59<br/>&nbsp&nbsp&nbsp&nbspformat final_status 8. file_nick_name $100. &#59<br/>&nbsp&nbsp&nbsp&nbspset importDIc_tmp201&#59<br/>&nbsp&nbsp&nbsp&nbsprename variable = VarName_in_Raw_File&#59<br/>&nbsp&nbsp&nbsp&nbspfinal_status =1&#59<br/>&nbsp&nbsp&nbsp&nbspfile_nick_name='mds_ltc'&#59<br/>run&#59<br/>/*get ltc vars already input into a2 from sheet 'StudyFields'*/<br/>data importDIc_tmp203&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspif file_nick_name='mds_ltc' &#59<br/>run&#59<br/><br/>/*from _tmp202, remove those already appeared in _tmp203*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=importDIc_tmp202,<br/>&nbsp&nbsp&nbsp&nbsptarget=importDIc_tmp204,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(VarName_in_Raw_File not in (select  VarName_in_Raw_File from importDIc_tmp203))<br/>)&#59<br/><br/>/*attach vars in _tmp202 to a2*/<br/>data translib.a2_cohortdatavars&#59<br/>&nbsp&nbsp&nbsp&nbspset translib.a2_cohortdatavars &nbsp&nbsp&nbsp&nbspimportDIc_tmp204&#59<br/>&nbsp&nbsp&nbsp&nbspVarName_in_Raw_File=upcase(strip(VarName_in_Raw_File))&#59<br/>run&#59<br/>%sort(data =  translib.a2_cohortdatavars, sorter=file_nick_name VarName_in_Raw_File)&#59<br/><br/><br/>/*get dictionary for mds_ltc vars*/<br/>/*import description of variables from mds_ltc */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc import datafile=\"&dicXls\"<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=xlsx<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=importDIc_tmp205<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"MDS-LTC\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data=importDIc_tmp51)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat  filename $100. varname $100. description $10000. notes $10000. metadoc $20.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilename = 'mds_ltc'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp205 (firstOBS=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*strip: removing both leading and trailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptrim: removing tailing spaces<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompress removing all spaces (including those in the string)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf4=strip(upcase(f4))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf9=strip(upcase(f9))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf8=strip(upcase(f8))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspf10=strip(upcase(f10))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep filename varName description notes metadoc lagvar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*don't use rename, as the length f6-f8 is limited*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarName=f4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription=f9&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes=f8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc=f10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not (f4='' and f9 ='' and f8 ='' and f10='') &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename varName = variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For some of the vars, the description is in two rows. The var name appears in the first row, but not the second row<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat lagVar1 $100. lagDesc $1000. lagNote $1000. lagMeta $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagVar1 = lag(variable)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagdesc = lag(description)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplagNotes = lag(notes)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLagMeta = lag(metadoc)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif variable='' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvariable = lagVar1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdescription = strip(Lagdesc) || ' ' || description&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnotes = strip(lagNotes) || ' ' || notes&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmetadoc = strip(LagMeta) || ' ' || metadoc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=importDIc_tmp207, sorter=variable obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata importDIc_tmp208&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset importDIc_tmp207&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby variable obs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.variable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop obs lagVar1 lagdesc lagNotes lagMeta&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*for those like 'dx_code_1 to dx_code_25', truncate the var names before the first space<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspalso, for those like 'D000360,V1' in metadoc, truncate the string and keep the sub string before the first comma <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata translib.A11_DataVarDic&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset  translib.A11_DataVarDic importDIc_tmp206&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos1= index(variable, ' ')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos1 >0 then variable =substr(variable, 1, pos1-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos2= index(metadoc, ',')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos2 >0 then metadoc =substr(metadoc, 1, pos2-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppos3=index(metadoc, 'V')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif pos3 >0 then metadoc =substr(metadoc, 1, pos3-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop pos1 pos2 pos3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>/****************************************************************/<br/><br/>/**getting macro file (full path) and command lines for getting dx from MDS_LTC files**/<br/><br/>%macro getLTCMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*by default, always have a empty macro (for a later task, there has to be a file to be transferred)*/<br/>&nbsp&nbsp&nbsp&nbsp/*create an empty sas file. If A12 does not contain a real sas file, transfer the empty sas file*/<br/>&nbsp&nbsp&nbsp&nbspfilename EmpSAS \"&localDataPath.\\empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfile EmpSAS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspput &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbspproc import datafile=\"&settingsXls\"*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDBMS=excel*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspout=translib.a12_DxMDSLTC (where = (strip(theFile) ne ''))*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspreplace*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgetnames=yes&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsheet=\"Dx_MDS_LTC_Macro\"&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsprun&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp%myImportXls(<br/>&nbsp&nbsp&nbsp&nbsp srcFile= &settingsXls,<br/>&nbsp&nbsp&nbsp&nbsp sheet=Dx_MDS_LTC_Macro,<br/>&nbsp&nbsp&nbsp&nbsp target=translib.a12_DxMDSLTC,<br/>&nbsp&nbsp&nbsp&nbsp where=%str(strip(theFile) ne ''),<br/>&nbsp&nbsp&nbsp&nbsp keep =  ,<br/>&nbsp&nbsp&nbsp&nbsp format=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%nobs(data=translib.a12_DxMDSLTC)&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&nobs=0) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata translib.a12_DxMDSLTC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat thePath $1000. theFile $100. theLines $1000.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthePath = \"&localDataPath\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheFile =\"empty.sas\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend getLTCMacro&#59<br/>%getLTCMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete importDIc_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*************************************************************************************/<br/><br/><br/>s///<br/>t///","children":[{"idx":"bb759902-6c3d-4b2e-82e7-b07e9d7444f4","name":"_0C Define Master Input file on remote side","NodeDescription":"///t<br/>///s<br/>%global theMasterInputFile remoteToolsPath&#59<br/>%let remoteToolsPath = /sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools&#59<br/>%include \"&remoteToolsPath./tools_ncc.sas\" /LRECL=32767&#59<br/><br/>%let thisProjectName=%lowcase(%sysfunc(dequote(&_clientprojectname)))&#59<br/>/*remove '.egp'*/<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, .egp, ))&#59<br/>%let thisProjectName=%sysfunc(tranwrd(&thisProjectName, datacreation, ))&#59<br/>%let thisProjectName=%substr(&thisProjectName, 1, 29)&#59<br/><br/><br/>%let theMasterInputFile = a1_&thisProjectName.&#59<br/>%put >>> &theMasterInputFile&#59<br/><br/>%let remoteCommonExchange= \"\"&#59<br/><br/>/*Also need to let the remote site know the local project rootpath*/<br/><br/>%global thisProjectRootPath ThisEGPPath&#59<br/><br/>/*the following is put in a macro so that all the vars can be set as local*/<br/>%macro defineProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local RevEGPPath SearchSeg RevSearchSegPosition StartPosOftheRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLengthRevEGPPath theRevProjectRootPathLength theRevProjectRootPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &ThisEGPPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*to reversely search and find the root folder<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFor example, the EGPPath is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\SAS code\\DataCreation_Project4_20190514.egp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe project root path is <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspS:\\Collaborative_researchers\\LinaAlSakran\\Project4(LAlsakaran)\\SAS code\\_Bio15_331\\<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., the sub string before '\\SAS code\\'.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote that  '\\SAS code\\' appears twice in the EGPPath, the expected root path is before the last incidence of 'SAS code\\'. <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe following is a clumpsy way of doing it, but it works.<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. Make a reverse string of the EGPPath<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppge.41509102_4tcejorP_noitaerCataD\\edoc SAS\\133_51oiB_\\edoc SAS\\)narakaslAL(4tcejorP\\narkaSlAaniL\\srehcraeser_evitaroballoC\\:S<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevEGPPath =%sysfunc(reverse(&ThisEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevEGPPath&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The string segment to search is '\\SAS code\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphowever, in the revered EGPPath by step 1, the segment to search should also be reversed:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspso it is like '\\edoc SAS\\'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/ <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let SearchSeg=\\SAS code\\&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSeg=%sysfunc(reverse(&SearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSeg&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. In the reversed EGPPath, search the first position of the reversed search segment<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let RevSearchSegPosition = %index(%nrbquote(&RevEGPPath), %nrbquote(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &RevSearchSegPosition&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. Determine the start position of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe position of the reversed search segment ('\\edoc SAS\\') is obtained in &RevSearchSegPosition, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe reversed search segment ('\\edoc SAS\\') has a length of %length(&RevSearchSeg).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTherefore the start position of the target sub string is:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&RevSearchSegPosition + %length(&RevSearchSeg) .<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let StartPosOftheRevProjectRootPath = %eval(&RevSearchSegPosition + %length(&RevSearchSeg))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &StartPosOftheRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*5. Determine the length of the target sub string<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt should be the length of (&RevEGPPath) -  &StartPosOftheRevProjectRootPath +1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LengthRevEGPPath=%length(%nrbquote(&RevEGPPath))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &LengthRevEGPPath &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPathLength = %eval(&LengthRevEGPPath -  &StartPosOftheRevProjectRootPath+1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRevProjectRootPathLength&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*6. Get the substr from the reversed EGPPath, after the start position<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) such string is the reversed Project Root Path.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) use %nrbquote() instead of %str() so as to escape specail characters in the string. Otherwise SAS is not smart enough to carry on. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse %nrbquote instead of %quote to handle each single bracket. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theRevProjectRootPath = %substr(%nrbquote(&RevEGPPath), &StartPosOftheRevProjectRootPath, &theRevProjectRootPathLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>&theRevProjectRootPath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*7. finally, Reverse the reversed project root path again. This time, the project root path is obtained!*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thisProjectRootPath = %sysfunc(reverse(%nrbquote(&theRevProjectRootPath)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &thisProjectRootPath&#59<br/><br/>%mend defineProjectRootPath&#59<br/>%defineProjectRootPath&#59<br/>s///<br/>t///","children":[{"idx":"45d0156b-aaac-4e39-b506-0b58aa84a063","name":"0D_Copy masterInputfile to remote common folder","children":[{"idx":"dd0c6263-1af6-4e57-8075-2dc276ff024d","name":"Remote settings - Copy","NodeDescription":"///t<br/>///s<br/>/*Settings on remote server*/<br/><br/>data _null_&#59run&#59<br/><br/>/*set raw file names*/<br/>%global<br/>&nbsp&nbsp&nbsp&nbspThisEGPPath <br/>&nbsp&nbsp&nbsp&nbspexchangeDir Rexchange  dp_benefitFile dp_nonbenefitFile dp_specFile ed_a2012File ed_b2012File<br/>&nbsp&nbsp&nbsp&nbsphospitalFile MSBFile MSB_DFile MSB_DocInfoFile PHRS_InfoFile PHRS_CovFile PHRS_RSDCFile PHRS_ArrvFile<br/>&nbsp&nbsp&nbsp&nbspPHRS_ResiFile PHRS_Resi_cleanFile PHRS_retrFile VerfMortFile MDS_LTC_File AnalyticalReport DataReport alldinfile<br/>&nbsp&nbsp&nbsp&nbspMortDateVar MortFile_vital MortFile_PHRS<br/>&nbsp&nbsp&nbsp&nbspThisProjectType<br/>&nbsp&nbsp&nbsp&nbspCleanHospFile CleanDINFile CleanMortVitalFile CleanMortPHRSFile<br/>&#59<br/><br/><br/>/*set initial values of the source files from the cleaned file folders*/<br/>%let hospitalFile =&#59<br/>%let MortFile_vital=&#59<br/>%let MortFile_PHRS=&#59<br/>%let alldinfile=&#59<br/><br/><br/>/*The first thing is to get the master input information from the data in the common folder.*/<br/>libname RCommon \"/sasdata/hisc/shared_data/HQC_share/DoNotDelete New Cohort Common Tools/CommonExchange\"&#59<br/>%print(data=%str(RCOMMON.&theMasterInputFile), obs=50)&#59<br/>/*get remote path*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'RemoteFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('RemoteParentFolder', Value)&#59<br/>run&#59quit&#59<br/>%let RemoteParentFolder=%sysfunc(strip(&RemoteParentFolder))&#59<br/>%put >>> &RemoteParentFolder&#59<br/><br/>/*determine whether there are customized cleaned files<br/>&nbsp&nbsp&nbsp&nbspSometimes the project is not going to use the latest cleaned file, rather, a specific version will be used<br/>&nbsp&nbsp&nbsp&nbspthe following is to set to the specific cleaned file if it is customized<br/>*/<br/>%let CleanHospFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanHospFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanHospFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanHospFile&#59<br/><br/>%let CleanDINFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanDINFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanDINFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanDINFile&#59<br/><br/>%let CleanMortVitalFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanMortVitalFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanMortVitalFile', Value)&#59<br/>run&#59quit&#59<br/><br/>%put >>> &CleanMortVitalFile&#59<br/><br/>%let CleanMortPHRSFile=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'CleanMortPHRSFile'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('CleanMortPHRSFile', Value)&#59<br/>run&#59quit&#59<br/>%put >>> &CleanMortPHRSFile&#59<br/><br/><br/>/*Set the filename for the customzied cleaned files*/<br/>%macro setCustomCleanFile(theCustFileSrc=, theCustFileLib=, theSrcVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local theCustFileSrc theLength theCusSrcFileName theExtName theCustFileLib<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRevtheCusSrcFileName FileNameLength thePos thePath theFileName theLength2  theSrcVar<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName =&&theCustFileSrc&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theCusSrcFileName= &theCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theLength=%length(&theCusSrcFileName)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &theLength=0 %then %goto exit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName=%sysfunc(strip(&theCusSrcFileName))&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&theLength<9)%then %let theLength=9&#59<br/>&nbsp&nbsp&nbsp&nbsp/*add the file extension name if it is missing*/<br/>&nbsp&nbsp&nbsp&nbsp%let theExtName=%substr(&theCusSrcFileName, %eval(&theLength-8), 9)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &theExtName ne %str(.sas7bdat) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCusSrcFileName =&theCusSrcFileName..sas7bdat&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theCusSrcFileName= &theCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*determine the folder, and the file name*/<br/>&nbsp&nbsp&nbsp&nbsp/*reverse the string, and find the first '/'. */<br/>&nbsp&nbsp&nbsp&nbsp%let RevtheCusSrcFileName =%sysfunc(reverse(&theCusSrcFileName))&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> RevtheCusSrcFileName=&RevtheCusSrcFileName&#59<br/>&nbsp&nbsp&nbsp&nbsp%let FileNameLength= %index(&RevtheCusSrcFileName, /)&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> FileNameLength=&FileNameLength&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theLength2= %length(&theCusSrcFileName)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let thePos=%eval( &theLength2- &FileNameLength)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let thePath=%substr(&theCusSrcFileName, 1, &thePos)&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theFileName = %substr(&theCusSrcFileName, &thePos+2 , &FileNameLength-1)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the extension name (the data set name in SAS data steps does not include extension names)*/<br/>&nbsp&nbsp&nbsp&nbsp%let theFileName = %sysfunc(tranwrd(&theFileName, %str(.sas7bdat), ))&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%put >>> thePath = &thePath&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theFileName = &theFileName&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*make a libname for the Path*/<br/>&nbsp&nbsp&nbsp&nbsplibname &theCustFileLib \"&thePath\"&#59<br/>&nbsp&nbsp&nbsp&nbsp/*set the value of the source file (e.g., let the hospitalfile = the customized file)*/<br/>&nbsp&nbsp&nbsp&nbsp%let &theSrcVar =&theCustFileLib..&theFileName&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*if the file dose not exist, create an error*/<br/>&nbsp&nbsp&nbsp&nbsp%if %sysfunc(exist(&&&theSrcVar))=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the file &theCusSrcFileName does not exist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCustomCleanFile_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &&&theSrcVar (obs= 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp%print(data=&&&theSrcVar)&#59*/<br/><br/>%exit:<br/><br/>%mend setCustomCleanFile&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanHospFile, theCustFileLib=custHF, theSrcVar=hospitalFile)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanDINFile, theCustFileLib=custDF, theSrcVar=alldinfile)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanMortVitalFile, theCustFileLib=custMVF, theSrcVar=MortFile_vital)&#59<br/>%setCustomCleanFile(theCustFileSrc =&CleanMortPHRSFile, theCustFileLib=custMPF, theSrcVar=MortFile_PHRS)&#59<br/><br/><br/>/*determine the source of mortality file. For non research projects, do not use vital statistics*/<br/>%let ThisProjectType=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RCOMMON.&theMasterInputFile&#59<br/>&nbsp&nbsp&nbsp&nbspif lowcase(strip(items))='projecttype'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ThisProjectType', value)&#59<br/>run&#59<br/>%put >>> ThisProjectType= &ThisProjectType&#59<br/><br/><br/><br/>/*check if such RemoteParentFolder exists, if not, create it*/<br/>%macro mkRemoteParentFolderDir&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &RemoteParentFolder&#59<br/>&nbsp&nbsp&nbsp&nbsp%local dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&RemoteParentFolder))&#59 <br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&dirExist) = 0 %then %do&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./Source&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./Target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sysexec mkdir -p &RemoteParentFolder./FileExchangeBetweenLocalAndRemote&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend mkRemoteParentFolderDir&#59<br/>%mkRemoteParentFolderDir&#59<br/><br/>/*delete the master input file in the common exchange folder<br/>&nbsp&nbsp&nbsp&nbspthe lib name has to be specified separately in the proc datasets statement.<br/>&nbsp&nbsp&nbsp&nbspIt won't work by the following<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"delete rcommon.&theMasterInputFile\"&#59<br/>*/<br/>/*proc datasets nolist lib=rcommon&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete &theMasterInputFile&#59*/<br/>/*run&#59quit&#59*/<br/><br/><br/>/*get the path of this EGP project file<br/>&nbsp&nbsp&nbsp&nbspNote that the value of system variable &_clientprojectpath is wrapped by apostrophes '', which should be stripped to avoid error.<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>%let ThisEGPPath =%sysfunc(dequote(&_clientprojectpath))&#59<br/>%put >>> &ThisEGPPath&#59<br/><br/><br/>libname Clean \"/sasdata/hisc/shared_data/HQC_share/Clean\"&#59<br/>/*The following part is to set clean folders for each year*/<br/>%macro setCleanLibs&#59<br/>&nbsp&nbsp&nbsp&nbsp%local curSysYear theYear yearTag theCleanRoot theCleanFolder thelibname dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theCleanRoot = /sasdata/hisc/shared_data/HQC_share/Clean/&#59<br/>&nbsp&nbsp&nbsp&nbsp/*determine the curent year*/<br/>&nbsp&nbsp&nbsp&nbsp%put >>> sysdate=&sysdate&#59<br/>&nbsp&nbsp&nbsp&nbsp%let curSysYear=%sysfunc(year(\"&sysdate\"d))&#59<br/>&nbsp&nbsp&nbsp&nbsp%put curSysYear= >>> &curSysYear&#59<br/>&nbsp&nbsp&nbsp&nbsp/*to counter the bug of year cut off problem ('20' is 1920, not 2020)*/<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&curSysYear < 2000) %then %let curSySYear =  %eval(&curSysYear +100)&#59<br/>&nbsp&nbsp&nbsp&nbsp%put curSysYear= >>> &curSysYear&#59<br/>&nbsp&nbsp&nbsp&nbsp%do theYear = 2017 %to &curSysYear&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag = %substr(&theYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the year specific clean folders*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCleanFolder= &theCleanRoot.&theYear. Data/Clean files&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check if the specified clean folder exists*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let dirExist = %sysfunc(fileExist(&RemoteParentFolder))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &dirExist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &dirExist = 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the folder &theCleanFolder exists&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the libname*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thelibname = Clean&yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> creating &thelibname for the folder \"&theCleanFolder\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*define the libnames*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplibname &theLibname \"&theCleanFolder\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend setCleanLibs&#59<br/>%setCleanLibs&#59<br/><br/>/*do not use the folder 'exchange'. That one is quite confusing*/<br/><br/>/*assign the address for the exchange folder between local and remote<br/>&nbsp&nbsp&nbsp&nbsptheexChangeDir is the LOCAL exchange folder<br/>*/<br/>%let exchangeDir =&thisProjectRootPath.\\Data\\Exchange_Local_Remote&#59<br/>libname transLib \"&exchangeDir\"&#59 <br/><br/>/*This folder should be project specific!!!*/<br/>%let Rexchange =  &RemoteParentFolder./FileExchangeBetweenLocalAndRemote&#59<br/>libname RexLib \"&RExchange\"&#59<br/><br/>/*%let localDataPath=S:\\Shenzhen\\Projects\\NewCohortCreating\\Data&#59*/ /* the folder to save requested raw data files*/<br/><br/>/*the following file may have to be identified manually*/<br/><br/><br/>%let dp_benefitFile=hqc.dp_claim&#59<br/>%let dp_nonbenefitFile=hqc.dp_claim_non_ben&#59<br/>%let dp_specFile = hqc.dp_drug&#59<br/><br/>%let ed_a2012File=hqc.ED_F_2012&#59<br/>%let ed_b2012File=hqc.nacrs&#59<br/><br/>%let MSBFile=hqc.MSB_BILLING&#59<br/>%let MSB_DFile=hqc.MSB_Doctor&#59<br/>%let MSB_DocInfoFile=hqc.MSB_DOCTOR_MOBILITY&#59<br/><br/>%let PHRS_InfoFile = hqc.PHRS_PERS_INFO&#59<br/>%let PHRS_CovFile = hqc.PHRS_PERS_PROG&#59<br/>%let PHRS_RSDCFile=hqc.phrs_pers_rsdc&#59<br/>%let PHRS_ArrvFile = HQC.phrs_pers_arrv&#59<br/>%let PHRS_ResiFile = HQC.phrs_pers_resc&#59<br/>%let PHRS_retrFile = HQC.PHRS.PERS_RETR&#59<br/><br/>/*The following file cannot be changed, as it is the latest one with income quintile info*/<br/>%let PHRS_Resi_cleanFile=clean17.PHRS_PERS_RESC_3_AMJ17_02NOV2017&#59 /*this is the last file with income quintile, AMJ = Apr May Jun*/<br/><br/>/*For the following files, there are different versions. Either the latest, or a customized file will be select for this project*/<br/>%macro setCleanFiles(theRaw=, startChars=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local curYear YearTag startChars  nTrials theRaw theRawFileName debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If theRaw file has been defined (i.e., by a customized source), exit the macro and do not overwrite the defined value*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&&&theRaw) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> The raw file &theRaw has been defined, and is not overwritten&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto exit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Determine the source of the cleaned hospitalization file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The logic is to select the latest file (by modified date) among all versions.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is either in a clean folder of the current year, or the previous year <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(at the begining of the year, the clean folder is created, but the clean file was not available yet).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*list out all files in the clean file folder of the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the current year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%sysfunc(year(\"&sysdate\"d))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put curYear=>>> &curYear&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*to counter the bug of year cut off problem ('20' is 1920, not 2020)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %eval(&curYear < 2000) %then %let curYear =  %eval(&curYear +100)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put curYear= >>> &curYear&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials=0&#59<br/><br/>%repeat:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*set an empty setCleanFiles_tmp1, in case it cannot be created by the following proc datesets<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(e.g., On Jan 02, 2020, there is no data sets in clean20. )*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCleanFiles_tmp1&#59 delete&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>>>>>>>>>>>>>>>>>>>>>> &theRaw&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output Members=setCleanFiles_tmp1&#59 /*Note: this line must precede the following proc statement lines. Otherwise the output goes nowhere*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets library=&theLibname  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let startChars=%lowcase(&startChars)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the output data set with all file names, select the target files (e.g., hospital files are characterized by the begining 'cihi'*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata setCleanFiles_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(lowcase(name)) in: (\"&startChars\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Check the number of variables in _tmp2*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=setCleanFiles_tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*If nobs =0, there is no such file in the clean folder of the current year. It must be that files of the first year is not available yet<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe latest file is in the clean folder of the last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &nobs =0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*redefine the year tag to last year*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let curYear=%eval(&curYear - 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yearTag=%substr(&curYear, 3,2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLibname= Clean&yearTag&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nTrials = %eval(&nTrials +1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> number of trials = &nTrials&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*repeat the process to get the files in the redefined clean folder*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %eval(&nTrials < 3) %then %do&#59  /*After trying for 3 times, yet there is no such files, quit*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto repeat&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> There is no such files in the recent 3 years. Nothing is defined for the source file &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=setCleanFiles_tmp2, sorter=Lastmodified)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset setCleanFiles_tmp2 (obs=max)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theRawFileName', name)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &theRaw = %lowcase(Clean&yearTag..&theRawFileName)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theRaw = &&&theRaw&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete setCleanFiles_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59quit&#59 /*it is critical to have the statement 'quit', as it releases proc dataset from suppressing ods tables (the suppressing was set by the option nolist)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%exit:<br/><br/>%mend setCleanFiles&#59<br/>%setCleanFiles(theRaw=hospitalFile, startChars=cihi_EOC)&#59<br/>%setCleanFiles(theRaw=alldinfile, startChars=alldin_)&#59<br/>%setCleanFiles(theRaw=MortFile_vital, startChars=verf_dths_)&#59<br/>%setCleanFiles(theRaw=MortFile_PHRS, startChars=PHRS_DTHS_)&#59<br/><br/><br/><br/><br/>%macro setMortFileSource&#59<br/> &nbsp&nbsp&nbsp&nbsp%if %length(&ThisProjectType) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*note that the combination of %lowcase, %sysfunc, and strip cannot deal with null values, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., if &ThisProjectType has nothing in it, the following line will report error*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let ThisProjectType=%lowcase(%sysfunc(strip(&ThisProjectType)))&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &ThisProjectType&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %lowcase(&ThisProjectType) = %str(usevital) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For nonresearch projects, use vital mortality data*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let VerfMortFile = &MortFile_vital&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let MortDateVar=ddt_Vit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For research projects, use phrs mortality data*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let VerfMortFile = &MortFile_PHRS&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let MortDateVar=ddt_NoVit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend setMortFileSource&#59<br/>%setMortFileSource&#59<br/>%put >>> ThisProjectType= &ThisProjectType&#59<br/>%put >>> VerfMortFile= &VerfMortFile&#59<br/>%put >>> MortDateVar=&MortDateVar&#59<br/><br/>%let MDS_LTC_File = hqc.MDS_ASSESSMENT_F_2015&#59<br/><br/>%let AnalyticalReport=Analytical Report.xlsx&#59<br/>%let DataReport=DataSum_Report.xlsx&#59<br/><br/><br/>/*include the raw file extracing macros*/<br/><br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_CIHI.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/Addquotes.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/reformat_datevars.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_Drug_non_ben_test.sas' /LRECL=32767&#59<br/>%include '/SAS_data/dw0/HQC_share/Xinya/Macros/GEO_INCQTL_assign.sas' /LRECL=32767&#59<br/><br/>/*the following is for calculating the Charlson-elixer score*/<br/>%INCLUDE '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/StatAnal/ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/ExpandLst.sas' /LRECL=32767&#59<br/>/*%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/VarExist.sas' /LRECL=32767&#59*/<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/Util/IsEmptyDS.sas' /LRECL=32767&#59<br/><br/>%put >>> the remote work directory is at %sysfunc(pathname(work))&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"4715ca70-7a46-437f-b969-f09366f5f9c9","name":"_0D del Master Input at local","NodeDescription":"///t<br/>///s<br/>/*Delete the master input file in the local common exchange folder*/<br/>proc datasets nolist lib=lcommon&#59<br/>&nbsp&nbsp&nbsp&nbspdelete &theMasterInputFile&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"dd0c6263-1af6-4e57-8075-2dc276ff024d"}]},{"idx":"f6cc6116-dc94-4ec8-90d9-d170d60ca5b5","name":"A1_Copy data sets in transLib to Remote Server - Copy","children":[{"idx":"c223bc34-93a5-434b-a980-61abee7264c0","name":"B_Remote_get settings into macro variables - Copy","NodeDescription":"///t<br/>///s<br/>/*get the project start date. It is also the last Xtrc Date*/<br/><br/>data _null_&#59run&#59<br/><br/>%global <br/>&nbsp&nbsp&nbsp&nbspProjectName<br/>&nbsp&nbsp&nbsp&nbspProjectStartDate<br/>&nbsp&nbsp&nbsp&nbspContact<br/>&nbsp&nbsp&nbsp&nbspEmail<br/>&nbsp&nbsp&nbsp&nbspDataStartDate<br/>&nbsp&nbsp&nbsp&nbspDataEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartDate<br/>&nbsp&nbsp&nbsp&nbspEntryEndDate<br/>&nbsp&nbsp&nbsp&nbspEntryStartYear<br/>&nbsp&nbsp&nbsp&nbspEntryEndYear<br/>&nbsp&nbsp&nbsp&nbspEntryYears&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_MSB<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_Ben<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_NBen<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_Cover<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_DP_SPEC<br/>&nbsp&nbsp&nbsp&nbspXtrc_MDS_LTC<br/>&nbsp&nbsp&nbsp&nbspLPath_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspFile_MDSLTC_DxMacro<br/>&nbsp&nbsp&nbsp&nbspCommand_MDSLTC_DxMacro<br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspremoteSourcePath<br/>&nbsp&nbsp&nbsp&nbspremoteReportPath<br/>&nbsp&nbsp&nbsp&nbspremoteTargetPath<br/>&nbsp&nbsp&nbsp&nbsplocalParentFolder<br/>&nbsp&nbsp&nbsp&nbsplocalDataPath<br/>&nbsp&nbsp&nbsp&nbsplocalTargetPath<br/><br/>&#59<br/><br/>/*remote parent path has been defined in program _0C*/<br/><br/><br/>/*the source files on remote server*/<br/>%let remoteSourcePath=&RemoteParentFolder./Source&#59<br/>%put >>> &remoteSourcePath&#59<br/>libname remoteS \"&remoteSourcePath\"&#59<br/>/*the target files on remote server*/<br/>%let remoteTargetPath=&RemoteParentFolder./Target&#59<br/>libname remoteT \"&remoteTargetPath\"&#59<br/>/*the report on remote server*/<br/>%let remoteReportPath=&RemoteParentFolder./Reports&#59<br/>libname remoteR \"&remoteReportPath\"&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset RexLib.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items = 'LocalFolder'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('localParentFolder', Value)&#59<br/>run&#59<br/>%let localParentFolder=%sysfunc(strip(&localParentFolder))&#59<br/>%put >>> &localParentFolder&#59<br/>%let localDataPath=&localParentFolder.\\Data&#59<br/>%put >>> localDataPath=&localDataPath&#59<br/>%let localTargetPath=&localParentFolder.\\Output\\Result data&#59<br/>%put >>> localTargetPath = &localTargetPath&#59<br/><br/><br/>/*copy all files from remote exchange to remoteS*/<br/>proc datasets lib=Rexlib&#59<br/>&nbsp&nbsp&nbsp&nbspcopy out=remoteS&#59<br/>run&#59<br/><br/>Proc delete data=Rexlib._all_&#59<br/>run&#59<br/><br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items='ProjectStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*in the source data, the date values are characters<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the folloiwng steps, the character date values are changed to numberical datavalues, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen put into macro variables<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWhy not directly put characters into macro variable values?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbecause the original character is like 'yyyymmdd', while the required data format is 'ddmmmyyyy'<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let ProjectStartDate=%bquote('&ProjectStartDate')d&#59<br/>%let ProjectStartDate=%substr(&ProjectStartDate, 1, %length(&ProjectStartDate))&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/>%put >>> ProjectStartDate = &ProjectStartDate&#59<br/><br/>/*changes made in 20190228<br/>The value of lastxtrcdate used to be determined by the ProjectStartDate. <br/>In Yuan's VH project, the start date was in Apr 15 2018. Later the team deceided to have updated report <br/>by including more recent data, including a cleaned resc file. For that file, it should include an xtrc_date of <br/>Jul 03 2018. Such date is after the project start date. <br/><br/>Update by including more recent data could happen frequently. In that case, setting the lastXtrcDate to the ProjectStartDate <br/>is not appropriate.<br/><br/>Starting from 2019-02-28, the setting of lastXtrcDate has changed by taking the 'EarliestProjectStartDatePlus180', <br/>which is 'EarlistProjectStartDate' +180 days (see the formula xls cell in sheet 'MasterInput' of the xls input form)  as the lastXtrcDate. <br/>This would be sufficient to include more recent data in cleaned files.  <br/><br/>Values on that sheet will be read into the SAS set 'remoteS.al_MasterInput' , and used to determine the lastxtrcdate, as the following. <br/>*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif Items='EarliestProjectStartDatePlus180'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*in the source data, the date values are characters<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the folloiwng steps, the character date values are changed to numberical datavalues, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen put into macro variables<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWhy not directly put characters into macro variable values?<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbecause the original character is like 'yyyymmdd', while the required data format is 'ddmmmyyyy'<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('LastXtrcDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let LastXtrcDate=%bquote('&LastXtrcDate')d&#59<br/>%let LastXtrcDate=%substr(&LastXtrcDate, 1, %length(&LastXtrcDate))&#59<br/>%put >>> LastXtrcDate = &LastXtrcDate&#59<br/><br/>/*get the data start and end dates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataStartDate=%bquote('&DataStartDate')d&#59<br/>%let DataStartDate=%substr(&DataStartDate, 1, %length(&DataStartDate))&#59<br/>%put >>> DataStartDate = &DataStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='DataEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('DataEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let DataEndDate=%bquote('&DataEndDate')d&#59<br/>%let DataEndDate=%substr(&DataEndDate, 1, %length(&DataEndDate))&#59<br/>%put >>> DataEndDate = &DataEndDate&#59<br/><br/>/*get the cohort entrydates*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryStartDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryStartDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryStartDate=%bquote('&EntryStartDate')d&#59<br/>%let EntryStartDate=%substr(&EntryStartDate, 1, %length(&EntryStartDate))&#59<br/>%put >>> EntryStartDate = &EntryStartDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='EntryEndDate'&#59<br/>&nbsp&nbsp&nbsp&nbspdatevalue=input(value, anydtdte.)&#59<br/>&nbsp&nbsp&nbsp&nbspformat datevalue date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('EntryEndDate', put(datevalue, date9.))&#59<br/>run&#59<br/>%let EntryEndDate=%bquote('&EntryEndDate')d&#59<br/>%let EntryEndDate=%substr(&EntryEndDate, 1, %length(&EntryEndDate))&#59<br/>%put >>> EntryEndDate = &EntryEndDate&#59<br/><br/>%let EntryStartYear = %sysfunc(year(&EntryStartDate))&#59<br/>%put >>> EntryStartYear=&EntryStartYear&#59<br/>%let EntryEndYear = %sysfunc(year(&EntryEndDate))&#59<br/>%put >>> EntryEndYear=&EntryEndYear&#59<br/>%let EntryYears = %eval(&EntryEndYear - &EntryStartYear +1)&#59<br/>%put >>> EntryYears=&EntryYears&#59<br/><br/><br/>/*The  project name, contact, and email*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='ProjectName'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('ProjectName', value)&#59<br/>run&#59<br/>%put >>> ProjectName = &ProjectName&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Contact'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Contact', value)&#59<br/>run&#59<br/>%put >>> Contact = &Contact&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset remoteS.a1_MasterInput&#59<br/>&nbsp&nbsp&nbsp&nbspif items='Email'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Email', value)&#59<br/>run&#59<br/>%put >>> Email = &Email&#59<br/><br/><br/>/*the following part is to determine the xtrc_date for each sources<br/>&nbsp&nbsp&nbsp&nbspMSB, Drug claims, coverage period (same for demo, resitype)<br/>&nbsp&nbsp&nbsp&nbspThe cleaned hospital file does not require xtrc date<br/>&nbsp&nbsp&nbsp&nbsp?? How about the mortality record file (verfdt), the emergancy file (f_2012)<br/><br/>*/<br/>%put >>> &dataStartDate&#59<br/>/*the xtrc_dates*/<br/>/*determine the msb xtrc_date***********/<br/>%freq(data=clean.xtrc_dates, table=ds)&#59<br/>%sort(data=clean.xtrc_dates, target=b11, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/><br/>data b12&#59<br/>&nbsp&nbsp&nbsp&nbspset b11&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'msb_billing'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b12, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b13&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_MSB=%str(%')&Xtrc_Start_MSB.%str(%')d&#59<br/>%let Xtrc_Start_MSB= %substr(&Xtrc_Start_MSB, 1, %length(&Xtrc_Start_MSB))&#59<br/>%put >>> &Xtrc_Start_MSB&#59<br/><br/>%sort(data=b12, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b14&#59<br/>&nbsp&nbsp&nbsp&nbspset b12 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_MSB', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_MSB=%str(%')&Xtrc_End_MSB.%str(%')d&#59<br/>%let Xtrc_End_MSB= %substr(&Xtrc_End_MSB, 1, %length(&Xtrc_End_MSB))&#59<br/>%put >>> &Xtrc_End_MSB&#59<br/>/******************************************/<br/><br/>/*determine the benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b21, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b22&#59<br/>&nbsp&nbsp&nbsp&nbspset b21&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b22, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b23&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_Ben=%str(%')&Xtrc_Start_DP_Ben.%str(%')d&#59<br/>%let Xtrc_Start_DP_Ben= %substr(&Xtrc_Start_DP_Ben, 1, %length(&Xtrc_Start_DP_Ben))&#59<br/>%put >>> &Xtrc_Start_DP_Ben&#59<br/><br/>%sort(data=b22, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b24&#59<br/>&nbsp&nbsp&nbsp&nbspset b22 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_Ben', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_Ben=%str(%')&Xtrc_End_DP_Ben.%str(%')d&#59<br/>%let Xtrc_End_DP_Ben= %substr(&Xtrc_End_DP_Ben, 1, %length(&Xtrc_End_DP_Ben))&#59<br/>%put >>> &Xtrc_End_DP_Ben&#59<br/>/******************************************/<br/><br/>/*determine the non-benefit drug claim xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b31, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b32&#59<br/>&nbsp&nbsp&nbsp&nbspset b31&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/><br/>%sort(data=b32, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b33&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_NBen=%str(%')&Xtrc_Start_DP_NBen.%str(%')d&#59<br/>%let Xtrc_Start_DP_NBen= %substr(&Xtrc_Start_DP_NBen, 1, %length(&Xtrc_Start_DP_NBen))&#59<br/>%put >>> &Xtrc_Start_DP_NBen&#59<br/><br/>%sort(data=b32, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b34&#59<br/>&nbsp&nbsp&nbsp&nbspset b32 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_NBen', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_NBen=%str(%')&Xtrc_End_DP_NBen.%str(%')d&#59<br/>%let Xtrc_End_DP_NBen= %substr(&Xtrc_End_DP_NBen, 1, %length(&Xtrc_End_DP_NBen))&#59<br/>%put >>> &Xtrc_End_DP_NBen&#59<br/>/******************************************/<br/><br/>*&xtrc_cover&#59<br/>/*determine the coverage xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b41, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>/*%freq(data=b41, table=ds)&#59*/<br/>data b42&#59<br/>&nbsp&nbsp&nbsp&nbspset b41&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'phrs_pers_prog'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b42, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b43&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_Cover=%str(%')&Xtrc_Start_Cover.%str(%')d&#59<br/>%let Xtrc_Start_Cover= %substr(&Xtrc_Start_Cover, 1, %length(&Xtrc_Start_Cover))&#59<br/>%put >>> &Xtrc_Start_Cover&#59<br/><br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b44&#59<br/>&nbsp&nbsp&nbsp&nbspset b42 end=last&#59<br/>&nbsp&nbsp&nbsp&nbspif last&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_Cover', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_Cover=%str(%')&Xtrc_End_Cover.%str(%')d&#59<br/>%let Xtrc_End_Cover= %substr(&Xtrc_End_Cover, 1, %length(&Xtrc_End_Cover))&#59<br/>%put >>> &Xtrc_End_Cover&#59<br/>/******************************************/<br/><br/><br/>/*2019-09-23<br/>&nbsp&nbsp&nbsp&nbspconsider that the study's lastxtrcdate is '01Jan2011'd, <br/>&nbsp&nbsp&nbsp&nbspwhile the earliest Xtrc_Start_Info (which is, as of 2019-09-23, always the same as the Xtrc_Start_Cover) is '01Jan2013'd. <br/>&nbsp&nbsp&nbsp&nbspIn that case, there will be no records earlier than the &LastXtrcDate.<br/>&nbsp&nbsp&nbsp&nbspTo correct it, when getting phrs info data, the following is added<br/>*/ <br/><br/>%put >>> Xtrc_Start_Cover=&Xtrc_Start_Cover&#59<br/>%put >>> Xtrc_End_Cover=&Xtrc_End_Cover&#59<br/>%put >>> LastXtrcDate=&LastXtrcDate&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspXtrc_Start_Cover=&Xtrc_Start_Cover&#59<br/>&nbsp&nbsp&nbsp&nbspXtrc_End_Cover=&Xtrc_End_Cover&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59<br/>&nbsp&nbsp&nbsp&nbspnew_LastXtrcDate=max(Xtrc_End_Cover, LastXtrcDate)&#59<br/>&nbsp&nbsp&nbsp&nbspformat new_LastXtrcDate date9. Xtrc_Start_Cover date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('new_LastXtrcDate', put(new_LastXtrcDate, date9.))&#59 <br/>run&#59<br/>%let new_LastXtrcDate=%str(%')&new_LastXtrcDate.%str(%')d&#59<br/>%let new_LastXtrcDate= %substr(&new_LastXtrcDate, 1, %length(&new_LastXtrcDate))&#59<br/>%let LastXtrcDate=&new_LastXtrcDate&#59<br/>%put >>> new_LastXtrcDate = &new_LastXtrcDate, i.e. LastXtrcDate is now &new_LastXtrcDate&#59<br/>/******/<br/><br/><br/>/*determine the drug spec xtrc_date***********/<br/>%sort(data=clean.xtrc_dates, target=b51, <br/>&nbsp&nbsp&nbsp&nbspsorter=%str(report_start report_end xtrc_date))&#59<br/>data b52&#59<br/>&nbsp&nbsp&nbsp&nbspset b51&#59<br/>&nbsp&nbsp&nbsp&nbspif ds = 'dp_claim' or ds = 'dp_claim_non_ben'&#59<br/>&nbsp&nbsp&nbsp&nbspdataStartDate=&dataStartDate&#59<br/>&nbsp&nbsp&nbsp&nbspLastXtrcDate = &LastXtrcDate&#59/* &LastXtrcDate&#59*/<br/>&nbsp&nbsp&nbsp&nbspformat dataStartDate date9. LastXtrcDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif (report_start <= dataStartDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_start > dataStartDate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand (report_start <= LastXtrcDate <= report_end <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor report_end < LastXtrcDate)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>%sort(data=b52, sorter=xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b53&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_Start_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_Start_DP_SPEC=%str(%')&Xtrc_Start_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_Start_DP_SPEC= %substr(&Xtrc_Start_DP_SPEC, 1, %length(&Xtrc_Start_DP_SPEC))&#59<br/>%put >>> &Xtrc_Start_DP_SPEC&#59<br/><br/>%sort(data=b52, sorter=descending xtrc_date)&#59<br/>/*the earliest xtrc_date should be the last one in the rows with a negative<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstartgGap*/<br/>data b54&#59<br/>&nbsp&nbsp&nbsp&nbspset b52 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_End_DP_SPEC', put(xtrc_date, date9.))&#59<br/>run&#59<br/>%let Xtrc_End_DP_SPEC=%str(%')&Xtrc_End_DP_SPEC.%str(%')d&#59<br/>%let Xtrc_End_DP_SPEC= %substr(&Xtrc_End_DP_SPEC, 1, %length(&Xtrc_End_DP_SPEC))&#59<br/>%put >>> &Xtrc_End_DP_SPEC&#59<br/>/******************************************/<br/><br/>/***get xtrc_date for mds_ltc data****************************/<br/>data b61&#59<br/>&nbsp&nbsp&nbsp&nbspset clean.xtrc_dates&#59<br/>&nbsp&nbsp&nbsp&nbspif xtrc_date < = &LastXtrcDate  and ds='mds_assessment_f_2015'&#59<br/>run&#59<br/>%sort(data=b61, sorter=descending xtrc_date)&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset b61 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Xtrc_MDS_LTC',  put(xtrc_date, date9.))&#59 <br/>run&#59<br/>%let XTRC_MDS_LTC=%str(%')&XTRC_MDS_LTC.%str(%')d&#59<br/>%let XTRC_MDS_LTC= %substr(&XTRC_MDS_LTC, 1, %length(&XTRC_MDS_LTC))&#59<br/>%put >>> &XTRC_MDS_LTC&#59<br/><br/>/****************************************************/<br/><br/>/*get the file (full path) and macro command for getting dx info from MDS_LTC*/<br/>%macro getMDSMacro&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*initially, let the following variables = nothing*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let File_MDSLTC_DxMacro=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let Command_MDSLTC_DxMacro =&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%print(data =remoteS.A12_DXMDSLTC )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the path, file name and command lines*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset remoteS.A12_DXMDSLTC (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('LPath_MDSLTC_DxMacro',  thePath)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('File_MDSLTC_DxMacro',  theFile)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('Command_MDSLTC_DxMacro',  theLines)&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*remove the slash at the end of the path*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %substr(&LPath_MDSLTC_DxMacro, %length(&LPath_MDSLTC_DxMacro), 1) = \\ %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro=%substr(&LPath_MDSLTC_DxMacro, 1, %eval(%length(&LPath_MDSLTC_DxMacro)-1))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let LPath_MDSLTC_DxMacro= %sysfunc(strip(&LPath_MDSLTC_DxMacro))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the local macro file to get dx data from MDS_LTC = %str(&LPath_MDSLTC_DxMacro.\\&File_MDSLTC_DxMacro)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> the remote macro file to get dx data from MDS_LTC = %str(&remoteSourcePath.\\&File_MDSLTC_DxMacro)&#59<br/>%mend getMDSMacro&#59<br/>%getMDSMacro&#59<br/><br/>%freq(source=clean.xtrc_dates, table=ds)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"fee2ce4a-2b92-4b71-9fd1-db7707469611","name":"reclass.macros.v4","custparents":[{"idx":"c223bc34-93a5-434b-a980-61abee7264c0"}]},{"idx":"3ed938ec-02f9-4156-a5fe-18dddcef7cea","name":"cstatmacs.v1","custparents":[{"idx":"c223bc34-93a5-434b-a980-61abee7264c0"}]}],"custparents":[{"idx":"f6cc6116-dc94-4ec8-90d9-d170d60ca5b5"}]},{"idx":"8dddb803-4ffc-4506-a4a5-5989777af816","name":"A2_at Local, del files in transDir - Copy","NodeDescription":"///t<br/>///s<br/>/**/<br/>/*%delData(data=translib.a1_MasterInput translib.a2_vars */<br/>/*translib.a3_icddx translib.a4_intvndx translib.a5_fsc translib.a6_dindx*/<br/>/*translib.a7_dxfiles)&#59*/<br/><br/>Proc delete data=translib._all_&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"f6cc6116-dc94-4ec8-90d9-d170d60ca5b5"}]}],"custparents":[{"idx":"dd0c6263-1af6-4e57-8075-2dc276ff024d"}]}],"custparents":[{"idx":"45d0156b-aaac-4e39-b506-0b58aa84a063"}]}],"custparents":[{"idx":"bb759902-6c3d-4b2e-82e7-b07e9d7444f4"}]}],"custparents":[{"idx":"bcfd45fe-4a14-4bfb-98b8-f5375d0712bc"}]},{"idx":"7c837c77-e594-43a2-986e-67923756e5f7","name":"VX0_Setting parameters","NodeDescription":"///t<br/>///s<br/>/*Settings parameters for analyses*/<br/><br/>%global EntryEndDate washoutdays runindays followdays&#59<br/><br/>%let EntryEndDate = '31Dec2017'd&#59<br/>%let washoutdays = %eval(365*5)&#59<br/>%let runindays =365&#59<br/>%let followdays =365&#59<br/>libname locald \"&localDatapath\"&#59<br/><br/>%let theChronicConditionDataPath=P:\\Chronics_SKPop(YaoS)_142\\Output\\Result data&#59<br/>%let theChronicConditionData = popdata_allepi_30nov19&#59<br/><br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_CH_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD9_E_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_CH_dxtype.sas' /LRECL=32767&#59 <br/>%INCLUDE 'R:\\Macros\\StatAnal\\ICD10_EX_dxtype.sas' /LRECL=32767&#59<br/>%INCLUDE 'R:\\Macros\\Util\\ExpandLst.sas' /LRECL=32767&#59<br/>/*%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59 do not load this as it has conflict with the VarExist macro in mymacros*/<br/>%include 'R:\\Macros\\Util\\IsEmptyDS.sas' /LRECL=32767&#59<br/>s///<br/>t///","custparents":[{"idx":"bcfd45fe-4a14-4bfb-98b8-f5375d0712bc"}]}],"custparents":[{"idx":"a9735957-f809-4dbf-ae06-48274912fa37"}]}],"custparents":[{"idx":"f4f84569-2e7d-440a-9a32-c2973b66d248"}]}],"custparents":[{"idx":"48530000-ea00-439b-9f71-0c8ebb8be0e5"}]}],"custparents":[{"idx":"fb4b9d80-18d5-491e-8146-4e73d1048eb3"}]}],"custparents":[{"idx":"MYd643174e-b046-43cb-9b6d-525c736ddfab"}]}]}},{"idx":"MYd01edc97-01e1-431e-ab4f-d41ea851af67","name":"steps before project2 analyses","custparents":[{"idx":"3c2278f0-3974-441a-adf0-a1feabb1113a"}],"children":[],"_substeps":{"idx":"MYa3330e29-02a1-4981-a8dc-f7fe463f3df4","name":"substeps","custparents":[{"idx":"MYd01edc97-01e1-431e-ab4f-d41ea851af67"}],"children":[{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad","name":"VXA_Statin Users","NodeDescription":"///t<br/>///s<br/>/*VXA. Those receiving Statins between 2012 and 2017*/<br/>data _null_&#59 run&#59<br/><br/>/*VXA0. perepared source data*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_verif_mort.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_verif_mort.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_cohort.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_cohort.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*%print(data=master_cohort)&#59*/<br/>/*%nobs(data=master_cohort)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test1, m=max)&#59*/<br/>/*%minmax(data=master_cohort, var=dqdate, format=date9., target=test2, m=min)&#59*/<br/><br/>/*VXA1_a. keep the relevant cols, the latest entry date is 31dec2017d (so as to allow 365 days follow up)*/<br/>data VXA1_a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_cohort&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn dqdate RHA sex_desc mari_stat_desc fam_no birth age fsa nh_name nh_number QAIPPE resitype&#59<br/>&nbsp&nbsp&nbsp&nbspif dqdate le &EntryEndDate&#59   <br/>&nbsp&nbsp&nbsp&nbsprename dqdate = EntryDate&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/>/*<br/>The following exclusion has been applied during cohort creation<br/>missing age sex<br/>age < 18 at entry<br/>not continuously covered during washout (5 years) or 1 years follow up<br/>(including those deceased)<br/>Receiving statin within washout (5 years)<br/>*/<br/>/*apply other exclusion criterias<br/>&nbsp&nbsp&nbsp&nbspThis part was copied from VZC<br/>*/ <br/>/*VXA1. */<br/>%print(data=master_verif_mort)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA1_a,<br/>&nbsp&nbsp&nbsp&nbspt2=master_verif_mort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA1a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ddt_novit as MortDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data vxa1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA1a&#59<br/>&nbsp&nbsp&nbsp&nbspDeath_Pre365 =0&#59Death_Post365 =0&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and MortDate < EntryDate then Death_Pre365=1&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and EntryDate <= MortDate < EntryDate + &followdays then Death_Post365=1&#59<br/>Run&#59<br/>data localt.vxa1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxa1b&#59<br/>&nbsp&nbsp&nbsp&nbspif Death_Pre365 =0 and Death_Post365 =0&#59<br/>run&#59<br/><br/><br/>/*VXA2. LTC stay: in LTC from 365*5 days prior through 365 days since entryDate*/<br/>/*VXA2a. from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxa1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*VXA2b. oncatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXA2a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA2b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=<br/>)&#59<br/><br/>/*VXA2c. Get a list of distinct patient id of those ever stayed in a LTC facility within the washout , or the follow up period*/<br/>%distinct(data=VXA2b, target=VXA2c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate - &washoutdays and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate - &washoutdays and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate - &washoutdays and dschg_date > entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp))&#59<br/><br/>/*VXA2D. Link to vax1, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.vxa1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA2c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXA2d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXA2d, table=LTCStay)&#59*/<br/><br/><br/>/*VXA2E, from above, keep patients not having LTC stays. These are cohort memebers not stayed in a LTC facility within the washout<br/>&nbsp&nbsp&nbsp&nbspor the followup period*/<br/>data localt.VXA2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA2d&#59<br/>&nbsp&nbsp&nbsp&nbspwhere LTCStay=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop LTCStay&#59<br/>run&#59<br/><br/>/*VXA3. Stayed in an out-province facility (prov_loc_sk = 'N') for acute care during follow -up*/<br/>/*%print(data=master_hosp)&#59*/<br/>/*%freq(data=master_hosp, table=prov_loc_sk*ds_ip)&#59*/<br/><br/>/*VXA3a. From the master hospitalization record, select those events occured in a facility indicated as out-of-province facility (i.e., prov_loc_sk = 'N')*/<br/>data VXA3a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere prov_loc_sk = 'N'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date&#59<br/>run&#59<br/>/*VXA3b. From VXA2, and according to VXA3a, get a list of patient who stayed in an out-province acute care facility during follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA3a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXA3b, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm = %str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn = t2.key_hsn and<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entryDate  and t1.entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.dschg_date between t1.entryDate and t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor t2.adm_date < t1.entryDate  and t2.dschg_date > t1.entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Exclude patients in VXA3b to get the cohort after applying excusion criteria */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1= localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget= localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(key_hsn not in (select key_hsn from VXA3b)) <br/>)&#59<br/><br/><br/>/*VXA4. Need to exclude those preg during runin or follow up!!! (see VXI)*/<br/>/*. pregnancy<br/>pregnancy (Using the CCDSS case definition, which is used for exclusion in definition of CCDSS chronic conditions)<br/>the code of pregancy was from the file A12_CoMorb_ICDDX in the ChronicPop's remoteS folder<br/><br/>('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', '655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', '673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', 'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', 'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', 'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', 'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', 'O94', 'O95', 'O98', 'O99', 'Z37')<br/>*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/>/*VXA4a. hospital*/<br/>data VXA4a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>/*VXA4b. MSB*/<br/>data VXA4b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>/*VXA4c. merge hospital and msb*/<br/>data VXA4c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA4a VXA4b&#59<br/>run&#59<br/>/*VXA4d. link to VXA3, indicate those having preg during pre365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4c,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA4d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_pre365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate-&runindays and t1.dschg_date > t2.entryDate -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VXA4e. link to VXA3, indicate those having preg during post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4c,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA4e,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_post365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + &followdays -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VXA4f.link back to VXA3*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA4d,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXA4f,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_pre365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXA4g. add preg_post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA4f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXA4e,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXA4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%freq(data=VXA4, table=preg_pre365*preg_post365)&#59<br/><br/>/*VXA5. exclude patients having pregancy events during run-in or follow up*/<br/>data VXA&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA4&#59<br/>&nbsp&nbsp&nbsp&nbspif preg_pre365=0 and preg_post365=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop preg_post365 preg_post365&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXa.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXa.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXA)&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"b212531f-28b6-4982-92b2-73c431b8f16c","name":"VXA_V SlimMasters","NodeDescription":"///t<br/>///s<br/>/*VXA_V. Make smaller master files*/<br/>/*only to run once*/<br/>%macro makeSlimMaster&#59<br/>/*VXA_V0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXA_V1. the dp files are too big, to make it slim:<br/> keep only din key_hsn key_prscr_num and Rx_ddddd<br/>*/<br/><br/>/*VXA_V1a. compress the dp_benefit file*/<br/>/*%print(data=master_dp_benefit_pop)&#59*/<br/>data VXA_V1a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_benefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*110358616*/<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1a3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_benefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_benefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*VXA_V1b. compress the dp_nonbenefit file*/<br/>/*%print(data=master_dp_nonbenefit_pop)&#59*/<br/>data VXA_V1b1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_dp_nonbenefit_pop (keep=din key_hsn key_prscr_num Rx_ddddd)&#59<br/>run&#59<br/>/*replace the key_hsn (length=11) with key_hsnc (length=4)<br/>&nbsp&nbsp&nbsp&nbspNote: some records are lost as key_hsn of these claims cannot be found in the PHRS<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.key_hsnc, t1.key_prscr_num as key_doc_num, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*replace the key_doc_num (length=11) with key_doc_numc (length=2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DocIDmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, key_hsnc, t2.key_doc_numc, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*replace the DIN (length=8) with DINStr (length=3). Some records cannot be mapped, why the dins in master_DINmap_pop is incomplete?<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V1b3,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.dinStr, t1.key_hsnc, t1.key_doc_numC, t1.Rx_ddddd),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_dp_nonbenefit_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_dp_nonbenefit_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*Making Slim MSB Pop (originally in VZB)*/<br/>/*VXA_V11B1. replace the key_doc_num with compressed doc id.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb_pop,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(VXA_V11B1 (drop=key_doc_num dos_1)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>/*VXA_V11B2. replace the patient id with compressed patient id.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA_V11B1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(master_msb_pop_slim (drop=key_hsn)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localDataPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=master_msb_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=master_msb_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*Making Slim Hosp Pop (originally in VZB)*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp_pop.sas7bdat)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_hosp_pop,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=%str(master_hosp_pop_slim (drop=key_hsn)),<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localDataPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=master_hosp_pop_slim.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=master_hosp_pop_slim.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%beep&#59<br/><br/>%mend makeSlimMaster&#59<br/>s///<br/>t///","custparents":[{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad"}]},{"idx":"84911871-de5d-462d-a257-c2605327ccb4","name":"VXB_Encounter Episodes","NodeDescription":"///t<br/>///s<br/>/*VXB, get all encounter episodes, indicated by whether or not being CME, and type of provider (PCP, SCP, OTH)<br/>&nbsp&nbsp&nbsp&nbsp1) get patient-physician-date-spec specific encounters <br/>&nbsp&nbsp&nbsp&nbsp2) keep encounters with GPs<br/>&nbsp&nbsp&nbsp&nbsp3) determine the final cohort (those having encounters with GP during follow up) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote: patients are excluded if only having encounters during run-in period but not during follow up<br/>&nbsp&nbsp&nbsp&nbsp4) Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbsp5) indicate whether the encounter was for complete medical examination encounters (CME) <br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VXB0a. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>/*VXB0b. get msb claims within lookback and follow up (i.e. +/- 365 days around entryDate) of the cohort members in VXA*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=vxa,<br/>&nbsp&nbsp&nbsp&nbsptarget=vxb0b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entryDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.EntryDate-&runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/><br/>/*VXB1 get patient-physician-date-spec specific encounters with PCPs (GPs)*/<br/>/*VXB1a. from above, get eligible service claims (see appendix 2)*/<br/>data vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb0b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/><br/>/*VXB1b. excluding claims without doc number, or by slush doc codes, anyway these claims are difficult to calculate encounter episodes*/<br/>data vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_doc_num ne '' and DocSlushCode = 'N'&#59<br/>run&#59<br/><br/>/*VXB1C. get the number of encounter episode (a distinct patient-doc-dos is an Encounter), get distinct patient doc dos and spec*/<br/>%distinct(data=vxb1b, target=vxb1c, vars=%str(key_hsn, entryDate, key_doc_num, dos, spec), orderby=%str(key_hsn,key_doc_num, dos, spec))&#59 <br/>/*The above may have the same doc as diff SPEC on the same date. Only encounters with physcians claimed as PCPs(GPs) will be kept*/<br/><br/>/*VXB1d. determine whether the encounter episodes are with a PCP (GP), SCP (SP, a specialist who treated statin related conditions), <br/>or others (appendix 3 and 4). */<br/>data VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1c&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in:('B') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'GP'&#59 /*Family physician or primary care provider*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in ('CL','DL') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProviderType_DateSpecific = 'SCP'&#59 /*Specialist*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse ProviderType_DateSpecific = 'OTH'&#59 /*Other*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/><br/>run&#59<br/>/*%freq(data=vxb1, table=ProviderType_DateSpecific)&#59*/<br/>/*vxb1 contains all encounters, the provider indicated as PCP, SCP, or OTH*/<br/><br/>/*VXB2. Keep encounters with PCPs (GPs)<br/>Note that the data vxb1 allowsthe flexibility for analyses including non-GP physicians. In this study however, only GP will be kept starting from here<br/>*/<br/><br/>/*VXB2a. From VXB1, keep encounters indicated as with 'GP' */<br/>Data VXB2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXB1&#59<br/>&nbsp&nbsp&nbsp&nbspif ProviderType_DateSpecific= 'GP'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop spec&#59<br/>run&#59<br/>/*in the above there might be encounters of the same physician as of different SPEC value of the B class (e.g., B1, B3)*/<br/><br/>/*VXB2b, keep distinct encounters with 'GP'*/<br/>%distinct(data=VXB2a, target=VXB2, vars=*)&#59<br/><br/>/*<br/>VXB3. determine the final cohort (those having encounters with GP during follow up) <br/>Note: patients are excluded if only having encounters during run-in period but not during follow up<br/>*/<br/>/*VXB3a. Get a distinct list of patients who had encounters with GP during followup*/<br/>%distinct(data=VXB2, target=VXB3a, vars=key_hsn, filters=%str(dos between entryDate and entrydate + &followdays -1))&#59<br/><br/>/*VXB3b. from VXA, keep those appearing in VXB3a. The result is the final cohort, i.e., eligible new users of statin medication, <br/>&nbsp&nbsp&nbsp&nbspand having one GP encounter during followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxA,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB_pt.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB_pt.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/><br/><br/>/*VXB4. Keep encounters with GPs, and of the final cohort members<br/>&nbsp&nbsp&nbsp&nbspNote: these encounters occured in run-in period, or in follow up (the records in run-in period is for future sensitivity analysis)<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB4,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXB5. indicate CME encounters, FSC code in Appendix 5*/<br/>/*VXB5a. From vxb1b (claims with a non-slush physician), select claims indicated as CMEs*/<br/>data vxb5a&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb1b&#59<br/>&nbsp&nbsp&nbsp&nbspif fsc in ('B003','B064','B052', 'B004')&#59<br/>run&#59<br/><br/>/*VXB5b. get distinct CME claims by patient, provider, and date)*/<br/>%distinct(data=vxb5a, target=vxb5b, vars=%str(key_hsn, key_doc_num, dos))&#59<br/><br/>/*VXB5c. link vxb5b to vxb4 to indicate the CME episodes*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb4,<br/>&nbsp&nbsp&nbsp&nbspt2=vxb5b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXB,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn='', 0,1) as CME),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn dos key_doc_num<br/>)&#59<br/>/*%freq(data=vxb, table=cme*ProviderType_DateSpecific)&#59*/<br/>/*!!! VXB contains all encounter episodes with PCPs, indicated whether or not being a CME within runin and follow up period*/<br/>/*however don't get confused!<br/>&nbsp&nbsp&nbsp&nbspA doctors can be both a CMEP, or not&#59 <br/>&nbsp&nbsp&nbsp&nbspThese classifications are encounter-specific (i.e., patient and service date specific) <br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXB.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXB.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXB)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"42d7296a-1a14-4918-b4dc-dd7176dfba6e","name":"VXB_V validate GP whose SPEC starts B","NodeDescription":"///t<br/>///s<br/>/*VXB_V:<br/>&nbsp&nbsp&nbsp&nbspValidate that SPEC starting with 'B' represents family physicians (FP)<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*The idea is to check who ever wrote a reference to a specialist.<br/>&nbsp&nbsp&nbsp&nbspTheoretically, only GPs would write references to a specialist. So the claims indicated as writing a referal should be from a GP.<br/>&nbsp&nbsp&nbsp&nbspIn the service billing claims, such referals billed by a GP is with an FSC code of 'B055'. <br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*From msb claims, get claims indicated as a referal from a GP (FSC= 'B055'), and list out the SPECs of the physicians who wrote these referals */<br/>proc freq data=master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere FSC=\"B055\"&#59<br/>&nbsp&nbsp&nbsp&nbsptable  spec * fsc /nocol norow nopct&#59<br/>run&#59<br/>/*Bingo! <br/>&nbsp&nbsp&nbsp&nbspIn the above, all claims with 'B055' are from a SPEC starting with 'B'. <br/>&nbsp&nbsp&nbsp&nbspIt proves that spec starting with a 'B' are GPs. <br/>*/<br/><br/><br/><br/><br/>/*other attempts&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspThe idea is that both FP and SP will have the save service codes, but<br/>&nbsp&nbsp&nbsp&nbsp1). The charge of a subsequent service by SP is higher<br/><br/>&nbsp&nbsp&nbsp&nbspLet's just use the MSB services of the statin cohort as an example<br/>*/<br/><br/>/*1. Get service claims of the patients in the statin cohort*/<br/>/*%print(data=master_msb)&#59*/<br/>/*2. does the amount of charge (amt_app) the same for<br/>&nbsp&nbsp&nbsp&nbspdifferent<br/>&nbsp&nbsp&nbsp&nbspspec, fsc?<br/>*/<br/>%distinct(data=master_msb, target=ZXA1, <br/>vars=%str(fsc, amt_app, diag, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2), <br/>orderby=%str(fsc, amt_app, diag, SP))&#59<br/>/*the result shows that even for same GP same FSC, the charge is different<br/>*/<br/>data ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspCalendarYr= year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbspif month(dos) < 4 then FiscalYr=year(dos)-1&#59<br/>&nbsp&nbsp&nbsp&nbspelse FiscalYr=year(dos)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat SPEC2 $2.&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") then SPEC2=\"GP\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse SPEC2=\"SP\"&#59<br/>run&#59<br/>%beep&#59<br/>data ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif FSC=\"A073\"&#59<br/>run&#59<br/>/*is it true that by fiscal year the charge is the same for the same SPEC and the same FSC*/<br/>%distinct(data=ZXA2a2, target=ZXA2b1, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*Nope. e.g., in CY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>%distinct(data=ZXA2a2, target=ZXA2b2, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, CalendarYr), <br/>orderby=%str(fsc, amt_app, CalendarYr, SP))&#59<br/>/*Nope. e.g., again in FY 2015, for GP, the charge for A037 could be 56.8 or 57.9*/<br/>/*get the claims by GP in FY or CY 2015*/<br/>data ZXA2b3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a2&#59<br/>&nbsp&nbsp&nbsp&nbspif CalendarYr=2015 or FiscalYr=2015&#59<br/>run&#59<br/>/*it seems that the charge increased in FY 2015, but sometimes services in Apr (although in FY2015) were yet charged by the rate<br/>&nbsp&nbsp&nbsp&nbspof the previous year<br/>&nbsp&nbsp&nbsp&nbspHmm.... If that is true, then the services in the second half year should be of the same charge for GPs<br/>*/<br/>data ZXA2b4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspif spec in: (\"B\") and month(dos) > 5&#59<br/>run&#59<br/>%distinct(data=ZXA2b4, target=ZXA2b5, <br/>vars=%str(fsc, amt_app, ifc(substr(strip(spec),1,1) = 'B', 'GP', SPEC) as SP length=2, FiscalYr), <br/>orderby=%str(fsc, amt_app, FiscalYr, SP))&#59<br/>/*still have claims of different charges<br/>e.g.<br/>A056&nbsp&nbsp&nbsp&nbsp13.2 or 13.5 by&nbsp&nbsp&nbsp&nbspGP&nbsp&nbsp&nbsp&nbspin FY 2015<br/>but maybe it is good enough, as the deviation in the same year is not that big<br/>*/<br/>/*another way, <br/>what is the mean sd of charges by GP/SP by fsc fiscal years<br/>*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXA2a1, <br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=amt_app,<br/>&nbsp&nbsp&nbsp&nbspgroupVars= fiscalyr fsc spec2,  <br/>&nbsp&nbsp&nbsp&nbsptheStats=mean sd, <br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3a, <br/>&nbsp&nbsp&nbsp&nbspdebug=1,<br/>&nbsp&nbsp&nbsp&nbsppersonID=<br/>)&#59<br/>/*Just to hypothesis, could it be that <br/>&nbsp&nbsp&nbsp&nbspthe means of charge are sig dif between GP and SP<br/>&nbsp&nbsp&nbsp&nbsp(by fiscal year, by fsc)<br/>*/<br/>/*<br/>does it make sense to let charge predict SPEC?<br/>is that a conditional log model (paired by fsc)<br/>*/<br/>proc genmod data=ZXA2a1&#59<br/>&nbsp&nbsp&nbsp&nbspwhere fsc='A110'&#59<br/>&nbsp&nbsp&nbsp&nbspclass key_doc_num key_hsn <br/>&nbsp&nbsp&nbsp&nbsp fiscalyr (ref='2006') /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel SPEC2 (ref='GP') = amt_app fiscalyr&#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=key_doc_num ( key_hsn) /covb&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"84911871-de5d-462d-a257-c2605327ccb4"}]},{"idx":"bbeee0d2-61f4-48c9-bdb0-f7c8997686db","name":"VXC_R Table 1 Patient Flow","NodeDescription":"///t<br/>///s<br/>/*VXC_R: Table 1.  patient flow*/<br/>/*The report in &localReportPath\\Analytical Report.xlsx contains the primary patient flow*/<br/>data _null_&#59run&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxa.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxa.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxc_f.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxc_f.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXB_pt.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXB_pt.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXC_R1, get existing patient flow from the report generated when preparing data*/<br/>Proc import datafile=\"&localReportPath.\\Analytical Report.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspdbms=excel<br/>&nbsp&nbsp&nbsp&nbspout=VXC_R1a<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspgetnames=no&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"Patient flow\"&#59<br/>run&#59<br/>data VXC_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep F1 f3 obs&#59<br/>&nbsp&nbsp&nbsp&nbspif f1 ne ''&#59<br/>run&#59<br/>data VXC_R1&#59<br/>&nbsp&nbsp&nbsp&nbspformat F1 $500.&#59 /*length does not wor ()*/<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1b&#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 2 then F1 = \"Received statin medications between Jan 1,2012 and Dec 31, 2017\" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 3 then F1 = \"Excluding those missing age/sex information \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 5 then F1 = \"Excluding those < 18 on cohort entry \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 7 then F1 = \"Excluding those not continuously registered for healthcare service within the washout period of 1825 days, or a follow-up period of 365 days \" &#59<br/>&nbsp&nbsp&nbsp&nbspif _n_ = 9 then F1 = \"Excluding those receiving statin medications within the washout period\"&#59 <br/>&nbsp&nbsp&nbsp&nbspif _n_ in (1,2,3,5,7,9)&#59<br/>&nbsp&nbsp&nbsp&nbsprename F1=Steps F3 = Remaining&#59<br/>run&#59<br/><br/>/*VXC_R2. Note: there could be persons continuously covered until the 365th day since entry, but died<br/>&nbsp&nbsp&nbsp&nbspon the 365th day. These patients, if exist, should be excluded*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those deceased within follow-up period \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R3. Adding the flow info after excluding those stayed in LTC during washout or follow-up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those admitted to long term care facilities within washout,or follow-up period \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R4 Adding the flow info after excluding those stayed in an out province facility*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VXA3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those unable to obtain sufficient data for analysis (e.g. stayed in an out-out-province facility for acute care during follow-up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R5 Adding the flow info after excluding those pregnant during run-in or followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXA,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those pregnant during run-in or followup \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R6. Adding the flow info after excluding those not have encounters with a GP during followup */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXB_pt,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding those not having encounters with a GP during follow up \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*VXC_R7. Adding the flow info after excluding those whose GP missing age, sex, grad year, grad country info */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_R7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\"Excluding patients whose usual care provider missing age, sex, grad year, grad country info \" as Steps length=500,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount (key_hsn) as Remaining<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*VXC_R8. Putting all steps together */<br/>data VXC_R8&#59<br/>&nbsp&nbsp&nbsp&nbspobs=_n_&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R1-VXC_R7&#59<br/>run&#59<br/><br/><br/><br/>/*the above is quite messy, and need further clean up<br/>*/<br/>/*1. merge those missing age info or age < 18 on entry*/<br/>data VXC_R9a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R8 (obs=4)&#59<br/>&nbsp&nbsp&nbsp&nbspif obs ne 3&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=4 then Steps = \"Excluding those missing age/sex information or age < 18 on entry\"&#59<br/>run&#59<br/><br/>/*2.  swap step 6 and 7, and then merge step 5 and the original step 7<br/>&nbsp&nbsp&nbsp&nbspNote: step 5 already contains patients deceased during follow up, but missing those deceased on the 365th day<br/>&nbsp&nbsp&nbsp&nbspThose deceased on the 365th day were reported in step 7. <br/>&nbsp&nbsp&nbsp&nbspIt is better to merge step 5 and 7, otherwise the report would be awkward.<br/>*/<br/>data VXC_R9b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R8 (firstobs=5)&#59<br/>&nbsp&nbsp&nbsp&nbspif obs = 6 then obs=6.2&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=7 then obs = 6.1&#59<br/>run&#59<br/>%sort(data=VXC_R9b, sorter=obs)&#59<br/><br/>/*The following is to:<br/>1) Change the description of step 5, add \"including those deceased\"<br/>2) change the remaining number in step 6.2, make it the same as in step 6.1. That way, the row step 6.1 can be removed.<br/>&nbsp&nbsp&nbsp&nbsp(the step 6.1 is merged with step 5)<br/>*/<br/>data VXC_R9c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R9b&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=5 then steps = \"Excluding those not continuously registered for healthcare service within the washout period of 1825 days, or a follow-up period of 365 days (including those deceased during follow-up period)\"&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=6.1 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa = remaining &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain a&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=6.2 then remaining = a&#59<br/>&nbsp&nbsp&nbsp&nbspdrop a&#59<br/>run&#59<br/><br/>data VXC_R9d&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R9c&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=6.1 then delete&#59<br/>run&#59<br/><br/>/*also, merge step 11 and 12 (not having GP visits, or the info of GP cannot be traced)<br/>&nbsp&nbsp&nbsp&nbspNote: according to the new protocol as of Feb2, there is no request for GP info, so it indeed does not matter even<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGP's info cannot be traced (missing age, sex)<br/>&nbsp&nbsp&nbsp&nbspHowever, the analyses plan may change to include GP age sex variables. If so, the cohort has to be redefined. <br/>&nbsp&nbsp&nbsp&nbspGiven that there are only < 6 cases to exclude for missing GP age/sex info, it makes sense to exclude these case so as to have a clean cohort.<br/>*/<br/><br/>data VXC_R9e&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R9d&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=12 then Steps = \"Excluding those not having encounters with a GP during follow up, or the GP's demographic info (age/sex) cannot be traced\"&#59<br/>&nbsp&nbsp&nbsp&nbspif obs=11 then delete&#59<br/>run&#59<br/><br/>data localt.VXC_R&#59<br/>&nbsp&nbsp&nbsp&nbspformat N 8.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_R9a VXC_R9e&#59<br/>&nbsp&nbsp&nbsp&nbspN = _N_&#59<br/>&nbsp&nbsp&nbsp&nbspdrop obs&#59<br/>&nbsp&nbsp&nbsp&nbspif N >0 then &nbsp&nbsp&nbsp&nbspExcluded = lag(Remaining)-Remaining&#59<br/>&nbsp&nbsp&nbsp&nbspProject = &_clientprojectname&#59<br/>&nbsp&nbsp&nbsp&nbspProgram = &_clienttasklabel&#59<br/>&nbsp&nbsp&nbsp&nbspCreateDate = date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat CreateDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprename Remaining = NPatients_remaining&#59<br/>run&#59<br/><br/><br/>%print(data=localt.VXC_R)&#59<br/><br/>proc export data=localt.VXC_R<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T1.Patient Flow\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"84911871-de5d-462d-a257-c2605327ccb4"},{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad"},{"idx":"71a23964-155b-48d9-96ff-c827524acc05"}]},{"idx":"71a23964-155b-48d9-96ff-c827524acc05","name":"VXC_F_UPCIndex in Followup &amp; UCPF","NodeDescription":"///t<br/>///s<br/>/*VXC_F determine the upc index during follow up for all the encounterd GPs during follow up*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_F0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb_pt.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb_pt.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/>/*VXC_F1, From vxb, get claims with follow up, i.e., 365 days since to the index(entryDate) */<br/>data VXC_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_F1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_F2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_F2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_F3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_F3a, determine the highest UPC index of each patient */<br/>data VXC_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_F3b1, link the patient and highest UPC index back to VXC_F2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/><br/>/*VXC_F3b2, insert a step here to exclude patients who had only one UCP, and the UCP <br/>&nbsp&nbsp&nbsp&nbspcannot be found in the mobility file (the UCP does not have age/sex, ... info)<br/>*/<br/>/*VXC_F3b2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/><br/>/*VXC_F3b2a have a distinct list of doc from F3b (the physicians ever had encounters with cohort patients*/<br/>%distinct(data=VXC_F3b1, target=VXC_F3b2, vars=key_doc_num)&#59<br/>/*VXC_F3b1b keep records in which sex, age, ... is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXC_F3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_F3b1b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXC_F3b2b, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXC_F3b2c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXC_F3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_F3b2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXC_F3b2c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%freq(data=VXC_F3b2, table=Doc&docVar)&#59*/<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*the above results in a list of physicians with complete info of age, sex, grad year, and grad country*/<br/><br/>/*Link VXC_F3b2 to VXC_F3b1, select patients whose physician are in F3b2<br/>&nbsp&nbsp&nbsp&nbspIn F3b2, physicians are not missing for age, sex, grad year and grad country<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_F3b1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upcindex desc) <br/>)&#59<br/><br/><br/>/*VXC_F3c. determine the UCPF. In case of tie, getUCPF1,UCPF2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPFs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPF.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPF1, 2, etc<br/>*/<br/>data VXC_F3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPF='UCPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsF N_visits = NMax_VisitsPerDocF UPCIndex=UPCIndexF&#59<br/>run&#59<br/>/*VXC_F3d. Now we can transpose the string in theStr into columsn of UCPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPF1, 1, \":\") is the key_doc_num of UCPF1, scan(UCPF1, 2, \"&#59\") is the n_visits of UCPF1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_F3c, target=VXC_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocF  T_VisitsF UPCIndexF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPF1= scan(UCPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_F4. The docs in VXC_F3 are UCPFs, link them back to vxb_pt(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxb_pt,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPFs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPF2 ne '' then MultipleUCPFs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPFs)&#59*/<br/>%exportvars(data=VXC_F)&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"6311561c-a1df-48ac-ac87-c6c343b6a617","name":"VXCB_R_UPCIndex in Run-in Period","NodeDescription":"///t<br/>///s<br/>/*VXCB_R determine the upc index during run-in for all the encounterd GPs during follow up*/<br/>data _null_&#59run&#59<br/><br/>/*VXCB_R0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb_pt.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb_pt.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxc_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxc_F.sas7bdat)<br/>)&#59<br/><br/>%print(data=VXB)&#59<br/><br/>/*VXCB_R1, From vxb, get claims with run-in, i.e., 365 days prior to the index(entryDate) */<br/>data VXCB_R1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &followdays and entryDate  -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXCB_R1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXCB_R2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXCB_R2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXCB_R3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXCB_R3a, determine the highest UPC index of each patient */<br/>data VXCB_R3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXCB_R2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXCB_R3b1, link the patient and highest UPC index back to VXCB_R2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXCB_R2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXCB_R3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXCB_R3b1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/><br/>/*VXCB_R3b2, insert a step here to exclude patients who had only one UCP, and the UCP <br/>&nbsp&nbsp&nbsp&nbspcannot be found in the mobility file (the UCP does not have age/sex, ... info)<br/>*/<br/>/*VXCB_R3b2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/><br/>/*VXCB_R3b2a have a distinct list of doc from F3b (the physicians ever had encounters with cohort patients*/<br/>%distinct(data=VXCB_R3b1, target=VXCB_R3b2, vars=key_doc_num)&#59<br/>/*VXCB_R3b1b keep records in which sex, age, ... is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXCB_R3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXCB_R3b1b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXCB_R3b2b, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXCB_R3b2c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXCB_R3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXCB_R3b2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXCB_R3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXCB_R3b2c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXCB_R3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%freq(data=VXCB_R3b2, table=Doc&docVar)&#59*/<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*the above results in a list of physicians with complete info of age, sex, grad year, and grad country*/<br/><br/>/*Link VXCB_R3b2 to VXCB_R3b1, select patients whose physician are in F3b2<br/>&nbsp&nbsp&nbsp&nbspIn F3b2, physicians are not missing for age, sex, grad year and grad country<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXCB_R3b1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXCB_R3b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXCB_R3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upcindex desc) <br/>)&#59<br/><br/><br/>/*VXCB_R3c. determine the UCPR. In case of tie, getUCPR1,UCPR2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPRs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPR <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPR.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPR1, 2, etc<br/>*/<br/>data VXCB_R3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXCB_R3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPR='UCPR' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPR='UCPR' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsF N_visits = NMax_VisitsPerDocR UPCIndex=UPCIndexR&#59<br/>run&#59<br/>/*VXCB_R3d. Now we can transpose the string in theStr into columsn of UCPR1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPR1, 1, \":\") is the key_doc_num of UCPR1, scan(UCPR1, 2, \"&#59\") is the n_visits of UCPR1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXCB_R3c, target=VXCB_R3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocR  T_VisitsF UPCIndexR  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPR,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPR1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXCB_R3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPR1= scan(UCPR1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXCB_R4. The docs in VXCB_R3 are UCPRs, link them back to vxc_f(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=vxc_f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXCB_R3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXCB_R,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXCB_R.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXCB_R.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXCB_R&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPRs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPR2 ne '' then MultipleUCPRs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPRs)&#59*/<br/>%exportvars(data=VXCB_R)&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"71a23964-155b-48d9-96ff-c827524acc05"},{"idx":"84911871-de5d-462d-a257-c2605327ccb4"}]},{"idx":"4a0c4e9f-7462-48c4-a01e-f9c1d49f0007","name":"QVXC_F","NodeDescription":"///t<br/>///s<br/>/*<br/>[to do]<br/>1. Why the file is so small? VXC_F is only 1k?!!!!!! need to rerun it<br/><br/>1. Why the UPC Index is so high (25% percentile =60%, median =77%)<br/>  Need to validate by comparing  some patients with their previous run data on Z drive<br/><br/>2. How many patients are with 1 encounter? <br/>&nbsp&nbsp&nbsp&nbspWhat if taking out those with 1 encounter, how does the percentile median  of UPC index change<br/><br/>3. How is the distribution of 2 year UPC index<br/>*/<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>/*better. The UPCIndex level lowered*/<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"3b572cfb-cd51-4134-b129-71e373084e98","name":"Additional Analysis of UPCindex","NodeDescription":"///t<br/>///s<br/>/*settings*/<br/>%include \"S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas\" /LRECL=32767&#59<br/><br/>%let oldLocalT = Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data&#59<br/>libname oLocalT \"&oldLocalT\"&#59<br/>/*the path with old UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXD_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&oldLocalT.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>)&#59<br/>data UPCI_Old&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F&#59<br/>run&#59<br/><br/>%let newLocalT = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59<br/>libname nLocalT \"&newLocalT\"&#59<br/>libname LocalT \"&newLocalT\"&#59<br/>/*the path with new UPCIndex data <br/>&nbsp&nbsp&nbsp&nbspi.e. VXC_F.zip in Z:\\My Project\\Projects\\PhD Thesis\\StatinCohort\\Output\\Result data<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data UPCI_New&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>run&#59<br/><br/>%print(data=UPCI_old)&#59<br/>%print(data=UPCI_new)&#59<br/><br/>/*patients appeared in both old and new cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbsptarget=test1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*more questions!!!!! why there were patients in new cohort, but NOT in old cohort? */<br/><br/>/*For patients in test1, from the old data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_old,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t1.T_visitsF, t1.UPCPF1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3a&#59<br/>&nbsp&nbsp&nbsp&nbspset test2a&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(UPCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = input(scan(UPCPF1, 2, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1= input(scan(UPCPF1, 4, \":\"), 8.2)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif Index1=UPCIndex&#59<br/>run&#59<br/><br/>/*For patients in test1, from the new data, get the entry date,  UPC index, Total encounters, and the UCPs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=UPCI_new,<br/>&nbsp&nbsp&nbsp&nbspt2=test1,<br/>&nbsp&nbsp&nbsp&nbsptarget=test2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate,t1.NMax_VisitsPerDocF, t1.UpcIndexF, t1.T_visitsF, t1.ucpf1),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby =key_hsn<br/>)&#59<br/>data test3b&#59<br/>&nbsp&nbsp&nbsp&nbspset test2b&#59<br/>&nbsp&nbsp&nbsp&nbsplength docID $11.&#59<br/>&nbsp&nbsp&nbsp&nbspdocID = scan(ucpf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF = NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspIndex1=round(UPCIndexF, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex=round((N_VisitsF/T_VisitsF) * 100, '.01')&#59<br/>&nbsp&nbsp&nbsp&nbspif index1 = UPCIndex&#59<br/>run&#59<br/><br/>/*from the above test3a and b, make a head to head comparison set for each var*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=test3a,<br/>&nbsp&nbsp&nbsp&nbspt2=test3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=test4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_hsn,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate as entryDate_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.entryDate as entryDate_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.DocID as DocID_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.DocID as DocID_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.N_VisitsF as N_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_VisitsF as N_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.T_VisitsF as T_VisitsF_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.T_VisitsF as T_VisitsF_new,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.UPCIndex as UPCIndex_old,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.UPCIndex as UPCIndex_new<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*check those not having the same N_VisitsF*/<br/>data test5&#59<br/>&nbsp&nbsp&nbsp&nbspset test4&#59<br/>&nbsp&nbsp&nbsp&nbspif entryDate_old ne entryDate_new&#59<br/>run&#59<br/>/*none*/<br/><br/>/*the T_VisitsF sounds different<br/>&nbsp&nbsp&nbsp&nbsp1) ? Was it because SPEC visits were included in the old data<br/>&nbsp&nbsp&nbsp&nbsp2) ? Was it because sometimes a the UCP (as GP) was acting as SP, and the visits as SP is also accounted<br/>*/<br/>/*get the first patient in test4*/<br/>Data test6&#59<br/>&nbsp&nbsp&nbsp&nbspset test4 (obs=1)&#59<br/>run&#59<br/>/*get the patients msb claims within follow up*/<br/>%let newDataPath = P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>/*%minmax(data=master_msb, var=dos, format=date9., target=xxx, m=min)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test6,<br/>&nbsp&nbsp&nbsp&nbsptarget=test7a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate_new),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data test7b&#59<br/>&nbsp&nbsp&nbsp&nbspset test7a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate_new and entrydate_new + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test7c&#59<br/>&nbsp&nbsp&nbsp&nbspset test7b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test7c, target=test7d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/>/*Yep, in the old data, T_visits included encounters to SPs*/<br/><br/>/*So, for UPC index calculation, what constructs the proper denominator? with or without encounters to SPs?<br/>&nbsp&nbsp&nbsp&nbspcheck the comment in the proposal file in dropbox: <br/>&nbsp&nbsp&nbsp&nbspcontinuity ofphysician care patterns 20191205.docx. Page 21 comments<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspThe denomintor should be to all family physicians (supported by Provost, and CiHI's paper). However, both of the paper<br/>&nbsp&nbsp&nbsp&nbsplimited to those having at least twice visits to GPs. <br/>&nbsp&nbsp&nbsp&nbspIn Provost's cohort, within 2 years, the % with UPC index . 75% is 37.5%<br/>&nbsp&nbsp&nbsp&nbspIn CIHI report, the 'average' (mean? median?) of UPC index in SK (2007-2012) is 0.56 <br/>&nbsp&nbsp&nbsp&nbsp(of what period?, )<br/>&nbsp&nbsp&nbsp&nbspwhat is the quintile distribution look like?<br/>&nbsp&nbsp&nbsp&nbspFor all the provinces (not SK specific), \"approximately one-quater of patients were in the low (<0.4) and high(0.8) category\"<br/>&nbsp&nbsp&nbsp&nbsp(page 7). <br/>*/<br/><br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/><br/>/*how many patients with only 1 T_visitsF*/<br/>data test8&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test8, table = TVF_Cat)&#59<br/>/*excluding those with only 1 T_visitsF?*/<br/>proc means data=VXC_F mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>run&#59<br/>proc univariate data=VXC_F &#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsF>1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF / normal&#59<br/>run&#59<br/>/*Similar !*/<br/><br/>/*whose index is 100%*/<br/>data test9&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>run&#59<br/>/*among those UPCIndex=100, how many only had 1 visits*/<br/>data test9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F&#59<br/>&nbsp&nbsp&nbsp&nbspTVF_Cat='>1'&#59<br/>&nbsp&nbsp&nbsp&nbspif T_visitsF =1 then TVF_Cat='1'&#59<br/>run&#59<br/>%freq(data=test9, table = TVF_Cat)&#59 <br/>/*Not a lot at all*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbspt2=test9,<br/>&nbsp&nbsp&nbsp&nbsptarget=test12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, entryDate)<br/>)&#59<br/>data test12b&#59<br/>&nbsp&nbsp&nbsp&nbspset test12a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere dos between entrydate and entrydate + 365-1&#59<br/>run&#59<br/>/*further remove records that are not eligible*/<br/>data test12c&#59<br/>&nbsp&nbsp&nbsp&nbspset test12b&#59<br/>&nbsp&nbsp&nbsp&nbspwhere<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSlushCode = 'N'<br/>&#59<br/>run&#59<br/>/*from above, get distinct records by patient doc spec and date*/<br/>%distinct(data=test12c, target=test12d, vars=%str(key_hsn, key_doc_num, spec, dos), orderby=key_doc_num)&#59<br/><br/><br/><br/><br/>/*How is the distribution of 2 year UPC index*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&newLocalT.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>%print(data=VXF_FS)&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/>proc means data=VXF_FS mean median q1 q3&#59<br/>&nbsp&nbsp&nbsp&nbspwhere T_visitsW>1&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexW&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"4a0c4e9f-7462-48c4-a01e-f9c1d49f0007"}]},{"idx":"f2dd3bdf-2b40-485e-b0d3-789103fbc870","name":"Nirmal's code for UPC","NodeDescription":"///t<br/>///s<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/>/*vaheguru ji   Extract MSB data*/<br/>%include '/SAS_data/dw0/HQC_share/Clean/library_dw0.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/demog_assign.sas'&#59<br/>%include '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/coverage_days.sas'&#59<br/>libname ppr '/SAS_data/dw0/HQC_share/nsidhu/PPR/data_MS'&#59<br/>%INCLUDE '/SAS_data/dw0/HQC_Data_Lab/Macros/DataManip/Extract_MSB.sas'&#59&nbsp&nbsp&nbsp&nbsp<br/>%Extract_MSB(xtrc_start_dt='31Mar2012'd,<br/>                   xtrc_end_dt='26Mar2018'd, <br/>                   excl_xtrc_dt=, <br/>                   ds_out=temp_msb, <br/>                   ds_out_hsn_only=, <br/>                   hsn_list=, <br/>                   hsn_file=, <br/>                   MDnumber=, <br/>                   diagcode=, <br/>&nbsp&nbsp&nbsp&nbsp      &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   diag_file=, <br/>                   dostart='01Apr2013'd, <br/>                   dosend='31Mar2018'd, <br/>                   fscode=, <br/>                   loscode=, <br/>                   othercondition=, <br/>                   othernumber=, <br/>                   kept_vars=KEY_HSN KEY_DOC_NUM SPEC MG DIAG FSC NUM_SRV LOS CONTACTS AMT_APP MODE, <br/>                   debug=N)&#59&nbsp&nbsp&nbsp&nbsp<br/>data ppr.temp_msb1&#59<br/>set temp_msb&#59<br/>SPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>if SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>run&#59<br/><br/>/*<br/>Quality Checks: Check below for the chosen 4 physicians, <br/>Proc freq variable SPEC and LOS<br/>Check the earliest dos_1 for each of 4 physicians<br/>Extract the data of these 4 physicians from the physician mobility file to check the practice start dates<br/>*/<br/>proc freq data=ppr.temp_msb1&#59<br/>table spec los&#59<br/>run&#59<br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>set ppr.temp_msb1&#59<br/>/*<br/>if key_doc_num in ('51925304676' '42925324679' '27925304675' '63825354679' '05825374675' '73925324675') <br/>then key_doc_num='00123456789'&#59<br/>*/<br/><br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>if key_doc_num in:(&slush) then delete&#59<br/>if spec not in: ('B') then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/>proc freq data=temp_msb2&#59<br/>tables spec&#59 run&#59<br/>/*Step 4 removing same day, same doctor visits: <br/>NOTE: There were 32003786 observations read from the data set WORK.TEMP_MSB2.<br/>NOTE: 5942281 observations with duplicate key values were deleted.<br/>NOTE: The data set PPR.TEMP_MSB2 has 26061505 observations and 14 variables.<br/>*/<br/>data ppr.temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=ppr.temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=ppr.temp_msb1x out=ppr.temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/>/*<br/>NOTE: There were 26061505 observations read from the data set PPR.TEMP_MSB2.<br/>NOTE: The data set WORK.TEMP_MSB_3YEAR has 15783671 observations and 14 variables.<br/>*/<br/>data temp_msb_3year&#59<br/>set ppr.temp_msb2&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/>run&#59<br/><br/><br/>/*checking coverage on Mar 31, 2018*/<br/>data temp_msb_3year&#59<br/>set temp_msb_3year&#59<br/>cover_dt1='1Dec2017'd&#59<br/>cover_dt='31Dec2017'd&#59 /*change these dates to 31Mar 2018 when data comes*/<br/>format cover_dt date9. cover_dt1 date9.&#59<br/>run&#59<br/><br/>%coverage_days(xtrc_dt='02JAN2018'd,<br/>&nbsp&nbsp&nbsp&nbspds_in=temp_msb_3year,<br/>&nbsp&nbsp&nbsp&nbspds_out=temp_msb_3year_covered, <br/>&nbsp&nbsp&nbsp&nbspstrt_dt_var=cover_dt,      <br/>&nbsp&nbsp&nbsp&nbspend_dt_var=cover_dt,<br/>&nbsp&nbsp&nbsp&nbspdef_strt_dt=07DEC1994,<br/>&nbsp&nbsp&nbsp&nbspdef_end_dt=&sysdate9,<br/>&nbsp&nbsp&nbsp&nbspcvrg_strt_dt_var=eff_date,<br/>&nbsp&nbsp&nbsp&nbspcvrg_end_dt_var=exp_date)&#59<br/>proc freq data=temp_msb_3year_covered&#59<br/>table cvgdays&#59<br/>run&#59<br/>/*keeping if covered on last day of month*/<br/>data temp_msb_3yearx&#59<br/>set temp_msb_3year_covered&#59<br/>if cvgdays=1&#59<br/>run&#59<br/><br/>proc sort data=temp_msb_3yearx out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/>proc sql noprint&#59 <br/>create table temp_msb_3year1 as <br/>select *, count(dos_1) as total_visits3<br/>from temp_msb_3yearx<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_3year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/>proc freq data=checkz&#59table total_visits3&#59run&#59<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_3year2 as <br/>select *, count(dos_1) as total_visits_phy3<br/>from temp_msb_3year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data ppr.visits_by_phy_3year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3&#59<br/>set temp_msb_3year2&#59<br/>upc3=(total_visits_phy3/total_visits3)*100&#59<br/>format upc3 6.2&#59<br/>run&#59<br/>proc sort data=ppr.visits_by_phy_3year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>/*Single provider*/<br/>data sole_visits ppr.after_sole_visits&#59/*sole=921798 1061676+rest left out=14861873=Total of 15783671*/<br/>set ppr.visits_by_phy_3year&#59<br/>if upc3=100 then output sole_visits&#59<br/>else output ppr.after_sole_visits&#59<br/>run&#59<br/>proc sort data=sole_visits&#59/*sorting this way? Idea is to keep the last visit date*/<br/>by key_hsn descending dos_1 key_doc_num&#59 <br/>run&#59<br/>proc sort data=sole_visits nodupkey out=ppr.sole_visits&#59/*729502 accounting for 921798 visits*/<br/>by key_hsn key_doc_num&#59 <br/>run&#59<br/>data ppr.sole_visits&#59<br/>set ppr.sole_visits&#59<br/>step=1&#59<br/>run&#59<br/><br/>/*192296 individuals keys are alloted physician based on sole provider*/<br/>proc sort data=ppr.sole_visits out=check1 nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*14861873 observations (or 938099 unique individuals) has to allocated doctor based on criteria below*/<br/>proc sort data=ppr.after_sole_visits out=check nodupkey&#59<br/>by key_hsn&#59<br/>run&#59<br/>/*<br/>2. Majority Provider&#59 <br/>3. if tie then PHYSICAL EXAM(3B), CDM(64B), SUPPORTIVE CARE(52B), WELL BABY(4B) takes prority&#59<br/>4. if no physical then date of service takes priority<br/>*/  <br/>data after_sole_visitsx&#59<br/>retain key_hsn upc3 FSC physical_flag dos_1 key_doc_num&#59<br/>set ppr.after_sole_visits&#59<br/>/*if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59*/<br/>run&#59<br/>proc freq data=after_sole_visitsx&#59 tables physical_flag&#59 run&#59<br/>proc sort data=after_sole_visitsx&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=after_sole_visitsx out=after_sole_visitsxz nodupkey&#59 /*904902 accounting for 14084916 visits*/<br/>by key_hsn&#59<br/>run&#59<br/><br/>/*to add which step contributed, i changed code as under and we get same result*/<br/>/*Here starts setp 2*/<br/>proc sort data=after_sole_visitsx out=step2A nodupkey&#59<br/>by key_hsn upc3 key_doc_num&#59<br/>run&#59<br/>proc sort data=step2A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=step2A&#59<br/>tables total_visits3&#59<br/>run&#59<br/><br/>data step2B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step2A point=_n_&#59<br/>leadupc3=upc3&#59<br/>end&#59<br/>set step2A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadupc3=.&#59<br/>run&#59<br/>data step2C&#59<br/>set step2B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadupc3=.&#59<br/>end&#59<br/>run&#59<br/>data step2D&#59<br/>set step2C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if upc3 GT leadupc3 then step=2&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step2D&#59<br/>tables step&#59<br/>run&#59<br/>data step2E&#59/*741493 unique people got alloted in step 2*/<br/>set step2D&#59<br/>if step=2&#59<br/>run&#59<br/>proc sort data=step2E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/* Dec2019<br/>just checking who got allotted in step 2 and what is there next highest ups3*/<br/>data test22&#59<br/>set step2A&#59<br/>keep key_hsn key_doc_num upc3 total_phys&#59<br/>run&#59<br/>proc sort data=test22&#59<br/>by KEY_HSN descending upc3&#59<br/>run&#59<br/>data test23&#59<br/>set test22&#59<br/>by KEY_HSN descending upc3&#59<br/>if first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbspdocN=1&#59<br/>&nbsp&nbsp&nbsp&nbspcumuUPC3=UPC3&#59<br/>End&#59<br/>else do&#59<br/>&nbsp&nbsp&nbsp&nbspdocN+1&#59<br/>&nbsp&nbsp&nbsp&nbspcumuUPC3 + UPc3&#59<br/>end&#59<br/>run&#59<br/>data test24&#59<br/>set test23&#59<br/>if docN =1<br/>or<br/>(docN=2 and cumuUPC3 ge 75 and (cumuUPC3 - upc3) le 50)&#59<br/>run&#59<br/><br/>data test24only2nd&#59<br/>&nbsp&nbsp&nbsp&nbspset test23&#59<br/>&nbsp&nbsp&nbsp&nbspif (docN=2 and cumuUPC3 ge 75 and (cumuUPC3 - upc3) le 50)&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/><br/>/*May 21, 2019*/<br/>/*Cretating artifical data*/ <br/>proc freq data=ppr.UNIQUE_PHY_PATIENTS_DEMOG&#59<br/>tables step&#59<br/>run&#59<br/><br/><br/>proc freq data=randomdataMay21&#59<br/>where dr=2&#59<br/>tables step sex upc&#59<br/>run&#59<br/><br/>s///<br/>t///","children":[{"idx":"3046bf4f-8bad-422b-b47d-d1a1c60b6ca0","name":"UPCINdex Cross Check","NodeDescription":"///t<br/>///s<br/>/*Check the UPC index calculation*/<br/><br/>/*1. Get a list of patients who had 100% UPC Index from the statin cohort*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_F.sas7bdat)<br/>)&#59<br/>data ptFile&#59<br/>&nbsp&nbsp&nbsp&nbspset vxc_f&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num entryDate UPCIndexF N_VisitsF T_visitsF UCPF1&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, ':')&#59<br/>&nbsp&nbsp&nbsp&nbspN_VisitsF= input(scan(UCPF1, 2, ':'), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF=100&#59<br/>&nbsp&nbsp&nbsp&nbspIf Year(entryDate) = 2015 and month(entryDate)=6&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get patients of june 2015*/<br/>run&#59<br/><br/>/* T_VisitsF :8. UpcIndexF :8.2 key_doc_num :$11. N_VisitsF:8.0 &#59*/<br/>data _tmp2&#59<br/>&nbsp&nbsp&nbsp&nbspinput key_hsn $11. @13 EntryDate $8. @22 key_doc_num $11. T_VisitsF&#59<br/>&nbsp&nbsp&nbsp&nbspdatalines&#59<br/>00235324616&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp51925324674&nbsp&nbsp&nbsp&nbsp1<br/>00445374626&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp13925314674&nbsp&nbsp&nbsp&nbsp4<br/>00525334689&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp39925334673&nbsp&nbsp&nbsp&nbsp3<br/>01245314612&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp30825354679&nbsp&nbsp&nbsp&nbsp5<br/>01245334644&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp3<br/>01645334623&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp5<br/>02345364614&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp13<br/>02435324646&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp2<br/>02635324613&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp84825354675&nbsp&nbsp&nbsp&nbsp7<br/>03045374659&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp48825344672&nbsp&nbsp&nbsp&nbsp1<br/>03435304629&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp02925334670&nbsp&nbsp&nbsp&nbsp7<br/>03635314617&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp03925334679&nbsp&nbsp&nbsp&nbsp2<br/>03745334632&nbsp&nbsp&nbsp&nbsp06062015&nbsp&nbsp&nbsp&nbsp54825364678&nbsp&nbsp&nbsp&nbsp1<br/>04545364628&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp94825354673&nbsp&nbsp&nbsp&nbsp1<br/>05025354686&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp00925344672&nbsp&nbsp&nbsp&nbsp8<br/>05045344633&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp34825394670&nbsp&nbsp&nbsp&nbsp4<br/>05045384663&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp36825364673&nbsp&nbsp&nbsp&nbsp17<br/>05445334628&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp9<br/>05535324648&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp14925324670&nbsp&nbsp&nbsp&nbsp13<br/>05635344636&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp53925334673&nbsp&nbsp&nbsp&nbsp4<br/>06425394687&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp31925314675&nbsp&nbsp&nbsp&nbsp2<br/>06545334630&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp84925334674&nbsp&nbsp&nbsp&nbsp1<br/>07145394631&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp15<br/>07645374660&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp75825394675&nbsp&nbsp&nbsp&nbsp1<br/>07735334622&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp1<br/>08635354630&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp50925344670&nbsp&nbsp&nbsp&nbsp7<br/>09245314616&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp04925324678&nbsp&nbsp&nbsp&nbsp4<br/>09335304664&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp36825364673&nbsp&nbsp&nbsp&nbsp6<br/>10035324649&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp4<br/>10435334696&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp54925304678&nbsp&nbsp&nbsp&nbsp8<br/>10545304645&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp5<br/>12645304660&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp2<br/>12725354684&nbsp&nbsp&nbsp&nbsp21062015&nbsp&nbsp&nbsp&nbsp35825394670&nbsp&nbsp&nbsp&nbsp6<br/>12735324638&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp53925324670&nbsp&nbsp&nbsp&nbsp4<br/>12935334620&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp8<br/>13635354613&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp43825384679&nbsp&nbsp&nbsp&nbsp8<br/>13835384694&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp53825374672&nbsp&nbsp&nbsp&nbsp1<br/>14235364669&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>14235394628&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp54825374674&nbsp&nbsp&nbsp&nbsp6<br/>14925394693&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp5<br/>15035314639&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp3<br/>15745394635&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp14<br/>16135304676&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp7<br/>16435354680&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp4<br/>16645304631&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp8<br/>17145314622&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp04825354673&nbsp&nbsp&nbsp&nbsp3<br/>17535324604&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp7<br/>17835324625&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp01925324677&nbsp&nbsp&nbsp&nbsp6<br/>17835324669&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp21825374675&nbsp&nbsp&nbsp&nbsp3<br/>18025334681&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp51825364673&nbsp&nbsp&nbsp&nbsp4<br/>18225364687&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp89825394674&nbsp&nbsp&nbsp&nbsp6<br/>18435334665&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp2<br/>18745304609&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp6<br/>19435394665&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp07825354677&nbsp&nbsp&nbsp&nbsp5<br/>19735354609&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp76825374676&nbsp&nbsp&nbsp&nbsp12<br/>19745324640&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp18825344679&nbsp&nbsp&nbsp&nbsp12<br/>20235334602&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp24925334675&nbsp&nbsp&nbsp&nbsp16<br/>20535314682&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp82925314673&nbsp&nbsp&nbsp&nbsp8<br/>20745344608&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp20925334675&nbsp&nbsp&nbsp&nbsp13<br/>20935364648&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp65825394676&nbsp&nbsp&nbsp&nbsp4<br/>21125344689&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp7<br/>21345324667&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp34825374674&nbsp&nbsp&nbsp&nbsp1<br/>21535324632&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp08825374677&nbsp&nbsp&nbsp&nbsp3<br/>21545314616&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp04925304673&nbsp&nbsp&nbsp&nbsp2<br/>21645334631&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp7<br/>21835384645&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp18925304671&nbsp&nbsp&nbsp&nbsp8<br/>22135354641&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp62925324675&nbsp&nbsp&nbsp&nbsp1<br/>22635324654&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp84825354671&nbsp&nbsp&nbsp&nbsp10<br/>23045304655&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp73925314676&nbsp&nbsp&nbsp&nbsp5<br/>23145324638&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp29825344670&nbsp&nbsp&nbsp&nbsp1<br/>23225354681&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp6<br/>23535304638&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp6<br/>24035344679&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp3<br/>24735344672&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp30925344676&nbsp&nbsp&nbsp&nbsp2<br/>25745394647&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp6<br/>26135314641&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp14925334677&nbsp&nbsp&nbsp&nbsp4<br/>26145344664&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp03825394679&nbsp&nbsp&nbsp&nbsp7<br/>26545374603&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp70825364675&nbsp&nbsp&nbsp&nbsp6<br/>26935344612&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>27225394696&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp04925324678&nbsp&nbsp&nbsp&nbsp3<br/>27345394626&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp04825364672&nbsp&nbsp&nbsp&nbsp14<br/>27425334696&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp16<br/>27435314625&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp44825394677&nbsp&nbsp&nbsp&nbsp5<br/>27445394634&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp4<br/>27545304610&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp23<br/>27545384608&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp03925344674&nbsp&nbsp&nbsp&nbsp4<br/>28335374683&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp62925324670&nbsp&nbsp&nbsp&nbsp2<br/>28535394624&nbsp&nbsp&nbsp&nbsp13062015&nbsp&nbsp&nbsp&nbsp43825354674&nbsp&nbsp&nbsp&nbsp3<br/>28935324687&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp5<br/>30145324642&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp85925344673&nbsp&nbsp&nbsp&nbsp1<br/>30635364613&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp73825364677&nbsp&nbsp&nbsp&nbsp1<br/>31425334682&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp4<br/>31635314629&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp4<br/>31735354628&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp74925344674&nbsp&nbsp&nbsp&nbsp4<br/>31935354676&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp12825394679&nbsp&nbsp&nbsp&nbsp1<br/>32435384603&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp4<br/>32435384621&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp3<br/>32535324653&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp50925344670&nbsp&nbsp&nbsp&nbsp5<br/>32735384615&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp65825374677&nbsp&nbsp&nbsp&nbsp8<br/>32945374621&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp87825344678&nbsp&nbsp&nbsp&nbsp8<br/>33225384685&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp81825384676&nbsp&nbsp&nbsp&nbsp3<br/>33535394633&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp56825394673&nbsp&nbsp&nbsp&nbsp5<br/>33835394631&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp05825394672&nbsp&nbsp&nbsp&nbsp17<br/>34035374675&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp18925304678&nbsp&nbsp&nbsp&nbsp5<br/>34235354605&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp51825364673&nbsp&nbsp&nbsp&nbsp5<br/>34245374628&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp00925344679&nbsp&nbsp&nbsp&nbsp5<br/>34735394622&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp67925304673&nbsp&nbsp&nbsp&nbsp6<br/>35335364606&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp65825374677&nbsp&nbsp&nbsp&nbsp7<br/>35435344621&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp54925314671&nbsp&nbsp&nbsp&nbsp4<br/>35435354688&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp66925334670&nbsp&nbsp&nbsp&nbsp5<br/>35535394681&nbsp&nbsp&nbsp&nbsp07062015&nbsp&nbsp&nbsp&nbsp48825384674&nbsp&nbsp&nbsp&nbsp10<br/>35935314617&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp87825364679&nbsp&nbsp&nbsp&nbsp4<br/>35945384656&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp48825394679&nbsp&nbsp&nbsp&nbsp7<br/>36245344616&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp93925344678&nbsp&nbsp&nbsp&nbsp4<br/>36345354658&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp2<br/>38135374675&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp5<br/>38235304661&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp42825394671&nbsp&nbsp&nbsp&nbsp3<br/>38235354652&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp5<br/>38335374615&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp54825364679&nbsp&nbsp&nbsp&nbsp4<br/>38425354684&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp28<br/>38445384620&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp2<br/>39435344652&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp39925334673&nbsp&nbsp&nbsp&nbsp5<br/>40135384691&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp53925324670&nbsp&nbsp&nbsp&nbsp7<br/>40345384658&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp35825394670&nbsp&nbsp&nbsp&nbsp2<br/>40935354603&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp54825354670&nbsp&nbsp&nbsp&nbsp5<br/>41235364600&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp04925304673&nbsp&nbsp&nbsp&nbsp4<br/>41445374657&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp3<br/>41745394649&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp5<br/>42135304642&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp33825354675&nbsp&nbsp&nbsp&nbsp3<br/>42135354623&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp6<br/>42325364690&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp13<br/>42545394609&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp20925334675&nbsp&nbsp&nbsp&nbsp7<br/>42835364667&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp56825394676&nbsp&nbsp&nbsp&nbsp10<br/>43245354652&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp06825354671&nbsp&nbsp&nbsp&nbsp8<br/>43335354683&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp76825354679&nbsp&nbsp&nbsp&nbsp6<br/>43345384643&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp05825394672&nbsp&nbsp&nbsp&nbsp7<br/>43625374690&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp5<br/>45545394606&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp50925314671&nbsp&nbsp&nbsp&nbsp4<br/>45745334650&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp11<br/>45835394610&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp12825384676&nbsp&nbsp&nbsp&nbsp1<br/>46035364685&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp41825394677&nbsp&nbsp&nbsp&nbsp8<br/>46345364608&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp21925304670&nbsp&nbsp&nbsp&nbsp3<br/>46735374622&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp45825394678&nbsp&nbsp&nbsp&nbsp7<br/>47335364666&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp89825394674&nbsp&nbsp&nbsp&nbsp6<br/>47925374684&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp62925304677&nbsp&nbsp&nbsp&nbsp13<br/>48045314657&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp79925314676&nbsp&nbsp&nbsp&nbsp5<br/>48145334604&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp53825364671&nbsp&nbsp&nbsp&nbsp4<br/>48225394692&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp94925334675&nbsp&nbsp&nbsp&nbsp6<br/>48235384601&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp60925334677&nbsp&nbsp&nbsp&nbsp4<br/>49035324698&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp55925324677&nbsp&nbsp&nbsp&nbsp11<br/>49835364625&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp8<br/>50035364663&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp27925334672&nbsp&nbsp&nbsp&nbsp9<br/>50235384695&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp60825364675&nbsp&nbsp&nbsp&nbsp7<br/>50335344671&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp90925314678&nbsp&nbsp&nbsp&nbsp3<br/>50435384675&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp05825354673&nbsp&nbsp&nbsp&nbsp5<br/>51035304681&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp93925324674&nbsp&nbsp&nbsp&nbsp1<br/>51335354657&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp63925324678&nbsp&nbsp&nbsp&nbsp28<br/>51425364686&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp66825374671&nbsp&nbsp&nbsp&nbsp1<br/>52735374690&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp02925334675&nbsp&nbsp&nbsp&nbsp2<br/>52745344649&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp00925324674&nbsp&nbsp&nbsp&nbsp17<br/>53945374652&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp10825354678&nbsp&nbsp&nbsp&nbsp5<br/>54035364695&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp72825364678&nbsp&nbsp&nbsp&nbsp9<br/>54135344634&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp89825374670&nbsp&nbsp&nbsp&nbsp3<br/>54235334692&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp79925324674&nbsp&nbsp&nbsp&nbsp1<br/>54325354683&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp19<br/>54345384609&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp62925324670&nbsp&nbsp&nbsp&nbsp5<br/>54845384630&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp41825374679&nbsp&nbsp&nbsp&nbsp9<br/>54935384610&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp72925324671&nbsp&nbsp&nbsp&nbsp4<br/>56435344692&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp3<br/>56535364614&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp84825354670&nbsp&nbsp&nbsp&nbsp18<br/>57135344604&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp75825384670&nbsp&nbsp&nbsp&nbsp1<br/>57735314637&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp47825384679&nbsp&nbsp&nbsp&nbsp1<br/>57845384644&nbsp&nbsp&nbsp&nbsp04062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp2<br/>57935394680&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp28825364670&nbsp&nbsp&nbsp&nbsp10<br/>58035354632&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp08825384671&nbsp&nbsp&nbsp&nbsp11<br/>58735344628&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp74825354679&nbsp&nbsp&nbsp&nbsp5<br/>58735384624&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp37825344678&nbsp&nbsp&nbsp&nbsp8<br/>58835344624&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp82825364673&nbsp&nbsp&nbsp&nbsp9<br/>59245344656&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp47825354678&nbsp&nbsp&nbsp&nbsp6<br/>59425384682&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp05825374675&nbsp&nbsp&nbsp&nbsp2<br/>60135384652&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp89825374679&nbsp&nbsp&nbsp&nbsp5<br/>60225344688&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp08925324674&nbsp&nbsp&nbsp&nbsp1<br/>60335374601&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp13925334676&nbsp&nbsp&nbsp&nbsp4<br/>60525304698&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp67825394676&nbsp&nbsp&nbsp&nbsp8<br/>61645314653&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp74925344674&nbsp&nbsp&nbsp&nbsp9<br/>61745354651&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp63925344676&nbsp&nbsp&nbsp&nbsp5<br/>63025354695&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp96825344670&nbsp&nbsp&nbsp&nbsp1<br/>63125324681&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp48825394679&nbsp&nbsp&nbsp&nbsp5<br/>63335334614&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp56825364674&nbsp&nbsp&nbsp&nbsp5<br/>64535324696&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp5<br/>64935364615&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp96925324670&nbsp&nbsp&nbsp&nbsp5<br/>65535364662&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp35925324678&nbsp&nbsp&nbsp&nbsp4<br/>65635304639&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp29925324672&nbsp&nbsp&nbsp&nbsp5<br/>66245334602&nbsp&nbsp&nbsp&nbsp06062015&nbsp&nbsp&nbsp&nbsp19825374677&nbsp&nbsp&nbsp&nbsp3<br/>67025364699&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp11825384671&nbsp&nbsp&nbsp&nbsp4<br/>67745334640&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp38825384677&nbsp&nbsp&nbsp&nbsp3<br/>68245354616&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp43825354679&nbsp&nbsp&nbsp&nbsp7<br/>68345334607&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp03825374674&nbsp&nbsp&nbsp&nbsp8<br/>68735354614&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp19925334675&nbsp&nbsp&nbsp&nbsp8<br/>68835344648&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp48925324674&nbsp&nbsp&nbsp&nbsp9<br/>69535374624&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp28825384672&nbsp&nbsp&nbsp&nbsp3<br/>69635364692&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp96825364676&nbsp&nbsp&nbsp&nbsp4<br/>71535384616&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp6<br/>71645304660&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp43825384677&nbsp&nbsp&nbsp&nbsp15<br/>73025324689&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp40825384675&nbsp&nbsp&nbsp&nbsp3<br/>73525334682&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp38825384679&nbsp&nbsp&nbsp&nbsp5<br/>73735364670&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp7<br/>73745344644&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp66825374671&nbsp&nbsp&nbsp&nbsp4<br/>73835364675&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp07825384671&nbsp&nbsp&nbsp&nbsp5<br/>74335364665&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp5<br/>74645374651&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp21825364671&nbsp&nbsp&nbsp&nbsp6<br/>75135354623&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp5<br/>75525304693&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp11<br/>75545314644&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp03825394678&nbsp&nbsp&nbsp&nbsp1<br/>75935394628&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp86825374674&nbsp&nbsp&nbsp&nbsp5<br/>75945324607&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp48825354678&nbsp&nbsp&nbsp&nbsp4<br/>75945384642&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp47825384674&nbsp&nbsp&nbsp&nbsp6<br/>76425394696&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp86825394677&nbsp&nbsp&nbsp&nbsp5<br/>76445314657&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp39825384679&nbsp&nbsp&nbsp&nbsp15<br/>76535314686&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp93925344678&nbsp&nbsp&nbsp&nbsp7<br/>76645394622&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp39825384671&nbsp&nbsp&nbsp&nbsp7<br/>76845324623&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp00925344679&nbsp&nbsp&nbsp&nbsp7<br/>77635304626&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp89825354677&nbsp&nbsp&nbsp&nbsp4<br/>78145334640&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp51925324675&nbsp&nbsp&nbsp&nbsp9<br/>78545334655&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp88825384678&nbsp&nbsp&nbsp&nbsp6<br/>78545364604&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp17<br/>78735374672&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp47825354678&nbsp&nbsp&nbsp&nbsp1<br/>79045394662&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp50825364672&nbsp&nbsp&nbsp&nbsp4<br/>79135364630&nbsp&nbsp&nbsp&nbsp08062015&nbsp&nbsp&nbsp&nbsp21825374675&nbsp&nbsp&nbsp&nbsp3<br/>79435394633&nbsp&nbsp&nbsp&nbsp17062015&nbsp&nbsp&nbsp&nbsp03925344674&nbsp&nbsp&nbsp&nbsp20<br/>80445394636&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp30825354679&nbsp&nbsp&nbsp&nbsp4<br/>80625374684&nbsp&nbsp&nbsp&nbsp26062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp5<br/>80835354645&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp19925304670&nbsp&nbsp&nbsp&nbsp19<br/>82135344634&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp73925344671&nbsp&nbsp&nbsp&nbsp3<br/>82135364615&nbsp&nbsp&nbsp&nbsp27062015&nbsp&nbsp&nbsp&nbsp37825354678&nbsp&nbsp&nbsp&nbsp8<br/>82145344600&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp30825354673&nbsp&nbsp&nbsp&nbsp5<br/>82435304635&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp35925324678&nbsp&nbsp&nbsp&nbsp16<br/>82545354614&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp29925304670&nbsp&nbsp&nbsp&nbsp6<br/>82835374691&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp13925344674&nbsp&nbsp&nbsp&nbsp7<br/>82925304698&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp13825394674&nbsp&nbsp&nbsp&nbsp9<br/>83435304655&nbsp&nbsp&nbsp&nbsp03062015&nbsp&nbsp&nbsp&nbsp02925324676&nbsp&nbsp&nbsp&nbsp2<br/>83545304618&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp43825374679&nbsp&nbsp&nbsp&nbsp8<br/>84045304637&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp82925314673&nbsp&nbsp&nbsp&nbsp11<br/>84445314626&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp9<br/>84535364670&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp8<br/>84735304650&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp26925324671&nbsp&nbsp&nbsp&nbsp3<br/>85435374621&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp99825384678&nbsp&nbsp&nbsp&nbsp7<br/>85725344691&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp81825394678&nbsp&nbsp&nbsp&nbsp5<br/>86125374685&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp44925324675&nbsp&nbsp&nbsp&nbsp7<br/>86345334601&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp10<br/>86835364645&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp08825394671&nbsp&nbsp&nbsp&nbsp5<br/>86845374654&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp73825364677&nbsp&nbsp&nbsp&nbsp2<br/>87025334695&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp03825394677&nbsp&nbsp&nbsp&nbsp1<br/>87245334661&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp03825384670&nbsp&nbsp&nbsp&nbsp2<br/>87545304637&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp07925304670&nbsp&nbsp&nbsp&nbsp2<br/>88145354600&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp2<br/>89235344631&nbsp&nbsp&nbsp&nbsp12062015&nbsp&nbsp&nbsp&nbsp35925304679&nbsp&nbsp&nbsp&nbsp5<br/>89445364620&nbsp&nbsp&nbsp&nbsp18062015&nbsp&nbsp&nbsp&nbsp93825394671&nbsp&nbsp&nbsp&nbsp4<br/>89535334658&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp90925304672&nbsp&nbsp&nbsp&nbsp21<br/>89745324654&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp51925314670&nbsp&nbsp&nbsp&nbsp3<br/>90225384689&nbsp&nbsp&nbsp&nbsp30062015&nbsp&nbsp&nbsp&nbsp11825364676&nbsp&nbsp&nbsp&nbsp2<br/>90725314690&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp70825364675&nbsp&nbsp&nbsp&nbsp4<br/>91525364696&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp66925324674&nbsp&nbsp&nbsp&nbsp4<br/>91535354668&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp07825354674&nbsp&nbsp&nbsp&nbsp3<br/>91545304641&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp91825374674&nbsp&nbsp&nbsp&nbsp6<br/>91545354609&nbsp&nbsp&nbsp&nbsp05062015&nbsp&nbsp&nbsp&nbsp02925324679&nbsp&nbsp&nbsp&nbsp13<br/>91625324693&nbsp&nbsp&nbsp&nbsp20062015&nbsp&nbsp&nbsp&nbsp28825354675&nbsp&nbsp&nbsp&nbsp7<br/>91735324644&nbsp&nbsp&nbsp&nbsp29062015&nbsp&nbsp&nbsp&nbsp37925324677&nbsp&nbsp&nbsp&nbsp5<br/>92135374656&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp77825364673&nbsp&nbsp&nbsp&nbsp2<br/>92745304637&nbsp&nbsp&nbsp&nbsp25062015&nbsp&nbsp&nbsp&nbsp70825364674&nbsp&nbsp&nbsp&nbsp11<br/>92835384689&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp05925344674&nbsp&nbsp&nbsp&nbsp6<br/>92845384601&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp16825364673&nbsp&nbsp&nbsp&nbsp3<br/>92935364654&nbsp&nbsp&nbsp&nbsp11062015&nbsp&nbsp&nbsp&nbsp17925324675&nbsp&nbsp&nbsp&nbsp5<br/>92945314643&nbsp&nbsp&nbsp&nbsp16062015&nbsp&nbsp&nbsp&nbsp60825394676&nbsp&nbsp&nbsp&nbsp3<br/>94225314690&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp69925334677&nbsp&nbsp&nbsp&nbsp6<br/>94225364684&nbsp&nbsp&nbsp&nbsp09062015&nbsp&nbsp&nbsp&nbsp46925314675&nbsp&nbsp&nbsp&nbsp4<br/>94235344669&nbsp&nbsp&nbsp&nbsp15062015&nbsp&nbsp&nbsp&nbsp65925324670&nbsp&nbsp&nbsp&nbsp7<br/>94245384627&nbsp&nbsp&nbsp&nbsp22062015&nbsp&nbsp&nbsp&nbsp64825374677&nbsp&nbsp&nbsp&nbsp1<br/>94335364611&nbsp&nbsp&nbsp&nbsp01062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp5<br/>94545344619&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp42825394671&nbsp&nbsp&nbsp&nbsp6<br/>96045384607&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp51925334677&nbsp&nbsp&nbsp&nbsp4<br/>96125344689&nbsp&nbsp&nbsp&nbsp10062015&nbsp&nbsp&nbsp&nbsp12825394679&nbsp&nbsp&nbsp&nbsp1<br/>96835314624&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp47925314675&nbsp&nbsp&nbsp&nbsp1<br/>96835324638&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp88825384672&nbsp&nbsp&nbsp&nbsp4<br/>97045364609&nbsp&nbsp&nbsp&nbsp14062015&nbsp&nbsp&nbsp&nbsp92825374676&nbsp&nbsp&nbsp&nbsp1<br/>97145304634&nbsp&nbsp&nbsp&nbsp24062015&nbsp&nbsp&nbsp&nbsp65925324670&nbsp&nbsp&nbsp&nbsp12<br/>97445314655&nbsp&nbsp&nbsp&nbsp19062015&nbsp&nbsp&nbsp&nbsp89825374670&nbsp&nbsp&nbsp&nbsp2<br/>98335314688&nbsp&nbsp&nbsp&nbsp23062015&nbsp&nbsp&nbsp&nbsp93925344676&nbsp&nbsp&nbsp&nbsp4<br/>99235394663&nbsp&nbsp&nbsp&nbsp02062015&nbsp&nbsp&nbsp&nbsp09825374671&nbsp&nbsp&nbsp&nbsp3<br/>&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"fdcc9893-c59e-4380-86a1-6790d326ab8b","name":"Use Nirmal's code","NodeDescription":"///t<br/>///s<br/>%let ptlist =%str(<br/>'00235324616', '00445374626', '00525334689', '01245314612', '01245334644', '01645334623', '02345364614', '02435324646', '02635324613', '03045374659', '03435304629', '03635314617', '03745334632', '04545364628', '05025354686', '05045344633', '05045384663', '05445334628', '05535324648', '05635344636', '06425394687', '06545334630', '07145394631', '07645374660', '07735334622', '08635354630', '09245314616', '09335304664', '10035324649', '10435334696', '10545304645', '12645304660', '12725354684', '12735324638', '12935334620', '13635354613', '13835384694', '14235364669', '14235394628', '14925394693', '15035314639', '15745394635', '16135304676', '16435354680', '16645304631', '17145314622', '17535324604', '17835324625', '17835324669', '18025334681', '18225364687', '18435334665', '18745304609', '19435394665', '19735354609', '19745324640', '20235334602', '20535314682', '20745344608', '20935364648', '21125344689', '21345324667', '21535324632', '21545314616', '21645334631', '21835384645', '22135354641', '22635324654', '23045304655', '23145324638', '23225354681', '23535304638', '24035344679', '24735344672', '25745394647', '26135314641', '26145344664', '26545374603', '26935344612', '27225394696', '27345394626', '27425334696', '27435314625', '27445394634', '27545304610', '27545384608', '28335374683', '28535394624', '28935324687', '30145324642', '30635364613', '31425334682', '31635314629', '31735354628', '31935354676', '32435384603', '32435384621', '32535324653', '32735384615', '32945374621', '33225384685', '33535394633', '33835394631', '34035374675', '34235354605', '34245374628', '34735394622', '35335364606', '35435344621', '35435354688', '35535394681', '35935314617', '35945384656', '36245344616', '36345354658', '38135374675', '38235304661', '38235354652', '38335374615', '38425354684', '38445384620', '39435344652', '40135384691', '40345384658', '40935354603', '41235364600', '41445374657', '41745394649', '42135304642', '42135354623', '42325364690', '42545394609', '42835364667', '43245354652', '43335354683', '43345384643', '43625374690', '45545394606', '45745334650', '45835394610', '46035364685', '46345364608', '46735374622', '47335364666', '47925374684', '48045314657', '48145334604', '48225394692', '48235384601', '49035324698', '49835364625', '50035364663', '50235384695', '50335344671', '50435384675', '51035304681', '51335354657', '51425364686', '52735374690', '52745344649', '53945374652', '54035364695', '54135344634', '54235334692', '54325354683', '54345384609', '54845384630', '54935384610', '56435344692', '56535364614', '57135344604', '57735314637', '57845384644', '57935394680', '58035354632', '58735344628', '58735384624', '58835344624', '59245344656', '59425384682', '60135384652', '60225344688', '60335374601', '60525304698', '61645314653', '61745354651', '63025354695', '63125324681', '63335334614', '64535324696', '64935364615', '65535364662', '65635304639', '66245334602', '67025364699', '67745334640', '68245354616', '68345334607', '68735354614', '68835344648', '69535374624', '69635364692', '71535384616', '71645304660', '73025324689', '73525334682', '73735364670', '73745344644', '73835364675', '74335364665', '74645374651', '75135354623', '75525304693', '75545314644', '75935394628', '75945324607', '75945384642', '76425394696', '76445314657', '76535314686', '76645394622', '76845324623', '77635304626', '78145334640', '78545334655', '78545364604', '78735374672', '79045394662', '79135364630', '79435394633', '80445394636', '80625374684', '80835354645', '82135344634', '82135364615', '82145344600', '82435304635', '82545354614', '82835374691', '82925304698', '83435304655', '83545304618', '84045304637', '84445314626', '84535364670', '84735304650', '85435374621', '85725344691', '86125374685', '86345334601', '86835364645', '86845374654', '87025334695', '87245334661', '87545304637', '88145354600', '89235344631', '89445364620', '89535334658', '89745324654', '90225384689', '90725314690', '91525364696', '91535354668', '91545304641', '91545354609', '91625324693', '91735324644', '92135374656', '92745304637', '92835384689', '92845384601', '92935364654', '92945314643', '94225314690', '94225364684', '94235344669', '94245384627', '94335364611', '94545344619', '96045384607', '96125344689', '96835314624', '96835324638', '97045364609', '97145304634', '97445314655', '98335314688', '99235394663'<br/>)&#59<br/><br/>/*PHYSICIAN PRACTICE REPORTS*/<br/>/*<br/>1. Extract MSB starting from latest available date (31 Dec 2017) and going back 5 years<br/>2. Exclude from MSB<br/>if key_hsn=\"\" then delete<br/>if num_srv = 0 then delete<br/>if los in:(&in_patient) then delete<br/>if key_doc_num in:(&slush) then delete<br/>if spec not in: ('B','C','WB') then delete<br/>if substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete<br/>if mode in:(&mode_exc) then delete<br/>*/<br/>%let mode_exc = 'Z'&#59*NEW - April 2017&#59<br/>%let in_patient= 'B' '2' 'K'&#59<br/>*Slush codes are added from clean.Physician #s for Slush codes (new).txt&#59<br/>%let slush='76925314678' '36825374671' '52825354677' '66925324672' '38825384673' '52825354672' '35925334677' '00825374673' '32825384674' '79825354677' '42925314672' '14925324671'<br/>'74825384673' '95825354670' '86825364672' '95925344676' '03925304670' '59925304677' '96925314677' '36925314674' '96925314672' '62825364671' '28925304679' '82825394672'<br/>'43925314674' '13825364672' '31925324677' '48925314670' '05825364678' '17825354674' '13925304670' '82825384679' '27825354670' '19825374671' '45925304670' '07925304677'<br/>'05925344673' '64925344674' '25925304675' '95925314671' '05825354679' '64925304678' '26925334671' '80925334670' '87925304678' '53825394678' '17825344678' '52925304678'<br/>'61825384670' '17825374676' '31825374679' '29825354679' '41925304676' '01825374674' '24825364678'<br/>'11345384672' '91925324677' '87825394671' '81925304678' '74925304674' '78925334671' '01825354674' '58825374670' '83925324670' '34825364677' '58925324670' '53825384670' <br/>'27825344678' '48925314676' '37825364674' '31925324675' '56925304672' '95925344670' '02825384671' '81825354676' '22925304670' '51825394672' '95925304677' '84825354674' <br/>'74925314673'<br/>'06825384675' '39825344678' '99825374677' '35925304676' '73825364675' '14925304678' '14825354671' '14925314673' '76825364676' '88925314677' '76825374677' '23825374672'<br/>'74825384670' '07925334671' '71825364676' '24925304677' '11925324678' '49925334678' '31925324674' '80925314677' '91825364675' '11825374679' '55925324679' '99925304678'<br/>'35825374676' '10925314671' '22825394677' '93825394679' '26925314679' '59825344671' '27825384672' '12925304677' '42925304671' '16825364671' '24925304679' '82925314676'<br/>'17925314671' '04825394674' '16825344676' '33925344675' '01825394671' '28925314674' '18825354679' '25925344671' '01825354670' '93925304677' '47925334678' '37925334676'<br/>'01825364673' '75925324675' '85925314673' '35925334678' '24825364679' '90925304671' '73925324677' '76825374671' '83825354675' '74825374672' '77925314672' '50925324674'<br/>'05925324670' '20925304670' '06825354674' '42825364678' '88825354673' '81825364678' '23925314673' '24925334677' '99825394677' '94825374674' '08825374674' '87925324675'<br/>'06925304678' '84825384672' '19825344672' '28825394679' '53925334671' '05925334676' '81925314671' '64825354676' '28825394673' '22925314674' '38825394679' '57925324671'<br/>'46925334672' '92925334678'&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp<br/>data temp_msb1&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.temp_msb&#59<br/>&nbsp&nbsp&nbsp&nbspSPEC1=trim(left(upcase(substr(SPEC, 1,1))))&#59<br/>&nbsp&nbsp&nbsp&nbspif SPEC1='B' then SPEC_flag=1&#59 else SPEC_flag=0&#59<br/>&nbsp&nbsp&nbsp&nbspif key_hsn='15035314639' and dos_1 >= '08jun2015'd and dos_1 <='08jun2015'd +364&#59<br/>run&#59<br/><br/><br/>/*Exclusions mention above in notes*/<br/>data temp_msb2&#59/*332003786 out of 54983036*/<br/>&nbsp&nbsp&nbsp&nbspset temp_msb1&#59<br/><br/>&nbsp&nbsp&nbsp&nbspif key_hsn='' then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif num_srv=0 then delete&#59<br/>&nbsp&nbsp&nbsp&nbsp*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>&nbsp&nbsp&nbsp&nbspif key_doc_num in:(&slush) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif spec not in: ('B') then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif mode in:(&mode_exc) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/><br/>data temp_msb1x&#59<br/>set temp_msb2&#59<br/>if FSC in ('B003' 'B064' 'B052' 'B004' ) then physical_flag=1&#59 else physical_flag=0&#59<br/>run&#59<br/><br/>proc sort data=temp_msb1x&#59<br/>by key_hsn key_doc_num dos_1 descending physical_flag&#59<br/>run&#59<br/>proc sort data=temp_msb1x out=temp_msb2 nodupkey&#59<br/>by key_hsn key_doc_num dos_1&#59<br/>run&#59<br/><br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=temp_msb2,<br/>&nbsp&nbsp&nbsp&nbspt2=PTFILE,<br/>&nbsp&nbsp&nbsp&nbsptarget=temp_msb_1year,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos_1 between t2.entryDate and t2.entryDate +364),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/><br/><br/>proc sort data=temp_msb_1year out=tt nodupkey&#59 by key_doc_num&#59 run&#59/*1548*/<br/><br/>proc sql noprint&#59 <br/>create table temp_msb_1year1 as <br/>select *, count(dos_1) as total_visits1<br/>from temp_msb_1year<br/>group by key_hsn<br/>order by key_hsn&#59<br/>run&#59<br/>proc sort data=temp_msb_1year1 nodupkey out=checkz&#59 by key_hsn&#59 run&#59<br/><br/><br/>proc sql noprint&#59 <br/>create table temp_msb_1year2 as <br/>select *, count(dos_1) as total_visits_phy1<br/>from temp_msb_1year1<br/>group by key_hsn, key_doc_num<br/>order by key_hsn, key_doc_num&#59<br/>run&#59<br/><br/>data visits_by_phy_1year&#59/*14943391 visits*/<br/>retain key_hsn key_doc_num total_visits_phy1 total_visits1 upc1&#59<br/>set temp_msb_1year2&#59<br/>upc1=(total_visits_phy1/total_visits1)*100&#59<br/>format upc1 6.2&#59<br/>run&#59<br/><br/>/*so what is the UPC by patient-doc*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=visits_by_phy_1year,<br/>&nbsp&nbsp&nbsp&nbsptarget= test1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn,  key_doc_num, upc1,total_visits_phy1, total_visits1 ),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upc1 desc)<br/>)&#59<br/>data test2&#59<br/>&nbsp&nbsp&nbsp&nbspset test1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending upc1&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>run&#59<br/>/*to this point......*/<br/><br/><br/>/*msb visits in my file*/<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/>data test10&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_hsn ='15035314639'&#59<br/>run&#59<br/>proc sort data=test10&#59<br/>where dos between '08jun2015'd and '08jun2015'd +364 &#59<br/>by key_hsn dos&#59run&#59<br/><br/><br/>data test11&#59/*332003786 out of 54983036*/<br/>&nbsp&nbsp&nbsp&nbspset test10&#59<br/><br/>&nbsp&nbsp&nbsp&nbspif key_hsn='' then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif num_srv=0 then delete&#59<br/>&nbsp&nbsp&nbsp&nbsp*if los in:(&in_patient) then delete&#59/*we decided to include hospital physician visits April 26*/<br/>&nbsp&nbsp&nbsp&nbspif key_doc_num in:(&slush) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif spec not in: ('B') then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif mode in:(&mode_exc) then delete&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(spec,1,1)='C' and ~(substr(fsc,1,1) not in ('B','C')) then delete&#59<br/>run&#59<br/><br/>data test12&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_F1&#59<br/>&nbsp&nbsp&nbsp&nbspif key_hsn = '15035314639'&#59<br/>run&#59<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=test11, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>/*Here starts setp 3*/<br/>Proc sql&#59/*start with 1030476 observations*/ <br/>create table step3 as select * from after_sole_visitsx<br/>where key_hsn not in <br/>(select key_hsn from step2E)&#59<br/>quit&#59<br/>proc sort data=step3 out=step3A nodupkey&#59/*704108*/<br/>by key_hsn physical_flag key_doc_num&#59<br/>run&#59<br/>proc sort data=step3A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step3B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step3A point=_n_&#59<br/>leadphysical_flag=physical_flag&#59<br/>end&#59<br/>set step3A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leadphysical_flag=.&#59<br/>run&#59<br/>data step3C&#59<br/>set step3B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leadphysical_flag=.&#59<br/>end&#59<br/>run&#59<br/>data step3D&#59<br/>set step3C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if physical_flag GT leadphysical_flag then step=3&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step3D&#59<br/>tables step&#59<br/>run&#59<br/>data step3E&#59/*25078 unique people got alloted in step 2*/<br/>set step3D&#59<br/>if step=3&#59<br/>run&#59<br/>proc sort data=step3E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*Here starts setp 4*/<br/>Proc sql&#59/*start with 822472 observations*/ <br/>create table step4 as select * from step3<br/>where key_hsn not in <br/>(select key_hsn from step3E)&#59<br/>quit&#59<br/>proc sort data=step4 out=step4A nodupkey&#59/*822472*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step4A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>data step4B&#59<br/>_n_ ++ 1&#59<br/>if _n_ LE n then do&#59<br/>set step4A point=_n_&#59<br/>leaddos_1=dos_1&#59<br/>end&#59<br/>set step4A nobs=n end=end&#59<br/>by key_hsn&#59<br/>if end then leaddos_1=.&#59<br/>run&#59<br/>data step4C&#59<br/>set step4B&#59<br/>by key_hsn&#59<br/>if last.key_hsn then do&#59<br/>leaddos_1=.&#59<br/>end&#59<br/>run&#59<br/>data step4D&#59<br/>set step4C&#59<br/>by key_hsn&#59<br/>if first.key_hsn then do&#59<br/>if dos_1 GT leaddos_1 then step=4&#59<br/>&nbsp&nbsp&nbsp&nbsp        else step=9&#59<br/>&nbsp&nbsp&nbsp&nbsp      end&#59<br/>run&#59<br/>proc freq data=step4D&#59<br/>tables step&#59<br/>run&#59<br/>data step4E&#59/*136652 unique people got alloted in step 2*/<br/>set step4D&#59<br/>if step=4&#59<br/>run&#59<br/>proc sort data=step4E out=check nodupkey&#59 by key_hsn&#59 run&#59<br/><br/>/*left out in all above steps assigned randomly*/<br/>Proc sql&#59/*start with 6161 observations, these are going to different doctor but same date and same upc and same physical flag*/ <br/>create table step5 as select * from step4<br/>where key_hsn not in <br/>(select key_hsn from step4E)&#59<br/>quit&#59<br/><br/>proc sort data=step5 out=step5A nodupkey&#59/*6161*/<br/>by key_hsn dos_1 key_doc_num&#59<br/>run&#59<br/>proc sort data=step5A out=FSCtest nodupkey&#59/*130 unique FSC*/<br/>by fsc&#59<br/>run&#59<br/>proc print data=FSCtest noobs&#59<br/>var FSC&#59<br/>run&#59<br/><br/>data step5A&#59<br/>set step5A&#59<br/>random_number=rand('uniform')&#59<br/>run&#59<br/>proc sort data=step5A&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 random_number&#59<br/>run&#59<br/>proc sort data=step5A out=step5B nodupkey&#59/*1679 got allotted based on lower key_doc_num*/<br/>by key_hsn&#59<br/>run&#59<br/>data step5B&#59<br/>set step5B&#59<br/>step=4&#59 /*we still call it step 4*/<br/>run&#59<br/><br/>/*combining steps 2 to 5*/<br/>data steps2to5&#59<br/>set step2E step3E step4E step5B&#59<br/>drop leadupc3 leadphysical_flag leaddos_1&#59<br/>run&#59<br/>proc freq data=steps2to5&#59<br/>table step&#59<br/>run&#59<br/><br/>/*<br/>combining sole provider and step 2, 3 and 4<br/>NOTE: There were 938099 observations read from the data set WORK.AFTER_SOLE_VISITSXZ.<br/>NOTE: There were 192296 observations read from the data set PPR.SOLE_VISITS.<br/>NOTE: The data set WORK.TOGETHER has 1130395 observations and 18 variables.<br/>*/<br/>data together&#59<br/>retain key_hsn key_doc_num total_visits_phy3 total_visits3 upc3 step&#59<br/>set <br/>steps2to5  /*old way was this data: after_sole_visitsxz*/ <br/>ppr.sole_visits&#59<br/>run&#59<br/>proc sort data=together&#59<br/>by key_hsn descending upc3 descending physical_flag descending dos_1 key_doc_num&#59<br/>run&#59<br/>proc freq data=together&#59 table step&#59 run&#59<br/><br/>/*how many physicians are there?*/<br/>proc sort data=together out=tt1 nodupkey&#59 by key_doc_num&#59 run&#59/*1511*/<br/>proc freq data=together order=freq&#59<br/>tables key_doc_num upc3&#59<br/>run&#59<br/>proc sql noprint&#59 <br/>create table patients1 as <br/>select *, count(key_hsn) as total_patients  <br/>from together<br/>group by key_doc_num<br/>order by key_doc_num&#59<br/>run&#59<br/>data unique_phy_patients&#59<br/>retain key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag step&#59<br/>set patients1&#59<br/>if physical_flag=. then physical_flag=9&#59<br/>keep FY key_doc_num key_hsn total_patients total_visits_phy3 total_visits3 upc3 spec spec1 spec_flag FSC physical_flag dos_1 step&#59<br/>run&#59<br/>proc freq data=unique_phy_patients&#59 tables spec spec1 physical_flag&#59 run&#59<br/>proc sort data=unique_phy_patients out=dr nodupkey&#59 by key_doc_num&#59 run&#59/*1511 unique physician total*/<br/>proc sort data=unique_phy_patients&#59 by key_doc_num descending upc3&#59 run&#59<br/><br/>/*Getting Demographic Information*/<br/>%demog_assign(prs_xtrc_dt='02JAN2018'd,<br/>ds_in=unique_phy_patients,<br/>ds_out=unique_phy_patients_demog, <br/>strt_dt_var=dos_1,&nbsp&nbsp&nbsp&nbsp<br/>end_dt_var=dos_1,<br/>geo_file=clean17.phrs_pers_resc_4_jas17_01dec2017,<br/>incl_full_info=N)&#59<br/>data unique_phy_patients_demog&#59<br/>set unique_phy_patients_demog&#59<br/>age_dt='31Mar2018'd&#59<br/>format age_dt date9.&#59<br/>run&#59<br/>%include '/SAS_data/dw0/HQC_share/nsidhu/PPR/sas code/calc_age_discr.sas'&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog,ds_out=unique_phy_patients_demog1,refday_var=age_dt,agevar=age)&#59<br/><br/>/*addition of two other ages*/<br/>data unique_phy_patients_demog1&#59<br/>set unique_phy_patients_demog1&#59<br/>age_dt1='31Mar2016'd&#59<br/>format age_dt1 date9.&#59<br/>age_dt2='31Mar2017'd&#59<br/>format age_dt2 date9.&#59<br/>run&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog1,ds_out=unique_phy_patients_demog2,refday_var=age_dt1,agevar=age1)&#59<br/>%calc_age_discr(ds_in=unique_phy_patients_demog2,ds_out=unique_phy_patients_demog3,refday_var=age_dt2,agevar=age2)&#59<br/><br/>/*end of age*/<br/>data ppr.unique_phy_patients_demog&#59<br/>retain key_doc_num key_hsn age sex_desc rha urb_rur&#59<br/>set unique_phy_patients_demog3&#59<br/>drop age_dt tot_days mindiff_RHA RHAdays RHAdiff mindiff_Urb_Rur URdays URdiff INCQTL mindiff_INCQTL INCQTLdays INCQTLdiff NATV_STAT_FLAG&#59<br/>run&#59<br/>proc freq data=ppr.unique_phy_patients_demog&#59 <br/>table sex_desc rha urb_rur&#59<br/>run&#59<br/>proc sort data=ppr.unique_phy_patients_demog&#59 by key_doc_num&#59 run&#59<br/><br/>/*just creating missing physician data. In data but NOT in our panel data*/<br/>Proc sql&#59<br/>create table missing_dr as select * from ppr.temp_msb1<br/>where key_hsn not in <br/>(select key_hsn from ppr.unique_phy_patients_demog)&#59<br/>quit&#59<br/>proc sort data=missing_dr out=missing_dr1 nodupkey&#59<br/>by key_doc_num&#59 <br/>run&#59<br/>data ppr.missing_dr&#59<br/>set missing_dr1&#59<br/>keep key_doc_num&#59<br/>run&#59<br/><br/>/************************specialist data****************************/<br/>data specialist&#59<br/>length section $50&#59<br/>set ppr.temp_msb1&#59<br/>where ('01Apr2015'd LE dos_1 LE '31Mar2018'd)&#59<br/>if key_hsn='' then delete&#59<br/>if num_srv=0 then delete&#59<br/>if key_doc_num in:(&slush) then delete&#59<br/>if mode in:(&mode_exc) then delete&#59<br/><br/>     if ('01Apr2015'd LE dos_1 LE '31Mar2016'd) then FY='201516'&#59<br/>else if ('01Apr2016'd LE dos_1 LE '31Mar2017'd) then FY='201617'&#59<br/>else if ('01Apr2017'd LE dos_1 LE '31Mar2018'd) then FY='201718'&#59<br/>else if ('01Apr2018'd LE dos_1 LE '31Mar2019'd) then FY='201819'&#59<br/><br/>if substr(spec,1,1)=\"B\" then section = \"General Practice\"&#59<br/>if substr(spec,1,1)=\"C\" then section = \"Paediatrics\"&#59<br/><br/>if substr(spec,1,2)=\"DK\" then section = \"Neurology\"&#59<br/>if substr(spec,1,2)=\"DL\" then section = \"Cardiology\"&#59<br/>if substr(spec,1,1)=\"D\" and spec not in ('DK', 'DL') then section = \"Internal Medicine\"&#59<br/><br/>if substr(spec,1,1)=\"E\" then section = \"Psychiatry\"&#59<br/>if substr(spec,1,1)=\"F\" then section = \"Dermatology\"&#59<br/>if substr(spec,1,1)=\"G\" then section = \"Medical Genetics\"&#59<br/>if substr(spec,1,1)=\"H\" then section = \"Anaesthesia\"&#59<br/>if substr(spec,1,1)=\"I\" then section = \"Physical Medicine\"&#59<br/>if substr(spec,1,1)=\"K\" then section = \"NeuroSurgery\"&#59<br/><br/>if substr(spec,1,2)=\"LB\" then section = \"General Surgery\"&#59<br/>if substr(spec,1,2)=\"LL\" then section = \"Cardiac Surgery\"&#59<br/><br/>if substr(spec,1,1)=\"M\" then section = \"Orthopaedic Surgery\"&#59<br/>if substr(spec,1,1)=\"N\" then section = \"Plastic & Reconstructive Surgery\"&#59<br/>if substr(spec,1,1)=\"P\" then section = \"Obstetrics & Gynaecology\"&#59<br/>if substr(spec,1,1)=\"R\" then section = \"Urological Surgery\"&#59<br/>if substr(spec,1,1)=\"S\" then section = \"Ophthalmology\"&#59<br/>if substr(spec,1,1)=\"T\" then section = \"Otolaryngology\"&#59<br/>if substr(spec,1,1)=\"X\" then section = \"Diagnostic Radiology & Radiology Oncology\"&#59<br/>if substr(spec,1,1)=\"Y\" then section = \"Therapeutic Radiology & Nuclear Medicine\"&#59<br/>if substr(spec,1,1)=\"V\" then section = \"Laboratory Specialties\"&#59<br/>if substr(spec,1,1)=\"W\" then section = \"Others (NP, RN,etc.)\"&#59<br/><br/>if section NE \"General Practice\"&#59<br/>run&#59<br/>proc sort data=specialist out=ppr.specialist nodupkey&#59 by key_hsn key_doc_num dos_1&#59 run&#59<br/><br/>proc freq data=ppr.specialist&#59 <br/>table SPEC_flag spec*section&#59 <br/>run&#59<br/><br/>data check&#59<br/>set ppr.specialist&#59<br/>if section = \"General Practice\"&#59<br/>run&#59<br/><br/>/*May 21, 2019*/<br/>/*Cretating artifical data*/ <br/>proc freq data=ppr.UNIQUE_PHY_PATIENTS_DEMOG&#59<br/>tables step&#59<br/>run&#59<br/><br/><br/>proc freq data=randomdataMay21&#59<br/>where dr=2&#59<br/>tables step sex upc&#59<br/>run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"3046bf4f-8bad-422b-b47d-d1a1c60b6ca0"}]}],"custparents":[{"idx":"f2dd3bdf-2b40-485e-b0d3-789103fbc870"}]}],"custparents":[{"idx":"4a0c4e9f-7462-48c4-a01e-f9c1d49f0007"}]}],"custparents":[{"idx":"71a23964-155b-48d9-96ff-c827524acc05"}]}],"custparents":[{"idx":"84911871-de5d-462d-a257-c2605327ccb4"}]},{"idx":"0ca55d8e-4126-4b7a-a470-1a31bf19ba7c","name":"VXC_W_UPCIndx in whole period &amp; UCPW","NodeDescription":"///t<br/>///s<br/>/*VXC_W. determine the upc index during running through followup for all the encounterd GPs during running through followup, <br/>&nbsp&nbsp&nbsp&nbspand the UCP of the whole period*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VXC_W0, perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXB_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXB_F.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXCB_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXCB_F.sas7bdat)<br/>)&#59<br/><br/>/*VXC_W1, From vxb, get claims with running through followup, i.e., 365 days since to the index(entryDate) */<br/>data VXC_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays  and entryDate + &followdays -1&#59<br/>run&#59<br/><br/>/*calculate the UPC index from encounter episodes in running through followup*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor claimTYpe = '', MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor cliamtype=others: other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max UPCIndex<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, each doc having a UPC index<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXC_W1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notInterested,<br/>&nbsp&nbsp&nbsp&nbspclaimType=others,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/><br/><br/>/*VXC_W2. for each patient, sort by UPC index*/<br/>%sort(data= getUPC_tmp5, target=VXC_W2, sorter=%str(key_hsn descending UPCIndex))&#59<br/><br/>/*VXC_W3. Keep physician(s) with the highest UPC index for each cohort patient*/<br/>/*VXC_W3a, determine the highest UPC index of each patient */<br/>data VXC_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending  UPCIndex&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndex&#59<br/>run&#59<br/>/*VXC_W3b, link the patient and highest UPC index back to VXC_W2, and keep patient-physician pairs with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn upcindex,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn) <br/>)&#59<br/><br/><br/><br/>/*VXC_W3b2, insert a step here to exclude patients who had only one UCP, and the UCP <br/>&nbsp&nbsp&nbsp&nbspcannot be found in the mobility file (the UCP does not have age/sex, ... info)<br/>*/<br/>/*VXC_W3b2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/><br/>/*VXC_W3b2a have a distinct list of doc from F3b (the physicians ever had encounters with cohort patients*/<br/>%distinct(data=VXC_W3b1, target=VXC_W3b2, vars=key_doc_num)&#59<br/>/*VXC_W3b1b keep records in which sex, age, ... is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXC_W3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_W3b1b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXC_W3b2b, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXC_W3b2c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXC_W3b2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXC_W3b2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXC_W3b2c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%freq(data=VXC_W3b2, table=Doc&docVar)&#59*/<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*the above results in a list of physicians with complete info of age, sex, grad year, and grad country*/<br/><br/>/*Link VXC_W3b2 to VXC_W3b1, select patients whose physician are in F3b2<br/>&nbsp&nbsp&nbsp&nbspIn F3b2, physicians are not missing for age, sex, grad year and grad country<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W3b1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, upcindex desc) <br/>)&#59<br/><br/><br/><br/><br/><br/>/*VXC_W3c. determine the UCPW. In case of tie, getUCPW1,UCPW2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multipleUCPWs. DocNumer, Nvisits, UPCindex,  these are all specific by eachUCPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for eachUCPW.<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of UCPW1, 2, etc<br/>*/<br/>data VXC_W3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3b&#59<br/>&nbsp&nbsp&nbsp&nbspformat UPCIndex 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUCPW='UCPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, N_Visits, put(UPCIndex, 6.2))&#59<br/>&nbsp&nbsp&nbsp&nbsprename T_visits=T_visitsW N_visits = NMax_VisitsPerDocW UPCIndex=UPCIndexW&#59<br/>run&#59<br/>/*VXC_W3d. Now we can transpose the string in theStr into columsn of UCPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(UCPW1, 1, \":\") is the key_doc_num of UCPW1, scan(UCPW1, 2, \"&#59\") is the n_visits of UCPW1, etc<br/>&nbsp&nbsp&nbsp&nbspQuetions: Why it has to be like this?<br/>&nbsp&nbsp&nbsp&nbspThe # of visits, the UPC index will always be the same for UCPs of the same doctor...<br/>*/<br/>%transpose(data = VXC_W3c, target=VXC_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NMax_VisitsPerDocW  T_VisitsW UPCIndexW  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UCPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UCPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXC_W3 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspUPCIndex_UCPW1= scan(UCPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/><br/>/*VXC_W4. The docs in VXC_W3 are UCPWs, link them back to VXB_finalcohort(the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXCB_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXC_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXC_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXC_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*how many patients had multiple UCPs*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXC_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspMultipleUCPWs=0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif UCPW2 ne '' then MultipleUCPWs=1&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table = MultipleUCPWs)&#59*/<br/><br/>%exportvars(data=VXC_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"3e836b8c-3ffb-44e6-a0b3-f940805c5b26","name":"VXD_F_CMEPF","NodeDescription":"///t<br/>///s<br/>/*VXD_F: determine the CMEPF during follow up*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_F0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXC_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXC_W.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_F1. From VXB, get encounter episodes indicated as CME during follow up */<br/>data VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_F2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_F2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/>/*VXD_F3. shall we keep only the CMEPF closer to the entry date? or any CMEPF during follow up<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPF. In case of tie, get CMEPF1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPFs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPF <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPF<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPF1, 2, etc<br/>*/<br/>data VXD_F3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_F2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPF='CMEPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPF1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPF1, 1, \":\") is the key_doc_num of CMEPF1, scan(CMEPF1, 2, \"&#59\") is the n_visits of CMEPF1, etc<br/>*/<br/>%transpose(data = VXD_F3a, target=VXD_F3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_F4. The docs in VXD_F3 are CMEPFs, link them back to VXC_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXC_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_F3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_F&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPF=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPF1 = '' then CMEPF=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPF)&#59*/<br/><br/>%exportvars(data=VXD_F)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"b4ed97b8-1322-487b-8a0a-ca10d2d1f2f4","name":"VXD_W_CMEPW","NodeDescription":"///t<br/>///s<br/>/*VXD_W: determine the CMEPW during runin through followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXD_W0. perepared source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_F.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\vxb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(vxb.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>/*VXD_W1. From VXB, get encounter episodes indicated as CME during runin through followup */<br/>data VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspset vxb&#59<br/>&nbsp&nbsp&nbsp&nbspwhere DOS between entryDate - &runindays and entryDate  +&FollowDays -1 and CME=1&#59<br/>run&#59<br/><br/>/*VXD_W2. sort by days between service date entryDate, and determine the days between CME and EntryDate.<br/>&nbsp&nbsp&nbsp&nbspfor the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate<br/>*/<br/>data VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W1&#59<br/>&nbsp&nbsp&nbsp&nbspCMEDaysToEntry = intck('day',  entrydate, dos)&#59 /*date2 - date1*/<br/>&nbsp&nbsp&nbsp&nbspabsCMEDaysToEntry=abs(CMEDaysToEntry)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num EntryDate CMEDaysToEntry absCMEDaysToEntry&#59<br/>run&#59 <br/>%sort(data=VXD_W2a, sorter=key_hsn key_doc_num absCMEDaysToEntry)&#59<br/>/*For the same physician who provided CME on different dates, keep the record which is the closest to the EntryDate*/<br/>data VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2a&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn key_doc_num absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_doc_num&#59<br/>run&#59<br/><br/><br/>/*VXD_W3. shall we keep only the CMEPW closer to the entry date? or any CMEPW during runin through followup<br/>&nbsp&nbsp&nbsp&nbspIt seems that keeping any makes more sense<br/>*/<br/>/*determine the CMEPW. In case of tie, get CMEPW1, CMEP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple CMEPWs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, Nvisits, UPCindex,  these are all specific by each CMEPW <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each CMEPW<br/>&nbsp&nbsp&nbsp&nbspFollowing is a nice idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of CMEPW1, 2, etc<br/>*/<br/>data VXD_W3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXD_W2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCMEPW='CMEPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i absCMEDaysToEntry&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, CMEDaysToEntry)&#59<br/>run&#59<br/>/*now we can transpose the string in theStr into columsn of CMEPW1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(CMEPW1, 1, \":\") is the key_doc_num of CMEPW1, scan(CMEPW1, 2, \"&#59\") is the n_visits of CMEPW1, etc<br/>*/<br/>%transpose(data = VXD_W3a, target=VXD_W3, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn EntryDate  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=CMEPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)<br/><br/>/*VXD_W4. The docs in VXD_W3 are CMEPWs, link them back to VXD_F (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_F,<br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXD_W.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXD_W.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXD_W&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspCMEPW=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif CMEPW1 = '' then CMEPW=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= CMEPW)&#59*/<br/><br/>%exportvars(data=VXD_W)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"3e836b8c-3ffb-44e6-a0b3-f940805c5b26"},{"idx":"84911871-de5d-462d-a257-c2605327ccb4"}]}],"custparents":[{"idx":"0ca55d8e-4126-4b7a-a470-1a31bf19ba7c"},{"idx":"84911871-de5d-462d-a257-c2605327ccb4"}]}],"custparents":[{"idx":"84911871-de5d-462d-a257-c2605327ccb4"},{"idx":"6311561c-a1df-48ac-ac87-c6c343b6a617"}]}],"custparents":[{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad"}]},{"idx":"6087cb18-2ee9-49c5-90c3-e8ae19a5b0fe","name":"VXE_StatinClaims","NodeDescription":"///t<br/>///s<br/>/*VXE_F. the statin Rx of the final cohort members within followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXE_F0. Prepare source data&#59*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_W.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXE_F1 statin claims of the patients within followup.*/<br/>/*VXE_F1a. benefit statin claims */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit, <br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*VXE_F1b. benefit statin claims within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXE_F1a, <br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_F1c. nonbenefit statin claims */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit, <br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*VXE_F1d. nonbenefit statin claims within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXE_F1c, <br/>&nbsp&nbsp&nbsp&nbspt2=VXD_W,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_F1d,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_F1e. combined to have claims from both sources, indicate those anonymous or slushcode doctors as unknown<br/>&nbsp&nbsp&nbsp&nbspthese docs are kept here as we'll still need the corresponding claims to identify the first prescriber<br/>*/<br/>data VXE_F&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_F1b VXE_F1d&#59<br/>&nbsp&nbsp&nbsp&nbspif docslushcode ='Y' or key_prscr_num = '' or key_prscr_num = 'UNKNOWN0000' then <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num='unknown'&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%sort(data=VXE_F, sorter=%str(key_hsn rx_ddddd key_prscr_num))&#59<br/>/*VXE_F contains statin claims within 365 days since the EntryDate<br/>&nbsp&nbsp&nbsp&nbspit includes those prescribed by slushcode docs or docs unknown (blank)<br/>&nbsp&nbsp&nbsp&nbspFor adherence calculation, these claims should be included<br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXE_F.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXE_F.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXE_F)&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"6145c94c-4312-4c19-9709-705456f73148","name":"VXF_FS USPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FS: USPF, usual statin prescriber*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXD_W.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXD_W.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FS1. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXE_F, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexSF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FS1, sorter=key_hsn descending RxIndexSF)&#59<br/><br/>/*VXF_FS2. For each patient, keep  the highest Rx index*/<br/>data VXF_FS2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexSF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexSF&#59<br/>run&#59<br/><br/>/*VXF_FS3. Link the highest Rx index back to VXF_FS1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexSF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FS4. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FS4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexSF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUSPF='USPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocSF, put(RxIndexSF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FS5. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FS4, target=VXF_FS5, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocSF    TRxSF     RxIndexSF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=USPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of USPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FS5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_USPF1= scan(USPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FS6. The docs in VXF_FS5 are USPs, link them back to VXD_W (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXD_W,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FS&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FS)&#59<br/>%beep&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"506ae9ac-57ae-4838-865a-455da09e684c","name":"VXE_WW AllClaims","NodeDescription":"///t<br/>///s<br/>/*VXE_WW. the statin Rx of the final cohort members within followup*/<br/>data _null_&#59run&#59<br/><br/>/*VXE_WW0. Prepare source data&#59*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXE_WW1 statin claims of the patients from runin through followup.*/<br/>/*VXE_WW1b. benefit statin claims from runin through followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit, <br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_WW1b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_WW1d. nonbenefit statin claims runin through followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit, <br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXE_WW1d,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.Rx_ddddd, t1.DIN, t1.docslushcode, t2.EntryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.Key_hsn = t2.key_hsn and t1.rx_ddddd between t2.EntryDate - &runindays and t2.EntryDate +&followdays-1)<br/>)&#59<br/>/*VXE_WW1e. combined to have claims from both sources, indicate those anonymous or slushcode doctors as unknown<br/>&nbsp&nbsp&nbsp&nbspthese docs are kept here as we'll still need the corresponding claims to identify the first prescriber<br/>*/<br/>data VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW1b VXE_WW1d&#59<br/>&nbsp&nbsp&nbsp&nbspif docslushcode ='Y' or key_prscr_num = '' or key_prscr_num = 'UNKNOWN0000' then <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num='unknown'&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocSlushCode<br/>run&#59<br/>%sort(data=VXE_WW, sorter=%str(key_hsn rx_ddddd key_prscr_num))&#59<br/>/*VXE_WW contains claims of all medications runin through followup<br/>&nbsp&nbsp&nbsp&nbspit includes those prescribed by slushcode docs or docs unknown (blank), such that the base (Total Rx) of RxIndex calculation will <br/>&nbsp&nbsp&nbsp&nbspbe complete.<br/>*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXE_WW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXE_WW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXE_WW)&#59<br/><br/>%beep&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"6145c94c-4312-4c19-9709-705456f73148"}]},{"idx":"386afa2e-a8eb-481b-bedc-e04384f9db00","name":"VXF_FW UWPF in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_FW: UWPF, usual prescriber of all (whole) medications with follow up*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FS.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FS.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_FW1. all medication claims within follow up*/<br/>data VXF_FW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_FW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_FW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_FW2, sorter=key_hsn descending RxIndexWF)&#59<br/><br/>/*VXF_FW3. For each patient, keep  the highest Rx index*/<br/>data VXF_FW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWF&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWF&#59<br/>run&#59<br/><br/>/*VXF_FW4. Link the highest Rx index back to VXF_FW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWF,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_FW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_FW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWF 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPF='UWPF' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWF, put(RxIndexWF, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_FW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/>%transpose(data = VXF_FW5, target=VXF_FW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWF    TRxWF     RxIndexWF  ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPF,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPF1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_FW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPF1= scan(UWPF1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_FW7. The docs in VXF_FW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FS,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_FW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_FW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_FW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_FW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_FW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"acb8b093-1642-4c09-91f4-47389d158b2f","name":"VXF_WW UWPW in Followup","NodeDescription":"///t<br/>///s<br/>/*VXF_WW: UWPW, usual prescriber of all (whole) medications from runin through followup*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXF_WW0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_FW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_FW.sas7bdat)<br/>)&#59<br/>/*get all medication claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localdataPath.\\VXE_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXF_WW1. all medication claims from runin through followup*/<br/>data VXF_WW1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_WW&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between EntryDate - &RunInDays and EntryDate + &Followdays -1&#59<br/>run&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*calculate the Rx Freq from statin drug claims in follow up*/<br/>/*the macro getUPCIndex works for MSB claim data, and other data<br/>&nbsp&nbsp&nbsp&nbspfor MSB claim data, the LOS, MODE, SPEC, and NUM_SRV must be provided<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe excluding LOC, excluding MODE, and including SPEC must be provided<br/>&nbsp&nbsp&nbsp&nbspfor other data (like in this case, the episodes have been prepared, or like prescription data)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspspecify the claimType as others, and do not need to specify LOS,MODE exclusion, and SPEC<br/><br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/><br/>&nbsp&nbsp&nbsp&nbspBy default, the target file contains the doc with the max rx Freq<br/>&nbsp&nbsp&nbsp&nbspbut this is not what is wanted here. <br/>&nbsp&nbsp&nbsp&nbspFor this analysis, it is expected to keep all docs, from which those as PCP, and with Max rx Freq will be kept<br/>&nbsp&nbsp&nbsp&nbspso the interested data set is not the target, but the tmp5 file created by the macro&nbsp&nbsp&nbsp&nbsp<br/><br/>*/<br/>/*VXF_WW2. Use the macro UPC to identify the most freq prescriber of Statin during follow up, <br/>&nbsp&nbsp&nbsp&nbspunlike UPC in MSB, here it is fine even if the combination of same patient-doc-rx_ddddd repeat<br/>&nbsp&nbsp&nbsp&nbspNote: those with a unknown doc number are excluded<br/>*/<br/><br/>%getUPCIndex(<br/>&nbsp&nbsp&nbsp&nbspdata=VXF_WW1, <br/>&nbsp&nbsp&nbsp&nbsptarget=notintersted,<br/>&nbsp&nbsp&nbsp&nbspInPatientLOS = , <br/>&nbsp&nbsp&nbsp&nbspoutProvMode = ,<br/>&nbsp&nbsp&nbsp&nbspInterestedSPEC =,<br/>&nbsp&nbsp&nbsp&nbspdocIDCol = key_prscr_num,<br/>&nbsp&nbsp&nbsp&nbspdoscol=rx_ddddd,<br/>&nbsp&nbsp&nbsp&nbspclaimType=dp,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>data VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspset getUPC_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_prscr_num = key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_visits=NRx_MaxPerDocWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspT_Visits=TRxWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUPCIndex = RxIndexWW<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspwhere key_prscr_num ne 'unknown'&#59 <br/>run&#59<br/>%sort(data=VXF_WW2, sorter=key_hsn descending RxIndexWW)&#59<br/><br/>/*VXF_WW3. For each patient, keep  the highest Rx index*/<br/>data VXF_WW3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn descending RxIndexWW&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RxIndexWW&#59<br/>run&#59<br/><br/>/*VXF_WW4. Link the highest Rx index back to VXF_WW1 to keep patient-doc links with the highest UPC index<br/>(there could be multiple physicians with tie index values for a single patient)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars= key_hsn RxIndexWW,<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsn, key_doc_num) <br/>)&#59<br/><br/>/*VXF_WW5. determine the UP. In case of tie, get UP1, UP2, ....<br/>&nbsp&nbsp&nbsp&nbsp in case of tie, there will be multiple UPs<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocNumer, NRx_MaxPerDoc, RxIndex, these are all specific by each USP <br/>&nbsp&nbsp&nbsp&nbspand we'll need these values for each USP<br/>&nbsp&nbsp&nbsp&nbspFollowing is a smart idea:<br/>&nbsp&nbsp&nbsp&nbsp1) putting values of these doc-specifc variables into a string (theStr), with the dlmt \"&#59\"<br/>&nbsp&nbsp&nbsp&nbsp2) make a tag of USP1, 2, etc<br/>*/<br/>data VXF_WW5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW4&#59<br/>&nbsp&nbsp&nbsp&nbspformat RxIndexWW 6.2&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn &#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUWPW='UWPW' || strip(i)&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp/*combine the var values together*/<br/>&nbsp&nbsp&nbsp&nbsplength theStr $50.&#59 <br/>&nbsp&nbsp&nbsp&nbsptheStr = catx(':', key_doc_num, NRx_MaxPerDocWW, put(RxIndexWW, 6.2))&#59<br/>run&#59<br/><br/>/*VXF_WW6. Now we can transpose the string in theStr into columsn of USP1, 2, ...<br/>&nbsp&nbsp&nbsp&nbspThe values will stay there. Later we can use scan(var, # of word, dlmt) to get the values<br/>&nbsp&nbsp&nbsp&nbsp(i.e., scan(USP1, 1, \":\") is the key_doc_num of USP1, scan(USP1, 2, \"&#59\") is the n_visits of USP1, etc<br/>*/<br/><br/>%transpose(data = VXF_WW5, target=VXF_WW6, <br/>&nbsp&nbsp&nbsp&nbsprowhead =key_hsn NRx_MaxPerDocWW    TRxWW     RxIndexWW ,<br/>&nbsp&nbsp&nbsp&nbspcolhead=UWPW,<br/>&nbsp&nbsp&nbsp&nbspcontents= theStr<br/>)&#59<br/>/*example to get upcindex of UWPW1*/<br/>/*<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW5 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbspRxIndex_UWPW1= scan(UWPW1, 3, ':')&#59<br/>run&#59<br/>*/<br/><br/>/*VXF_WW7. The docs in VXF_WW5 are USPs, link them back to VXF_FS (the cohort)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_FW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXF_WW6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXF_WW.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXF_WW.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VXF_WW&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspUSP=1&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif USP = '' then USP=0&#59*/<br/>/*run&#59*/<br/>/*%freq(data=test, table= USP)&#59*/<br/><br/>%exportvars(data=VXF_WW)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"50223ef3-a768-4063-9485-ac7ad9f8c7a8","name":"VXG_CompSF CompWF CompWW","NodeDescription":"///t<br/>///s<br/>/*VXG. Comprehensive continuity of care by three definitions:<br/>&nbsp&nbsp&nbsp&nbsp1. COMPFS: Same UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp2. COMPFW: Same UCPF, UWPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp3. COMPWW: Same UCPW, UWPW, and CMEPW <br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXG0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXF_WW.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXF_WW.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXG1. Determine COMPFS: Same UCPF, USPF, and CMEPF*/<br/>/*VXG1a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} USPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG1b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG1b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG1c. determine the COMPFS term (whether or not having the same physician as UCPF, USPF, and CMEPF*/<br/>data VXG1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG1b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFS&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFS=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFS=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG1, table=COMPFS)&#59<br/><br/><br/>/*VXG2. Determine COMPFW: Same UCPF, UWPF, and CMEPF*/<br/>/*VXG2a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPF:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPF:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG2b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG2b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG2c. determine the COMPFW term*/<br/>data VXG2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG2b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPFW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPFW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPFW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPFW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG2, table=COMPFW)&#59<br/><br/><br/><br/>/*VXG3. Determine COMPWW: Same UCPW, UWPW, and CMEPW*/<br/>/*VXG3a. now we are going to determine an algorithm to deal with the link pattern.<br/>&nbsp&nbsp&nbsp&nbspWe need to determine, for each role (UCPF, USPF, etc), which doctor to select in case of tie<br/>&nbsp&nbsp&nbsp&nbspFirst, we need to see how the tie patterns looks like. &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspIn the following we'll try to map out all the tie patterns. For example:<br/>&nbsp&nbsp&nbsp&nbspfor UCPF, if there are two docs, it'll be AB<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen for USPF, if there are two docs again, in which one is the same doc A as in UCPF, but the other is a new one, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp the pattern for USPF will be AC,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand we'll line them up to be like: AB,AC.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspWe'll repeat the same method for other role of docs (CMEPF), like AB,AC,BC,.....<br/>&nbsp&nbsp&nbsp&nbspThat way we can see how does physicians repeatedly appear in different roles<br/>&nbsp&nbsp&nbsp&nbspbyte values for A =65, a=97<br/>*/<br/>data VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXF_WW&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp1 {*} UCPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp2 {*} UWPW:&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp3 {*} CMEPW:&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get the max # of doctors */<br/>/*&nbsp&nbsp&nbsp&nbspdimAll = sum(dim(tmp1),dim(tmp2),dim(tmp3))&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*set the length of the docIDs*/<br/>&nbsp&nbsp&nbsp&nbsplength docIDs $1500.&#59<br/>/*&nbsp&nbsp&nbsp&nbsparray tmpAll {dimAll}&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspconcatecate all docs together, between different roles, split by &#59, within roles, split by ,*/<br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp1(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp2(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbspDo i = 1 to dim(tmp3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID = scan(tmp3(i), 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif i =1 and theID='' then theID='_'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID ne '' and theID not in:('na') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs = strip(docIDs) || \",\"  || theID&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocIDs=strip(docIDs) || \"&#59\"&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdocIDs = tranwrd(docIDs, \"&#59,\", \"&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, 1,1) =\",\" then docIDs = substr(docIDs, 2, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspif substr(docIDs, length(DocIDs), 1) =\"&#59\" then docIDs = substr(docIDs, 1, length(docIDs) -1)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs&#59<br/>run&#59<br/><br/>/*VXG3b. scan for each docid and use letters to indicate the role patterns.<br/>A&#59A&#59A for comprehence continuity of care<br/>a&#59b&#59c for UCP, U prescriber, and CMEP were undertaken by different physicians. <br/>A&#59A&#59b for UCP, and U prescriber is the same physician, while CMEP is a different one.<br/>As long as there was the same physician, the letter for that physician is in upper case. <br/>*/<br/>data VXG3b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a  &#59<br/>&nbsp&nbsp&nbsp&nbspNTotalIDs=countw(docIDs)&#59 /*get the total # of IDs*/<br/>&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs, 'unknown', '')&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, 1, \",&#59\")&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), 'a')&#59*/<br/>&nbsp&nbsp&nbsp&nbspletterCNT=0&#59<br/>&nbsp&nbsp&nbsp&nbspdo NIDs = 1 to NTotalIDs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheID=scan(docIDs2, NIDs, \",&#59\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif theID in: ('0','1','2','3','4','5','6','7','8','9') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspletterCNT+1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIDCount=count(docIDs2, strip(theID))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif IDCount > 1 then byteBase=64&#59 /*This is to indicate that if the same doctor appeared across different roles (e.g., as UCPF, and USPF), the Letter will be in upper case*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse byteBase=96&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocIDs2=tranwrd(docIDs2, strip(theID), byte(letterCNT+byteBase))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn docIDs DocIDs2&#59<br/>&nbsp&nbsp&nbsp&nbsprename DocIDs2 = RolesPatternAllDoc&#59 <br/>run&#59<br/>/*There is no such case '&#59&#59'*/<br/>data test&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3a&#59<br/>&nbsp&nbsp&nbsp&nbspif index(RolesPatternAllDoc, \"&#59&#59\")>0&#59<br/>run&#59<br/><br/>/*VXG3c. determine the COMPWW term*/<br/>data VXG3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG3b &#59<br/>&nbsp&nbsp&nbsp&nbspCOMPWW=0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn RolesPatternAllDoc COMPWW&#59<br/>&nbsp&nbsp&nbsp&nbspif RolesPatternAllDoc='_&#59_&#59_&#59' then COMPWW=9&#59 <br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(RolesPatternAllDoc, byte(i+63)) =3 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCOMPWW=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%freq(data=VXG3, table=COMPWW)&#59<br/><br/>/*VXG4. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXF_WW,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as CompFS_Pattern, t2.COMPFS),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG5. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG4,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPFW_Pattern, t2.COMPFW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VXG6. Link the 3 COMP patterns to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXG3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.RolesPatternAllDoc as COMPWW_Pattern, t2.COMPWW),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXG.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXG.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>%exportvars(data=VXG)&#59<br/><br/>%Beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"423008af-d971-4379-bc30-52ae85d20bef","name":"VXG_RT4a (FS) Table4A","NodeDescription":"///t<br/>///s<br/>/*VXG_RT4A_ Report of Table 4A (UCPF, USPF, CMEPF)*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*%freq(data=VXG, table=COMPFS)&#59*/<br/>/*%freq(data=VXG, table=COMPFW)&#59*/<br/>/*%freq(data=VXG, table=COMPWW)&#59*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/><br/>%freq(data=VXG, table=COMPFS_Pattern, order=freq, option=%str(out=localt.VXG_RT4A))&#59<br/><br/>data forReport&#59<br/>&nbsp&nbsp&nbsp&nbspset localt.VXG_RT4A&#59 <br/>&nbsp&nbsp&nbsp&nbspwhere count >5&#59<br/>&nbsp&nbsp&nbsp&nbspProject = &_clientprojectname&#59<br/>&nbsp&nbsp&nbsp&nbspProgram = &_clienttasklabel&#59<br/>&nbsp&nbsp&nbsp&nbspCreateDate = date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat CreateDate date9.&#59<br/>run&#59<br/><br/>proc export data=forReport<br/><br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T4a. NPatient_COMPFS_Pattern\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"50223ef3-a768-4063-9485-ac7ad9f8c7a8"}]},{"idx":"a70a7484-9272-4c81-9a35-9c6a93bf01c2","name":"VXG_RT3A (FS) Table3a","NodeDescription":"///t<br/>///s<br/>/*VXG_RT3a_ Report of Table 3a (UCPF, USPF, CMEPF), (UCP?*/<br/><br/><br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/>%print(data=VXG)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'Total' as Role,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as NPatients<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Having UCPFs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UCPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPF1 ne '')<br/>)&#59<br/><br/>/*Having only one UCPF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UniqUCPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPF2 = '')<br/>)&#59<br/><br/>/*Having 1+ USPFs<br/>Question how comes that patient did not even have one USP??? The prescribers are not GP?*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('USPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(USPF1 ne '')<br/>)&#59<br/><br/>/*Those having USPF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UniqueUSPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(USPF1 ne '' and USPF2 = '')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('CMEPF' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(CMEPF1 ne '')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('COMPFS' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(COMPFS =1)<br/>)&#59<br/><br/><br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_1_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'Total' as Role,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as NPatients<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/>/*Having UCPWs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2a_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UCPW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPW1 ne '')<br/>)&#59<br/><br/>/*Having only one UCPW*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_2b_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UniqUCPW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UCPW2 = '')<br/>)&#59<br/><br/>/*Having 1+ USPWs<br/>Question how comes that patient did not even have one USP??? The prescribers are not GP?*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3a_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UWPW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UWPW1 ne '')<br/>)&#59<br/><br/>/*Those having a unique UWPW*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_3b_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('UniqueUWPW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(UWPW1 ne '' and USPF2 = '')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_4_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('CMEPW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(CMEPW1 ne '')<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXG_RT3a_5_1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str('COMPWW' as Role, count(key_hsn) as NPatients),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(COMPWW =1)<br/>)&#59<br/><br/><br/><br/><br/><br/><br/>data localt.VXG_RT3A&#59<br/>&nbsp&nbsp&nbsp&nbspformat Role $20.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT3a_:&#59<br/>&nbsp&nbsp&nbsp&nbspProject = &_clientprojectname&#59<br/>&nbsp&nbsp&nbsp&nbspProgram = &_clienttasklabel&#59<br/>&nbsp&nbsp&nbsp&nbspCreateDate = date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat CreateDate date9.&#59<br/>run&#59<br/><br/><br/>/*proc datasets nolist&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspdelete VXG_RT3a_:&#59*/<br/>/*run&#59*/<br/><br/>proc export data=localt.VXG_RT3A<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T3a. NPatient_Role_CompFS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"50223ef3-a768-4063-9485-ac7ad9f8c7a8"}]},{"idx":"a68632e1-f02a-4897-8e15-f2cb11719c9e","name":"VXH_FS Same Doc (comp coc)","NodeDescription":"///t<br/>///s<br/>/*VXH_FS. UCPF = USPF, UCPF=CMEPF*/<br/><br/>data _null_&#59run&#59<br/><br/>/*VXH_FS0. prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/>%print(data=VXG)&#59<br/><br/><br/>/*VXH_FS1. indicate whether UCPF is the same doc as USPF, or CMEPF*/<br/>%let thePatten =CompFS_Pattern&#59<br/>%let theUCPUSP=UCPFUSPF&#59<br/>%let theUCPCMEP=UCPFCMEPF&#59<br/>data VXH_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG&#59<br/>&nbsp&nbsp&nbsp&nbsplength  _tmp1 $100. &#59<br/>&nbsp&nbsp&nbsp&nbsp/*split the pattern into 3 substrings, each for UCPF, USPF, and CMEPF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen select the desired combination*/<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and USPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*The following is like counting 2As, 2Bs, ..., 2Zs. If any of them is matched, UCPF and USPF are the same doc*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPUSP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*UCPF and CMEPF*/<br/>&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=0&#59<br/>&nbsp&nbsp&nbsp&nbsp_tmp1=''&#59<br/>&nbsp&nbsp&nbsp&nbspdo i =1 , 3 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp_tmp1= strip(_tmp1) || '&#59' || strip(scan(&thePatten, i, \"&#59\"))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo j = 1 to 26&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif count(_tmp1, byte(j+63)) =2 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsame_&theUCPCMEP=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop _tmp: i j&#59<br/>run&#59<br/><br/><br/>/*VXH_FS2. Determine the median 25% and 75% percentile category of UPCIndexF */<br/>proc means data =  VXH_FS1 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS2a mean=mean median=median p25 = p25 p75=p75 &#59<br/>run&#59<br/>/*histogram of UPC index distribution*/<br/>proc univariate data=VXH_FS1&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF&#59<br/>run&#59<br/><br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as UPCIndexFP25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as UPCIndexFP50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as UPCIndexFP75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF < t2.p25 then cat('_0L_', '(<', round(t2.p25, 1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF >=  t2.p25 and t1.UPCIndexF <  t2.p75 then cat('_1M_', '(', round(t2.p25, 1), ' to ', round(t2.p75, 1)-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.UPCIndexF  >= t2.p75 then cat('_2H_', '(>=', round(t2.p75,1), ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) as UPCIndexF_Cat,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t1.UPCIndexF < t2.median, '_0L', '_1H') as UPCIndexF_CatD<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS2, table=UPCIndexF_Cat)&#59<br/>%freq(data=VXH_FS2, table=UPCIndexF_CatD)&#59<br/><br/><br/>/*VXH_FS3. Determine the 25% and 75% percentile category of # visits to the most visited GP */<br/>proc means data =  VXH_FS2 noprint&#59<br/>&nbsp&nbsp&nbsp&nbspvar NMax_VisitsPerDocF&#59<br/>&nbsp&nbsp&nbsp&nbspoutput out=VXH_FS3a mean=mean median=median p25 = p25 p75=p75 min=min max=max &#59<br/>run&#59<br/><br/><br/>/*histogram of # encounters distribution*/<br/>proc univariate data=VXH_FS2&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram NMax_VisitsPerDocF&#59<br/>run&#59<br/>/*In VXH_FS1, indicate the category by UPCIndexF*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXH_FS2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXH_FS3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p25 as NMax_VisitsPerDocF25,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.median as NMax_VisitsPerDocF50,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.p75 as NMax_VisitsPerDocF75,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(case<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF < t2.p25 then cat('_0L_', '(<', t2.p25, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF >=  t2.p25 and t1.NMax_VisitsPerDocF <  t2.p75 then cat('_1M_', '(', t2.p25, ' to ', t2.p75-1, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen t1.NMax_VisitsPerDocF  >= t2.p75 then cat('_2H_', '(>=', t2.p75, ')')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse 'Wrong' <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend ) length = 20 as NMax_VisitsPerDocF_Cat,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifc(t1.NMax_VisitsPerDocF < t2.median, '_0L', '_1H') as NMax_VisitsPerDocF_CatD<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross<br/>)&#59<br/>%freq(data=VXH_FS, table=UPCIndexF_Cat * NMax_VisitsPerDocF_Cat )&#59<br/>%freq(data=VXH_FS, table=UPCIndexF_CatD * NMax_VisitsPerDocF_CatD )&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXH_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXH_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>/*%exportvars(data=VXH_FS)&#59*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"c7dd3204-4f53-40b2-a2c1-5d603b0aa0ac","name":"VXHA specsenYouden_Table 6A","NodeDescription":"///t<br/>///s<br/>/*sensspec_tmp specificity, sensitivity, etc<br/>This program was adpated from prog D_stats of<br/>P:\\MSValidation(EvansC)_Bio15-331\\SAS code\\MSValidation_20180611.egp<br/>*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXH_FS.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXH_FS.sas7bdat)<br/>)&#59<br/><br/>data VXHA&#59 format test $200.&#59 delete&#59run&#59<br/><br/>%macro getSensiSpecYoudenJ(data=, theTestMark=, testVar=, trueVar=, YesValue=, NoValue=, target=, debug=)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local data theTestMark testVar trueVar YesValue NoValue target debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*sensspec_tmp1. Between UPC Index and Encounter freq*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=&Data noprint, table= &testVar * &trueVar, option=%str(out=sensspec_tmp1a))&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get TP FP FN TN*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &testVar=&YesValue and &trueVar=&YesValue then do&#59 theVar='TP'&#59 obs=1&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &testVar=&YesValue and &trueVar=&NoValue  then do&#59 theVar='FP'&#59 obs=2&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &testVar=&NoValue and &trueVar=&YesValue then do&#59 theVar='FN'&#59 obs=3&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &testVar=&NoValue and &trueVar=&NoValue then do&#59 theVar='TN'&#59 obs=4&#59end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep theVar Count obs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sort(data=&nbsp&nbsp&nbsp&nbspsensspec_tmp1b, sorter=obs)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%transpose(data=sensspec_tmp1b, target=sensspec_tmp0, rowhead=,colhead=theVar, contents=count)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"Sensitivity\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc freq data=&Data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &trueVar=&YesValue&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables &testVar /  binomial (level=\"_1H\" all)  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = sensspec_tmp1e1 binomialCls =sensspec_tmp1e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp1f&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp1e1 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Sensitivity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp1g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp1e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSen upperCl =UpSen&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge sensspec_tmp1f sensspec_tmp1g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"Specificity\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc freq data=&Data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &trueVar=&NoValue&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables &testVar /  binomial (level=\"_0L\" all)  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = sensspec_tmp2e1 binomialCls = sensspec_tmp2e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp2f&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp2e1 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=Specificity&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp2g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp2e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowSpe upperCl =UpSpe&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge sensspec_tmp2f sensspec_tmp2g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"PPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc freq data=&Data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &testVar=\"_1H\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables &trueVar /  binomial (level=\"_1H\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = sensspec_tmp3e1 binomialCls = sensspec_tmp3e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp3f&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp3e1 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=PPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp3g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp3e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowPPV upperCl =UpPPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge sensspec_tmp3f sensspec_tmp3g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptitle \"NPV\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc freq data=&Data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere &testVar=\"_0L\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables &trueVar /  binomial (level=\"_0L\" all) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output binomialProp = sensspec_tmp4e1 binomialCls = sensspec_tmp4e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp4f&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp4e1 (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1=NPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep stat nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp4g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp4e2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep  LowerCL UpperCL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif type=\"Wald\"&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename lowerCL=lowNPV upperCl =UpNPV&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge sensspec_tmp4f sensspec_tmp4g&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*kappa*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*ods results on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc freq data=&Data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptables &testVar *&trueVar /  agree noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output simplekappa = sensspec_tmp5a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp5b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp5a (obs=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = Kappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp5c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp5a (firstobs=3 obs=3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = LowKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp5d&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset sensspec_tmp5a (firstobs=4 obs=4)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename nvalue1 = HighKappa&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep nvalue1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge  sensspec_tmp5b sensspec_tmp5c sensspec_tmp5d&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbspThe following also produces sensitivity table (ctable), but there is no 95%CI.*/<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbspproc logistic data=dx_tmp10&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODEL TrueMS (EVENT='1')=TestMS / ctable pprob= 0.5&#59*/<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsprun&#59*/<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata sensspec_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptest =symget('theTestMark')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerge  sensspec_tmp0 sensspec_tmp1 sensspec_tmp2 sensspec_tmp3 sensspec_tmp4 sensspec_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J = Sensitivity + Specificity -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Lower=lowSen + lowSpe -1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspYouden_J_Upper=upSen+UpSpe-1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target sensspec_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete sensspec_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getSensiSpecYoudenJ&#59<br/>/*UPCIndex_NEncounters*/<br/>%getSensiSpecYoudenJ(<br/>&nbsp&nbsp&nbsp&nbspdata=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsptheTestMark=UPCIndex_NEncounters, <br/>&nbsp&nbsp&nbsp&nbsptestVar = UPCIndexF_CatD,<br/>&nbsp&nbsp&nbsp&nbsptrueVar=NMax_VisitsPerDocF_CatD,<br/>&nbsp&nbsp&nbsp&nbspYesValue= '_1H',<br/>&nbsp&nbsp&nbsp&nbspNoValue= '_0L',<br/>&nbsp&nbsp&nbsp&nbspTarget=VXHA,<br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>/*UCPF = USPF*/<br/>%print(data=VXH_FS)&#59<br/>data VXHA2&#59<br/>&nbsp&nbsp&nbsp&nbspset VXH_FS&#59<br/>&nbsp&nbsp&nbsp&nbspif same_UCPFUSPF = 1 then ucpusp='_1H'&#59<br/>&nbsp&nbsp&nbsp&nbspelse ucpusp = '_0L'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndexF_CatD ucpusp&#59<br/>run&#59<br/>%getSensiSpecYoudenJ(<br/>&nbsp&nbsp&nbsp&nbspdata=VXHA2,<br/>&nbsp&nbsp&nbsp&nbsptheTestMark=UCPF_sameAs_USPF, <br/>&nbsp&nbsp&nbsp&nbsptestVar = UPCIndexF_CatD,<br/>&nbsp&nbsp&nbsp&nbsptrueVar=ucpusp,<br/>&nbsp&nbsp&nbsp&nbspYesValue= '_1H',<br/>&nbsp&nbsp&nbsp&nbspNoValue= '_0L',<br/>&nbsp&nbsp&nbsp&nbspTarget=VXHA<br/>)&#59<br/>/*UCPF = CMEP*/<br/>%print(data=VXH_FS)&#59<br/>data VXHA3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXH_FS&#59<br/>&nbsp&nbsp&nbsp&nbspif same_UCPFCMEPF = 1 then ucpcmep='_1H'&#59<br/>&nbsp&nbsp&nbsp&nbspelse ucpcmep = '_0L'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndexF_CatD ucpcmep&#59<br/>run&#59<br/>%getSensiSpecYoudenJ(<br/>&nbsp&nbsp&nbsp&nbspdata=VXHA3,<br/>&nbsp&nbsp&nbsp&nbsptheTestMark=UCPF_sameAs_CMEPF, <br/>&nbsp&nbsp&nbsp&nbsptestVar = UPCIndexF_CatD,<br/>&nbsp&nbsp&nbsp&nbsptrueVar=ucpcmep,<br/>&nbsp&nbsp&nbsp&nbspYesValue= '_1H',<br/>&nbsp&nbsp&nbsp&nbspNoValue= '_0L',<br/>&nbsp&nbsp&nbsp&nbspTarget=VXHA<br/>)&#59<br/>/*compCOCF*/<br/>%print(data=VXH_FS)&#59<br/>data VXHA3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXH_FS&#59<br/>&nbsp&nbsp&nbsp&nbspif COMPFS = 1 then ucpCompCOC='_1H'&#59<br/>&nbsp&nbsp&nbsp&nbspelse ucpCompCOC = '_0L'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn UPCIndexF_CatD ucpCompCOC&#59<br/>run&#59<br/>%getSensiSpecYoudenJ(<br/>&nbsp&nbsp&nbsp&nbspdata=VXHA3,<br/>&nbsp&nbsp&nbsp&nbsptheTestMark=UCPF_sameAs_CompCOCFS, <br/>&nbsp&nbsp&nbsp&nbsptestVar = UPCIndexF_CatD,<br/>&nbsp&nbsp&nbsp&nbsptrueVar=ucpCompCOC,<br/>&nbsp&nbsp&nbsp&nbspYesValue= '_1H',<br/>&nbsp&nbsp&nbsp&nbspNoValue= '_0L',<br/>&nbsp&nbsp&nbsp&nbspTarget=VXHA<br/>)&#59<br/><br/>data localt.VXHA&#59<br/>&nbsp&nbsp&nbsp&nbspset VXHA&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>%print(data=localt.VXHA)&#59<br/>/*%let localReportPath=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Reports&#59*/<br/>proc export data= localT.VXHA<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T6.SpecSpefYJ\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"a68632e1-f02a-4897-8e15-f2cb11719c9e"}]},{"idx":"abcecef6-24ea-4d50-be5f-167953ff5ea4","name":"VXI Patient Covariates","NodeDescription":"///t<br/>///s<br/>/*VXI, Patient Covariates<br/><br/>to add:<br/>1. Total cost (not the thirdparty pay) in the pre365 for all medications received, added<br/>2. Count the number of chronic conditions, added<br/>3. Lenght of acute care stay in hospital, added<br/><br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXH_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXH_FS.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_ed_a2012.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_ed_a2012.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_verif_mort.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_verif_mort.sas7bdat)<br/>)&#59<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov.sas7bdat)<br/>)&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_mds_ltc.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_mds_ltc.sas7bdat)<br/>)&#59<br/><br/>%put >>> &theChronicConditionDataPath&#59<br/><br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&theChronicConditionDataPath.\\&theChronicConditionData..zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(&theChronicConditionData..sas7bdat)<br/>)&#59<br/><br/><br/><br/><br/><br/>/*# med (excluding the study medication)*/<br/>/***5* # DINs within 365 days prior to entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate-1 and t2.entryDate -365)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI5c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI5a VXI5b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI5d, target=VXI5e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXH_FS*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXH_FS,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Pre365 = ., 0, t2.NDINS_Pre365) as NDINS_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/>/***6* # DINs within 365 days since entry***************************************/<br/>&nbsp&nbsp&nbsp&nbsp/*from benefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'be' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*from nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.din, 'nb' as src),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate +365-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*put the above together*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI6c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI6a VXI6b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*remove those DINs as statin*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6c,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6d,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(DIN not in (select DIN from locald.StatinDINs))<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*get distinct DINs by key_hsn from both the benefit file and the nonbenefit file*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI6d, target=VXI6e, vars=%str(key_hsn, DIN))&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count DINs by Key_hsn*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, count(DIN) as NDINS_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Link backto VXI5*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6f,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinction=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.NDINS_Post365 = ., 0, t2.NDINS_Post365) as NDINS_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/><br/><br/>/*VXI7 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - 365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate-365 and t1.dschg_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI6*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Pre365=., 0, t2.NHosp_Pre365) as NHosp_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI8 #  hospitalizations within 365 days prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of hosp visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI8a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(adm_date) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI7*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI7,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI8b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NHosp_Post365=., 0, t2.NHosp_Post365) as NHosp_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI 9, # days/nights in hospital within 365 days prior to entry*/&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*get hospitalization records within 365 days prior to entryDate*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI9a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate, t1.T_LOS, t1.A_LOS, t1.ALC_LOS),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -365 and t2.entryDate  -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -365  and t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate -365 and t1.dschg_date > t2.entryDate  -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*check whether the following two returns the same values<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. total Nights in H as dschg_date - adm_date <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. numeric value from T_LOS<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI9b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNinH1 = dschg_date - adm_date &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif T_LOS = '' then T_LOS ='0'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNinH2=input(T_LOS, 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the T_LOS is not a good measure for:<br/>&nbsp&nbsp&nbsp&nbsp1) the T_LOS might be missing<br/>&nbsp&nbsp&nbsp&nbsp2) it messed up: patietns admitted and discharged on the same date is counted as 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhile patients admitted on the first day, and discharged on the next day is also counted as 1<br/>&nbsp&nbsp&nbsp&nbspIt is better to calculate by substracting dschgdate with admdate, and precisely name it as nights in hospital<br/>&nbsp&nbsp&nbsp&nbspBut the hosptial records need to be aligned so as to remove overlopping periods.<br/>&nbsp&nbsp&nbsp&nbspThis step cannot be done right now, as the acute care stay period is not determined yet<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Determine the alternative care stay*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI9C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9a&#59 /*use VXI9a, not VXI9b, as the VXI9b is not to be used*/<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbspif ALC_LOS ne '' and A_LOS = ''&#59 */<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif ALC_LOS = '' and A_LOS ne ''&#59 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*checked, no such records, which is good (If there ALC_LOS, the corresonding A_LOS is always specified. i.e., the two are quite consistent to each other)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif ALC_LOS ='' then ALC_LOS ='0'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_ALC = input(ALC_LOS, 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the End of Acute care is dschg - N_ALC*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAcuteCareEnd = dschg_date - N_ALC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat AcuteCareEnd date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*clean up the overlapping periods in two ways,<br/>&nbsp&nbsp&nbsp&nbsp1. between dschg_date and adm_date (for total days in H)<br/>&nbsp&nbsp&nbsp&nbsp2. between AcuteCareEnd and adm_date (for acute care days in H)<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*The following is to take a simpler approach, enumerating the 365 days since (including) the entryDate, and <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount the days within hosp period (either between adm and dschg, or between adm and AcuteCareEnd)<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp/*the total days in Hosp*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI9D1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsparray d(365)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(1) = adm_date&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 2 to 365&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(i) = d(i-1) +1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif adm_date <= d(i) <= dschg_date <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand entryDate -365 <= d(i) <= entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDate_InH = d(i)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate Date_InH&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Date_InH date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the duplicated days*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI9D1, vars=%str(key_hsn, entryDate, Date_InH), target=VXI9D2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count the days in H*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI9D2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI9D3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(Date_inH) as HDays_Total),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*the days in Hosp for acute care*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI9E1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI9C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsparray d(365)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(1) = adm_date&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 2 to 365&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(i) = d(i-1) +1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif adm_date <= d(i) <= AcuteCareEnd <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand entryDate -365 <= d(i) <= entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDate_InH = d(i)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate Date_InH&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Date_InH date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the duplicated days*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI9E1, vars=%str(key_hsn, entryDate, Date_InH), target=VXI9E2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count the days in H*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI9E2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI9E3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(Date_inH) as HDays_AcuteCare),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*attach Date_InH, and HDays_AcuteCare to the cohort*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI9D3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI9F, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.HDays_Total=., 0, t2.HDays_total) as HDays_Total_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI9F,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI9E3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI9, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.HDays_AcuteCare=., 0, t2.HDays_AcuteCare) as HDays_AcuteCare_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*VXI10, # days/nights in hospital within 365 days since entry*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get hospitalization records within 365 days prior to entryDate*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI9,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI10a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate, t1.T_LOS, t1.A_LOS, t1.ALC_LOS),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*check whether the following two returns the same values<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. total Nights in H as dschg_date - adm_date <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. numeric value from T_LOS<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI10b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNinH1 = dschg_date - adm_date &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif T_LOS = '' then T_LOS ='0'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNinH2=input(T_LOS, 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the T_LOS is not a good measure for:<br/>&nbsp&nbsp&nbsp&nbsp1) the T_LOS might be missing<br/>&nbsp&nbsp&nbsp&nbsp2) it messed up: patietns admitted and discharged on the same date is counted as 1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhile patients admitted on the first day, and discharged on the next day is also counted as 1<br/>&nbsp&nbsp&nbsp&nbspIt is better to calculate by substracting dschgdate with admdate, and precisely name it as nights in hospital<br/>&nbsp&nbsp&nbsp&nbspBut the hosptial records need to be aligned so as to remove overlopping periods.<br/>&nbsp&nbsp&nbsp&nbspThis step cannot be done right now, as the acute care stay period is not determined yet<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Determine the alternative care stay*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI10C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10a&#59 /*use VXI10a, not VXI10b, as the VXI10b is not to be used*/<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbspif ALC_LOS ne '' and A_LOS = ''&#59 */<br/>&nbsp&nbsp&nbsp&nbsp/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif ALC_LOS = '' and A_LOS ne ''&#59 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*checked, no such records, which is good (If there ALC_LOS, the corresonding A_LOS is always specified. i.e., the two are quite consistent to each other)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif ALC_LOS ='' then ALC_LOS ='0'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_ALC = input(ALC_LOS, 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the End of Acute care is dschg - N_ALC*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAcuteCareEnd = dschg_date - N_ALC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat AcuteCareEnd date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*clean up the overlapping periods in two ways,<br/>&nbsp&nbsp&nbsp&nbsp1. between dschg_date and adm_date (for total days in H)<br/>&nbsp&nbsp&nbsp&nbsp2. between AcuteCareEnd and adm_date (for acute care days in H)<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*The following is to take a simpler approach, enumerating the 365 days since (including) the entryDate, and <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount the days within hosp period (either between adm and dschg, or between adm and AcuteCareEnd)<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp/*the total days in Hosp*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI10D1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsparray d(365)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(1) = adm_date&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 2 to 365&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(i) = d(i-1) +1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif adm_date <= d(i) <= dschg_date <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand entryDate <= d(i) <= entryDate +364<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDate_InH = d(i)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate Date_InH&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Date_InH date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the duplicated days*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI10D1, vars=%str(key_hsn, entryDate, Date_InH), target=VXI10D2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count the days in H*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10D2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI10D3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(Date_inH) as HDays_Total),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*the days in Hosp for acute care*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI10E1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI10C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsparray d(365)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(1) = adm_date&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 2 to 365&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspd(i) = d(i-1) +1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif adm_date <= d(i) <= AcuteCareEnd <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand entryDate <= d(i) <= entryDate +364<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthen do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDate_InH = d(i)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate Date_InH&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Date_InH date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the duplicated days*/<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI10E1, vars=%str(key_hsn, entryDate, Date_InH), target=VXI10E2 )&#59<br/>&nbsp&nbsp&nbsp&nbsp/*count the days in H*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10E2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI10E3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(Date_inH) as HDays_AcuteCare),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*attach Date_InH, and HDays_AcuteCare to the cohort*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI9,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI10D3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI10F, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.HDays_Total=., 0, t2.HDays_total) as HDays_Total_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10F,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI10E3, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI10, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.HDays_AcuteCare=., 0, t2.HDays_AcuteCare) as HDays_AcuteCare_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/><br/>/*11. Doc (GP/SP) visits within 1 years prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate-1 and t2.entryDate - &runinDays)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b1, target=VXI11c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI11b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI11a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI11b2, target=VXI11c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI10*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI10,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Pre365=., 0, t2.NVisits_GP_Pre365) as NVisits_GP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Pre365=., 0, t2.NVisits_SP_Pre365) as NVisits_SP_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*12. Doc (GP/SP) visits within 1 years since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from msb file, distinct visits (same date, same doc)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.dos, t1.key_doc_num, t1.spec),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate and t2.entryDate + &followDays-1)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get gp visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec in: ('B')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b1, target=VXI12c1, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get SP visits*/<br/>&nbsp&nbsp&nbsp&nbspdata VXI12b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXI12a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif spec not in: ('B') and spec not in: ('W')&#59 /*W are nurses or pharmacists*/<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%distinct(data=VXI12b2, target=VXI12c2, vars=%str(key_hsn, dos, key_doc_num))&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12c2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(dos) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Link to VXI11*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI11,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_GP_Post365=., 0, t2.NVisits_GP_Post365) as NVisits_GP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12e,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12d2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_SP_Post365=., 0, t2.NVisits_SP_Post365) as NVisits_SP_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*13. ER visits within a year prior to entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate -1 and t2.entryDate - &runinDays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate- &runinDays and t1.disp_date > t2.entryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI12*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI12,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Pre365=., 0, t2.NVisits_ER_Pre365) as NVisits_ER_Pre365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*14. ER visits within a year since entry*/<br/>&nbsp&nbsp&nbsp&nbsp/*from ER file*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_ed_a2012,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.inst_num, t1.reg_date, t1.disp_date, t2.entrydate),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.reg_date ne .  and t1.disp_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.disp_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.reg_date < t2.entryDate and t1.disp_date > t2.entryDate+&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*count # of ER visits per patient*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI14a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, entryDate, count(inst_num) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(key_hsn, entryDate)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*link to VXI13*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXI13,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXI14b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI14,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.NVisits_ER_Post365=., 0, t2.NVisits_ER_Post365) as NVisits_ER_Post365),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>/*VXI15 the % paid by patient or 3rd party insurer of all drugs within 365 days prior to entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 prior to entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI15a, get drug claims within 365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runindays and t2.entryDate -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI14,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate - &runinDays and t2.entryDate -1)<br/>)&#59<br/><br/>data VXI15a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15a1 VXI15a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI15c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI15b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI15c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI15c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI15d<br/>)&#59<br/>/*%freq(data=VXI15D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI15Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI15d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI14 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI14,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI15,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.total_Cost as total_Cost_Pre365, t2.ThirdPartyPay as ThirdPartyPay_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI16 the % paid by patient or 3rd party insurer of all drugs within 365 days since entry<br/>&nbsp&nbsp&nbsp&nbsp1. get all drug claims for patients in the cohort<br/>&nbsp&nbsp&nbsp&nbsp2. keep the claims within 365 since entry<br/>&nbsp&nbsp&nbsp&nbsp3. For the claim from step 2, estimate the % paid by patient or 3rd party insurer<br/>*/<br/>/*VXI16a, get drug claims within 365 days since entry*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn,  t1.Rx_ddddd, t1.rx_qty_amt, t1.total_apprv,t1.amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI15,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.rx_qty_amt, t1.total_cost as total_apprv,0 as amnt_pay_drug_plan, t2.entryDate), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate  and t2.entryDate +&followdays -1)<br/>)&#59<br/><br/>data VXI16a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16a1 VXI16a2&#59<br/>run&#59<br/><br/>/*Sum to have total drug cost and the proportion paid by public drug plan*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, EntryDate, sum(total_apprv) as total_Cost, sum(total_apprv) - sum(amnt_pay_drug_plan) as ThirdPartyPay),<br/>&nbsp&nbsp&nbsp&nbspgroupby = %str(key_hsn, EntryDate)<br/>)&#59<br/><br/>data VXI16c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI16b&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT = ThirdPartyPay / total_Cost&#59<br/>&nbsp&nbsp&nbsp&nbspformat ThirdPartyPayCAT $20.&#59<br/>&nbsp&nbsp&nbsp&nbspif ThirdPartyPayPCT < .50 then ThirdPartyPayCAT =\"<50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspelse ThirdPartyPayCAT =\">=50%\"&#59<br/>&nbsp&nbsp&nbsp&nbspThirdPartyPayPCT2=round(ThirdPartyPayPCT*100, 1)&#59<br/>run&#59<br/>/*%freq(data=VXI16c, table=ThirdPartyPayCAT)&#59*/<br/>%MakeCategories(<br/>    Data=VXI16c, <br/>    theVar=ThirdPartyPayPCT2,<br/>    theTargetVar=ThirdPartyPayPCT2_CAT,<br/>    theCutOffs=0 10 20 30 40 50 60 70 80 90 100, <br/>    dlmt=, <br/>    debug=, <br/>    closeSide=left,<br/>    target=VXI16d<br/>)&#59<br/>/*%freq(data=VXI16D, table=ThirdPartyPayPCT2_CAT)&#59<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=ThirdPartyPayPCT2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI16Tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspproc univariate data =  VXI16d normal&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvar ThirdPartyPayPCT2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphistogram /normal&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>*/<br/><br/>/*Link the 3rd party pay variables to VXI15 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI15,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI16D,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI16,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.total_Cost as total_Cost_Post365, t2.ThirdPartyPay as ThirdPartyPay_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT as ThirdPartyPayPCT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayCAT as ThirdPartyPayCAT_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.ThirdPartyPayPCT2_CAT as ThirdPartyPayLevel_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>/*VXI 17, receiving PIM drugs within 365 days prior (exclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI16, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI17a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI17a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI17a1 VXI17a2&#59<br/>run&#59<br/><br/><br/>/*VXI17b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate -365 <= rx_ddddd < entryDate)<br/>)&#59<br/><br/>/*transpose VXI17B, so as to have indicates for each class*/<br/>%transpose(data=VXI17B, target=VXI17c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicators to VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI16,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI17c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI17,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Pre365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Pre365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/><br/>/*VXI 18, receiving PIM drugs within 365 days since (inclusive) to the entry<br/>&nbsp&nbsp&nbsp&nbspthese drugs including, Anticholinergics, antipsychotics, antidepressants, Benzodiazpines<br/>&nbsp&nbsp&nbsp&nbspDINs were provided by Laura in the dropbox, also copied to P:\\Frailty(MaxwellC)_Bio43\\Documentation\\Doc from ON team\\PIM and ChEI DINS<br/>&nbsp&nbsp&nbsp&nbspDINS were imported by the program makePIMs<br/>*/<br/><br/>/* 1. get drug claims<br/>&nbsp&nbsp&nbsp&nbsp2. For patients in VXI17, determine whether or not the patient received 1+ dispensation of the PIM DINs within 30 days <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprior (exclusive) to entry<br/>&nbsp&nbsp&nbsp&nbsp3. Indicate those received the interested PIMs&nbsp&nbsp&nbsp&nbsp<br/>*/<br/>/*VXI18a, get drug claims of ChEIs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.PIMS,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18a2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.class, t1.Rx_ddddd), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/><br/>data VXI18a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI18a1 VXI18a2&#59<br/>run&#59<br/><br/><br/>/*VXI18b, keep the last drug specific claim closest to entryDate*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18B,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t2.Class), <br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn ,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(entryDate  <= rx_ddddd < entryDate +&followdays)<br/>)&#59<br/><br/>/*transpose VXI18B, so as to have indicates for each class*/<br/>%transpose(data=VXI18B, target=VXI18c, rowhead=key_hsn, colhead=class, contents=class)&#59<br/><br/><br/>/*Link the PIM indicatorsto VXI16 */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI17,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI18c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI18,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.BENZO ne '', 1, 0) as BENZO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.PSYCHO ne '', 1, 0) as PSYCHO_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiDep ne '', 1, 0) as ANTIDEP_Post365, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspifn(t2.AntiCHO ne '', 1, 0) as ANTICHO_Post365), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*19. CAMH*/<br/>%get_CAMH( Data_Hosp=master_hosp, Data_msb=master_msb, Data_ed=master_ed_a2012, <br/>&nbsp&nbsp&nbsp&nbspstartDate=&dataStartDate, endDate=&DataEndDate, debug=1, dxDateCol=, target=VXI19a<br/>) &#59<br/>%print(data=VXI19a)&#59<br/>/*from the above, transpose and put the type of CAMH in one row for each patient*/<br/>%transpose(data=VXI19a, target=VXI19b, rowhead=key_hsn, colhead=camh_cat, contents=dxdate)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI18,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI19b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI19c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.npd as CAMH_NPD_Date, t2.SA as CAMH_SA_Date,t2.PSY as CAMH_PSY_Date), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI19&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI19c&#59<br/>&nbsp&nbsp&nbsp&nbsparray cAMHdates{3} CAMH_NPD_Date CAMH_SA_Date CAMH_PSY_Date&#59<br/>&nbsp&nbsp&nbsp&nbsparray CAMHPre_{3} &#59<br/>&nbsp&nbsp&nbsp&nbsparray camhPost_{3} &#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if there is no camh date, both pre and post are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) =. then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is before the entrydate, both pre and post are positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cAMHdates(i) < entryDate then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is within the follow up period, the pre is negative, the post positive*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif entryDate <= cAMHdates(i) < entryDate + 365 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the camh date is after the follow up period, both are negative*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_(i) = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_(i) =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_1 = CAMH_NPD_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_2 = CAMH_SA_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPre_3 = CAMH_PSY_Pre365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_1 = CAMH_NPD_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_2 = CAMH_SA_Post365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMHPost_3 = CAMH_PSY_Post365<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>run&#59<br/><br/>/*20 Charlson score*/<br/>/*for charlson score calculation, the following macro 'VarExist.sas' will be required.<br/>&nbsp&nbsp&nbsp&nbspHowever, it has conflict with the macro 'VarExist.sas' in MyMacros.sas.<br/>&nbsp&nbsp&nbsp&nbspAfter Calculating Charlson score, remember to reload MyMacros so as to load the same-name macro in MyMacros<br/>*/<br/>%include 'R:\\Macros\\Util\\VarExist.sas' /LRECL=32767&#59<br/>%Charlson_Elixhauser_Score_local(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson=Y, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elixhauser=N, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_start_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_xtrc_end_dt=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hosp_file=master_hosp, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp msb_file=master_msb, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp hsn_file=VXI19, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ref_date_var=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp charlson_var_out=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp elix_postfix=elix_,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp additionalByVar=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ds_out=VXI20a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp days_lookback=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp debug=N<br/>)&#59<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/>data VXI20&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI20a&#59<br/>&nbsp&nbsp&nbsp&nbspif CHARLSON_INDEX =. then CHARLSON_INDEX=0&#59<br/>run&#59<br/><br/>/*mortality*/<br/>%print(data=master_verif_mort)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI20,<br/>&nbsp&nbsp&nbsp&nbspt2=master_verif_mort,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI21a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ddt_novit as MortDate),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>data VXI21&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI21a&#59<br/>&nbsp&nbsp&nbsp&nbspDeath_Pre365 =0&#59Death_Post365 =0&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and MortDate < EntryDate then Death_Pre365=1&#59<br/>&nbsp&nbsp&nbsp&nbspif MortDate ne . and EntryDate <= MortDate < EntryDate + &followdays then Death_Post365=1&#59<br/>Run&#59<br/>%freq(data=VXI21, table = Death_Pre365)&#59<br/>%freq(data=VXI21, table = Death_Post365)&#59<br/><br/>/*22. lost of coverage during follow up */<br/>%getCoverGAPs(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprawfile=master_phrs_cov, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspptFile=VXI21, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheCovXtrc=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstart=EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend= %str(EntryDate+&followdays-1), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXI22a, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcohortgroup=, <br/>&nbsp&nbsp&nbsp&nbspdebug=1<br/>)&#59<br/>/*from above, get those with coverage gaps*/<br/>data VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22a&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn EntryDate start<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverstart<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverEnd<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcoverPCT<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgaps<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgapPCT<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspif gaps ne . and gaps > 0&#59<br/>run&#59<br/>/*make a distinct list from above*/<br/>%sort(data=VXI22b, sorter = key_hsn entryDate coverstart coverend)&#59<br/>data VXI22c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI22b&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsn entryDate coverstart coverend&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn&#59<br/>run&#59<br/><br/>/*link back to VXI21, if the patient appears in VXI22C, indicate as lost of coverage in post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI21,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI22C,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI22,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as LostCov_Post365, t2.coverstart as Date_LostCov ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*23. LTC stay*/<br/>/*from the mds_ltc file, get ltc stay records*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=master_mds_ltc,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t2.key_hsn, t2.mds_ab1 as adm_date, t2.mds_r4 as dschg_date ),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*concatenate the overlaping periods*/<br/>%cleanHospital(<br/>&nbsp&nbsp&nbsp&nbspdata=VXI23a, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXI23b, <br/>&nbsp&nbsp&nbsp&nbspdxCol=,<br/>&nbsp&nbsp&nbsp&nbspmdxCol=, <br/>&nbsp&nbsp&nbsp&nbspintvnCol=, <br/>&nbsp&nbsp&nbsp&nbspstartD=,<br/>&nbsp&nbsp&nbsp&nbspendD=,<br/>&nbsp&nbsp&nbsp&nbspinst_num=,<br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=EntryDate,<br/>&nbsp&nbsp&nbsp&nbspmaxLenD=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenM=,<br/>&nbsp&nbsp&nbsp&nbspmaxLenI=,<br/>&nbsp&nbsp&nbsp&nbspkeepTmp=1<br/>)&#59<br/>%distinct(data=VXI23b, target=VXI23c, vars=%str(key_hsn), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(adm_date between entryDate and entryDate +&followdays-1 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor dschg_date between entryDate and entryDate +&followdays-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor adm_date < entryDate and dschg_date > entryDate +&followdays-1<br/>))&#59<br/><br/>/*Link to VSZ22, indicate those having LTC stay*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI22,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI23c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI23,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0, 1) as LTCStay_Post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/>/*24. Chronic Conditions (CCSDD definition) within 365 days prior to entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI24a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate -&runindays and t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate -&runindays and t2.dzEndDate > t1.EntryDate -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>data VXI24b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Pre365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/>%transpose(data=VXI24b, target=VXI24c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/>/*link the above back to VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI23,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI24c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI24d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI24&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI24d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_pre365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbspN_CC_Pre365 = Sum (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AD, CC_Pre365_AF_PS, CC_Pre365_AK_PS, CC_Pre365_AMI, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_AP_PS, CC_Pre365_ASTHMA, CC_Pre365_CA_PS, CC_Pre365_CD_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_CK_PS, CC_Pre365_COPD, CC_Pre365_CV_PS, CC_Pre365_DA_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_DIABETES, CC_Pre365_EPAD, CC_Pre365_HF, CC_Pre365_HTN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_IB_PS, CC_Pre365_IHD, CC_Pre365_LB_PS, CC_Pre365_LV_PS, CC_Pre365_MOODANX, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_MS, CC_Pre365_NONRA, CC_Pre365_NS_PS, CC_Pre365_OA, CC_Pre365_OB_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_OMH, CC_Pre365_OSTEO_1POP, CC_Pre365_PD, CC_Pre365_PV_PS, CC_Pre365_RA, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_RF_PS, CC_Pre365_SCHIZO_EVER, CC_Pre365_STROKE_2HOSP, CC_Pre365_SUBABUSE_OLD, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Pre365_SUICIDE_OLD, CC_Pre365_UB_PS, CC_Pre365_VTE_PS, CC_Pre365_WF_PS)&#59<br/>run&#59<br/><br/><br/><br/>/*25. Chronic Conditions (CCSDD definition) within 365 days since entry. The data has been prepared. file name and path <br/>&nbsp&nbsp&nbsp&nbspdefined in Local Settings<br/>*/<br/>/*from the conditions, get a list of distinct key_hsn - chronic conditions for patients in VXI23*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=&theChronicConditionData,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI25a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.entryDate, t2.disease as ChronicD),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( t2.dzStartDate between t1.EntryDate and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp t2.dzEndDate between t1.EntryDate  and t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp or<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  t2.dzStartDate < t1.EntryDate and t2.dzEndDate > t1.EntryDate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>data VXI25b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25a&#59<br/>&nbsp&nbsp&nbsp&nbsplength ChronicD $50.&#59<br/>&nbsp&nbsp&nbsp&nbspChronicD2='CC_Post365_' || strip(ChronicD) &#59<br/>&nbsp&nbsp&nbsp&nbspChronicD3=1&#59<br/>run&#59<br/>%transpose(data=VXI25b, target=VXI25c, rowhead=key_hsn, colhead=ChronicD2, contents=ChronicD3)&#59<br/>/*link the above back to VXI24*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI24,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25c,<br/>&nbsp&nbsp&nbsp&nbsptarget= VXI25d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>data VXI25&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI25d&#59<br/>&nbsp&nbsp&nbsp&nbsparray tmp {*} cc_post365_:&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to dim(tmp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif tmp(i) =. then tmp(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop i&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_CC_Post365 = Sum (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_AD, CC_Post365_AF_PS, CC_Post365_AK_PS, CC_Post365_AMI, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_AP_PS, CC_Post365_ASTHMA, CC_Post365_CA_PS, CC_Post365_CD_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_CK_PS, CC_Post365_COPD, CC_Post365_CV_PS, CC_Post365_DA_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_DIABETES, CC_Post365_EPAD, CC_Post365_HF, CC_Post365_HTN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_IB_PS, CC_Post365_IHD, CC_Post365_LB_PS, CC_Post365_LV_PS, CC_Post365_MOODANX, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_MS, CC_Post365_NONRA, CC_Post365_NS_PS, CC_Post365_OA, CC_Post365_OB_PS, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_OMH, CC_Post365_OSTEO_1POP, CC_Post365_PD, CC_Post365_PV_PS, CC_Post365_RA, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_RF_PS, CC_Post365_SCHIZO_EVER, CC_Post365_STROKE_2HOSP, CC_Post365_SUBABUSE_OLD, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_Post365_SUICIDE_OLD, CC_Post365_UB_PS, CC_Post365_VTE_PS, CC_Post365_WF_PS)&#59<br/>run&#59<br/><br/>/*26. pregnancy<br/>pregnancy (UltraSound Project, too complicated. eventually using the CCDSS case definition, which is used for exclusion in definition of CCDSS chronic conditions)<br/>the code of pregancy was from the file A12_CoMorb_ICDDX in the ChronicPop's remoteS folder<br/><br/>('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', '655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', '673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', 'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', 'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', 'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', 'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', 'O94', 'O95', 'O98', 'O99', 'Z37')<br/>*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/><br/>/*hospital*/<br/>data VXI26a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>data VXI26b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn adm_date dschg_date src&#59<br/>run&#59<br/>data VXI26c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI26a VXI26b&#59<br/>run&#59<br/>/*link to VXI25, indicate those having preg during pre365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_pre365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate -1 and t2.entryDate - &runindays<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate-&runindays and t1.dschg_date > t2.entryDate -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link to VXI25, indicate those having preg during post365*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26c,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI25,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, 1 as preg_post365),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + &followdays -1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*link back to VXI25*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI25,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26d,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_pre365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26f,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26e,<br/>&nbsp&nbsp&nbsp&nbspTarget=VXI26,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_hsn = \"\", 0,1) as preg_post365 ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%freq(data=VXI26, table=preg_pre365*preg_post365)&#59<br/><br/><br/>/*VXI27<br/>to count # of prescribers<br/>of AHTN OH Statin medications<br/>1) within 1 year prior to entryDate<br/>2) within 1 year during follow up<br/>*/<br/><br/>/*claims of STATIN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of antiHTN*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ahtndins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*claims of oh*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit,<br/>&nbsp&nbsp&nbsp&nbspt2=locald.ohdins,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27a6,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.Rx_ddddd, t1.key_prscr_num),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(docslushcode='N')<br/>)&#59<br/><br/>/*distinct records of statins*/<br/>data VXI27b1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a1 VXI27a2&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='statin'&#59<br/>run&#59<br/>%distinct(data=VXI27b1, target=VXI27b2, vars=*)&#59<br/><br/>data VXI27b3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a3 VXI27a4&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='ahtn'&#59<br/>run&#59<br/>%distinct(data=VXI27b3, target=VXI27b4, vars=*)&#59<br/><br/>data VXI27b5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27a5 VXI27a6&#59<br/>&nbsp&nbsp&nbsp&nbsptheMedClass='oh'&#59<br/>run&#59<br/>%distinct(data=VXI27b5, target=VXI27b6, vars=*)&#59<br/><br/>/*put all records together*/<br/>data VXI27C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27b2 VXI27B4 VXI27B6&#59<br/>run&#59<br/><br/>/*link to VXI26 to select records within look back*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D1,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'pre365' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate -365 and t2.entryDate -1)<br/>)&#59<br/><br/>/*link to VXI26 to select records within follow up*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI26,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27D2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.key_prscr_num, t1.theMedClass, 'follow' as thePeriod),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.rx_ddddd between t2.entryDate and t2.entryDate+&followdays-1)<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E1a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E1a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Pre365_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D1, target=VXI27E2a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Pre365_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/><br/>/*For each patient, # of distinct prescriber of statin ahtn oh in follow up*/<br/>%distinct(data=VXI27D2, target=VXI27E3a, vars=%str(key_hsn, key_prscr_num))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(key_prscr_num) as Followup_Prscr_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*For each patient, # of distinct category of statin ahtn oh (1 to 3 categories) in pre365 days*/<br/>%distinct(data=VXI27D2, target=VXI27E4a, vars=%str(key_hsn, theMedClass))&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27E4a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_hsn, count(theMedClass) as Followup_MedClass_statinAHTNOH),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_hsn<br/>)&#59<br/>/*link to VXI26 to have the vars*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI26,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_Prscr_statinAHTNOH=., 0, Pre365_Prscr_statinAHTNOH) as Pre365_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Pre365_MedClass_statinAHTNOH=., 0, Pre365_MedClass_statinAHTNOH) as Pre365_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27F3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_Prscr_statinAHTNOH=., 0, Followup_Prscr_statinAHTNOH) as Followup_Prscr_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXI27f3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXI27E4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXI27,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.Followup_MedClass_statinAHTNOH=., 0, Followup_MedClass_statinAHTNOH) as Followup_MedClass_statinAHTNOH ),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/><br/><br/>data VXI&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI27&#59<br/>&nbsp&nbsp&nbsp&nbspif QAIPPE=. then QAIPPE=9&#59<br/>run&#59<br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXI.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXI.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/**/<br/>/*%exportvars(data=VXI)&#59*/<br/><br/>s///<br/>t///","children":[{"idx":"85ea45fa-6cd3-4ec7-9053-0ce28eaed8c1","name":"Q VXI same Macro VarExist","NodeDescription":"///t<br/>///s<br/>/*<br/>The charlson score need a HQC macro 'VarExist.sas', which is of the same name as another macro in MyMacros.sas<br/>These two macros have conflict.<br/>After running charlson score, reload MyMacros.sas to overwrite that HQC macro<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"abcecef6-24ea-4d50-be5f-167953ff5ea4"}]},{"idx":"69788758-5ee0-485d-8d56-f918ab934294","name":"VXJ_A Physician Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_A Physician Covariates<br/>Note: this part is only for attributes of UCPF1 and UCPW1 (the first usual care provider in follow up or from runin through followup<br/><br/>Doctor panel size<br/>Doctor workload<br/><br/>Fee for service or NFFS<br/>Familarity with statin (% of statin Rx in all Rx)<br/><br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXJ_A0. Preparing Source Data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXI.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXI.sas7bdat)<br/>)&#59<br/>/*from the doc mobile file, get the spec of these docs from the doc info file*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_A1. For physicians in VXI, get doc sex age education, spec from VXJ_A1*/<br/>/*VXJ_A1a. From VXI, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_A1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_A21b. keep the distinct record of doc ids, as the doc properties are not time-specific*/<br/>%distinct(data=VXJ_A1a, target=VXJ_A1, vars=key_doc_num)&#59<br/><br/><br/>/*VXJ_A2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/>/*VXJ_A2a keep records in which sex is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=VXJ_A2a, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata VXJ_A2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset VXJ_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*VXJ_A2c, attach the selected property to the docs in VXJ_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_A2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%freq(data=VXJ_A1, table=Doc&docVar)&#59<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*clean up the sex category, there were funny values like D, J, etc.*/<br/><br/>/*VXJ_A3. Link the cleaned properties to distinct docs appeared in the cohort*/<br/>data VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A1&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex='F')) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSexN=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex))='M' then DocSexN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse DocSexN=-1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>/*the grad_geo see the file \"PHMB_File_Descptn.xls\", a link can be found at quincy desktop, file saved in U<br/>&nbsp&nbsp&nbsp&nbspand mailed to SHY516 on Jan 31, 2019*/<br/>data VXJ_A3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A3a&#59<br/>&nbsp&nbsp&nbsp&nbsplength DocGrad_Country $10.&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGRAD_GEO_COUNTRY=\"\" then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode=.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=.&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*GRAD_GEO_COUNTRY = \"1\" to \"19\" are CANADA grads, the rest are foreign grads*/<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode = input(strip(DocGRAD_GEO_COUNTRY), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif  DocGradCountryCode <= 19 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"CANADA\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country = \"FOREIGN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocGRAD_GEO_COUNTRY&#59<br/>&nbsp&nbsp&nbsp&nbsplength docAttrs $20.&#59<br/>&nbsp&nbsp&nbsp&nbspdocAttrs = strip(docSex) || \":\" || strip(DocBirth_Year) || \":\" || strip(DocGrad_Year) || \":\" || <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrip(DocGradCountryCode) || \":\" || strip(DocGrad_CountryN)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%freq(data=VXJ_A3, table=DocGrad_Country)&#59<br/><br/><br/><br/>/*VXJ_A4, link the properties to docs in the cohort VXI. For UCPF1, add the properties into the file*/<br/>data VXJ_A4a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXI&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A4a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A4b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1 =strip(UCPF1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/>/*VXJ_A5, repeat VXJ_A4, this time, for UCPW1, add the properties into the file*/<br/>data VXJ_A5a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A4&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_A5a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_A5b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A5b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1 =strip(UCPW1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXJ_A.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_A.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>%exportvars(data=VXJ_A)&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"f6c8294b-634c-4973-abf6-9e8cade4c115","name":"VXJ_B DOC_MSB_ATTRs","NodeDescription":"///t<br/>///s<br/>/*VXJ_B, Get MSB claims of GPs in VXJ_A, <br/>count % of claims as FFS/NFFS in the specified period (1 years prior and 1 year after the EntryDate) <br/>Note, the FFS/NFFS is based all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients, but within the 2 year period around the entry dates. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2012-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2011-1-1 and 2013-12-31.<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VXJ_B0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_A.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_A.sas7bdat)<br/>)&#59<br/>/*the MSB data is too big, only do it for once.*/<br/>%macro prepareMSBData&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the original file is too big, make distinct records and make it smaller<br/>&nbsp&nbsp&nbsp&nbspThis time, claims of all spec will be kept. */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=localt.VXJ_B0a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsnc, key_doc_numc, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsnc, key_doc_numc,  dos, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*claims of the same patient-doc-date should be treated as a unique encounter. In the above, it could be that<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe same patient-doc-date could appear twice, each for a different paymode. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn that case, keep the same patient-doc-date records of the FFS type. The reason is that at least part of such claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwere indicated as FFS mode*/<br/>&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_hsnc key_doc_numc dos paymode&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.dos&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*zip the file VXJ_B0, and delete the unzipped file (it is too large)*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B0.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B0.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=&localTargetPath<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend prepareMSBData&#59<br/>/*%prepareMSBData&#59*/<br/><br/><br/><br/>/*VXJ_B1. Get UCPF1 and UCPW1 from VXJ_A. These doctors are specific by patient and entrydate*/<br/>/*VXJ_B1a. From VXJ_A, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_B1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_B1b. keep the distinct record of period-specific doc ids*/<br/>%distinct(data=VXJ_B1a, target=VXJ_B1b, vars=%str(entryDate, key_doc_num))&#59<br/><br/>/*map the key_doc_num and key_doc_numc*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>/*VXJ_B2. From above, select claims of the docs between entrydate -365 and entrydate +364*/<br/>/*VXJ_B2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>&nbsp&nbsp&nbsp&nbspThere are millions of MSB claims, and there are 60K doc records (by specific entrydate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe intermediate temp data will be huge if run by a single SQL query.<br/>&nbsp&nbsp&nbsp&nbspThe following is to bring the MSB records by quarter and aggregate the results. <br/>*/<br/>%macro makeVXJ_B2b3&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B0.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B0.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the doc and period specific claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowing are the requirements:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. count the N_encounters by physician, period, and payMode (i.e., grouped by entryDate, doc id , and paymode, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand count # encounters)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. count the # of patients by physician and  period (i.e., grouped by entryDate, doc id,  count the # of distinct patients)<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTo save time, we'll put the 2 requirements into one omnibus.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) aggregate the # encounters per physician-payMode-entrydate-patient (Note that the patient here refers to<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspall patients, not only the cohort members) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_num, t1.PayMode, count(t1.key_hsnc) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t2.entryDate, t2.key_doc_num, t1.PayMode),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*  b) have a distinct list of physician-period-patient (i.e., doc id - entrydate - patientid)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_numc, t1.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*VXJ_B3b. count the # of distinct patients for each physician with a specific entry period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_numc, count(key_hsnc) as N_Pt),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_numc)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VXJ_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.N_Pt, t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the following will overwirte the existing zip! be careful*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B2a.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B2a.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B3b.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B3b.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>%mend makeVXJ_B2b3&#59<br/>%makeVXJ_B2b3&#59<br/><br/>/*For # of visits by paymode, and # of patients by period-specific physicians, the data has been prepared for once, unzip the prepared data */<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B2a.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B2a.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B3b.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B3b.sas7bdat)<br/>)&#59<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=VXJ_B2a, target=VXJ_B4, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in VXJ_B has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in VXJ_B has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data VXJ_B5&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B4&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/>/*%freq(data=VXJ_B5, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*VXJ_B6. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>/*VXJ_B6a. For each period-specific physician, get paytype, visits, and patients from B5 and B3b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B5,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B6a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.payType,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(t1.NFFS, t1.FFS) as N_Visits,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_Pt as N_Patients<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=entryDate key_doc_num<br/>)&#59<br/>data VXJ_B6b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Visits=. then N_Visits=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients=. then N_Patients=0&#59<br/>run&#59<br/>/*VXJ_BJ6b. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>data VXJ_B6&#59<br/>&nbsp&nbsp&nbsp&nbsplength MSBAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspMSBAttrStr = strip(paytype) || \":\" || strip(N_Visits)  || \":\" || strip(N_Patients)&#59<br/>run&#59 <br/><br/><br/>/*VXJ_B7.  link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>/*VXJ_B7a. Get the docid for UCPF1 */<br/>data VXJ_B7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_A&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B7b. link VXJ_B7a and VXJ_B6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B7c. Append MSBAttrStr to UCPF1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/>/*VXJ_B8.  link VXJ_B8a and VXJ_B7 to indicate the MSB related attributes for UCPW1*/<br/>/*VXJ_B8a. Get the docid for UCPW1*/<br/>data VXJ_B8a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*VXJ_B8b. link VXJ_B8a and VXJ_B6 (with MSB related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_B8a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_B8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*VXJ_B8c. Append MSBAttrStr to UCPW1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPW1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_B)&#59<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"abbedb12-dd12-42c1-9af6-a38f0ebb9545","name":"VXJ_C DOC_Rx_Attrs","NodeDescription":"///t<br/>///s<br/>/*VXJ_C <br/>&nbsp&nbsp&nbsp&nbspRx related attributes of each period-related physician. <br/>&nbsp&nbsp&nbsp&nbsp1. # of Rx from runin throught follow up<br/>&nbsp&nbsp&nbsp&nbsp2. # of Statin out of all Rx<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*VXJ_C0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop_slim.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VXJ_C1. Get UCPF1 and UCPW1 from VXJ_B. These doctors are specific by patient and entrydate*/<br/>/*VXJ_C1a. From VXJ_C, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data VXJ_C1a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*VXJ_C1b. keep the distinct record of period specific doc ids*/<br/>%distinct(data=VXJ_C1a, target=VXJ_C1b, vars=%str(entryDate, key_doc_num))&#59<br/>/*VXJ_C1c. add the char id: key_doc_numc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc)<br/>)&#59<br/><br/><br/>/*VXJ_C2. Sum by prescriber, and date, count Rx of all medications*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*VXJ_C2a. Sum by prescriber, and date, count Rx of all medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C2b. Sum by prescriber, and date, count Rx of all medications from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C2c. combine C2a and C2b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C2c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C2a VXJ_C2b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C2C,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_AllMed) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C3. Sum by prescriber, and date, count Rx of statin medications*/<br/>/*VXJ_C3a0. As the claim files contains DINStr, not DIN, need an additional step to map  the statin dins to dinstrs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dinstr)<br/>)&#59<br/>/*VXJ_C3a. Sum by prescriber, and date, count Rx of statin medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3a,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*VXJ_C3b. Sum by prescriber, and date, count Rx of statin from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3b,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*combine C3a and C3b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data VXJ_C3c&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C3a VXJ_C3b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C3c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*VXJ_C4. Combine C2 and C3. The result data contains # of Rx of all medicine and # of Rx of statin by prescriber's id, and by dispensation date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C2,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C4,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=Rx_DDDDD key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_Statin=., 0, t2.N_Rx_Statin) as N_Rx_Statin)<br/>)&#59<br/><br/>/*VXJ_C5. Link C4 to  VXJ_C1, for each period(entrydate) specific doc, sum the # of Rx of all medications, and # of Rx of statin<br/>&nbsp&nbsp&nbsp&nbspfrom runin through followup.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C5,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, sum(t2.N_Rx_AllMed) as N_Rx_AllMed, sum(t2.N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/>/*VXJ_C6. Make a string to hold Rx related attributes, i.e., N_Rx_AllMed:N_Rx_Statin*/<br/>data VXJ_C6&#59<br/>&nbsp&nbsp&nbsp&nbsplength RxAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C5&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_AllMed=. then N_Rx_AllMed=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_Statin=. then N_Rx_Statin=0&#59<br/>&nbsp&nbsp&nbsp&nbspRxAttrStr = strip(N_Rx_AllMed) || \":\" || strip(N_Rx_Statin) &#59<br/>run&#59 <br/><br/>/*VXJ_C7.  link VXJ_C6 and VXJ_B to indicate the Rx related attributes for UCPF1*/<br/>/*VXJ_C7a. Get the docid of UCPF1 */<br/>data VXJ_C7a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/>/*VXJ_C7b. link VXJ_C7a and VXJ_C6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C7a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*VXJ_C7c. Append RxAttrStr to UCPF1*/<br/>Data VXJ_C7&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/>/*VXJ_C8.  link VXJ_C6 and VXJ_C7 to indicate the Rx related attributes for UCPW1*/<br/>/*VXJ_C8a. Get the docid for UCPW1*/<br/>data VXJ_C8a&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/>/*VXJ_C8b. link VXJ_C8a and VXJ_C6 (with Rx related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C8a,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXJ_C8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*VXJ_C8c. Append RxAttrStr to UCPW1*/<br/>Data VXJ_C&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_C.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_C.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%exportvars(data=VXJ_C)&#59<br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[{"idx":"9ec42206-3401-4fcc-bcbd-eb90ab98d712","name":"VXM_FS Adherence","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/><br/>/*VXM_FS, Adherence by PDC*/<br/>/*the cohort*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>/*get statin claims*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXE_F.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXE_F.sas7bdat)<br/>)&#59<br/><br/><br/><br/>%let MPR80 =.8&#59<br/>%let supplyDayCol=supplyDays&#59<br/><br/><br/>data VXM_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXE_F&#59<br/>&nbsp&nbsp&nbsp&nbspsupplyDays=Rx_Qty_Amt&#59<br/>&nbsp&nbsp&nbsp&nbspdrugclass='STATIN'&#59<br/>run&#59<br/><br/><br/>%getAdherence(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=VXM_FS1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=VXM_FS2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOptAdhCutOff =&MPR80, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLenInterval =%eval(365), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Intervals=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass =DrugClass, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowStart =EntryDate, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsupCol =&supplyDayCol, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAllowedGap=1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptakeEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalStartCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintervalEndCol =, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeepTMP=<br/>)&#59<br/><br/><br/><br/>/*link back to the cohort */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXJ_C,<br/>&nbsp&nbsp&nbsp&nbspt2=VXM_FS2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS3a,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.DaysOnMed, t2.Adherence)<br/>)&#59<br/>/*calculate the adjusted adherence by removing days in hopsital from both numerator and denominator*/<br/>data VXM_FS3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS3a&#59<br/>&nbsp&nbsp&nbsp&nbspPDC_Adjust = (daysonmed -HDays_AcuteCare_Post365) / (365-HDays_AcuteCare_Post365)&#59<br/>&nbsp&nbsp&nbsp&nbspAdherence_Adjust=0&#59<br/>&nbsp&nbsp&nbsp&nbspif PDC_Adjust >= .8 then Adherence_Adjust =1&#59<br/>run&#59<br/>%freq(data=VXM_FS3, table=Adherence_Adjust * Adherence)&#59<br/><br/><br/><br/>/*calculate the days on med without move forward (accumulate) the days supplies of over lapping dispensations<br/>&nbsp&nbsp&nbsp&nbspThe idea is to list out the start stop days of supplies<br/>&nbsp&nbsp&nbsp&nbspclean up the overlapping period as for PHRS coverage or hosp periods<br/>&nbsp&nbsp&nbsp&nbspalso to list out the start stop days of acute care in hospital<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp1) for days in hospital, treat them as supply gaps<br/>&nbsp&nbsp&nbsp&nbsp2) substract days in hospital from the denominator<br/>&nbsp&nbsp&nbsp&nbsp3) calculate the MPR<br/>*/<br/>%sort(data=VXM_FS1, sorter=key_hsn rx_ddddd)&#59<br/>data VXM_FS4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspwhere rx_ddddd between entrydate and entrydate + 365-1&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate  startDate stopDate&#59<br/>&nbsp&nbsp&nbsp&nbspstartDate = rx_ddddd&#59<br/>&nbsp&nbsp&nbsp&nbspstopDate = rx_ddddd + supplyDays-1&#59<br/>&nbsp&nbsp&nbsp&nbspformat startDate date9. stopDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspif stopDate > entryDate +365-1 then stopDate = entryDate +365-1&#59<br/>run&#59<br/>/*clean overlap*/<br/><br/>%cleanHNew(<br/>&nbsp&nbsp&nbsp&nbspdata=VXM_FS4, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS5, <br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=, <br/>&nbsp&nbsp&nbsp&nbspinst_num=, <br/>&nbsp&nbsp&nbsp&nbspkeepTMP=, <br/>&nbsp&nbsp&nbsp&nbspstartD=startDate, <br/>&nbsp&nbsp&nbsp&nbspendD=stopDate,<br/>&nbsp&nbsp&nbsp&nbspstudyID=key_hsn<br/>)&#59<br/>%nobs(data=VXM_FS4)&#59<br/>%nobs(data=VXM_FS5)&#59<br/>/*VXM_FS5 contains muliple rows with the same radm_date and rdschg_date. This is because<br/>&nbsp&nbsp&nbsp&nbspcleanHNew returns hospital records. Despite that the adm/dschge dates are aligned, the original records<br/>&nbsp&nbsp&nbsp&nbspare all kept, as each record has different diagnosis info.<br/>&nbsp&nbsp&nbsp&nbspHere, simple get the distinct records by patinet id and start/stop dates<br/>*/<br/>%distinct(data=VXM_FS5, target=VXM_FS6, vars=%str(Key_hsn, EntryDate, radm_date as startDate, rdschg_date as stopDate, 'M' as RecType ))&#59<br/><br/>/*double check again by the macro clean coverage*/<br/>data VXM_FS7&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS4&#59<br/>&nbsp&nbsp&nbsp&nbspeff_date = dhms(startDate, 0,0,0)&#59<br/>&nbsp&nbsp&nbsp&nbspexp_date=dhms(stopDate, 0,0,0)&#59<br/>&nbsp&nbsp&nbsp&nbspreport_start=eff_date&#59<br/>&nbsp&nbsp&nbsp&nbspreport_end=exp_date&#59<br/>&nbsp&nbsp&nbsp&nbspxtrc_date=dhms('01jan1900'd, 0,0,0)&#59<br/>run&#59<br/>%CleanCoverage(source=VXM_FS7, target=VXM_FS8, xtrc_date='01jan1900'd, debug=, keeptmp=)&#59<br/>data VXM_FS9&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS8&#59<br/>&nbsp&nbsp&nbsp&nbspstartDate = datepart(eff_date)&#59<br/>&nbsp&nbsp&nbsp&nbspstopDate = datepart(exp_date)&#59<br/>&nbsp&nbsp&nbsp&nbspformat startDate date9. stopDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn startdate stopdate RecType&#59<br/>&nbsp&nbsp&nbsp&nbspRecType='M'&#59<br/>run&#59<br/>/*compare VXM_FS6 and VXM_FS9*/<br/>%compAB(a=VXM_FS6, b=VXM_FS9, target=test, vars=key_hsn startDate stopDate)&#59<br/>/*exactly the same!*/<br/><br/>/*for now, VXM_FS6 or FS9 (same) contains the mutully exclusive supply periods.<br/>&nbsp&nbsp&nbsp&nbspVXM_FS6 contains entrDate while FS9 does not, so FS6 will be used in the following steps<br/>*/<br/>/*next, add the hospitalition periods during follow-up*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp.sas7bdat)<br/>)&#59<br/>/*get hospitalizations within the follow up period*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_hosp,<br/>&nbsp&nbsp&nbsp&nbspt2=VXJ_C,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS10,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsn, t1.adm_date, t1.dschg_date, t2.entrydate,  t1.T_LOS, t1.A_LOS, t1.ALC_LOS),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm = %str(t1.key_hsn =t2.key_hsn),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str( <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspds_IP='IP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t1.adm_date ne .  and t1.dschg_date ne . )<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dschg_date between t2.entryDate  and t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.adm_date < t2.entryDate and t1.dschg_date > t2.entryDate + 365 -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/><br/><br/>/*Determine the alternative care stay*/<br/>data VXM_FS11&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS10&#59 <br/>/*&nbsp&nbsp&nbsp&nbspif ALC_LOS ne '' and A_LOS = ''&#59 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif ALC_LOS = '' and A_LOS ne ''&#59 */<br/>&nbsp&nbsp&nbsp&nbsp/*checked, no such records, which is good (If there is ALC_LOS, the corresonding A_LOS is always specified. i.e., the two are quite consistent to each other)*/<br/>&nbsp&nbsp&nbsp&nbspif ALC_LOS ='' then ALC_LOS ='0'&#59<br/>&nbsp&nbsp&nbsp&nbspN_ALC = input(ALC_LOS, 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the End of Acute care is dschg - N_ALC*/<br/>&nbsp&nbsp&nbsp&nbspAcuteCareEnd = dschg_date - N_ALC&#59<br/>&nbsp&nbsp&nbsp&nbspformat AcuteCareEnd date9.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate adm_date acuteCareEnd &#59<br/>run&#59<br/>/*Cleanup the hospitalizations*/<br/>%cleanHNew(<br/>&nbsp&nbsp&nbsp&nbspdata=VXM_FS11, <br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS12, <br/>&nbsp&nbsp&nbsp&nbspMaxGap=1, <br/>&nbsp&nbsp&nbsp&nbspincldHN=0, <br/>&nbsp&nbsp&nbsp&nbspkeep=, <br/>&nbsp&nbsp&nbsp&nbspinst_num=, <br/>&nbsp&nbsp&nbsp&nbspkeepTMP=, <br/>&nbsp&nbsp&nbsp&nbspstartD=adm_date, <br/>&nbsp&nbsp&nbsp&nbspendD=acuteCareEnd,<br/>&nbsp&nbsp&nbsp&nbspstudyID=key_hsn<br/>)&#59<br/>%distinct(data=VXM_FS12, target=VXM_FS13, vars=%str(Key_hsn, entryDate, radm_date as startDate, rdschg_date as stopDate, 'H' as RecType ))&#59<br/><br/>/*merge the medication supply periods and the hosp periods*/<br/>data VXM_FS14&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS6 VXM_FS13&#59<br/>run&#59<br/>%sort(data=VXM_FS14, sorter=key_hsn startDate stopDate)&#59<br/><br/>/*The following is to take a simpler approach, enumerating the 365 days since (including) the entryDate, and <br/>&nbsp&nbsp&nbsp&nbspcount the days with statin supply but not staying in a Hosp for acute care<br/>*/<br/>/*the total days in Hosp*/<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('Maxdays', Date())&#59<br/>run&#59 <br/>%let MaxDays=&MaxDays&#59<br/>%put >>> &MaxDays&#59<br/>data VXM_FS15&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS14&#59<br/>&nbsp&nbsp&nbsp&nbsp/*set array dimensions as big as the dayvalues<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspe.g the day value of today '18Feb2020'd is the # of days between today and '01Jan1960'd<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthat value is great enough to cover all the days  in the study period<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe day value can also be used as an index for medication supply and hospitalization of a particular date <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp/*m is an array to indicate whether the corresponding date is with statin supply*/<br/>&nbsp&nbsp&nbsp&nbsparray m(&MaxDays)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*h is an array to indicate whether the corresponding date is within a hosp stay for acute care*/<br/>&nbsp&nbsp&nbsp&nbsparray h(&MaxDays)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspby key_hsn&#59<br/>&nbsp&nbsp&nbsp&nbspif first.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMdays=0&#59 HDays=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*init the m() and h() array, set values as 0*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = 1 to &MaxDays&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm(i) =0&#59 h(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain m h&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Only need to check the h() and m() elements corresponding to the dates within the follow up period*/<br/>&nbsp&nbsp&nbsp&nbspdo i = entryDate to entryDate + 365-1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the i (the dayvalue, or the date) is within a statin supply period, make m(i) =1*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif RecType = 'M' and startDate <= i <=stopDate then m(i)=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*however, if the i is within a hospital period, let h(i) =1, let m(i) =0*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if RecType = 'H' and startDate <= i <= stopDate then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspm(i)=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsph(i) = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend &#59<br/>&nbsp&nbsp&nbsp&nbsp/*finally, for the last record of the patient, summarize m(i) and h(i)*/<br/>&nbsp&nbsp&nbsp&nbspif last.key_hsn then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMdays = sum(of  m(*))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdo i = entryDate to entryDate + 365-1&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHdays = sum(Hdays, h(i))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn EntryDate Mdays Hdays &#59<br/>&nbsp&nbsp&nbsp&nbspif last.key_hsn&#59<br/>run&#59<br/><br/>/*calculate the MPR, which is: Mdays / (365-Hdays)*/<br/>data VXM_FS16&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS15&#59<br/>&nbsp&nbsp&nbsp&nbspMPR = Mdays/(365-Hdays)&#59<br/>&nbsp&nbsp&nbsp&nbspif MPR >= .8 then Adherence_nocumu = 1&#59<br/>&nbsp&nbsp&nbsp&nbspelse Adherence_nocumu=0&#59<br/>run&#59<br/>%freq(data=VXM_FS16, table=Adherence_nocumu)&#59<br/>/*Note that in FS16, there are more individuals than in the final cohort. FS16 contains all patients in the crude cohort, <br/>&nbsp&nbsp&nbsp&nbspbefore applying ALL exclusion criteria*/<br/><br/>/*attach Adherence_nocumu back to the cohort (VXM_FS3)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VXM_FS3,<br/>&nbsp&nbsp&nbsp&nbspt2=VXM_FS16,<br/>&nbsp&nbsp&nbsp&nbsptarget=VXM_FS,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.MPR, t2.Adherence_nocumu)<br/>)&#59<br/><br/>%freq(data=VXM_FS, table=Adherence_nocumu *Adherence_Adjust)&#59<br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VXM_FS.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VXM_FS.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>/*%exportvars(data=VXM_FS)&#59*/<br/><br/>s///<br/>t///","children":[{"idx":"c62fa100-b40a-410d-84e8-a6ae031e3cd2","name":"VZ_ Panels","NodeDescription":"///t<br/>///s<br/><br/>s///<br/>t///","children":[{"idx":"d6161fbd-a08e-440a-845e-9b437b2cfeac","name":"VZC eligible MSB encounters to GPs","NodeDescription":"///t<br/>///s<br/>/*VZC encounters (distinct visits per patient-doc-date to GPs (SPEC in: 'B', and eligible for num_srv, LOS, etc.)*/<br/><br/>/*VZC0. prepare data.*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/>/*VZC1. in master_msb_pop_slim, keep the eligible claims*/<br/>data VZC1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSPEC in: ('B')<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc Key_HSNC dos&#59<br/>run&#59<br/><br/>/*VZC2. From above, have distinct records*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=VZC1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZC,<br/>&nbsp&nbsp&nbsp&nbspvars=*<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZC.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZC.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZD, the patients are SK residents (These are neither statin cohort members, nor panel statin patients)<br/>&nbsp&nbsp&nbsp&nbspthe dos are visiting dates<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are care providers to that residents (These may Not be UCPs of a statin cohort member, nor UCPs of<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa panel patients)<br/>*/<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"8697ba99-4347-4d94-aa02-2b195500d17d","name":"VZE encounters to UCPs by statin users receiving statin during followup","NodeDescription":"///t<br/>///s<br/>/*VZE <br/>&nbsp&nbsp&nbsp&nbspthe statin user who visited the UCP of the cohort member during the follow up period.<br/>&nbsp&nbsp&nbsp&nbspYes, it is that complicated<br/>&nbsp&nbsp&nbsp&nbsp1) the patients in VZE must be a statin user, i.e., patient in VZC must be in VZD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThat will greatly reduce the # of records!<br/>&nbsp&nbsp&nbsp&nbsp2) the docs in VZE must be in VZA (i.e., the MSB claims are with the UCP of the cohort member)<br/>&nbsp&nbsp&nbsp&nbsp3) the patient in VZE must received statin during the entry specific follow up period (this is different from<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) in that in 1) patients are those ever received a statin&#59 in 3) patients must receive a statin during the follow up<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*VZE0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZD.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZD.sas7bdat)<br/>)&#59<br/><br/>/*VZE1. From VZD, get a list of distinct patient id. These are statin users (prevalent users, new users, all of them)*/<br/>%distinct(data=VZD, target=VZE1, vars=key_hsnc)&#59<br/><br/>/*VZE2. From VZC (encounters to GPs), keep records where the patient ids are in VZE1. These are MSB encounters to GPs<br/>&nbsp&nbsp&nbsp&nbspof statin users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZC,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE2,<br/>&nbsp&nbsp&nbsp&nbspvars=*, <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.key_hsnc in (select key_hsnc from VZE1))<br/>)&#59<br/><br/>/*VZE3, from VZE2, prepare distinct list of statin user-physician-entrydate<br/>&nbsp&nbsp&nbsp&nbspfor which the claim in VZE2 occured withing the follow up period specified by the entryDate.<br/>&nbsp&nbsp&nbsp&nbspNote: here the statin users are not cohort memeber. They are patients (who received statin at any time) and <br/>&nbsp&nbsp&nbsp&nbspvisited the doctor (who is a UCP of a cohort member) during the entrydate specified followup.<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE2,<br/>&nbsp&nbsp&nbsp&nbspt2=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t2.key_doc_numc, t2.entryDate, t1.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE3, <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_doc_numc), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t1.dos between t2.entryDate and t2.entryDate + &Followdays -1)<br/>)&#59<br/><br/>/*VZE4. From VZE3, keep records of which the patient received statin during followup.<br/>&nbsp&nbsp&nbsp&nbspNote: in VZE3, although patients were statin users, they may not received statin during followup. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn the following, those who did not receive statin medications during follow up are excluded.<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE3,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbsptarget=VZE, <br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=%str(key_hsnc), <br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.RX_DDDDD between t1.entryDate and t1.entryDate + &Followdays -1)<br/>)&#59<br/>/*the following generates the same data as the above. However, it took way longer*/<br/>/*%sqljoinv2(*/<br/>/*&nbsp&nbsp&nbsp&nbspt1=VZE3,*/<br/>/*&nbsp&nbsp&nbsp&nbspt2=VZD,*/<br/>/*&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),*/<br/>/*&nbsp&nbsp&nbsp&nbsptarget=VZE4a, */<br/>/*&nbsp&nbsp&nbsp&nbspdistinct=1,*/<br/>/*&nbsp&nbsp&nbsp&nbspjtype=inner,*/<br/>/*&nbsp&nbsp&nbsp&nbspjterm=%str(t1.key_hsnc = t2.key_hsnc and t2.RX_DDDDD between t1.entryDate and t1.entryDate + &Followdays -1)*/<br/>/*)&#59*/<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZE.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZE.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: in VZE, <br/>&nbsp&nbsp&nbsp&nbspthe patients are panel statin users (majority are not statin cohort members) who received statin during followup<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(the followup is defined for the pair of the statin cohort member and the member's UCP)<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>*/<br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540","name":"VZF excoude patients having hosp, preg, or not fully covered in followup","NodeDescription":"///t<br/>///s<br/>/*VZF <br/>&nbsp&nbsp&nbsp&nbspVZE, contains statin users who received statin during a specified period, and visited a UCP during that period.<br/>&nbsp&nbsp&nbsp&nbspNow, from VZE, exclude those:<br/>&nbsp&nbsp&nbsp&nbsp1. hospitalized during the specified follow up<br/>&nbsp&nbsp&nbsp&nbsp2. not fully covered by health insurance during follow up<br/>&nbsp&nbsp&nbsp&nbsp3. pregnant during follow up<br/>*/<br/><br/><br/>/*VZE0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZE.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZE.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_hosp_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_hosp_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_phrs_cov_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_phrs_cov_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZF1. From VZE, get a list of disticnt patient-entrydate*/<br/>%distinct(data=VZE, target=VZF1, vars=%str(key_hsnc, entryDate, monotonic() as n))&#59<br/><br/>/*VZF2. From VZE, get a list of disticnt patient-entrydate (this step was skipped)*/<br/>/*%distinct(data=VZE, target=VZF2, vars=%str(key_hsnc))&#59*/<br/><br/>/*VZE3. for patients in VZE5, exclude those ever hospitalized during the specified followup period*/<br/>/*VZE3a. From master_hosp_pop_slim, get in patient hospitalizations*/<br/>data VZF3a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere ds_ip = 'IP'&#59<br/>&nbsp&nbsp&nbsp&nbspkeep Key_HSNC adm_date dschg_date&#59<br/>run&#59 <br/>/*VZE3b. Link VZE3a to VZF1, <br/>&nbsp&nbsp&nbsp&nbspget records in VZF1 if there is hospitalization events within followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF3a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF3b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entrydate and t1.entrydate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.dschg_date between t1.entrydate and t1.entrydate +&followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(t2.adm_date < t1.entrydate and t2.dschg_date > t1.entrydate +&followdays -1)&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF3c. In VZF1, exclude those having hospital events (as in VZF3b)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF3,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF3b ))<br/>)&#59<br/><br/><br/>/*VZF4. Exlcude those pregant during followup*/<br/>%let pregCodes=%str('641', '642', '643', '644', '645', '646', '647', '648', '649', '650', '651', '652', '653', '654', <br/>'655', '656', '657', '658', '659', '660', '661', '662', '663', '664', '665', '666', '667', '668', '669', '670', '671', '672', <br/>'673', '674', '675', '676', 'V27', 'O10', 'O11', 'O12', 'O13', 'O14', 'O15', 'O16', 'O17', 'O18', 'O19', 'O21', 'O22', 'O23', <br/>'O24', 'O25', 'O26', 'O27', 'O28', 'O29', 'O30', 'O31', 'O32', 'O33', 'O34', 'O35', 'O36', 'O37', 'O38', 'O39', 'O40', <br/>'O41', 'O42', 'O43', 'O44', 'O45', 'O46', 'O47', 'O48', 'O49', 'O50', 'O51', 'O52', 'O53', 'O54', 'O55', 'O56', 'O57', <br/>'O58', 'O59', 'O60', 'O61', 'O62', 'O63', 'O64', 'O65', 'O66', 'O67', 'O68', 'O69', 'O70', 'O71', 'O72', 'O73', 'O74', 'O75', <br/>'O76', 'O77', 'O78', 'O79', 'O80', 'O81', 'O82', 'O83', 'O84', 'O85', 'O86', 'O87', 'O88', 'O89', 'O90', 'O91', 'O92', 'O93', <br/>'O94', 'O95', 'O98', 'O99', 'Z37')&#59<br/>/*VZF4a. get hospitalization records related to pregnant*/<br/>data VZF4a&#59<br/>&nbsp&nbsp&nbsp&nbspset master_hosp_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='hp'&#59<br/>&nbsp&nbsp&nbsp&nbsparray dxs $ dx_code_1 - dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbsparray cdxs $ conv_dx_code_1 - conv_dx_code_25&#59<br/>&nbsp&nbsp&nbsp&nbspformat type $5.&#59<br/>&nbsp&nbsp&nbsp&nbspformat code $10.&#59<br/>&nbsp&nbsp&nbsp&nbspdo i = 1 to 25&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif dxs(i) in: (&pregCodes) then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif cdxs(i) in: (&pregCodes)  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspleave&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsnc adm_date dschg_date src&#59<br/>run&#59<br/>/*VZF4b. get MSB records related to pregnant*/<br/>%print(data=master_msb_pop_slim)&#59<br/>data VZF4b&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspsrc='mb'&#59<br/>&nbsp&nbsp&nbsp&nbspadm_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspdschg_date=dos&#59<br/>&nbsp&nbsp&nbsp&nbspif diag in:(&pregCodes) then output&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsnc adm_date dschg_date src&#59<br/>run&#59<br/>/*VZF4c. merge pregnant records in hosp and in MSB*/<br/>data VZF4c&#59<br/>&nbsp&nbsp&nbsp&nbspset VZF4a VZF4b&#59<br/>run&#59<br/>/*VZF4d. for records in VZF3, find those having pregnant hosp/MSB events during followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF3,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF4c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF4d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.dschg_date between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.adm_date < t1.entryDate  and t2.dschg_date > t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF4e. In VZF3, exclude those having preg events (as in VZF4d)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF3,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF4,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF4d ))<br/>)&#59<br/><br/><br/>/*VZF5. From VZF4, exclude those not continuously covered within followup*/<br/>/*VZF5a. From the covereage file, calculate the coverage gaps*/<br/>data VZF5a1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_phrs_cov_pop&#59<br/>&nbsp&nbsp&nbsp&nbspreport_start=eff_date&#59<br/>&nbsp&nbsp&nbsp&nbspreport_end = rexp_date&#59<br/>&nbsp&nbsp&nbsp&nbsprename rexp_date=exp_date&#59<br/>/*&nbsp&nbsp&nbsp&nbspif eff_date ne '01oct2019'd&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp&cover_Xtrc_date&#59*/<br/>run&#59<br/>%distinct(data=master_phrs_cov_pop, target=VZF5a2, vars=key_hsn)&#59<br/>%getCoverGAPs(<br/>&nbsp&nbsp&nbsp&nbsprawfile=VZF5a1, <br/>&nbsp&nbsp&nbsp&nbspptFile=VZF5a2, <br/>&nbsp&nbsp&nbsp&nbsptheCovXtrc=, <br/>&nbsp&nbsp&nbsp&nbspkeyDateCol=,<br/>&nbsp&nbsp&nbsp&nbspstart='01jan2011'd, <br/>&nbsp&nbsp&nbsp&nbspend= '31dec2018'd, <br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5a, <br/>&nbsp&nbsp&nbsp&nbspcohortgroup=, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*VZF5b. From VZF5a, select records with gaps >0.*/<br/>data VZF5b&#59<br/>&nbsp&nbsp&nbsp&nbspset VZF5a&#59<br/>&nbsp&nbsp&nbsp&nbspwhere gaps > 0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn coverStart coverEnd&#59<br/>&nbsp&nbsp&nbsp&nbsprename coverStart=gapStart coverEnd=gapEnd&#59<br/>run&#59<br/>/*VZF5c. The coverage file does not have compressed key_hsn. Attach VZF5b to master_patientidmap_pop to get<br/>&nbsp&nbsp&nbsp&nbspthe compressed key_hsn*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF5b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5c,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*VZF5d. */<br/>/*VZF5d. for records in VZF4, find those having coverage gaps followup*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF4,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF5c,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5d,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapstart between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapend between t1.entryDate  and t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspor <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.gapstart < t1.entryDate  and t2.gapend > t1.entryDate + &followdays -1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>)&#59<br/>/*VZF5e. In VZF4, exclude those having preg events (as in VZF5d)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF5,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(n not in (select n from VZF5d ))<br/>)&#59<br/><br/>/*VZF6. <br/>&nbsp&nbsp&nbsp&nbspNOTE! Till now, the file VZF5 only contains patient id and entrydate. It should be linked to VZE<br/>&nbsp&nbsp&nbsp&nbspto have a list of distinct patientID-docId-entryDate.<br/>&nbsp&nbsp&nbsp&nbspNote: the linked doc ID from VZE are UCPs of the statin cohort members during follow up.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVZF shows that for each UCP in a specific follow up period, the panel statin users ever visited that UCP.<br/>&nbsp&nbsp&nbsp&nbspNote: <br/>&nbsp&nbsp&nbsp&nbspin VZF, the patients are panel statin users (majority are not statin cohort members)<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>&nbsp&nbsp&nbsp&nbspVZF has the same structure and columns as VZE. It just contains fewer records, as those hospitalized, pregnant, not<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfully covered during followup were excluded<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZE,<br/>&nbsp&nbsp&nbsp&nbspt2=VZF5,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZF,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZF.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZF.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/><br/>s///<br/>t///","children":[{"idx":"40ade4c6-7a17-4b15-9453-e375be83ec7e","name":"VZH CMEP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZH The UCPs of panel statin users from VZF*/<br/><br/><br/>/*VZH0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZH1. Prepare the CMEP claims<br/>&nbsp&nbsp&nbsp&nbsp(Why not using VZC? <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspVZC is to determine the distinct visit, i.e., samePatient-sameDoc-sameDate.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIt does not have the column FSC for determining CMEP claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIf the col FSC were kept in VZC, the samePatient-sameDoc-sameDate may appear for multiple times, which<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwould cause duplication in counting distinct visits<br/>&nbsp&nbsp&nbsp&nbsp)<br/>*/<br/>data VZH1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_msb_pop_slim&#59<br/>&nbsp&nbsp&nbsp&nbspwhere <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFSC in ('B003','B064','B052', 'B004')<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc Key_HSNC dos&#59<br/>run&#59<br/><br/><br/>/*VZH2. For patients in VZF (panel statin users, can be repeated for different entry periods), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount the distinct encounters with CMEPs(from VZH1) within the followup period<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZH1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZH,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZH.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZH.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZH:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member (the UCP's doc id is not in this table)<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are CMEPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These CMEPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","custparents":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540"},{"idx":"9e7d7da4-7a17-49d9-91f4-9474f3825fce"}]},{"idx":"fe8a05d2-5e47-4eb4-8bda-4f7402bf588c","name":"VZI USP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZI The USPs of panel statin users from VZF*/<br/><br/><br/>/*VZI0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZD.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZI1. For patients in VZF (panel statin users, can be repeated for different entry periods), <br/>&nbsp&nbsp&nbsp&nbspcount the Rx of statins with prescribers (from VZD)&nbsp&nbsp&nbsp&nbspwithin the followup period<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZI1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc, count(t2.RX_DDDDD) as N_Rx),<br/>&nbsp&nbsp&nbsp&nbspgroupby =%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate, N_Rx),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.RX_DDDDD between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/><br/>/*VZI2. from above, determine the max N_Rx per key_hsn-entryDate*/<br/>data VZI2&#59<br/>&nbsp&nbsp&nbsp&nbspset VZI1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsnc entrydate N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspif first.entrydate then T_Rx = N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspelse T_Rx+ N_Rx&#59<br/>&nbsp&nbsp&nbsp&nbspif last.entrydate&#59<br/>run&#59<br/><br/>/*VZI3, link VZI2 back to VZI1, keep records of patient-entryDate for those with the max N_Rx*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZI1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZI2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZI,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.T_Rx),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entryDate N_Rx<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZI.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZI.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZI:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member (the UCP's doc id is not in this table)<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are USPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These USPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","children":[{"idx":"3aed96b3-1017-4106-bd17-6d5f1340e3da","name":"VZJ NFFS not improve adherence","NodeDescription":"///t<br/>///s<br/><br/>/*NFFS does not work in terms of adherence*/<br/><br/>/*VXN_FS0-1. Prepare data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/>data _Test0&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/><br/>&nbsp&nbsp&nbsp&nbspSex=1&#59<br/>&nbsp&nbsp&nbsp&nbspif sex_desc='M' then sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspqaippeN = qaippe&#59<br/>&nbsp&nbsp&nbsp&nbspif qaippe = . or qaippe = 9 then qaippeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspresitypeN=1&#59<br/>&nbsp&nbsp&nbsp&nbspif resitype='URBAN' then resitypeN=0&#59<br/>&nbsp&nbsp&nbsp&nbspif charlson_index=. then charlson_index=0&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100=docNPatients_FS/100&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100 =docN_Visits_FS/100&#59<br/>run&#59<br/>/*Define psVars*/<br/>%let psVars = &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRESITYPEN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNDINS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNHOSP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHNIGHTS_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDAYS_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_SP_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_ER_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_PRE365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAY_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTHIRDPARTYPAYPCT_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_PRE365<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_NPD_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_SA_POST365*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCAMH_PSY_POST365*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ANXIETY_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOOD_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANXP*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OMH*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_OLD*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_2HOSP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPJR<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ANXIETY_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DIABETES*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HTN*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOOD_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NS_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANX*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MOODANXP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OMH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_ASTHMA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_COPD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HF*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IHD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUBABUSE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AMI*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CD_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_HP_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_WF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_1POP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_NONRA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_CO_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_DA_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_OSTEO_2DRUG*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AK_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RF_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_VTE_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_STROKE_2HOSP*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_IB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_RA*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_LV_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPAD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_UB_PS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_AD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SUICIDE_OLD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_SCHIZO_EVER*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_PD*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_MS*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_POST365_EPJR*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPRE365_MEDCLASS_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_PRSCR_STATINAHTNOH*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFOLLOWUP_MEDCLASS_STATINAHTNOH&nbsp&nbsp&nbsp&nbsp*/<br/><br/>/*practice/physician related factors*/<br/>&nbsp&nbsp&nbsp&nbspdocSexN_FS<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS<br/>&nbsp&nbsp&nbsp&nbspdocPayTypeN_FS<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS100<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS100<br/>&nbsp&nbsp&nbsp&nbspdocStatinRxPCT_FS<br/>&#59<br/><br/><br/>data _test1&#59<br/>&nbsp&nbsp&nbsp&nbspset _test0&#59<br/>&nbsp&nbsp&nbsp&nbsplength type $4.&#59<br/>&nbsp&nbsp&nbsp&nbspdocid=scan(UCPF1, 1, \":\")&#59<br/>keep docid  docPayType_FS entrydate ucpf1&#59<br/>run&#59<br/><br/>%sort(data=_test1, sorter=docid entrydate docPayType_FS)&#59<br/>data _test2&#59<br/>&nbsp&nbsp&nbsp&nbspset _test1&#59<br/>&nbsp&nbsp&nbsp&nbspby docid entrydate docPayType_FS&#59<br/>&nbsp&nbsp&nbsp&nbsplength pattern $20.&#59<br/>&nbsp&nbsp&nbsp&nbspretain pattern t&#59<br/>&nbsp&nbsp&nbsp&nbspif first.docid then do&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt = substr(docPayType_FS, 1,1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppattern=t&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif substr(docPayType_FS,1,1) ne t then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt=substr(docPayType_FS, 1,1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppattern = strip(pattern) || t&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspif last.docid&#59<br/>&nbsp&nbsp&nbsp&nbspif length(pattern) > 1&#59<br/>run&#59<br/><br/>/*link these docs back to the cohort, keep cohort member whose doc showing diff paytype*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_test0,<br/>&nbsp&nbsp&nbsp&nbspt2=_test2,<br/>&nbsp&nbsp&nbsp&nbsptarget=_test3, <br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*,  t2.docid),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(scan(t1.UCPF1, 1, \":\")=t2.docid)<br/>)&#59<br/><br/><br/>proc logistic data=_test3 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass  docid docPayType_FS(ref='FFS')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspstrata docid&#59<br/>&nbsp&nbsp&nbsp&nbspmodel adherence_adjust (ref='0') =CompFS docPayType_FS  CompFS * docPayType_FS&#59<br/>run&#59quit&#59<br/>s///<br/>t///","custparents":[{"idx":"fe8a05d2-5e47-4eb4-8bda-4f7402bf588c"}]}],"custparents":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540"},{"idx":"40ade4c6-7a17-4b15-9453-e375be83ec7e"}]},{"idx":"5e02d0c9-f08f-49ba-8642-ee618b5a5b74","name":"Q cov pop file","NodeDescription":"///t<br/>///s<br/>/*The cov_pop file is weird, having rexp_date, but not exp_date*/<br/>s///<br/>t///","custparents":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540"}]},{"idx":"9e7d7da4-7a17-49d9-91f4-9474f3825fce","name":"VZG UCP of panel patients","NodeDescription":"///t<br/>///s<br/>/*VZG The UCPs of panel statin users from VZF*/<br/><br/><br/>/*VZG0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZC.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/><br/>/*VZG1. For patients in VZF (panel statin users, can be repeated for different entry periods), count the distinct encounters with GPs (from VZC)<br/>&nbsp&nbsp&nbsp&nbspwithin the followup period*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZC,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZG1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc, count(t2.dos) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbspgroupby =%str(t1.key_hsnc, t1.entrydate, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(t1.key_hsnc, t1.entrydate, N_Visits),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc,<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(t2.dos between t1.entrydate and t1.entryDate + &followdays-1)<br/>)&#59<br/><br/>/*VZG2. from above, determine the max N_Visits per key_hsn-entryDate*/<br/>data VZG2&#59<br/>&nbsp&nbsp&nbsp&nbspset VZG1&#59<br/>&nbsp&nbsp&nbsp&nbspby key_hsnc entrydate N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspif first.entrydate then T_visits = N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspelse T_visits+ N_visits&#59<br/>&nbsp&nbsp&nbsp&nbspif last.entrydate&#59<br/>run&#59<br/><br/>/*VZG3, link VZG2 back to VZG1, keep records of patient-entryDate for those with the max N_Visits*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZG1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZG2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZG,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.T_visits),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entryDate N_visits<br/>)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZG.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZG.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZG:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the panel statin patient during the follow up period.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNOTE AGAIN!!! These UCPs may NOT be the same as the UCP of the satin cohort member (As in VZA VZE VZF)<br/>&nbsp&nbsp&nbsp&nbspthe entrydate is the entrydate of a statin cohort member<br/>*/<br/>%beep&#59<br/>s///<br/>t///","custparents":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540"}]},{"idx":"8bf8bced-64ef-4b1f-9f52-960cfbd66949","name":"VZJ indicate for each panel patient for same UCP USP CMEP COMP","NodeDescription":"///t<br/>///s<br/>/*VZJ For patients from VZF (panel statin users), check whether the UCP', CMEP', USP', and comprehensive COC <br/>&nbsp&nbsp&nbsp&nbspof the panel statin user was the same UCP of the cohort member &nbsp&nbsp&nbsp&nbsp<br/>*/<br/><br/>/*VZJ0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZF.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZF.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZG.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZH.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZH.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZI.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZI.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZJ1. For patients in VZF (panel statin users), check whether that patient's UCP' (doc id from VZG) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZF)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZF,<br/>&nbsp&nbsp&nbsp&nbspt2=VZG,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsUCP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>%beep&#59<br/>%nobs(data=VZJ1)&#59<br/>/*same # of records in VZJ1 as in VZF*/<br/><br/>/*VZJ2. For patients in VZJ1 (panel statin users), check whether that patient's CMEP' (doc id from VZH) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZJ1)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZH,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ2,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsCMEP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>%beep&#59<br/>/*same # of records in VZJ2 as in VZJ1*/<br/><br/>/*VZJ3. For patients in VZJ2 (panel statin users), check whether that patient's USP' (doc id from VZI) during <br/>&nbsp&nbsp&nbsp&nbspthe followup (defined by entrydate) is the same as the UCP of the cohort member (doc id from VZJ2)*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ2,<br/>&nbsp&nbsp&nbsp&nbspt2=VZI,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZJ3,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.key_doc_numc = '', 0, 1) as AsUSP),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsnc entrydate key_doc_numc<br/>)&#59<br/>/*same # of records in VZJ3 as in VZJ2*/<br/><br/>/*VZJ4. For patients in VZJ3 (panel statin users), check whether the comprehensive COC of the panel statin user<br/>&nbsp&nbsp&nbsp&nbspwas provided by the UCP of the cohort member (doc id in VZJ3)*/<br/>data VZJ&#59<br/>&nbsp&nbsp&nbsp&nbspset VZJ3&#59<br/>&nbsp&nbsp&nbsp&nbspif  AsUCP=1 and AsCMEP =1 and AsUSP=1 then AsComp =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse AsComp=0&#59<br/>run&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZJ.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZJ.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZJ:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are the panel statin users of a UCP of the statin cohort member <br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are UCP of the statin cohort member (the patient id of the statin cohort member is not in this table)<br/>&nbsp&nbsp&nbsp&nbspThe AsUCP indicates whether the panel statin user's UCP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsCMEP indicates whether the panel statin user's CMEP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsUSP indicates whether the panel statin user's USP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe AsComp indicates whether the panel statin user's comprehensive care provider<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., the same doc as UCP', CMEP', and USP') is the same as the UCP of the statin cohort member<br/>*/<br/>%beep&#59<br/> <br/>s///<br/>t///","children":[{"idx":"a13683bc-f423-40ec-8e17-8623f55482b8","name":"VZK Get Proportion as same UCP USP CMEP COMP","NodeDescription":"///t<br/>///s<br/>/*VZK For patients from VZJ (panel statin users), <br/>&nbsp&nbsp&nbsp&nbspfor each UCP of the cohort member (i.e., the doc id from VZK), determine the proportion of panel statin users<br/>&nbsp&nbsp&nbsp&nbspfor which the very doctor also act as UCP', CMEP', USP', and comprehensive provider of the panel statin user.<br/>&nbsp&nbsp&nbsp&nbspNote: a doc may repeatedly be the UCP of different cohort members. Each time, there will be a panel. Each panel<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsphas different panel statin users. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAverage number of panel statin users will be determined for each UCP appeared in the cohort, taking<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe total count of panel statin users of all panels of the same UCP, divided by the # of times that the UCP appeared<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfor different cohort members<br/>*/<br/><br/>/*VZK0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZJ.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZJ.sas7bdat)<br/>)&#59<br/><br/>/*VZK1. for each distinct UCP of cohort member, sum the total counts of panel statin users (statin users can repeat<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspas for different follow up period), the counts panel statinusers for whom the very doctor act as UCP' USP' CMEP'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand comprehensive continuity of care provider. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZJ,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsnc) as totalPanelStatinUserCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsUCP) as totalAsUCPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsCMEP) as totalAsCMEPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsUSP) as totalAsUSPCnt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(AsCOMP) as totalAsCOMPCnt<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby= key_doc_numc<br/>)&#59<br/><br/>/*VZK2. for each distinct UCP of cohort member, count the freq that the UCP appears in the statin cohort*/<br/>%distinct(data=VZJ, vars=%str(key_doc_numc, entryDate), target=VZK2a)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZK2a,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(key_doc_numc, count(key_doc_numc) as docFreq),<br/>&nbsp&nbsp&nbsp&nbspgroupby=key_doc_numc<br/>)&#59<br/><br/>/*VZK3. Merg VZK1 and 2. */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZk1,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK2,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.*, t2.docFreq<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/><br/>/*VZK4. Calculate the average panel statin users, PCT as UCP', CMEP', USP', and comprehensive continuity of care<br/>&nbsp&nbsp&nbsp&nbspprovider*/<br/>data VZK4&#59<br/>&nbsp&nbsp&nbsp&nbspset VZK3&#59<br/>&nbsp&nbsp&nbsp&nbspN_StatinUsers = totalPanelStatinUserCnt/docFreq&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsUCP = totalAsUCPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsCMEP = totalAsCMEPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsUSP = totalAsUSPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AsCOMP = totalAsCOMPCnt / totalPanelStatinUserCnt&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_doc_numc N_StatinUsers PCT_: docFreq&#59<br/>run&#59<br/><br/>/*VZK5. Link to VZA, to get the original doc id*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspt2=VZK4,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZK,<br/>&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>)&#59<br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZK.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZK.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>/*Note: <br/>&nbsp&nbsp&nbsp&nbspIn VZK:<br/>&nbsp&nbsp&nbsp&nbspthe patient ids are statin cohort members<br/>&nbsp&nbsp&nbsp&nbspthe doc ids in this table are UCP of the statin cohort member (the patient id of the statin cohort member is not in this table)<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsUCP indicates the percentage that the panel statin user's UCP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsCMEP indicates the percentage that the panel statin user's CMEP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsUSP indicates the percentage that the panel statin user's USP' is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspThe PCT_AsComp indicates the percentage that the panel statin user's comprehensive care provider is the same as the UCP of the statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe DocFreq is the number of times the UCP appears in the statin cohort<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(i.e., the same doc as UCP', CMEP', and USP') is the same as the UCP of the statin cohort member<br/>*/<br/><br/><br/>s///<br/>t///","children":[{"idx":"b70928fd-56bc-4ab9-a6b2-df9e8ee1168a","name":"VZL Stats on  UCP Panels, and report 7A (Obj1B)","NodeDescription":"///t<br/>///s<br/>/*VZL. Stats of UCP's panel*/<br/>data _null_&#59run&#59<br/><br/><br/>/*VZL0. Prepare study data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VZK.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VZK.sas7bdat)<br/>)&#59<br/>%print(data=VZK)&#59<br/><br/><br/>/*VZL1. Get data for distinct docs*/<br/>/*%distinct(data=VZK, target=VZL1a, vars=%str(key_doc_num, docFreq, */<br/>/*&nbsp&nbsp&nbsp&nbspN_StatinUsers, pct_asUCP,pct_asCMEP, pct_asUSP, pct_asCOMP))&#59*/<br/>/*data test&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset VZL1a&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspif N_StatinUsers=. or N_StatinUsers < 1&#59*/<br/>/*run&#59*/<br/>%distinct(data=VZK, target=VZL1a, vars=%str(key_doc_num, docFreq, N_StatinUsers, <br/>&nbsp&nbsp&nbsp&nbsppct_asUCP, pct_asCMEP, pct_asUSP, pct_asCOMP)<br/>)&#59<br/><br/>/*VZL2. histograms*/<br/>ods graphics on&#59<br/>proc univariate data=VZL1a &#59<br/>/*&nbsp&nbsp&nbsp&nbsphistogram N_StatinUsers pct_asUCP  pct_asUSP pct_asCMEP pct_asCOMP / normal outhistogram=VZL1b1&#59*/<br/>&nbsp&nbsp&nbsp&nbsphistogram N_StatinUsers  / normal outhistogram=VZL1b1 endpoints= (1 to 1000 by 50)    &#59<br/>run&#59quit&#59<br/>proc univariate data=VZL1a &#59<br/>&nbsp&nbsp&nbsp&nbsphistogram pct_asUCP  / normal outhistogram=VZL1b2 endpoints= (0 to 1 by .05)    &#59<br/>run&#59quit&#59<br/>proc univariate data=VZL1a &#59<br/>&nbsp&nbsp&nbsp&nbsphistogram pct_asUSP  / normal outhistogram=VZL1b3 endpoints= (0 to 1 by .05)     &#59<br/>run&#59quit&#59<br/>proc univariate data=VZL1a &#59<br/>&nbsp&nbsp&nbsp&nbsphistogram pct_asCMEP  / normal outhistogram=VZL1b4 endpoints=(0 to 1 by .025)   &#59<br/>run&#59quit&#59<br/>proc univariate data=VZL1a &#59<br/>&nbsp&nbsp&nbsp&nbsphistogram pct_asCOMP  / normal outhistogram=VZL1b5 endpoints= (0 to 1 by .025)   &#59<br/>run&#59quit&#59<br/>ods graphics off&#59<br/><br/>data VZL1&#59<br/>&nbsp&nbsp&nbsp&nbspset VZL1b1 - VZL1b5&#59<br/>run&#59<br/><br/>/*need to do the same trick to merge small cell groups (as for report 5A). This time, the small cells appear in the trailing part of the histogram<br/>&nbsp&nbsp&nbsp&nbspso we'll sort the data descendingly <br/>*/<br/><br/>%sort(data = VZL1, sorter=%str(_VAR_  descending _MINPT_))&#59<br/>Data VZL2&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset VZL1&#59<br/>&nbsp&nbsp&nbsp&nbspby _VAR_&#59<br/>&nbsp&nbsp&nbsp&nbspif first._VAR_ then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients=0&#59 <br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var _MINPT_ = minpoint&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients <6 or _count_ < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients + _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/><br/>/*It is quite tricky. Those small cells are accumulated until the sum is greater than 5.<br/>Therefore, it won't work out simply delete those with N_Patients < 6. <br/>Hypothically:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal    N_Patients (accumulated)<br/>group1: 1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1<br/>group2: 5&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp6<br/>group3: 4&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp10<br/><br/>If only to exclude N_Patient <6,  group1 will be excluded, but group2 will be kept. This is wrong, as the N_Patients in group 2<br/>&nbsp&nbsp&nbsp&nbspare counted again in group3<br/><br/>To solve it <br/>*/<br/>/*1. resort the data again, this time, by var, and by merge status ascendingly, AND! N_Patients descendingly*/<br/>%sort(data = VZL2, sorter=var merged descending N_Patients )&#59<br/>/*2. delete rows if a merged value of 1 is reached in the previous row*/<br/>data VZL3&#59<br/>&nbsp&nbsp&nbsp&nbspset VZL2&#59<br/>&nbsp&nbsp&nbsp&nbsplagMerged=lag(Merged)&#59<br/>&nbsp&nbsp&nbsp&nbspby var merged descending N_Patients &#59<br/>&nbsp&nbsp&nbsp&nbspif first.var then lagMerged =0&#59<br/>&nbsp&nbsp&nbsp&nbspif lagMerged =1 then delete&#59<br/>&nbsp&nbsp&nbsp&nbspkeep var minpoint N_Patients&#59<br/>run&#59<br/><br/>data localT.VZL_RT7&#59<br/>&nbsp&nbsp&nbsp&nbspset VZL3&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>%sort(data=localT.VZL_RT7, sorter= var minpoint)<br/><br/>proc export data= localT.VZL_RT7<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T7.DispGPPanel\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"a13683bc-f423-40ec-8e17-8623f55482b8"}]}],"custparents":[{"idx":"8bf8bced-64ef-4b1f-9f52-960cfbd66949"}]}],"custparents":[{"idx":"0a75b7e6-11eb-4dc9-9f90-3ac4ba356540"},{"idx":"fe8a05d2-5e47-4eb4-8bda-4f7402bf588c"},{"idx":"40ade4c6-7a17-4b15-9453-e375be83ec7e"},{"idx":"9e7d7da4-7a17-49d9-91f4-9474f3825fce"}]}],"custparents":[{"idx":"8697ba99-4347-4d94-aa02-2b195500d17d"}]}],"custparents":[{"idx":"d6161fbd-a08e-440a-845e-9b437b2cfeac"},{"idx":"d3c10b8f-58d5-4be6-8256-12f8a1f79d65"},{"idx":"bb79bd8c-081d-4be7-a83d-5e3c9c2be7fa"}]}],"custparents":[{"idx":"c62fa100-b40a-410d-84e8-a6ae031e3cd2"}]},{"idx":"bb79bd8c-081d-4be7-a83d-5e3c9c2be7fa","name":"VZD statin user claims","NodeDescription":"///t<br/>///s<br/>/*VZD<br/>&nbsp&nbsp&nbsp&nbspfrom MSB encounters from VZC, keep those of patients ever receiving statin.<br/>&nbsp&nbsp&nbsp&nbspNote:<br/>&nbsp&nbsp&nbsp&nbspthe patients in VZD can be prevalent users.<br/><br/>/*VZD0. Preparing data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop_slim.sas7bdat)<br/>)&#59<br/><br/><br/>/*VZD1. For statin medications, map the compressed din*/<br/>/*%print(data=master_DINmap_pop)&#59*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.din, t2.dinstr),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=din<br/>)&#59<br/>/*all statin dins in locald.statindins are mapped*/<br/><br/>%print(data=master_dp_benefit_pop_slim)&#59<br/><br/>/*VZD2 from the master files, select statin claims into distinct claims by patient, doc, din, and date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=VZD1,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZD2b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr<br/>)&#59<br/>data vzd2c&#59<br/>&nbsp&nbsp&nbsp&nbspset vzd2a vzd2b&#59<br/>run&#59<br/>%distinct(data = VZD2c, target=VZD, vars=*)&#59<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localtargetPath, <br/>&nbsp&nbsp&nbsp&nbspzipFile=VZD.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=VZD.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>%beep&#59<br/>/*%print(data=VZD)&#59*/<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZD, the patients are statin users (These are neither statin cohort members, nor panel statin patients)<br/>&nbsp&nbsp&nbsp&nbspdinstrs are DINs of statin medications <br/>&nbsp&nbsp&nbsp&nbspthe RXDDDDD are dates receiving a statin medication<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are prescribers of the statin medication<br/>*/<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"c62fa100-b40a-410d-84e8-a6ae031e3cd2"}]},{"idx":"d3c10b8f-58d5-4be6-8256-12f8a1f79d65","name":"VZA Period specific UCPs","NodeDescription":"///t<br/>///s<br/>/*<br/>VZA: get period specific pairs of patient-physician, and entrydate<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/>/*VZA1, from VXM_FS, get the patient id, doc id, and the entrydate*/<br/>data VZA1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entrydate UCPF1 key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1,1,\":\")&#59<br/>run&#59<br/><br/>/*VZA2, add the compressed patient id*/<br/>%print(data=master_docidmap_pop)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZA1,<br/>&nbsp&nbsp&nbsp&nbspt2=master_patientidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=VZA2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_hsnC),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_hsn<br/>)&#59<br/>/*all patients are found in the map_pop file*/<br/><br/>/*VZA3, add the compressed doc id*/<br/>%print(data=master_patientidmap_pop)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=VZA2,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=localt.VZA,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numC),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>/*%print(data=localt.VZA)&#59*/<br/>/*all docs are found in the map_pop file*/<br/>/*<br/>&nbsp&nbsp&nbsp&nbspNote: in VZA, the patients are statin cohort members<br/>&nbsp&nbsp&nbsp&nbspthe entrydates are entrydate of a statin cohort member<br/>&nbsp&nbsp&nbsp&nbspthe doc ids are UCPs of the statin cohort member during the followup defined by the entrydate<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"c62fa100-b40a-410d-84e8-a6ae031e3cd2"}]}],"custparents":[{"idx":"9ec42206-3401-4fcc-bcbd-eb90ab98d712"}]},{"idx":"54d7bbad-787a-499c-92b5-1bc4c6ba4a78","name":"Q_VXM","NodeDescription":"///t<br/>///s<br/>/*The days in hospital were removed in calculating adjusted PDC and adherence<br/><br/>Is it over estimated by counting the amount? Nope, slightly higher than 50%<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"9ec42206-3401-4fcc-bcbd-eb90ab98d712"}]}],"custparents":[{"idx":"abbedb12-dd12-42c1-9af6-a38f0ebb9545"}]},{"idx":"cd701887-b2c4-45ee-99ab-2064138a738c","name":"VXK_FS UCPIndexF predictors Poisson &amp; report","NodeDescription":"///t<br/>///s<br/>/*localt.VXK_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_C.sas7bdat)<br/>)&#59<br/>data VXK_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/>/*Univariate models betwen VXK_FS1 and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/><br/>/*create an empty set to hold results*/<br/>data localt.VXK_FS&#59 length Level1 $50. parameter $50.&#59  delete&#59run&#59<br/>%macro UniPoission(data=, n_events=, n_total=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar n_events n_total classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=negbin&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoffset = log(&n_total/100)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=negbin type3 offset= offset &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp/*get lower waldCI of dispersion*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif parameter = 'Dispersion'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheSign=-1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*round the WaldCL, it is meaning less if it is close to 0*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLowerWaldCL=round(LowerWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspUpperWaldCL=round(UpperWaldCL, '0.0001')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif LowerWaldCL * UpperWaldCL > 0 then theSign=1&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('DispersionWaldCLSign', theSign)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> DispersionWaldCLSign = &DispersionWaldCLSign&#59<br/>&nbsp&nbsp&nbsp&nbsp/*if dispersion 95%CI contains 0, it must be that LowerWaldCL and  UpperLowerWaldCL are of the opposite sign, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi.e., their production is of a negative Sign. In that case, go back to poission regression*/<br/>&nbsp&nbsp&nbsp&nbsp%if %eval(&DispersionWaldCLSign = -1) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let model = poisson&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc genmod data = UniPoission_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &n_events = &theVar /dist=poisson type3 scale = pearson  offset= offset&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniPoission_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniPoission_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength parameter $50.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniPoission_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniPoission_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniPoission_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniPoission&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=sex_Desc, classref=%str('M'), target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=age, classref=, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=qaippe, classref=%str('1'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=resiType, classref=%str('URBAN'),  target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=COMPFS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NDINS_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NHosp_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HNights_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=HDays_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_GP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_SP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=NVisits_ER_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPay_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ThirdPartyPayPCT_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Pre365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=BENZO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=PSYCHO_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTIDEP_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=ANTICHO_Post365, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Pre365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_NPD_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_SA_Post365, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CAMH_PSY_Post365, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Charlson_Index, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NS_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MOODANXP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CD_PS, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_NONRA, target=localt.VXK_FS)&#59<br/><br/><br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Pre365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ANXIETY_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DIABETES, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HTN, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOOD_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NS_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANX, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MOODANXP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OMH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_ASTHMA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_COPD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HF, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IHD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AMI, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CD_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_HP_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_WF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_1POP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_NONRA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_CO_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_DA_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AK_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RF_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_VTE_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_STROKE_2HOSP, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_IB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_RA, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_LV_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPAD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_UB_PS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_AD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SUICIDE_OLD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_SCHIZO_EVER, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_PD, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_MS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=CC_Post365_EPJR, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_Prscr_statinAHTNOH, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=Followup_MedClass_statinAHTNOH, target=localt.VXK_FS)&#59<br/>/*docrelated*/<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docSexN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docAge_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docServiceYr_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docEdCountry_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docPayTypeN_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docN_Visits_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docNPatients_FS, target=localt.VXK_FS)&#59<br/>%UniPoission(data=VXK_FS1, N_events=NMax_VisitsPerDocF, N_Total=T_visitsF,  theVar=docStatinRxPCT_FS, target=localt.VXK_FS)&#59<br/><br/>%exportvars(data=localt.VXK_FS)&#59<br/>/*proc export data=localt.VXK_FS*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivPoisson\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>%beep&#59<br/><br/>s///<br/>t///","custparents":[{"idx":"abbedb12-dd12-42c1-9af6-a38f0ebb9545"}]},{"idx":"317e762f-fe83-40c1-a143-e6e62b6126c5","name":"VXL_FS UCPIndexF predictors -Logistic &amp; Report","NodeDescription":"///t<br/>///s<br/>/*localt.VXL_FS. UPC Index predictors*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_C.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXL_FS1.sas7bdat)<br/>)&#59<br/><br/>/*Univariate models betwen VXJ_C and a factor<br/>&nbsp&nbsp&nbsp&nbspa more complete macro for poission/netbin model can be found in VHF of the ultrasound program<br/>&nbsp&nbsp&nbsp&nbspthat one can handle mean of estimations. <br/>*/<br/>/*Add doc related covariates*/<br/><br/>data VXL_FS1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXJ_C&#59<br/>/*add doc related factors*/<br/>&nbsp&nbsp&nbsp&nbsp/*release the practice (doc) related covariates. Note, it is named _FS,but is indeed measured from runin through follow up (2 years)*/<br/>&nbsp&nbsp&nbsp&nbspdocSex_FS = scan(UCPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex_FS='M' then docSexN_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docSexN_FS=1&#59<br/>&nbsp&nbsp&nbsp&nbspdocBirthYr_FS= scan(UCPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspdocAge_FS=int(yrdif(mdy(6,30,docbirthyr_FS), entryDate, \"age\"))&#59<br/>&nbsp&nbsp&nbsp&nbspdocGradYr_FS= input(scan(UCPF1, 6, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocServiceYr_FS= year(entryDate) - docGradYr_FS&#59<br/>&nbsp&nbsp&nbsp&nbspdocEdCountry_FS = input(scan(UCPF1, 8, \":\"), 8.)&#59 /*0 for foreign*/<br/>&nbsp&nbsp&nbsp&nbspdocPayType_FS = scan(UCPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='NFFS' then docPayTypeN_FS =1&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif strip(docPayType_FS )='FFS' then docPayTypeN_FS =0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse docPayTypeN_FS =2&#59/*unknown*/<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdocN_Visits_FS = input(scan(UCPF1, 10, \":\"), 8.)&#59 /*N_Visits*/<br/>&nbsp&nbsp&nbsp&nbspdocNPatients_FS = input(scan(UCPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNRx_FS=  input(scan(UCPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspdocNStatinRx_FS=  input(scan(UCPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif docNStatinRx_FS=. then docNStatinRx_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif docNRx_FS=. or docNRx_FS=0 or docNStatinRx_FS=0 then docStatinRxPCT_FS=0&#59<br/>&nbsp&nbsp&nbsp&nbspelse docStatinRxPCT_FS = round(docNStatinRx_FS/docNRx_FS*100, '0.01')&#59<br/>Run&#59<br/><br/><br/>/*create an empty set to hold results*/<br/>data localt.VXL_FS&#59 length Level1 $50. parameter $50. outcomeVar $50. CutOffVar $50.&#59  delete&#59run&#59<br/>%macro UniLogistic(data=, Outcome=, CutOffVar=, theVar=, classref=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVar Outcome CutOffVar classref DispersionWaldCLSign model&#59<br/>&nbsp&nbsp&nbsp&nbsp/*Start from negbin*/<br/>&nbsp&nbsp&nbsp&nbsp%let model=logistic&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOutcome=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &Outcome >= &CutOffVar  then Outcome =1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results off&#59 %end&#59<br/>&nbsp&nbsp&nbsp&nbspproc genmod data = UniLogistic_tmp0 desc&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&classref) ne 0 %then %do&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &theVar (ref=&classRef) /param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel Outcome = &theVar /dist=bin link=logit type3  &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = UniLogistic_tmp1 &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59 ods results on&#59%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*from UniLogistic_tmp1, get the estimate (beta) of the var*/<br/>&nbsp&nbsp&nbsp&nbspdata UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset UniLogistic_tmp1 (firstobs=2 obs=2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOR = Exp(Estimate)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORL= Exp(LowerWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspORU=Exp(UpperWaldCL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the parameter from the ods table is truncated to the max length of 20, therefore is incomplete. Replace it by theVar*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameter = upcase(symget('theVar'))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplength model $10.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel = symget('model')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProgram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=Date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoutcomeVar = upcase(strip(symget('Outcome')))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcutoffVar = upcase(strip(symget('cutoffVar')))&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target UniLogistic_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete UniLogistic_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend UniLogistic&#59<br/><br/>%macro UniLogistic_batchVars(OutcomeVar =,  cutoffVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local outcomeVar cutoffvar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=sex_Desc, classref=%str('M'), target=localt.VXL_FS, debug=1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=age, classref=, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=qaippe, classref=%str('1'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=resiType, classref=%str('URBAN'),  target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=COMPFS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NDINS_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NHosp_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HNights_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=HDays_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_GP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_SP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=NVisits_ER_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPay_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ThirdPartyPayPCT_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Pre365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=BENZO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=PSYCHO_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTIDEP_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=ANTICHO_Post365, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Pre365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_NPD_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_SA_Post365, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CAMH_PSY_Post365, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Charlson_Index, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NS_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MOODANXP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CD_PS, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_NONRA, target=localt.VXL_FS)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Pre365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ANXIETY_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DIABETES, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HTN, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOOD_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NS_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANX, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MOODANXP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OMH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_ASTHMA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_COPD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HF, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IHD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUBABUSE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AMI, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CD_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_HP_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_WF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_1POP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_NONRA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_CO_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_DA_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_OSTEO_2DRUG, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AK_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RF_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_VTE_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_STROKE_2HOSP, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_IB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_RA, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_LV_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPAD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_UB_PS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_AD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SUICIDE_OLD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_SCHIZO_EVER, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_PD, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_MS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=CC_Post365_EPJR, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Pre365_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_Prscr_statinAHTNOH, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=Followup_MedClass_statinAHTNOH, target=localt.VXL_FS)&#59<br/>/**Docrelated*/<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docSexN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docAge_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docServiceYr_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docEdCountry_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docPayTypeN_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docN_Visits_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docNPatients_FS, target=localt.VXL_FS)&#59<br/>&nbsp&nbsp&nbsp&nbsp%UniLogistic(data=VXL_FS1, Outcome=&OutcomeVar, cutoffVar=&cutoffVar, theVar=docStatinRxPCT_FS, target=localt.VXL_FS)&#59<br/><br/>%mend UniLogistic_batchVars&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP75)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP50)&#59<br/>%UniLogistic_batchVars(OutcomeVar =UPCIndexF,  cutoffVar=UPCIndexFP25)&#59<br/><br/>%exportvars(data=localt.VXL_FS)&#59<br/>/**/<br/>/*proc export data=localt.VXL_FS*/<br/>/*&nbsp&nbsp&nbsp&nbspdbms=xlsx*/<br/>/*&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"*/<br/>/*&nbsp&nbsp&nbsp&nbspreplace&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspsheet= \"T8Za UnivLogistic\"&#59&nbsp&nbsp&nbsp&nbsp*/<br/>/*&#59*/<br/>/*run&#59*/<br/><br/>%beep&#59<br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"7138372c-0c8a-4da7-92df-85f07f7503d2","name":"! VXK_FS MultiV","NodeDescription":"///t<br/>///s<br/>/*VXLR/KR multivariate analysis about UPC index? Repeat!*/<br/>s///<br/>t///","custparents":[{"idx":"317e762f-fe83-40c1-a143-e6e62b6126c5"},{"idx":"cd701887-b2c4-45ee-99ab-2064138a738c"}]}],"custparents":[{"idx":"abbedb12-dd12-42c1-9af6-a38f0ebb9545"}]}],"custparents":[{"idx":"f6c8294b-634c-4973-abf6-9e8cade4c115"}]}],"custparents":[{"idx":"69788758-5ee0-485d-8d56-f918ab934294"}]}],"custparents":[{"idx":"abcecef6-24ea-4d50-be5f-167953ff5ea4"}]}],"custparents":[{"idx":"a68632e1-f02a-4897-8e15-f2cb11719c9e"}]},{"idx":"e6632773-2d87-46fa-9a78-7103c6162326","name":"VXHA1_T5a5 N_Encounters in folloup","NodeDescription":"///t<br/>///s<br/>/*Median mean p25 p75 of encounters in follow up*/<br/>proc export data= localT.VXH_FS3a1<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T5a5.N_EncntFollowup\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/>s///<br/>t///","custparents":[{"idx":"a68632e1-f02a-4897-8e15-f2cb11719c9e"}]}],"custparents":[{"idx":"50223ef3-a768-4063-9485-ac7ad9f8c7a8"}]},{"idx":"e3396106-6c8e-4f1b-b628-eabd5393d315","name":"VXG_RT5a (Table 5A)","NodeDescription":"///t<br/>///s<br/>/*to make table 5A*/<br/><br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXG.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXG.sas7bdat)<br/>)&#59<br/><br/>/*get mean of UPC Index*/<br/>%print(data=VXG)&#59<br/>/*mean of upc index of all*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=VXG,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=UPCIndexF,<br/>&nbsp&nbsp&nbsp&nbsptheStats=median  p25 p75 qrange,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>data localt.VXG_RT5a1&#59<br/>&nbsp&nbsp&nbsp&nbspset meanstats_spr&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>run&#59<br/><br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=VXG,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=compfs,<br/>&nbsp&nbsp&nbsp&nbsptheVar=UPCIndexF,<br/>&nbsp&nbsp&nbsp&nbsptheStats=median  p25 p75 qrange,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>data localt.VXG_RT5a2&#59<br/>&nbsp&nbsp&nbsp&nbspset meanstats_spr&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/><br/>run&#59<br/><br/>/*distribution?*/<br/>proc univariate data=VXG&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF /normal outhistogram=VXG_RT5a3a&#59<br/>run&#59<br/><br/>/*merge small cells*/<br/>Data VXG_RT5a3b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a3a&#59<br/>&nbsp&nbsp&nbsp&nbspby _VAR_&#59<br/>&nbsp&nbsp&nbsp&nbspif first._VAR_ then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients=0&#59 <br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var _midpt_ = midpoint&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients <6 or _count_ < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients + _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/><br/>/*It is quite tricky. Those small cells are accumulated until the sum is greater than 5.<br/>Therefore, it won't work out simply delete those with N_Patients < 6. <br/>Hypothically:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal    N_Patients (accumulated)<br/>group1: 1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1<br/>group2: 5&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp6<br/>group3: 4&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp10<br/><br/>If only to exclude N_Patient <6,  group1 will be excluded, but group2 will be kept. This is wrong, as the N_Patients in group 2<br/>&nbsp&nbsp&nbsp&nbspare counted again in group3<br/><br/>To solve it <br/>*/<br/>/*1. resort the data again, this time, by var, and by merge status ascendingly, AND! N_Patients descendingly*/<br/>%sort(data = VXG_RT5a3b, sorter=var merged descending N_Patients )&#59<br/>/*2. delete rows if a merged value of 1 is reached in the previous row*/<br/>data localT.VXG_RT5a3&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a3b&#59<br/>&nbsp&nbsp&nbsp&nbsplagMerged=lag(Merged)&#59<br/>&nbsp&nbsp&nbsp&nbspif lagMerged =1 then delete&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep compfs var midpoint N_Patients project program createdate&#59<br/>run&#59<br/><br/><br/>proc univariate data=VXG&#59<br/>&nbsp&nbsp&nbsp&nbspclass COMPFS&#59<br/>&nbsp&nbsp&nbsp&nbspvar UPCIndexF&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram UPCIndexF /normal outhistogram=VXG_RT5a4a&#59<br/>run&#59<br/><br/>/*merge small cells*/<br/>Data VXG_RT5a4b&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a4a&#59<br/>&nbsp&nbsp&nbsp&nbspby CompFS&#59<br/>&nbsp&nbsp&nbsp&nbspif first.CompFS then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients=0&#59 <br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsprename _var_ = var _midpt_ = midpoint&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients <6 or _count_ < 6 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients + _count_&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=1&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN_Patients = _count_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmerged=0&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/><br/>/*It is quite tricky. Those small cells are accumulated until the sum is greater than 5.<br/>Therefore, it won't work out simply delete those with N_Patients < 6. <br/>Hypothically:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal    N_Patients (accumulated)<br/>group1: 1&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1<br/>group2: 5&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp6<br/>group3: 4&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp10<br/><br/>If only to exclude N_Patient <6,  group1 will be excluded, but group2 will be kept. This is wrong, as the N_Patients in group 2<br/>&nbsp&nbsp&nbsp&nbspare counted again in group3<br/><br/>To solve it <br/>*/<br/>/*1. resort the data again, this time, by COMPFS, and by merge status ascendingly, AND! N_Patients descendingly*/<br/>%sort(data = VXG_RT5a4b, sorter=COMPFS merged descending N_Patients )&#59<br/>/*2. delete rows if a merged value of 1 is reached in the previous row*/<br/>data localT.VXG_RT5a4&#59<br/>&nbsp&nbsp&nbsp&nbspset VXG_RT5a4b&#59<br/>&nbsp&nbsp&nbsp&nbsplagMerged=lag(Merged)&#59<br/>&nbsp&nbsp&nbsp&nbspby COMPFS merged descending N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbspif first.COMPFS then lagMerged=0&#59<br/>&nbsp&nbsp&nbsp&nbspif lagMerged =1 then delete&#59<br/>&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbspkeep compfs var midpoint N_Patients project program createdate&#59<br/>run&#59<br/><br/><br/><br/>proc export data= localT.VXG_RT5a1<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T5a1. meanstats\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>proc export data= localT.VXG_RT5a2<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T5a2. meanstats_compfs\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>proc export data= localT.VXG_RT5a3<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T5a3. DispUPCIndexFS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/>proc export data= localT.VXG_RT5a4<br/>&nbsp&nbsp&nbsp&nbspdbms=xlsx<br/>&nbsp&nbsp&nbsp&nbspoutfile=\"&localReportPath.\\reports.xlsx\"<br/>&nbsp&nbsp&nbsp&nbspreplace&#59<br/>&nbsp&nbsp&nbsp&nbspsheet= \"T5a4. DispUPCIndexFS\"&#59&nbsp&nbsp&nbsp&nbsp<br/>&#59<br/>run&#59<br/><br/><br/>s///<br/>t///","custparents":[{"idx":"50223ef3-a768-4063-9485-ac7ad9f8c7a8"}]}],"custparents":[{"idx":"acb8b093-1642-4c09-91f4-47389d158b2f"}]}],"custparents":[{"idx":"386afa2e-a8eb-481b-bedc-e04384f9db00"},{"idx":"506ae9ac-57ae-4838-865a-455da09e684c"}]}],"custparents":[{"idx":"6145c94c-4312-4c19-9709-705456f73148"},{"idx":"506ae9ac-57ae-4838-865a-455da09e684c"}]}],"custparents":[{"idx":"6087cb18-2ee9-49c5-90c3-e8ae19a5b0fe"},{"idx":"b4ed97b8-1322-487b-8a0a-ca10d2d1f2f4"}]}],"custparents":[{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad"}]},{"idx":"cdfabdc4-ea28-4cb6-b783-8e6f222d217b","name":"VXA_Z MapIDs","NodeDescription":"///t<br/>///s<br/>/*VXA_Z. Mapping of key_hsn and physician IDs*/<br/>/*only to run once<br/>NOTE: Do not change the mapping. Otherwise the slim files would be messed up for wrong mapping.<br/>*/<br/><br/>%macro mapIDs&#59<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_keyhsn_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_keyhsn_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_keyhsn_pop, sorter=descending key_hsn)&#59<br/>data VXA_Z0&#59<br/>&nbsp&nbsp&nbsp&nbspset master_keyhsn_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/><br/>/*VXA_Z1. make a uniq code (key_hsnc)with 4 chars to represent a unqiue key_hsn<br/>&nbsp&nbsp&nbsp&nbspfor a number between 1 and 128**4 (i.e., 2097152), turn it to a 4-char string<br/>&nbsp&nbsp&nbsp&nbspeach char represents a number between 1 to 128*/<br/>data master_patientIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z0 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C4 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note! order matters, first to have N1, then N2, then N3, then N4*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128^3 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**3)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^3 divided by 128^2 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**3)/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the third left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - (N1*128+N2)*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3=int((i-(N1*128+N2)*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N4 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN4 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC4=byte(N4)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspKey_HSNC=C1||C2||C3||C4&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=VXA_Z1, target=test2, vars=Key_HSNC)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_patientIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_patientIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/><br/><br/>/*mapping physician ids*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docnum_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docnum_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_docnum_pop, sorter=descending key_doc_num)&#59<br/>data VXA_Z1&#59<br/>&nbsp&nbsp&nbsp&nbspset master_docnum_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*As there are less then 9999 docs in the province (at least for now), two chars will be enough*/<br/>data master_DocIDmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z1 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C2 $1.&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkey_doc_numc=C1||C2&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DocIDmap_pop, target=test2, vars=key_doc_numc)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DocIDmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DocIDmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/>/*mapping dins*/<br/>/*VXA_Z0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_din_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_din_pop.sas7bdat)<br/>)&#59<br/>%sort(data=master_din_pop, sorter=descending din)&#59<br/>data VXA_Z2&#59<br/>&nbsp&nbsp&nbsp&nbspset master_din_pop&#59<br/>&nbsp&nbsp&nbsp&nbspi=_n_&#59<br/>run&#59<br/>/*Three chars will be enough*/<br/>data master_DINmap_pop&#59<br/>&nbsp&nbsp&nbsp&nbspset VXA_Z2 &#59<br/>&nbsp&nbsp&nbsp&nbsplength C1-C3 $1.&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Note: order matters, first to have N1, then N2, then N3, then N4.*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the left position, the number N1 (1-128) behind the char is the quotient of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN1=int(i/128**2)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC1=byte(N1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the second left position, the number (1-128) behind the char is the quotient of <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspi - N1*128^2 divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN2=int((i-N1*128**2)/128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC2=byte(N2)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the right position, the number N2 (1-128) behind the char is the remainder of i divided by 128 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspN3 =mod(i, 128)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspC3=byte(N3)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdinStr=C1||C2||C3&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdrop N: c: i&#59<br/>run&#59<br/>/*%distinct(data=master_DINmap_pop, target=test2, vars=dinStr)&#59 */<br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localDataPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=master_DINmap_pop.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=master_DINmap_pop.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%mend mapIDs&#59<br/>s///<br/>t///","children":[{"idx":"34118cf7-04e4-497e-8b2b-a0d24bc451ed","name":"Q alldin","NodeDescription":"///t<br/>///s<br/>/*Question is the alldin file complete?<br/>No. There are dins in dp claim files, but not in alldins. However, there are also dins in alldin file, but not in dp claims (ben and nonben) <br/>&nbsp&nbsp&nbsp&nbspThe mapping here takes all dins from both alldin file, and the dp claim files (ben and nonben)<br/>*/<br/>s///<br/>t///","custparents":[{"idx":"cdfabdc4-ea28-4cb6-b783-8e6f222d217b"}]}],"custparents":[{"idx":"0ecaea0e-710f-4adb-a6b0-4e527039c2ad"}]}],"custparents":[{"idx":"MYa3330e29-02a1-4981-a8dc-f7fe463f3df4"}]}]}},{"idx":"MYff62e0a9-1071-41bc-900a-9c7fafbe97fe","name":"steps for project 2","custparents":[{"idx":"3c2278f0-3974-441a-adf0-a1feabb1113a"}],"children":[{"idx":"MYf9fb1874-c748-423e-befe-62311fcc781e","name":"substeps","custparents":[{"idx":"MYff62e0a9-1071-41bc-900a-9c7fafbe97fe"}],"children":[{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf","name":"Project2 settings","NodeDescription":"///t<br/>///s<br/>/*the following is to disconnect from remote server, and run the program in HQC server*/<br/>%let nccSASTools=S:\\Collaborative_researchers\\Shenzhen\\My Project\\Projects\\DoNotDelete Common Macros\\MyMacros.sas&#59<br/>%include \"&nccSASTools\" /LRECL=32767&#59<br/>%let localDataPath=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Data&#59<br/>libname localD \"&localDataPath\"&#59<br/>%let localTargetPath=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data&#59/*for common files from proejct1*/<br/>libname localT1 \"&localTargetPath\"&#59<br/>%let localTargetPath2=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2&#59 /*for project2*/<br/>libname localT2 \"&localTargetPath\"&#59<br/>%let localReportPath=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Reports&#59<br/><br/>options dlcreatedir&#59 /*allow creating folder if a libname referring folder does not exist*/<br/>/*also run the macro in the following programs<br/><br/>1. tools<br/>2. Test logistic macro <br/>3. %getFreq in ZXZG Logistic<br/><br/>*/<br/>s///<br/>t///","children":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777","name":"Pilot2 (the real analyses)","NodeDescription":"///t<br/>///s<br/>/*<br/>Pilot1<br/>USPs within 2012 -2017<br/>new statin users<br/>*/<br/>s///<br/>t///","children":[{"idx":"MY8108d724-189a-4046-bd4e-4328489c6ec2","name":"1. cohort","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"},{"idx":"MYc58ef518-64e1-4545-91c8-5811ed447088"}],"children":[{"idx":"c76bcc64-2ed4-42dc-9aca-ad2cb3d80f80","name":"ZXZA USPF and Patient cohort","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/><br/>%print(data=VXM_FS)&#59<br/><br/>/*In project one, the new statin patients have been idenfied in VXM_FS<br/>&nbsp&nbsp&nbsp&nbspIn vxm_fs file, many covariates of patient/GP have been determined, and can be used in obj 2<br/>*/<br/><br/>/*Make a subset with new statin patients in 2016 and 2017, indicate their USP*/<br/>data ZXZA1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspformat USPF $11.&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF=scan(uspf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspEntryYear = year(entryDate)&#59<br/>run&#59<br/>/*Note that some patients were excluded as not prescribed by a GP*/<br/>/*patients in ZXZA1*/<br/>%nobs(data=ZXZA1)&#59<br/>/*USPs in ZXZA1*/<br/>%distinct(data=ZXZA1, target=ZXZA1a, vars=USPF)&#59<br/>%nobs(data=ZXZA1a)&#59<br/><br/>/*exclude patients whose USP had < 6 statin new users*/<br/>/*count USPF for their # of new statin users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZA1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZA2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(USPF, count(Key_hsn) as N_Pts),<br/>&nbsp&nbsp&nbsp&nbspgroupby=USPF<br/>)&#59<br/>/*exclude those not having 6 patients (tried excluding those with < 10 patients, more than half USPs were gone)*/<br/>data ZXZA2b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZA2a&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Pts ge 6&#59<br/>run&#59<br/>/*in ZXZA1, select rows that the USPFs can be found in ZXZA2b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZA1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZA2b,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZA,<br/>&nbsp&nbsp&nbsp&nbspvars=t1.*,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=uspf<br/>)&#59<br/>/*patients in ZXZA*/<br/>%nobs(data=ZXZA)&#59<br/>/*USPs in ZXZA1*/<br/>%distinct(data=ZXZA, target=ZXZA2c, vars=USPF)&#59<br/>%nobs(data=ZXZA2c)&#59<br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath2, <br/>&nbsp&nbsp&nbsp&nbspzipFile=ZXZA.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=ZXZA.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/>s///<br/>t///","children":[],"custparents":[{"idx":"MY8108d724-189a-4046-bd4e-4328489c6ec2"},{"idx":"MY333d815a-585f-435e-ace5-442efc1805b9"},{"idx":"MY8108d724-189a-4046-bd4e-4328489c6ec2"}]}]},{"idx":"MY333d815a-585f-435e-ace5-442efc1805b9","name":"2 characteristics","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"},{"idx":"MYd8b405c9-2447-452d-8db4-d0b8f650bde5"},{"idx":"MYdbbf5d2b-f300-4bd9-8a3a-f3af27460444"},{"idx":"MY18912ac4-4c8e-4874-88cb-88a73a464d9a"}],"children":[{"idx":"71643948-b34f-48b1-acda-a7d09bfd72d0","name":"ZXZB_A USPF attrib","NodeDescription":"///t<br/>///s<br/>/*ZXZB_A Physician Covariates<br/>Note: this part is for attributes of USPF, UCPF, and UCPW, it is similar to the program VXJ which determines attributes for UCPF and UCPW<br/><br/>age, sex, birth year, grad year, grad country code, grad canda/foreign<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*ZXZB_A0. Preparing Source Data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZA.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZA.sas7bdat)<br/>)&#59<br/>/*from the doc mobile file, get the spec of these docs from the doc info file*/<br/>%vbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\Master_MSB_DocInfo.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(Master_MSB_DocInfo.sas7bdat)<br/>)&#59<br/><br/><br/>/*ZXZB_A1. For physicians in ZXZA, get doc sex age education, spec from ZXZB_A1*/<br/>/*ZXZB_A1a. From ZXZA, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data ZXZB_A1a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZA&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn key_doc_num type &#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num =USPF&#59 type='USPF1'&#59 output&#59<br/>run&#59<br/>/*ZXZB_A21b. keep the distinct record of doc ids, as the doc properties are not time-specific*/<br/>%distinct(data=ZXZB_A1a, target=ZXZB_A1, vars=key_doc_num)&#59<br/><br/><br/>/*ZXZB_A2. Clean up the doc properties<br/>&nbsp&nbsp&nbsp&nbspThe original file is quite messy:<br/>&nbsp&nbsp&nbsp&nbsp1) It does not seems to be time specific<br/>&nbsp&nbsp&nbsp&nbsp2) For the same docID, the field values (e.g., sex) can be missing in some records.<br/>*/<br/>/*ZXZB_A2a keep records in which sex is not missing*/<br/>%macro cleanDoc(docVar=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local docVar&#59<br/>&nbsp&nbsp&nbsp&nbspData ZXZB_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset Master_MSB_DocInfo&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &docVar ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif report_end =. then report_end=today()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep key_doc_num &docVar  report_end&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ZXZB_A2b sort and keep the lastest record of a doc*/<br/>&nbsp&nbsp&nbsp&nbsp%sort(data=ZXZB_A2a, sorter=key_doc_num report_end)&#59<br/>&nbsp&nbsp&nbsp&nbspdata ZXZB_A2b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset ZXZB_A2a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_doc_num report_end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif last.key_doc_num&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ZXZB_A2c, attach the selected property to the docs in ZXZB_A1*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=ZXZB_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=ZXZB_A2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=ZXZB_A1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&docVar as Doc&docVar), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp%freq(data=ZXZB_A1, table=Doc&docVar)&#59<br/>%mend cleanDoc&#59<br/>%cleanDoc(docVar=Sex)&#59<br/>%cleanDoc(docVar=BIRTH_YEAR)&#59<br/>%cleanDoc(docVar=grad_year)&#59<br/>%cleanDoc(docVar=GRAD_GEO_COUNTRY)&#59<br/>/*clean up the sex category, there were funny values like D, J, etc.*/<br/><br/>/*ZXZB_A3. Link the cleaned properties to distinct docs appeared in the cohort*/<br/>data ZXZB_A3a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A1&#59<br/>&nbsp&nbsp&nbsp&nbspif strip(upcase(DocSex)) ne 'F'  and strip(upcase(DocSex)) ne 'M'  then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocSex='.'&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/><br/>/*the grad_geo see the file \"PHMB_File_Descptn.xls\", a link can be found at quincy desktop, file saved in U<br/>&nbsp&nbsp&nbsp&nbspand mailed to SHY516 on Jan 31, 2019*/<br/>data ZXZB_A3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A3a&#59<br/>&nbsp&nbsp&nbsp&nbsplength DocGrad_Country $10.&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGRAD_GEO_COUNTRY=\"\" then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode=.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=.&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp/*GRAD_GEO_COUNTRY = \"1\" to \"19\" are CANADA grads, the rest are foreign grads*/<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGradCountryCode = input(strip(DocGRAD_GEO_COUNTRY), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif  DocGradCountryCode <= 19 then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country=\"CANADA\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_Country = \"FOREIGN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDocGrad_CountryN=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspdrop DocGRAD_GEO_COUNTRY&#59<br/>&nbsp&nbsp&nbsp&nbsplength docAttrs $20.&#59<br/>&nbsp&nbsp&nbsp&nbspdocAttrs = strip(docSex) || \":\" || strip(DocBirth_Year) || \":\" || strip(DocGrad_Year) || \":\" || <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstrip(DocGradCountryCode) || \":\" || strip(DocGrad_CountryN)<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>%freq(data=ZXZB_A3, table=DocGrad_Country)&#59<br/><br/><br/>/*ZXZB_A4, link the properties to docs in the cohort ZXZA. For UCPF1, add the properties into the file*/<br/>/*Add to UCPF*/<br/>data ZXZB_A4a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZA&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp/*remove the old properties in UCPF1*/<br/>&nbsp&nbsp&nbsp&nbspUCPF1 = scan(UCPF1, 1, \":\") || \":\" || scan(UCPF1, 2, \":\") || \":\" || scan(UCPF1, 3, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_A4a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_A4b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data ZXZB_A4&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A4b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1 =strip(UCPF1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/><br/>/*Add to UCPW*/<br/>/*ZXZB_A5, repeat ZXZB_A4, this time, for UCPW1, add the properties into the file*/<br/>data ZXZB_A5a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A4&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*remove the old properties in UCPW1*/<br/>&nbsp&nbsp&nbsp&nbspUCPW1 = scan(UCPW1, 1, \":\") || \":\" || scan(UCPW1, 2, \":\") || \":\" || scan(UCPW1, 3, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_A5a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_A5b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data ZXZB_A5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A5b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1 =strip(UCPW1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num DocAttrs&#59<br/>run&#59<br/><br/><br/>/*Add to USPF*/<br/>/*ZXZB_A6, repeat ZXZB_A5, this time, for UCPW1, add the properties into the file*/<br/>data ZXZB_A6a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A5&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(USPF1, 1, \":\")&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_A6a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_A6b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(t2.DocAttrs='', '.:.:.:.:.', t2.DocAttrs) as DocAttrs length=20), <br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/>data ZXZB_A6&#59<br/>&nbsp&nbsp&nbsp&nbspformat USPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A6b&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF1 =strip(USPF1) || \":\" || strip(DocAttrs)&#59<br/>&nbsp&nbsp&nbsp&nbspdrop key_doc_num docAttrs&#59<br/>run&#59<br/><br/>/*exclude patients whose USPF is lack of DocAttrs*/<br/>data ZXZB_A&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A6&#59<br/>&nbsp&nbsp&nbsp&nbspif<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp scan(USPF1, 4, \":\") ne '.'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp scan(USPF1, 5, \":\") ne '.'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp scan(USPF1, 6, \":\") ne '.'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp scan(USPF1, 7, \":\") ne '.'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspscan(USPF1, 8, \":\") ne '.'<br/>&#59<br/>run&#59<br/><br/>/*patients in ZXZA*/<br/>%nobs(data=ZXZB_A)&#59<br/>/*USPs in ZXZA1*/<br/>%distinct(data=ZXZB_A, target=ZXZB_A7, vars=USPF)&#59<br/>%nobs(data=ZXZB_A7)&#59<br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=&localTargetPath2, <br/>&nbsp&nbsp&nbsp&nbspzipFile=ZXZB_A.zip, <br/>&nbsp&nbsp&nbsp&nbspsrcFile=ZXZB_A.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"c76bcc64-2ed4-42dc-9aca-ad2cb3d80f80"},{"idx":"MY333d815a-585f-435e-ace5-442efc1805b9"}]},{"idx":"0879784e-6ec8-4309-acd6-bd22015a66c1","name":"ZXZB_B USPF_MSB_ATTRs","NodeDescription":"///t<br/>///s<br/>/*ZXZB_B, Get MSB claims of GPs in ZXZB_A, <br/>&nbsp&nbsp&nbsp&nbspsimilar to VXJ_B, but adding USPFs<br/>count % of claims as FFS/NFFS in the specified period (1 years prior and 1 year after the EntryDate) <br/>Note, the FFS/NFFS is based on all doc's services to ALL patients, not only to the cohort members. <br/>&nbsp&nbsp&nbsp&nbspIt is more appropriate to count visits to ALL patients  within the 2 year period around the entry dates instead of only counting for # visits in the follow up. <br/>&nbsp&nbsp&nbsp&nbspe.g., the entry date is 2012-1-1, then the doc's pay type is determined by the % of FFS of this doc to all his patients<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetween 2011-1-1 and 2013-12-31.<br/>&nbsp&nbsp&nbsp&nbsppaytype, N_Visits, N_Patients<br/>*/<br/>data _null_&#59run&#59<br/><br/>/*Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZB_A.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZB_A.sas7bdat)<br/>)&#59<br/>/*the MSB data is too big, only do it for once.*/<br/>%macro prepareMSBData&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_msb_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_msb_pop_slim.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*the original file is too big, make distinct records and make it smaller<br/>&nbsp&nbsp&nbsp&nbspThis time, claims of all spec will be kept. */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=master_msb_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=localt.ZXZB_B0a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(key_hsnc, key_doc_numc, dos,  ifc(t1.mode='1', 'FFS', 'NFFS' ) as PayMode length=4),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnum_srv ne 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLOS NOT in ('B','2','K','9')<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspMODE ne 'Z'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(key_hsnc, key_doc_numc,  dos, PayMode)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*claims of the same patient-doc-date should be treated as a unique encounter. In the above, it could be that<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe same patient-doc-date could appear twice, each for a different paymode. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIn that case, keep the same patient-doc-date records of the FFS type. The reason is that at least part of such claims <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwere indicated as FFS mode*/<br/>&nbsp&nbsp&nbsp&nbspdata localt.VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset localt.ZXZB_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby key_hsnc key_doc_numc dos paymode&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.dos&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete ZXZB_B0a&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*zip the file VXJ_B0, and delete the unzipped file (it is too large).<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote, the file is named VXJ_B0 as it was first prepared by the program VXJ_B0<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=VXJ_B0.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=VXJ_B0.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=&localTargetPath<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspproc datasets nolist lib=localt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete VXJ_B0&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>%mend prepareMSBData&#59<br/>/*%prepareMSBData&#59*/<br/><br/><br/><br/>/*ZXZB_B1. Get UCPF1 and UCPW1 from ZXZB_A. These doctors are specific by patient and entrydate*/<br/>/*ZXZB_B1a. From ZXZB_A, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data ZXZB_B1a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(USPF1, 1, \":\")&#59 type='USPF1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*ZXZB_B1b. keep the distinct record of period-specific doc ids*/<br/>%distinct(data=ZXZB_B1a, target=ZXZB_B1b, vars=%str(entryDate, key_doc_num))&#59<br/><br/>/*map the key_doc_num and key_doc_numc*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_B1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num<br/>)&#59<br/><br/>/*ZXZB_B2. From above, select claims of the docs between entrydate -365 and entrydate +364*/<br/>/*ZXZB_B2, MSB visits within 1 year before and 1 year after entryDate<br/>&nbsp&nbsp&nbsp&nbspi.e., to have visits in each specific period defined by entrydate and doc<br/>&nbsp&nbsp&nbsp&nbspThere are millions of MSB claims, and there are 60K doc records (by specific entrydate)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe intermediate temp data will be huge if run by a single SQL query.<br/>&nbsp&nbsp&nbsp&nbspThe following is to bring the MSB records by quarter and aggregate the results. <br/>*/<br/><br/>%macro makeZXZB_B2b3&#59<br/>&nbsp&nbsp&nbsp&nbsp%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXJ_B0.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXJ_B0.sas7bdat)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the doc and period specific claims.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfollowing are the requirements:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1. count the N_encounters by physician, period, and payMode (i.e., grouped by entryDate, doc id , and paymode, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspand count # encounters)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2. count the # of patients by physician and  period (i.e., grouped by entryDate, doc id,  count the # of distinct patients)<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTo save time, we'll put the 2 requirements into one omnibus.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) aggregate the # encounters per physician-payMode-entrydate-patient (Note that the patient here refers to<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspall patients, not only the cohort members) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=ZXZB_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B2a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_num, t1.PayMode, count(t1.key_hsnc) as N_Visits),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(t2.entryDate, t2.key_doc_num, t1.PayMode),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*  b) have a distinct list of physician-period-patient (i.e., doc id - entrydate - patientid)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=VXJ_B0,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=ZXZB_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t2.entryDate, t2.key_doc_numc, t1.key_hsnc),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.dos between t2.entrydate -365 and t2.entryDate +365-1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*ZXZB_B3b. count the # of distinct patients for each physician with a specific entry period*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=ZXZB_B2b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(entryDate, key_doc_numc, count(key_hsnc) as N_Pt),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_numc)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=ZXZB_B3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=ZXZB_B1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B3b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.N_Pt, t2.key_doc_num),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the following will overwrite the existing zip! be careful*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=ZXZB_B2a.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=ZXZB_B2a.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=ZXZB_B3b.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=ZXZB_B3b.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>%mend makeZXZB_B2b3&#59<br/>/*%makeZXZB_B2b3&#59*/<br/>/*%beep&#59*/<br/><br/>/*The above is totally a waste of time. As the same data has been prepared in VXJ_B2a, and VXJ_B3b*/<br/><br/>/*For # of visits by paymode, and # of patients by period-specific physicians, the data has been prepared for once, unzip the prepared data */<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\ZXZB_B2a.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZB_B2a.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\ZXZB_B3b.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZB_B3b.sas7bdat)<br/>)&#59<br/><br/>/*transpose and have N_visits by NFFS and FFS payment type in columns*/<br/>%transpose(data=ZXZB_B2a, target=ZXZB_B4, rowhead=key_doc_num entryDate, colhead=PayMode, contents=n_visits)&#59<br/><br/>/*<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZXZB_B has an FFS_CAT of (0-2), make it NFFS<br/>&nbsp&nbsp&nbsp&nbspif the GP in ZXZB_B has an FFS_CAT of 8-10, make it FFS<br/>&nbsp&nbsp&nbsp&nbspif the gp in ZXZB_B has an FFS_CAT of 3-7, make it unk(unknown)<br/>*/<br/>data ZXZB_B5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B4&#59<br/>&nbsp&nbsp&nbsp&nbspif NFFS=. then NFFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS=. then FFS=0&#59<br/>&nbsp&nbsp&nbsp&nbspFFSPCT=INT(FFS / sum(NFFS, FFS)*100 )&#59<br/>&nbsp&nbsp&nbsp&nbspFFS_CAT=int(FFSPCT / 10)&#59<br/>&nbsp&nbsp&nbsp&nbspformat PayType $4.&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT LE 2 then PayType='NFFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif FFS_CAT GE 8 then PayType='FFS'&#59<br/>&nbsp&nbsp&nbsp&nbspif 2 lt FFS_CAT LT 8 then PayType='UNKW'&#59<br/>run&#59<br/>/*%freq(data=ZXZB_B5, table=FFS_CAT*PayType)&#59<br/>It shows that only a small proportion of patients whose doc is of UNKW type*/<br/><br/>/*ZXZB_B6. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>/*ZXZB_B6a. For each period-specific physician, get paytype, visits, and patients from B5 and B3b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_B5,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_B3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B6a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.entryDate,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.key_doc_num,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1.payType,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(t1.NFFS, t1.FFS) as N_Visits,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2.N_Pt as N_Patients<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=entryDate key_doc_num<br/>)&#59<br/>data ZXZB_B6b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Visits=. then N_Visits=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Patients=. then N_Patients=0&#59<br/>run&#59<br/>/*ZXZB_BJ6b. For each period-specific physician, make a string of paymode:#visits(NFFS + FFS):#patients*/<br/>data ZXZB_B6&#59<br/>&nbsp&nbsp&nbsp&nbsplength MSBAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B6a&#59<br/>&nbsp&nbsp&nbsp&nbspMSBAttrStr = strip(paytype) || \":\" || strip(N_Visits)  || \":\" || strip(N_Patients)&#59<br/>run&#59 <br/><br/><br/>/*ZXZB_B7.  link ZXZB_B7a and ZXZB_B6 to indicate the MSB related attributes for UCPF1*/<br/>/*ZXZB_B7a. Get the docid for UCPF1 */<br/>data ZXZB_B7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_A&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*ZXZB_B7b. link ZXZB_B7a and ZXZB_B6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_B7a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/><br/>/*ZXZB_B7c. Append MSBAttrStr to UCPF1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data ZXZB_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/>/*ZXZB_B8.  link ZXZB_B8a and ZXZB_B7 to indicate the MSB related attributes for UCPW1*/<br/>/*ZXZB_B8a. Get the docid for UCPW1*/<br/>data ZXZB_B8a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*ZXZB_B8b. link ZXZB_B8a and ZXZB_B6 (with MSB related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_B8a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*ZXZB_B8c. Append MSBAttrStr to UCPW1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data ZXZB_B8&#59<br/>&nbsp&nbsp&nbsp&nbsplength UCPW1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/>/*ZXZB_B9.  link ZXZB_B9a and ZXZB_B8 to indicate the MSB related attributes for USPF1*/<br/>/*ZXZB_B9a. Get the docid for USPF1*/<br/>data ZXZB_B9a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B8&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(USPF1, 1, \":\")&#59  <br/>run&#59<br/><br/>/*ZXZB_B9b. link ZXZB_B9a and ZXZB_B6 (with MSB related attributes) to indicate the MSB related attributes for USPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_B9a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_B6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_B9b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.MSBAttrStr=\"\", \"_:0:0\", t2.MSBAttrStr) as MSBAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*ZXZB_B8c. Append MSBAttrStr to USPF1<br/>Note: to this step, the length of UCPF1 of 50 is not long enough, change it to 100<br/>*/<br/>Data ZXZB_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength USPF1 $100.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B9b&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF1=strip(USPF1) || \":\" || MSBAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop MSBAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/><br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=ZXZB_B.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=ZXZB_B.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"71643948-b34f-48b1-acda-a7d09bfd72d0"},{"idx":"MY333d815a-585f-435e-ace5-442efc1805b9"}]},{"idx":"a8d4ae3f-36b3-4c3b-b760-a73a9f8ccb28","name":"ZXZB_C DOC_Rx_Attrs","NodeDescription":"///t<br/>///s<br/>/*ZXZB_C <br/>&nbsp&nbsp&nbsp&nbspRx related attributes of each period-related physician. <br/>&nbsp&nbsp&nbsp&nbsp1. # of Rx from runin throught follow up<br/>&nbsp&nbsp&nbsp&nbsp2. # of Statin out of all Rx<br/>&nbsp&nbsp&nbsp&nbspsimilar to VXJ_C but adding USPF1<br/><br/>*/<br/><br/>data _null_&#59run&#59<br/><br/><br/>/*ZXZB_C0. Prepare source data*/<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_benefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_benefit_pop_slim.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_dp_nonbenefit_pop_slim.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_dp_nonbenefit_pop_slim.sas7bdat)<br/>)&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZB_B.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZB_B.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_DINmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_DINmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_patientidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_patientidmap_pop.sas7bdat)<br/>)&#59<br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localDataPath.\\master_docidmap_pop.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(master_docidmap_pop.sas7bdat)<br/>)&#59<br/><br/><br/>/*ZXZB_C1. Get UCPF1 and UCPW1 from ZXZB_B. These doctors are specific by patient and entrydate*/<br/>/*ZXZB_C1a. From ZXZB_C, get the first UCP in followup, and in the whole period from runin through followup<br/>&nbsp&nbsp&nbsp&nbspuse scan() to get the physician id*/<br/>data ZXZB_C1a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn entryDate key_doc_num type&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11.&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59 type='UCPF1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59 type='UCPW1'&#59 output&#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(USPF1, 1, \":\")&#59 type='USPF1'&#59 output&#59&nbsp&nbsp&nbsp&nbsp<br/>run&#59<br/>/*ZXZB_C1b. keep the distinct record of period specific doc ids*/<br/>%distinct(data=ZXZB_C1a, target=ZXZB_C1b, vars=%str(entryDate, key_doc_num))&#59<br/>/*ZXZB_C1c. add the char id: key_doc_numc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C1b,<br/>&nbsp&nbsp&nbsp&nbspt2=master_docidmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.key_doc_numc)<br/>)&#59<br/><br/><br/>/*ZXZB_C2. Sum by prescriber, and date, count Rx of all medications*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*ZXZB_C2a. Sum by prescriber, and date, count Rx of all medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C2a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*ZXZB_C2b. Sum by prescriber, and date, count Rx of all medications from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C2b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(DINStr) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*ZXZB_C2c. combine C2a and C2b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data ZXZB_C2c&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C2a ZXZB_C2b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C2C,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_AllMed) as N_Rx_AllMed),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/>/*ZXZB_C12. Sum by prescriber, and date, get distinct patients*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*ZXZB_C12a. Sum by prescriber, and date, get the distinct list of patients from the benefit file*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C12a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc,  key_hsnc)<br/>)&#59<br/>/*ZXZB_C12b. Sum by prescriber, and date, get the distinct list of patients from the nonbenefit file*/<br/>%distinct(<br/>&nbsp&nbsp&nbsp&nbspdata=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C12b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, key_hsnc)<br/>)&#59<br/>/*ZXZB_C12. combine C12a and 1C2b*/<br/>data ZXZB_C12&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C12a ZXZB_C12b&#59<br/>run&#59<br/><br/><br/><br/>/*ZXZB_C3. Sum by prescriber, and date, count Rx of statin medications*/<br/>/*ZXZB_C3a0. As the claim files contains DINStr, not DIN, need an additional step to map  the statin dins to dinstrs*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=locald.statindins,<br/>&nbsp&nbsp&nbsp&nbspt2=master_DINmap_pop,<br/>&nbsp&nbsp&nbsp&nbsptarget=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=din,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.dinstr)<br/>)&#59<br/>/*ZXZB_C3a. Sum by prescriber, and date, count Rx of statin medications from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C3a,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*ZXZB_C3b. Sum by prescriber, and date, count Rx of statin from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C3b,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, count(t1.DINstr) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/>/*combine C3a and C3b, and sum again by Rx_DDDDD, and key_doc_num*/<br/>data ZXZB_C3c&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C3a ZXZB_C3b&#59<br/>run&#59<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C3c,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C3,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, sum(N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(Rx_DDDDD, key_doc_numc)<br/>)&#59<br/><br/><br/>/*ZXZB_C13. Sum by prescriber, and date, get distinct patients*/<br/>/*Note: the following is to use the slim files so as to be more efficient*/<br/>/*ZXZB_C13a. Sum by prescriber, and date, get the distinct list of patients from the benefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_benefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C13a,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, key_hsnc)<br/>)&#59<br/>/*ZXZB_C13b. Sum by prescriber, and date, get the distinct list of patients from the nonbenefit file*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=master_dp_nonbenefit_pop_slim,<br/>&nbsp&nbsp&nbsp&nbspt2=statindinStrs,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C13b,<br/>&nbsp&nbsp&nbsp&nbspdistinct=1,<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=dinstr,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(Rx_DDDDD, key_doc_numc, key_hsnc)<br/>)&#59<br/>/*ZXZB_C13. combine C13a and 1C3b*/<br/>data ZXZB_C13&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C13a ZXZB_C13b&#59<br/>run&#59<br/><br/><br/>/*ZXZB_C4. Combine C2 and C3. The result data contains # of Rx of all medicine and # of Rx of statin by prescriber's id, and by dispensation date*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C2,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C4,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=Rx_DDDDD key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_Statin=., 0, t2.N_Rx_Statin) as N_Rx_Statin)<br/>)&#59<br/><br/>/*ZXZB_C5a. Link C4 to  ZXZB_C1, for each period(entrydate) specific doc, sum the # of Rx of all medications, and # of Rx of statin<br/>&nbsp&nbsp&nbsp&nbspfrom runin through followup.*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C4,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5a,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, sum(t2.N_Rx_AllMed) as N_Rx_AllMed, sum(t2.N_Rx_Statin) as N_Rx_Statin),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/><br/>/*ZXZB_C5b1. for each period(entrydate) specific doc in  ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspcount number of all Rx patients<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C12,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5b1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, count(distinct t2.key_hsnc) as N_Rx_AllPt),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/><br/>/*ZXZB_C5b2. for each period(entrydate) specific doc in ZXZB_C5b,<br/>&nbsp&nbsp&nbsp&nbspcount number of statin patients (prevalent and new users)<br/>*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C13,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5b2,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_numc,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.entryDate, t1.key_doc_num, count(distinct t2.key_hsnc) as N_Rx_StatinPt),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(entryDate, key_doc_num),<br/>&nbsp&nbsp&nbsp&nbspfilters=%str(Rx_ddddd between t1.entryDate - 365 and t1.entryDate +365-1)<br/>)&#59<br/><br/>/*to this step:<br/>&nbsp&nbsp&nbsp&nbspZXZB_C5a contains entryDate, doc, # all med Rx, # statin Rx<br/>&nbsp&nbsp&nbsp&nbspZXZB_C5b1 contains entryDate, doc, # all Rx patients<br/>&nbsp&nbsp&nbsp&nbspZXZB_C5b2 contains entryDate, doc, # statin Rx patients<br/>*/<br/>/*Merge the above 3 with ZXZB_C1 by entrydate and doc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C5a,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5c1,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_AllMed=., 0, t2.N_Rx_AllMed) as N_Rx_AllMed, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ifn(t2.N_Rx_Statin=., 0, t2.N_Rx_Statin) as N_Rx_Statin)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C5c1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C5b1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5c2,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.N_Rx_AllPt=., 0, t2.N_Rx_AllPt) as N_Rx_AllPt)<br/>)&#59<br/><br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C5c2,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C5b2,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C5,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*,  ifn(t2.N_Rx_StatinPt=., 0, t2.N_Rx_StatinPt) as N_Rx_StatinPt)<br/>)&#59<br/><br/><br/>/*ZXZB_C6. Make a string to hold Rx related attributes, i.e., N_Rx_AllMed:N_Rx_Statin*/<br/>data ZXZB_C6&#59<br/>&nbsp&nbsp&nbsp&nbsplength RxAttrStr $50.&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C5&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_AllMed=. then N_Rx_AllMed=0&#59<br/>&nbsp&nbsp&nbsp&nbspif N_Rx_Statin=. then N_Rx_Statin=0&#59<br/>&nbsp&nbsp&nbsp&nbspRxAttrStr = strip(N_Rx_AllMed) || \":\" || strip(N_Rx_Statin) || \":\" || strip(N_Rx_AllPt) || \":\" || strip(N_Rx_StatinPt) &#59<br/>run&#59 <br/>%print(data=ZXZB_C7)<br/><br/>/*ZXZB_C7.  link ZXZB_C6 and ZXZB_B to indicate the Rx related attributes for UCPF1*/<br/>/*ZXZB_C7a. Get the docid of UCPF1 */<br/>data ZXZB_C7a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_B&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPF1, 1, \":\")&#59  <br/>run&#59<br/>/*ZXZB_C7b. link ZXZB_C7a and ZXZB_C6 to indicate the MSB related attributes for UCPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C7a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C7b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*ZXZB_C7c. Append RxAttrStr to UCPF1*/<br/>Data ZXZB_C7&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C7b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPF1=strip(UCPF1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/>/*ZXZB_C8.  link ZXZB_C6 and ZXZB_C7 to indicate the Rx related attributes for UCPW1*/<br/>/*ZXZB_C8a. Get the docid for UCPW1*/<br/>data ZXZB_C8a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C7&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(UCPW1, 1, \":\")&#59  <br/>run&#59<br/>/*ZXZB_C8b. link ZXZB_C8a and ZXZB_C6 (with Rx related attributes) to indicate the MSB related attributes for UCPW1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C8a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*ZXZB_C8c. Append RxAttrStr to UCPW1*/<br/>Data ZXZB_C8&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C8b&#59<br/>&nbsp&nbsp&nbsp&nbspUCPW1=strip(UCPW1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/>/*ZXZB_C9.  link ZXZB_C6 and ZXZB_C7 to indicate the Rx related attributes for USPF1*/<br/>/*ZXZB_C9a. Get the docid for USPF1*/<br/>data ZXZB_C9a&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C8&#59<br/>&nbsp&nbsp&nbsp&nbsplength key_doc_num $11. &#59<br/>&nbsp&nbsp&nbsp&nbspkey_doc_num = scan(USPF1, 1, \":\")&#59  <br/>run&#59<br/>/*ZXZB_C8b. link ZXZB_C8a and ZXZB_C6 (with Rx related attributes) to indicate the MSB related attributes for USPF1*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZB_C9a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZB_C6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZB_C9b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifc(T2.RxAttrStr=\"\", \"0:0\", t2.RxAttrStr) as RxAttrStr),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=key_doc_num entryDate<br/>)&#59<br/>/*ZXZB_C8c. Append RxAttrStr to USPF1*/<br/>Data ZXZB_C&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C9b&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF1=strip(USPF1) || \":\" || RxAttrStr&#59<br/>&nbsp&nbsp&nbsp&nbspdrop RxAttrStr key_doc_num&#59<br/>run&#59<br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=ZXZB_C.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=ZXZB_C.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/>%beep&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"0879784e-6ec8-4309-acd6-bd22015a66c1"},{"idx":"MY333d815a-585f-435e-ace5-442efc1805b9"}]}]},{"idx":"MY71606a8e-adcd-40e3-a69e-0bfb9abd7a6a","name":"3. adherence","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"},{"idx":"MY18912ac4-4c8e-4874-88cb-88a73a464d9a"}],"children":[{"idx":"50fd26b8-19ba-4b12-9e2c-c79a18686426","name":"ZXZC_ USPF PCT_AdhPt","NodeDescription":"///t<br/>///s<br/>/*ZXZC, category of adherence patients */<br/><br/>data _null_&#59run&#59<br/><br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZB_C.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZB_C.sas7bdat)<br/>)&#59<br/><br/><br/>data ZXZC1&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZB_C&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF = scan(USPF1, 1, \":\")&#59<br/>run&#59<br/><br/>/*count # of adh statin new users, and # of all statin new users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZC1,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZC2,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(USPF, sum(Adherence_Adjust) as N_AdhPt, count(key_hsn) as N_Patients),<br/>&nbsp&nbsp&nbsp&nbspgroupby = USPF,<br/>&nbsp&nbsp&nbsp&nbsporderby = USPF<br/>)&#59<br/>/*pct of adh patients*/<br/>data ZXZC3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZC2&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AdhPT = N_AdhPt / N_Patients&#59<br/>run&#59<br/><br/>/*distribution on pct of adh patients*/<br/>proc univariate data=ZXZC3&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram PCT_AdhPT /normal endpoints= (0 to 1 by .05)  outhistogram=ZXZC3a&#59<br/>run&#59<br/><br/>/*get mean median pct of adh patients*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXZC3,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=PCT_AdhPT,<br/>&nbsp&nbsp&nbsp&nbsptheStats=mean min max std median,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZC4,<br/>&nbsp&nbsp&nbsp&nbsppersonID=USPF,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>/*Category USPFs as high/low percentage of statin users for each 2-year periods*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZC3,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZC4,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZC5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t1.PCT_AdhPT >=t2.median, 1, 0 ) as HighPCTAdhPT),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross,<br/>&nbsp&nbsp&nbsp&nbsporderby=uspf<br/>)&#59<br/>%freq(data=ZXZC5, table=HighPCTAdhPT)&#59<br/><br/>/*link the HighPCTAdhPT back to the cohort*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZC1,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZC5,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZC,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.HighPCTAdhPT, t2.PCT_AdhPT),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=uspf<br/>)&#59<br/><br/><br/>%vbsZip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=%str(&localTargetPath2), <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=ZXZC.zip, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=ZXZC.sas7bdat, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcDir=<br/>)&#59<br/><br/><br/>s///<br/>t///","children":[],"custparents":[{"idx":"a8d4ae3f-36b3-4c3b-b760-a73a9f8ccb28"},{"idx":"MY71606a8e-adcd-40e3-a69e-0bfb9abd7a6a"}]}]},{"idx":"MY3ca91521-cbd9-435d-890d-b52292af17b6","name":"4. statistical analyses (study objs)","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"}],"children":[{"idx":"MY2b270e6d-574c-49f4-97d9-67ac26f0c9d9","name":"4.2 pct of concordance to adh at prescriber level","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"},{"idx":"MY3ca91521-cbd9-435d-890d-b52292af17b6"}],"children":[{"idx":"b0a2ecbd-2c9f-4f75-83ad-c5b69397445e","name":"ZXZD_A Logistic_data (pct concord to pct of adh)","NodeDescription":"///t<br/>///s<br/>/*ZXZD_A logistic regression data<br/>&nbsp&nbsp&nbsp&nbspmean for each doc<br/>*/<br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZC.sas7bdat)<br/>)&#59<br/><br/><br/>/*keep relevant GP characteristics*/<br/>data ZXZD_A1&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZC&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn USPF Adherence_adjust USPF1 EntryYear age sex_desc  compfs UPCIndexF UPCIndexFP50 &#59<br/>run&#59<br/><br/>data ZXZD_A2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_A1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DocSex $1.&#59<br/>&nbsp&nbsp&nbsp&nbspDocSex = scan(USPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge = EntryYear - scan(USPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs =EntryYear - scan(USPF1, 6, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradCtry = scan(USPF1, 8, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPayType=scan(USPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits = input(scan(USPF1, 10, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize = input(scan(USPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx = input(scan(USPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx = input(scan(USPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRxPCT = DocStatinRx/DocRx&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinPts = input(scan(USPF1, 15, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspConcord_Age= 0&#59<br/>&nbsp&nbsp&nbsp&nbspif abs(DocAge - age) <=5 then  Concord_Age=1&#59<br/>&nbsp&nbsp&nbsp&nbspConcord_Sex=0&#59<br/>&nbsp&nbsp&nbsp&nbspif DocSex=sex_desc then Concord_Sex=1&#59<br/>&nbsp&nbsp&nbsp&nbspdrop sex_desc age  UPCIndexFP50 UCPF1 USPF1&#59<br/>run&#59 <br/>%freq(data=ZXZD_A2, table=DocPayType)&#59<br/><br/>data ZXZD_A3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_A2&#59<br/>&nbsp&nbsp&nbsp&nbspif DocPayType ne 'UNKW' and DocPayType ne '_'&#59<br/>run&#59<br/><br/><br/>/*get the mean per doc*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_A3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_A4,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuspf, docSex, DocGradCtry,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcount(key_hsn) as nPt,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Adherence_adjust) as npt_adh,&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(docage)/count(USPF) as DocAge,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocGradYrs)/count(USPF) as DocGradYrs,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocNVisits)/count(USPF) as DocNVisits,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocPtSize)/count(USPF) as DocPtSize,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocRx)/count(USPF) as DocRx,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocStatinRx)/count(USPF) as DocStatinRx,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(DocStatinPts)/count(USPF) as DocStatinPts,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Concord_Age)/count(USPF)*100 as Concord_AgePCT,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsum(Concord_Sex)/count(USPF)*100 as Concord_SexPCT<br/>&nbsp&nbsp&nbsp&nbsp),<br/>&nbsp&nbsp&nbsp&nbspgroupby=%str(uspf, docSex, DocGradCtry )<br/>)&#59<br/><br/>/*fee for service?*/<br/><br/>data ZXZD_A5&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_A4&#59<br/>&nbsp&nbsp&nbsp&nbspPCT_AdhPT=npt_adh/nPt&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge=round(DocAge, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs=round(DocGradYrs, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits=round(DocNVisits, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize=round(DocPtSize, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx=round(DocRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx=round(DocStatinRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinPts=round(DocStatinPts, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspConcord_AgePCT=round(Concord_AgePCT, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspConcord_SexPCT=round(Concord_SexPCT, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGradYrs >=0&#59<br/>run&#59<br/><br/>proc univariate data=ZXZD_A5&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram PCT_AdhPT /normal endpoints= (0 to 1 by .05)  outhistogram=ZXZD_A21a&#59<br/>run&#59<br/><br/>/*get mean median pct of adh patients*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXZD_A5,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsptheVar=PCT_AdhPT,<br/>&nbsp&nbsp&nbsp&nbsptheStats=mean min max std median,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_A6,<br/>&nbsp&nbsp&nbsp&nbsppersonID=USPF,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>/*Category USPFs as high/low percentage of statin users for each 2-year periods*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_A5,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZD_A6,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_A7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t1.PCT_AdhPT >=t2.median, 1, 0 ) as HighPCTAdhPT, uspf as key_hsn),<br/>&nbsp&nbsp&nbsp&nbspjtype=cross,<br/>&nbsp&nbsp&nbsp&nbsporderby=uspf<br/>)&#59<br/><br/>/*the key_hsn is a pseudo code for doc id*/<br/>data ZXZD_A&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_A7&#59<br/>&nbsp&nbsp&nbsp&nbspdrop PCT_AdhPT&#59<br/>&nbsp&nbsp&nbsp&nbspdrop uspf&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize100 = round(DocPtSize/100, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspdrop docPTSize&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"8de27eb3-d7dd-4f57-b582-e5a3e3ee4ffd","name":"ZXZG Logistic","NodeDescription":"<p>///t</p><p>///s</p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">/*logistic, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;main =ageconcord</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\">data _null_;run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%print(data=ZXZD_A);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let theMainvar=DocGradCtry;</div><div class=\"ql-code-block\">%let numCoVars =&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;DocAge</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;DocGradYrs*/</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;DocNVisits*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;DocPtSize100</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;DocStatinPts</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;Concord_AgePCT</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;Concord_SexPCT</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;DocStatinRx*/</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\">%let catCoVars =</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;entryYear*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;DocSex</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let outcomeVar=HighPCTAdhPT;</div><div class=\"ql-code-block\">%let groupVars = key_hsn;</div><div class=\"ql-code-block\">%let CatMainVar=&amp;theMainvar;</div><div class=\"ql-code-block\">%let NumMainvar=;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%testLogistic(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;teestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZG), </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theMainV=&amp;theMainvar, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;srcData0=ZXZD_A,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keepvars=</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*from the results in ZXZG</div><div class=\"ql-code-block\">_Xpilot5a shows the VIF</div><div class=\"ql-code-block\">_Xpilot11b shows the vars that are siginificant</div><div class=\"ql-code-block\">X04_N*X01_C_CatN&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"ql-code-block\">X01_C_CatN&nbsp;&nbsp;&nbsp;&nbsp;X01_C</div><div class=\"ql-code-block\">X05_N_QUAN&nbsp;&nbsp;&nbsp;&nbsp;X05_N</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZG\";</div><div class=\"ql-code-block\">/*for univariate, about grad country*/</div><div class=\"ql-code-block\">ods results off;</div><div class=\"ql-code-block\">ods trace on;</div><div class=\"ql-code-block\">proc logistic data=teestt._XPilot4 namelen=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class X01_C_CatN /descending param=reference;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;ods output </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot28a1</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot28a3 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot28a4 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot28a5 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot28a7</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot28a8;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods trace off;</div><div class=\"ql-code-block\">ods results on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*for proportion of age and sex concordance*/</div><div class=\"ql-code-block\">ods results off;</div><div class=\"ql-code-block\">ods trace on;</div><div class=\"ql-code-block\">proc logistic data=teestt._XPilot4 namelen=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class X06_N_QUIN X07_N_QUIN/descending param=reference;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X06_N_QUIN X07_N_QUIN; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X06_N_QUIN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X07_N_QUIN ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;ods output </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot29a1</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot29a3 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot29a4 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot29a5 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot29a7</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot29a8;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods trace off;</div><div class=\"ql-code-block\">ods results on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*this part is only for the main analyses: to determine the vars in the model (the sensitivity test will follow the same vars as</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;this one*/</div><div class=\"ql-code-block\">/*****************************************************************************************************/</div><div class=\"ql-code-block\">data _XPilot21;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set teestT._XPilot11b ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable renamed original;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*there is a bug in _XPilot21, some _N type are missing*/</div><div class=\"ql-code-block\">/*get terms with the interctions*/</div><div class=\"ql-code-block\">data _XPilot31;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot21;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") &gt;0 ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;variable=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;variable=strip(tranwrd(variable, '*', ''));</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*combine _XPilot31 _XPilot21 and have a distinct list of variables*/</div><div class=\"ql-code-block\">data _XPilot32;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot31 _XPilot21;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">%sort(data=_XPilot32, sorter=variable descending renamed);</div><div class=\"ql-code-block\">data _XPilot33;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot32;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;by variable descending renamed;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if first.variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if renamed='' and index(variable, \"*\") = 0 then renamed =substr(variable, 1, 5);</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">/*lookup the original names*/</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot33,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot34,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.variable, t1.renamed, t2.original),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">data teestt._XPilot24;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot34;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if Variable='X01_C_CatN' then theVar=Variable;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*****************************************************************************************************/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*get a list of categorical vars (including cateogical type of the original continuous vars like age)*/</div><div class=\"ql-code-block\">data _XPilot25a;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set teestt._XPilot24;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, '*')=0 and (index(variable, '_C_')&gt;0 or index(variable, '_N_')&gt;0 );</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;by renamed;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if first.renamed; /*the X01_C_CatN appears three times for different COC tests*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*the var list for the class statement*/</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25a, theVar=variable, theStrVarName=theClassVars25a, DLMT= );</div><div class=\"ql-code-block\">/*add back X06 and X08 as they are not in the list*/</div><div class=\"ql-code-block\">%let theClassVars25=&amp;theClassVars25a ;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theClassVars25=&amp;theClassVars25;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*the vars for model statement*/</div><div class=\"ql-code-block\">%distinct(data=teestt._XPilot24, vars=variable, target=_XPilot25b);</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25b, theVar=variable, theStrVarName=theModelVars25a, DLMT= );</div><div class=\"ql-code-block\">/*add back X02 and X07 as they are not in the list*/</div><div class=\"ql-code-block\">%let theModelVars25=&amp;theModelVars25a ;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theModelVars25=&amp;theModelVars25;</div><div class=\"ql-code-block\">/**/</div><div class=\"ql-code-block\">/*%print(data=teestt._XPilot4);*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">ods results off;</div><div class=\"ql-code-block\">proc logistic data=teestt._XPilot4 namelen=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25 /descending param=reference;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;&amp;theModelVars25&nbsp;&nbsp;&nbsp;&nbsp;/lackfit; </div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ; */</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ods output </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA =_XPilot25a1 </div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot25a5 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FitStatistics = teestt._XPilot25a6 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot25a7*/</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8;*/</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods results on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*keep the interaction terms that are insignificant*/</div><div class=\"ql-code-block\">data _XPilot25a2;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25a1;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(effect, \"*\") ne 0 and probChisq &gt;0.05;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;rename effect=variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(effect, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*remove the interaction terms from _XPilot25b */</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=teestt._XPilot24,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=_XPilot25a2,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot25c,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.theVar as theVar2),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=theVar </div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\">/*delete the interaction terms matching theVar2*/</div><div class=\"ql-code-block\">data _XPilot25d;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25c;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") ne 0 and theVar2 ne '' then delete;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;drop theVar2;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25d, theVar=variable, theStrVarName=theModelVars25a2a, DLMT= );</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*add back X06 as they are not in the list, also add the interaction between </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sexConcord and DoxSex, DocGradYr (which turned out significant in ZXZF test)*/</div><div class=\"ql-code-block\">%let theModelVars25a2=&amp;theModelVars25a2a;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theModelVars25a2=&amp;theModelVars25a2;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%StringToTable(theStr=&amp;theModelVars25a2, target=_XPilot24a2, varname=variable, dlmt=, debug=);</div><div class=\"ql-code-block\">data _XPilot24a3;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot24a2;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if variable= 'X01_C_CatN' then theVar=variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;renamed =substr(theVar, 1, 5);</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">/*lookup the original names*/</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot24a3,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot24a,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.original),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%print(data=teestt._XPilot24a, obs=100);</div><div class=\"ql-code-block\">%ValueToString(Data=teestt._XPilot24a, theVar=variable, theStrVarName=theModelVars25a3a, DLMT= );</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; &amp;theModelVars25a3a;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZG\";</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*test results with repeat term*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*</div><div class=\"ql-code-block\">Note:</div><div class=\"ql-code-block\">PROC GENMOD is different from PROC Logistic</div><div class=\"ql-code-block\">in the class statement, use /param=glm/reference are the same, glm option allows statement of lsmeans</div><div class=\"ql-code-block\">/param=effect is different, the magnitude of effect is half of the setting of glm/ref</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*this part is totally manual, regardless of model test, and may change if data or selected vars changes</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;in that case, please recustomize</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\">%print(data=teestt.varsmap, obs=100);</div><div class=\"ql-code-block\">%let theModelVars35 = </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X02_C_CatN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X03_N_QUIN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X04_N_QUIN </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X04_N_QUIN*X01_C_CatN </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X05_N_QUAN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X06_N_QUIN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X07_N_QUIN</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let theClassVars35 =</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X02_C_CatN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X03_N_QUIN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X04_N_QUIN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X05_N_QUAN </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X06_N_QUIN</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X07_N_QUIN</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*ods trace on;*/</div><div class=\"ql-code-block\">proc logistic data=teestT._xPilot4 descending;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars35/ param=ref truncate=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (ref='0') =&amp;theModelVars35 /link=logit lackfit ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X02_C_CatN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X03_N_QUIN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddratio X04_N_QUIN / at (X01_C_CatN = '1') ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddratio X04_N_QUIN / at (X01_C_CatN = '2') ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X05_N_QUAN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X06_N_QUIN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X07_N_QUIN;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;ods output</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA =teestt._XPilot25a1</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot25a5 </div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEFitCriteria = teestt._XPilot25a6 */</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot25a7</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">/*ods trace off;*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%getFreq(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;data=teestt._XPilot4, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVars=&amp;theClassVars35, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;VarsMapFile=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;group=Y, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot27, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;dlmt=, debug=</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div></div><p><br></p><p><br></p><p><br></p><p><br></p><p>s///</p><p>t///</p>","custparents":[{"idx":"b0a2ecbd-2c9f-4f75-83ad-c5b69397445e"},{"idx":"MYe8612163-c3b8-43cd-91b9-5ae946acbe6f"}]}],"custparents":[{"idx":"50fd26b8-19ba-4b12-9e2c-c79a18686426"},{"idx":"MY2b270e6d-574c-49f4-97d9-67ac26f0c9d9"}]}]},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224","name":"4.3. concordance to adh at individual level","custparents":[{"idx":"83c58951-ec4b-44ab-b039-974c01e30777"},{"idx":"MY3ca91521-cbd9-435d-890d-b52292af17b6"}],"children":[{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba","name":"GEE methods","custparents":[{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"}],"children":[{"idx":"d26f8308-6308-4d14-ae0e-47023ce4215a","name":"ZXZD_B Data for GEE DocVars","NodeDescription":"<p>///t</p><p>///s</p><p>[_Q] Is this part for baseline ? (the concord vars only?)</p><p>/*this part is for GEE analysis of individual patients, but only with doc vars*/</p><p>/*ZXZD_B, data for logistic regression models*/</p><p>data _null_;run;</p><p><br></p><p>%VbsUnzip(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;tgtDir=,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;zipFile=%str(&amp;localTargetPath2.\\ZXZC.zip),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;srcFile=%str(ZXZC.sas7bdat)</p><p>);</p><p><br></p><p>/*keep relevant GP characteristics*/</p><p>data ZXZD_B1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set ZXZC;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;keep key_hsn Adherence_Adjust USPF HighPCTAdhPT PCT_AdhPT USPF1 EntryYear age sex_desc compfs UPCIndexF UPCIndexFP50 ;</p><p>run;</p><p><br></p><p>data ZXZD_B2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set ZXZD_B1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;format DocSex $1.;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocSex = scan(USPF1, 4, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocAge = EntryYear - scan(USPF1, 5, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocGradYrs =EntryYear - scan(USPF1, 6, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocGradCtry = scan(USPF1, 8, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocPayType=scan(USPF1, 9, \":\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocNVisits = input(scan(USPF1, 10, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocPtSize = input(scan(USPF1, 11, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocRx = input(scan(USPF1, 12, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocStatinRx = input(scan(USPF1, 13, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocStatinRxPCT = DocStatinRx/DocRx;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocStatinPts = input(scan(USPF1, 15, \":\"), 8.);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if DocAge - age &lt; -5 then AgeConcord=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if -5 &lt;= DocAge - age &lt; 0 then AgeConcord=2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if 0 &lt;= DocAge - age &lt;= 5 then AgeConcord=3;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if DocAge - age &gt;5 then AgeConcord=4;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;AgeConcordN=DocAge - age;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docSex='F' and Sex_desc='F' then SexConcord =1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docSex='M' and Sex_desc='M' then SexConcord =2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docSex='F' and Sex_desc='M' then SexConcord =3;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if docSex='M' and Sex_desc='F' then SexConcord =4;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if UPCIndexF ge UPCIndexFP50 then UPCCat='H';</p><p>&nbsp;&nbsp;&nbsp;&nbsp;else UPCCat='L';</p><p>&nbsp;&nbsp;&nbsp;&nbsp;drop age sex_desc UPCIndexF UPCIndexFP50 UCPF1 USPF1;</p><p>run;</p><p>%freq(data=ZXZD_B2, table=DocPayType);</p><p>/*%freq(data=ZXZD_B2, table=SexConcord docSex Sex_desc);*/</p><p><br></p><p>data ZXZD_B3;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set ZXZD_B2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if DocPayType ne 'UNKW' and DocPayType ne '_';</p><p>&nbsp;&nbsp;&nbsp;&nbsp;/*cannot keep them as they do not have or have few claims, unfair to compare on # visits and # visiting patients*/</p><p>run;</p><p><br></p><p><br></p><p><br></p><p>/*exclude patients whose USP had &lt; 6 statin new users*/</p><p>/*count USPF for their # of new statin users*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=ZXZD_B3,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=ZXZD_B4a,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(USPF, count(Key_hsn) as N_Pts),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;groupby=USPF</p><p>);</p><p><br></p><p>/*exclude those not having 6 patients (tried excluding those with &lt; 10 patients, more than half USPs were gone)*/</p><p>data ZXZD_B4b;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set ZXZD_B4a;</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;if N_Pts ge 6;*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;docID =_n_;</p><p>run;</p><p>/*in ZXZD_B3, select rows that the USPFs can be found in ZXZA2b*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=ZXZD_B3,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=ZXZD_B4b,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=ZXZD_B5,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.DocID),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=inner,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jvars=uspf</p><p>);</p><p><br></p><p><br></p><p><br></p><p>data ZXZD_B;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set ZXZD_B5;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocAge=round(DocAge, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocGradYrs=round(DocGradYrs, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocNVisits=round(DocNVisits, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocPtSize=round(DocPtSize, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocRx=round(DocRx, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocStatinRx=round(DocStatinRx, \"1\");</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if DocGradYrs &gt;=0;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;drop PCT_AdhPT;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;DocStatinRxPCT=round(DocStatinRxPCT *100, \"1\");</p><p>run;</p><p><br></p><p>s///</p><p>t///</p>","children":[{"idx":"9ca2ae81-b3fe-4767-9be4-42515d25ff06","name":"ZXZEB USPF level GEE_2levelAgeConCord DocVars Dichotomous ","NodeDescription":"///t<br/>///s<br/>/*<br/>Using Patient adherence results instead of GP<br/><br/>Using the same source file as ZXZD_B, just add 2 dichotomous measure for age and sex concord<br/><br/>1. AgeConcord2: if AgeConcord=1 or 4, X91_C_CatN =1<br/>2. SexConcord2: if SexConcord= 1 or 2, X92_C_CatN=1<br/><br/>in _xPilot4<br/><br/>GEE, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients <br/>&nbsp&nbsp&nbsp&nbspmain =ageconcord<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theMainvar=AgeConcord&#59<br/>%let numCoVars =&nbsp&nbsp&nbsp&nbsp<br/>/*DocAge*/<br/>DocGradYrs<br/>/*DocNVisits*/<br/>DocPtSize<br/>DocRx<br/>/*DocStatinRx*/<br/>/*DocStatinRxPCT*/<br/>DocStatinPts<br/>&#59<br/>%let catCoVars =<br/>COMPFS<br/>/*DocSex*/<br/>DocGradCtry<br/>DocPayType<br/>SexConcord<br/>UPCCat<br/>&#59<br/>%let repeatVar=USPF&#59<br/>%let outcomeVar=Adherence_Adjust&#59<br/>%let groupVars = key_hsn&#59<br/>%let CatMainVar=&theMainvar&#59<br/>%let NumMainvar=&#59<br/><br/>libname teestt0 \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA\"&#59<br/>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEB\"&#59<br/><br/><br/>/*%testLogistic(*/<br/>/*&nbsp&nbsp&nbsp&nbspteestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA), */<br/>/*&nbsp&nbsp&nbsp&nbsptheMainV=&theMainvar, */<br/>/*&nbsp&nbsp&nbsp&nbspsrcData0=ZXZD_B,*/<br/>/*&nbsp&nbsp&nbsp&nbspkeepvars=USPF DocID*/<br/>/*)&#59*/<br/><br/>/*for univariate age and sex concordance*/<br/>/*<br/>1. AgeConcord2: if AgeConcord=1 or 4, X91_C_CatN =1<br/>2. SexConcord2: if SexConcord= 1 or 2, X92_C_CatN=1<br/>*/<br/><br/><br/>data teestt._XPilot4 &#59<br/>&nbsp&nbsp&nbsp&nbspset teestt0._XPilot4 &#59<br/>&nbsp&nbsp&nbsp&nbspif X01_C_CatN=2 or X01_C_CatN=3 then X91_C_CatN =1&#59 else X91_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspif X05_C_CatN=1 or X05_C_CatN=2 then X92_C_CatN =1&#59 else X92_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspif X01_C_CatN=2 or X01_C_CatN=3 then X91_C_CatC ='1'&#59 else X91_C_CatC='0'&#59<br/>&nbsp&nbsp&nbsp&nbspif X05_C_CatN=1 or X05_C_CatN=2 then X92_C_CatC ='1'&#59 else X92_C_CatC='0'&#59<br/>run&#59<br/>%freq(data=teestt._XPilot4, table=X01_C_CatN * X91_C_CatN)&#59<br/>%freq(data=teestt._XPilot4, table=X05_C_CatN * X92_C_CatN)&#59<br/><br/>ods results off&#59<br/>ods trace on&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass   X91_C_CatN X92_C_CatN /descending  param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp model Y (Ref='0') =&nbsp&nbsp&nbsp&nbspX91_C_CatN X92_C_CatN&#59  <br/>&nbsp&nbsp&nbsp&nbsp oddsratio X91_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbsp oddsratio X92_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA = teestt._XPilot28a1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot28a3 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot28a4 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot28a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot28a7<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot28a8&#59<br/>run&#59<br/>ods trace off&#59<br/>ods results on&#59<br/><br/><br/><br/>%let theModelVars45 =<br/>X91_C_CatN<br/>X02_C_CatN<br/>X03_C_CatN<br/>X04_C_CatN<br/>X92_C_CatN<br/>X06_C_CatN<br/><br/>X07_N_QUAN<br/>X91_C_CatN*X07_N_QUAN<br/>X08_N_QUIN<br/>X10_N_QUIN<br/>&#59<br/>ods trace on&#59<br/><br/>%let theClassVars45=<br/>&nbsp&nbsp&nbsp&nbspX91_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX02_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX03_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX04_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX92_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX06_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX07_N_QUAN<br/>&nbsp&nbsp&nbsp&nbspX08_N_QUIN<br/>&nbsp&nbsp&nbsp&nbspX10_N_QUIN<br/>&#59<br/>%put >>> theClassVars45=&theClassVars45 &#59<br/>/*X01_C_CatN X02_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN X06_C_CatN X07_N_QUAN X08_N_QUIN X10_N_QUIN X05_C_CatN*/<br/>proc genmod data=teestT._xPilot4 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass &theClassVars45 &repeatVar  /param=glm  truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (ref='0') =&theModelVars45   / dist=binomial link=logit type3 &#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=&repeatVar /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType3 =teestt._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEEmpPEst= teestt._XPilot25a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEFitCriteria = teestt._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt._XPilot25a9 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt._XPilot25a10 <br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X91_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X02_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X03_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X92_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X06_C_CatN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X91_C_CatN*X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X08_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X10_N_QUIN/ ilink oddsratio diff cl&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=teestt._XPilot25a9  (keep=key_hsn Y p) p=p&#59*/<br/>run&#59<br/>ods trace off&#59<br/>/*suppress the USPF IDs*/<br/>data teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/><br/><br/>data ZXZEB_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsprenamed = 'X91_C'&#59<br/>&nbsp&nbsp&nbsp&nbsporiginal =&nbsp&nbsp&nbsp&nbsp'AgeConcord_Binary'&#59<br/>&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsprenamed = 'X92_C'&#59<br/>&nbsp&nbsp&nbsp&nbsporiginal =&nbsp&nbsp&nbsp&nbsp'SexConcord_Binary'&#59<br/>&nbsp&nbsp&nbsp&nbspoutput&#59<br/>run&#59<br/>data teestt.varsmap &#59<br/>&nbsp&nbsp&nbsp&nbspset teestt0.varsmap ZXZEB_tmp1 &#59<br/>run&#59<br/><br/><br/>%getFreq(<br/>&nbsp&nbsp&nbsp&nbspdata=teestt._XPilot4, <br/>&nbsp&nbsp&nbsp&nbsptheVars=&theClassVars45, <br/>&nbsp&nbsp&nbsp&nbspVarsMapFile=teestt.varsmap,<br/>&nbsp&nbsp&nbsp&nbspgroup=Y,  <br/>&nbsp&nbsp&nbsp&nbsptarget=teestt._XPilot27, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, debug=<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"d26f8308-6308-4d14-ae0e-47023ce4215a"},{"idx":"MY8343af43-b3b9-40b7-a0fb-1e9e05c334d3"}]}],"custparents":[{"idx":"50fd26b8-19ba-4b12-9e2c-c79a18686426"},{"idx":"b0a2ecbd-2c9f-4f75-83ad-c5b69397445e"},{"idx":"MY2b270e6d-574c-49f4-97d9-67ac26f0c9d9"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"}]},{"idx":"1966718e-928a-4eb8-b792-894efe416470","name":"ZXZD_BC Data for GEE DocVars 10 year Binary","NodeDescription":"///t<br/>///s<br/>/*ZXZD_BC, data for logistic regression models<br/>&nbsp&nbsp&nbsp&nbspfor sen test ZXZEC<br/>&nbsp&nbsp&nbsp&nbspbinary, years = 10<br/>*/<br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZC.sas7bdat)<br/>)&#59<br/><br/>/*keep relevant GP characteristics*/<br/>data ZXZD_BC1&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZC&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn Adherence_Adjust USPF HighPCTAdhPT PCT_AdhPT USPF1 EntryYear age sex_desc  compfs UPCIndexF UPCIndexFP50 &#59<br/>run&#59<br/><br/>data ZXZD_BC2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_BC1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DocSex $1.&#59<br/>&nbsp&nbsp&nbsp&nbspDocSex = scan(USPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge = EntryYear - scan(USPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs =EntryYear - scan(USPF1, 6, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradCtry = scan(USPF1, 8, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPayType=scan(USPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits = input(scan(USPF1, 10, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize = input(scan(USPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx = input(scan(USPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx = input(scan(USPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRxPCT = DocStatinRx/DocRx&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinPts = input(scan(USPF1, 15, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif DocAge - age < -10 then AgeConcord=1&#59<br/>&nbsp&nbsp&nbsp&nbspif -10 <= DocAge - age < 0 then AgeConcord=2&#59<br/>&nbsp&nbsp&nbsp&nbspif 0 <= DocAge - age <= 10 then AgeConcord=3&#59<br/>&nbsp&nbsp&nbsp&nbspif  DocAge - age >10  then AgeConcord=4&#59<br/>&nbsp&nbsp&nbsp&nbspAgeConcordN=DocAge - age&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='F' and Sex_desc='F' then SexConcord =1&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='M' and Sex_desc='M' then SexConcord =2&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='F' and Sex_desc='M' then SexConcord =3&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='M' and Sex_desc='F' then SexConcord =4&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF ge UPCIndexFP50 then UPCCat='H'&#59<br/>&nbsp&nbsp&nbsp&nbspelse UPCCat='L'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop  age sex_desc UPCIndexF UPCIndexFP50 UCPF1 USPF1&#59<br/>run&#59 <br/>%freq(data=ZXZD_BC2, table=DocPayType)&#59<br/>/*%freq(data=ZXZD_BC2, table=SexConcord docSex Sex_desc)&#59*/<br/><br/>data ZXZD_BC3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_BC2&#59<br/>&nbsp&nbsp&nbsp&nbspif DocPayType ne 'UNKW' and DocPayType ne '_'&#59<br/>&nbsp&nbsp&nbsp&nbsp/*cannot keep them as they do not have or have few claims, unfair to compare on # visits and # visiting patients*/<br/>run&#59<br/><br/><br/><br/>/*exclude patients whose USP had < 6 statin new users*/<br/>/*count USPF for their # of new statin users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_BC3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_BC4a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(USPF, count(Key_hsn) as N_Pts),<br/>&nbsp&nbsp&nbsp&nbspgroupby=USPF<br/>)&#59<br/><br/>/*exclude those not having 6 patients (tried excluding those with < 10 patients, more than half USPs were gone)*/<br/>data ZXZD_BC4b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_BC4a&#59<br/>/*&nbsp&nbsp&nbsp&nbspif N_Pts ge 6&#59*/<br/>&nbsp&nbsp&nbsp&nbspdocID =_n_&#59<br/>run&#59<br/>/*in ZXZD_BC3, select rows that the USPFs can be found in ZXZA2b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_BC3,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZD_BC4b,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_BC5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.DocID),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=uspf<br/>)&#59<br/><br/><br/><br/>data ZXZD_BC&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_BC5&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge=round(DocAge, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs=round(DocGradYrs, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits=round(DocNVisits, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize=round(DocPtSize, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx=round(DocRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx=round(DocStatinRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGradYrs >=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop PCT_AdhPT&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRxPCT=round(DocStatinRxPCT *100, \"1\")&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"be210d3d-abbe-4cd9-8458-17ef8ffd4b8a","name":"ZXZEC USPF level GEE_4levelAgeConCord DocVars10 years Binary","NodeDescription":"<p>///t</p><p>[_W] This old version test is wrong, it uses ZXZD_B as the source data which is based on 5 year diff, should use ZXZD_BC though</p><p>[to do]</p><p>///s</p><p>/*</p><p>Using Patient adherence results instead of GP 10 years for concordance instead of 5 years</p><p><br></p><p>GEE, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients </p><p>&nbsp;&nbsp;&nbsp;&nbsp;main =ageconcord</p><p>*/</p><p><br></p><p>data _null_;run;</p><p><br></p><p>%let theMainvar=AgeConcord;</p><p>%let numCoVars =&nbsp;&nbsp;&nbsp;&nbsp;</p><p>/*DocAge*/</p><p>DocGradYrs</p><p>/*DocNVisits*/</p><p>DocPtSize</p><p>DocRx</p><p>/*DocStatinRx*/</p><p>/*DocStatinRxPCT*/</p><p>DocStatinPts</p><p>;</p><p>%let catCoVars =</p><p>COMPFS</p><p>/*DocSex*/</p><p>DocGradCtry</p><p>DocPayType</p><p>SexConcord</p><p>UPCCat</p><p>;</p><p>%let repeatVar=USPF;</p><p>%let outcomeVar=Adherence_Adjust;</p><p>%let groupVars = key_hsn;</p><p>%let CatMainVar=&amp;theMainvar;</p><p>%let NumMainvar=;</p><p>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEC\";</p><p><br></p><p>%testLogistic(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;teestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEC), </p><p>&nbsp;&nbsp;&nbsp;&nbsp;theMainV=&amp;theMainvar, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;srcData0=ZXZD_B,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;keepvars=USPF DocID</p><p>);</p><p><br></p><p>/*for univariate (AgeConcord), should add SexConcord*/</p><p>ods results off;</p><p>ods trace on;</p><p>proc logistic data=teestt._XPilot4 namelen=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class X01_C_CatN X05_C_CatN /descending param=reference;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN X05_C_CatN; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X05_C_CatN ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ods output </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot28a1</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot28a3 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot28a4 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot28a5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot28a7</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot28a8;</p><p>run;</p><p>ods trace off;</p><p>ods results on;</p><p><br></p><p><br></p><p><br></p><p>/*for univariate country of med training*/</p><p>ods results off;</p><p>ods trace on;</p><p>proc logistic data=teestt._XPilot4 namelen=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class X03_C_CatN /descending param=reference;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X03_C_CatN ; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X03_C_CatN ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ods output </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot31a1</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot31a3 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot31a4 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot31a5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot31a7</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot31a8;</p><p>run;</p><p>ods trace off;</p><p>ods results on;</p><p><br></p><p>/*for univariate FFS NFFS*/</p><p>ods results off;</p><p>ods trace on;</p><p>proc logistic data=teestt._XPilot4 namelen=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class X04_C_CatN /descending param=reference;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X04_C_CatN ; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X04_C_CatN ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ods output </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot32a1</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot32a3 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot32a4 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot32a5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot32a7</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot32a8;</p><p>run;</p><p>ods trace off;</p><p>ods results on;</p><p><br></p><p>/*this part is only for the main analyses: to determine the vars in the model (the sensitivity test will follow the same vars as</p><p>&nbsp;&nbsp;&nbsp;&nbsp;this one*/</p><p>/*****************************************************************************************************/</p><p>data _XPilot21;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set teestT._XPilot11b ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;keep variable renamed original;</p><p>run;</p><p><br></p><p>/*there is a bug in _XPilot21, some _N type are missing*/</p><p>/*get terms with the interctions*/</p><p>data _XPilot31;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot21;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") &gt;0 ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;variable=tranwrd(variable, 'X01_C_CatN', '');</p><p>&nbsp;&nbsp;&nbsp;&nbsp;variable=strip(tranwrd(variable, '*', ''));</p><p>run;</p><p><br></p><p>/*combine _XPilot31 _XPilot21 and have a distinct list of variables*/</p><p>data _XPilot32;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot31 _XPilot21;</p><p>run;</p><p>%sort(data=_XPilot32, sorter=variable descending renamed);</p><p>data _XPilot33;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot32;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;by variable descending renamed;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if first.variable;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if renamed='' and index(variable, \"*\") = 0 then renamed =substr(variable, 1, 5);</p><p>run;</p><p>/*lookup the original names*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot33,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot34,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.variable, t1.renamed, t2.original),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</p><p>);</p><p><br></p><p><br></p><p>data teestt._XPilot24;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot34;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if Variable='X01_C_CatN' then theVar=Variable;</p><p>run;</p><p><br></p><p>/*****************************************************************************************************/</p><p><br></p><p><br></p><p>/*get a list of categorical vars (including cateogical type of the original continuous vars like age)*/</p><p>data _XPilot25a;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set teestt._XPilot24;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, '*')=0 and (index(variable, '_C_')&gt;0 or index(variable, '_N_')&gt;0 );</p><p>&nbsp;&nbsp;&nbsp;&nbsp;by renamed;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if first.renamed; /*the X01_C_CatN appears three times for different COC tests*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</p><p>run;</p><p><br></p><p>/*the var list for the class statement*/</p><p>%ValueToString(Data=_XPilot25a, theVar=variable, theStrVarName=theClassVars25a, DLMT= );</p><p>/*add back X06 and X08 as they are not in the list*/</p><p>%let theClassVars25=&amp;theClassVars25a ;</p><p>%put &gt;&gt;&gt; theClassVars25=&amp;theClassVars25;</p><p><br></p><p><br></p><p>/*the vars for model statement*/</p><p>%distinct(data=teestt._XPilot24, vars=variable, target=_XPilot25b);</p><p>%ValueToString(Data=_XPilot25b, theVar=variable, theStrVarName=theModelVars25a, DLMT= );</p><p>/*add back X02 and X07 as they are not in the list*/</p><p>%let theModelVars25=&amp;theModelVars25a ;</p><p>%put &gt;&gt;&gt; theModelVars25=&amp;theModelVars25;</p><p><br></p><p><br></p><p>ods results off;</p><p>proc logistic data=teestt._XPilot4 namelen=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25 /descending param=reference;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;&amp;theModelVars25&nbsp;&nbsp;&nbsp;&nbsp;/lackfit; </p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ; */</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ods output </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA =_XPilot25a1 </p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot25a5 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FitStatistics = teestt._XPilot25a6 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot25a7*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8;*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</p><p>run;</p><p>ods results on;</p><p><br></p><p>/*keep the interaction terms that are insignificant*/</p><p>data _XPilot25a2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25a1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if index(effect, \"*\") ne 0 and probChisq &gt;0.05;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;rename effect=variable;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(effect, 'X01_C_CatN', '');</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</p><p>run;</p><p><br></p><p>/*remove the interaction terms from _XPilot25b */</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=teestt._XPilot24,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=_XPilot25a2,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot25c,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.theVar as theVar2),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jvars=theVar </p><p>);</p><p>/*delete the interaction terms matching theVar2*/</p><p>data _XPilot25d;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25c;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") ne 0 and theVar2 ne '' then delete;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;drop theVar2;</p><p>run;</p><p>%ValueToString(Data=_XPilot25d, theVar=variable, theStrVarName=theModelVars25a2a, DLMT= );</p><p><br></p><p>/*add back X06 as they are not in the list, also add the interaction between </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sexConcord and DoxSex, DocGradYr (which turned out significant in ZXZF test)*/</p><p>%let theModelVars25a2=&amp;theModelVars25a2a ;</p><p>%put &gt;&gt;&gt; theModelVars25a2=&amp;theModelVars25a2;</p><p><br></p><p>%StringToTable(theStr=&amp;theModelVars25a2, target=_XPilot24a2, varname=variable, dlmt=, debug=);</p><p>data _XPilot24a3;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot24a2;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if variable= 'X01_C_CatN' then theVar=variable;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;renamed =substr(theVar, 1, 5);</p><p>run;</p><p>/*lookup the original names*/</p><p>%sqljoinv2(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot24a3,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot24a,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.original),</p><p>&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</p><p>);</p><p><br></p><p>%print(data=teestt._XPilot24a, obs=100);</p><p>%ValueToString(Data=teestt._XPilot24a, theVar=variable, theStrVarName=theModelVars25a3a, DLMT= );</p><p><br></p><p><br></p><p><br></p><p>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEC\";</p><p><br></p><p>/*test results with repeat term*/</p><p>ods trace on;</p><p>/*</p><p>Note:</p><p>PROC GENMOD is different from PROC Logistic</p><p>in the class statement, use /param=glm/reference are the same, glm option allows statement of lsmeans</p><p>/param=effect is different, the magnitude of effect is half of the setting of glm/ref</p><p>*/</p><p>proc genmod data=teestT._xPilot4 descending;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25 &amp;repeatVar / param=glm truncate=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (ref='0') =&amp;theModelVars25a3a / dist=binomial link=logit type3 ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;repeated subject=&amp;repeatVar /type=exch;</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;ods output*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type3 =teestt._XPilot25a1*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEEmpPEst= teestt._XPilot25a5 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEFitCriteria = teestt._XPilot25a6 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevels=teestt._XPilot25a7*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;;*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X04_C_CatN/ ilink oddsratio diff cl; */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;estimate 'X04_C_CatN 1 vs 4' X04_C_CatN 1 -1 /exp;*/</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</p><p>run;</p><p>ods trace off;</p><p><br></p><p><br></p><p><br></p><p>%let theModelVars45 =</p><p>X01_C_CatN</p><p>X02_C_CatN</p><p>X03_C_CatN</p><p>X04_C_CatN</p><p>X05_C_CatN</p><p>X06_C_CatN</p><p><br></p><p>X07_N_QUAN</p><p>X01_C_CatN*X07_N_QUAN</p><p>X08_N_QUIN</p><p>X10_N_QUIN</p><p>;</p><p>ods trace on;</p><p><br></p><p>%let theClassVars45=</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X02_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X03_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X04_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X05_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X06_C_CatN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X07_N_QUAN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X08_N_QUIN</p><p>&nbsp;&nbsp;&nbsp;&nbsp;X10_N_QUIN</p><p>;</p><p>%put &gt;&gt;&gt; theClassVars45=&amp;theClassVars45 ;</p><p>/*X01_C_CatN X02_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN X06_C_CatN X07_N_QUAN X08_N_QUIN X10_N_QUIN X05_C_CatN*/</p><p>proc genmod data=teestT._xPilot4 descending;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars45 &amp;repeatVar /param=glm truncate=200;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;model Y (ref='0') =&amp;theModelVars45 / dist=binomial link=logit type3 ;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;repeated subject=&amp;repeatVar /type=exch;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;ods output</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type3 =teestt._XPilot25a1</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</p><p><br></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEEmpPEst= teestt._XPilot25a5 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEFitCriteria = teestt._XPilot25a6 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevels=teestt._XPilot25a7</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8*/</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LSMeans =teestt._XPilot25a9 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diffs = teestt._XPilot25a10 </p><p>&nbsp;&nbsp;&nbsp;&nbsp;;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X01_C_CatN/ ilink oddsratio diff cl; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X02_C_CatN/ ilink oddsratio diff cl; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X03_C_CatN/ ilink oddsratio diff cl; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X04_C_CatN/ ilink oddsratio diff cl; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X05_C_CatN/ ilink oddsratio diff cl; </p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X06_C_CatN/ ilink oddsratio diff cl;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X07_N_QUAN/ ilink oddsratio diff cl;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X01_C_CatN*X07_N_QUAN/ ilink oddsratio diff cl;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X08_N_QUIN/ ilink oddsratio diff cl;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X10_N_QUIN/ ilink oddsratio diff cl;</p><p>/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</p><p>run;</p><p>ods trace off;</p><p>/*suppress the USPF IDs*/</p><p>data teestt._XPilot25a7;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;set teestt._XPilot25a7;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;if class ne 'USPF';</p><p>run;</p><p><br></p><p><br></p><p>%getFreq(</p><p>&nbsp;&nbsp;&nbsp;&nbsp;data=teestt._XPilot4, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;theVars=&amp;theClassVars45, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;VarsMapFile=teestt.varsmap,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;group=Y, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot27, </p><p>&nbsp;&nbsp;&nbsp;&nbsp;dlmt=, debug=</p><p>);</p><p><br></p><p>%beep;</p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>s///</p><p>t///</p>","custparents":[{"idx":"1966718e-928a-4eb8-b792-894efe416470"}]},{"idx":"3696d430-4f82-47f4-8dd8-c714157fd897","name":"ZXZED USPF level GEE_2levelAgeConCord DocVars Dichotomous 10 years","NodeDescription":"///t<br/>///s<br/>/*<br/>Using Patient adherence results instead of GP<br/><br/>Using the same source file as ZXZD_BC, just add 2 dichotomous measure for age and sex concord<br/><br/>1. AgeConcord2: if AgeConcord=1 or 4, X91_C_CatN =1<br/>2. SexConcord2: if SexConcord= 1 or 2, X92_C_CatN=1<br/><br/>in _xPilot4<br/><br/>GEE, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients <br/>&nbsp&nbsp&nbsp&nbspmain =ageconcord<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theMainvar=AgeConcord&#59<br/>%let numCoVars =&nbsp&nbsp&nbsp&nbsp<br/>/*DocAge*/<br/>DocGradYrs<br/>/*DocNVisits*/<br/>DocPtSize<br/>DocRx<br/>/*DocStatinRx*/<br/>/*DocStatinRxPCT*/<br/>DocStatinPts<br/>&#59<br/>%let catCoVars =<br/>COMPFS<br/>/*DocSex*/<br/>DocGradCtry<br/>DocPayType<br/>SexConcord<br/>UPCCat<br/>&#59<br/>%let repeatVar=USPF&#59<br/>%let outcomeVar=Adherence_Adjust&#59<br/>%let groupVars = key_hsn&#59<br/>%let CatMainVar=&theMainvar&#59<br/>%let NumMainvar=&#59<br/><br/>libname teestt0 \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEC\"&#59<br/>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZED\"&#59<br/><br/><br/>/*%testLogistic(*/<br/>/*&nbsp&nbsp&nbsp&nbspteestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA), */<br/>/*&nbsp&nbsp&nbsp&nbsptheMainV=&theMainvar, */<br/>/*&nbsp&nbsp&nbsp&nbspsrcData0=ZXZD_B,*/<br/>/*&nbsp&nbsp&nbsp&nbspkeepvars=USPF DocID*/<br/>/*)&#59*/<br/><br/>/*for univariate age and sex concordance*/<br/>/*<br/>1. AgeConcord2: if AgeConcord=1 or 4, X91_C_CatN =1<br/>2. SexConcord2: if SexConcord= 1 or 2, X92_C_CatN=1<br/>*/<br/><br/><br/>data teestt._XPilot4 &#59<br/>&nbsp&nbsp&nbsp&nbspset teestt0._XPilot4 &#59<br/>&nbsp&nbsp&nbsp&nbspif X01_C_CatN=2 or X01_C_CatN=3 then X91_C_CatN =1&#59 else X91_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspif X05_C_CatN=1 or X05_C_CatN=2 then X92_C_CatN =1&#59 else X92_C_CatN=2&#59<br/>&nbsp&nbsp&nbsp&nbspif X01_C_CatN=2 or X01_C_CatN=3 then X91_C_CatC ='1'&#59 else X91_C_CatC='0'&#59<br/>&nbsp&nbsp&nbsp&nbspif X05_C_CatN=1 or X05_C_CatN=2 then X92_C_CatC ='1'&#59 else X92_C_CatC='0'&#59<br/>run&#59<br/>%freq(data=teestt._XPilot4, table=X01_C_CatN * X91_C_CatN)&#59<br/>%freq(data=teestt._XPilot4, table=X05_C_CatN * X92_C_CatN)&#59<br/><br/>ods results off&#59<br/>ods trace on&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass   X91_C_CatN X92_C_CatN /descending  param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp model Y (Ref='0') =&nbsp&nbsp&nbsp&nbspX91_C_CatN X92_C_CatN&#59  <br/>&nbsp&nbsp&nbsp&nbsp oddsratio X91_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbsp oddsratio X92_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA = teestt._XPilot28a1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot28a3 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot28a4 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot28a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot28a7<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot28a8&#59<br/>run&#59<br/>ods trace off&#59<br/>ods results on&#59<br/><br/><br/><br/>%let theModelVars45 =<br/>X91_C_CatN<br/>X02_C_CatN<br/>X03_C_CatN<br/>X04_C_CatN<br/>X92_C_CatN<br/>X06_C_CatN<br/><br/>X07_N_QUAN<br/>X91_C_CatN*X07_N_QUAN<br/>X08_N_QUIN<br/>X10_N_QUIN<br/>&#59<br/>ods trace on&#59<br/><br/>%let theClassVars45=<br/>&nbsp&nbsp&nbsp&nbspX91_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX02_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX03_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX04_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX92_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX06_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX07_N_QUAN<br/>&nbsp&nbsp&nbsp&nbspX08_N_QUIN<br/>&nbsp&nbsp&nbsp&nbspX10_N_QUIN<br/>&#59<br/>%put >>> theClassVars45=&theClassVars45 &#59<br/>/*X01_C_CatN X02_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN X06_C_CatN X07_N_QUAN X08_N_QUIN X10_N_QUIN X05_C_CatN*/<br/>proc genmod data=teestT._xPilot4 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass &theClassVars45 &repeatVar  /param=glm  truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (ref='0') =&theModelVars45   / dist=binomial link=logit type3 &#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=&repeatVar /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType3 =teestt._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEEmpPEst= teestt._XPilot25a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEFitCriteria = teestt._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt._XPilot25a9 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt._XPilot25a10 <br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X91_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X02_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X03_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X92_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X06_C_CatN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X91_C_CatN*X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X08_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X10_N_QUIN/ ilink oddsratio diff cl&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=teestt._XPilot25a9  (keep=key_hsn Y p) p=p&#59*/<br/>run&#59<br/>ods trace off&#59<br/>/*suppress the USPF IDs*/<br/>data teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/><br/><br/>data ZXZEB_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsprenamed = 'X91_C'&#59<br/>&nbsp&nbsp&nbsp&nbsporiginal =&nbsp&nbsp&nbsp&nbsp'AgeConcord_Binary'&#59<br/>&nbsp&nbsp&nbsp&nbspoutput&#59<br/>&nbsp&nbsp&nbsp&nbsprenamed = 'X92_C'&#59<br/>&nbsp&nbsp&nbsp&nbsporiginal =&nbsp&nbsp&nbsp&nbsp'SexConcord_Binary'&#59<br/>&nbsp&nbsp&nbsp&nbspoutput&#59<br/>run&#59<br/>data teestt.varsmap &#59<br/>&nbsp&nbsp&nbsp&nbspset teestt0.varsmap ZXZEB_tmp1 &#59<br/>run&#59<br/><br/><br/>%getFreq(<br/>&nbsp&nbsp&nbsp&nbspdata=teestt._XPilot4, <br/>&nbsp&nbsp&nbsp&nbsptheVars=&theClassVars45, <br/>&nbsp&nbsp&nbsp&nbspVarsMapFile=teestt.varsmap,<br/>&nbsp&nbsp&nbsp&nbspgroup=Y,  <br/>&nbsp&nbsp&nbsp&nbsptarget=teestt._XPilot27, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, debug=<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"1966718e-928a-4eb8-b792-894efe416470"},{"idx":"MY5b57d4b1-24e0-4b48-9037-811227fea197"}]}],"custparents":[{"idx":"50fd26b8-19ba-4b12-9e2c-c79a18686426"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"}]},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144","name":"ZXZD_C Data for GEE with DocVars Patient Vars (5 years)","NodeDescription":"///t<br/>///s<br/>/*ZXZD_C, data for logistic regression models*/<br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath2.\\ZXZC.zip),<br/>&nbsp&nbsp&nbsp&nbspsrcFile=%str(ZXZC.sas7bdat)<br/>)&#59<br/><br/>/*keep relevant GP characteristics*/<br/>data ZXZD_C1&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZC&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn Adherence_Adjust USPF HighPCTAdhPT PCT_AdhPT USPF1 EntryYear Age sex_desc  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcompfs UPCIndexF UPCIndexFP50 <br/><br/>   &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspHDays_AcuteCare_Pre365 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNVISITS_GP_PRE365 NVISITS_SP_PRE365 NVISITS_ER_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCHARLSON_INDEX  <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocAge docRx <br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsexConcord<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAgeConcord <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspresitype <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQAIPPE <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdocgradctry<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspBENZO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPSYCHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTIDEP_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspANTICHO_PRE365<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DIABETES<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HTN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NS_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_ASTHMA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_COPD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HF<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MOODANX<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUBABUSE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AMI<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CD_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_HP_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IHD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_STROKE_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_WF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OSTEO_1POP<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_OB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_DA_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_NONRA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RF_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_VTE_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CO_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_IB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_RA<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_CK_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_LV_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_EPAD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_UB_PS<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_AD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SUICIDE_OLD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_SCHIZO_EVER<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_PD<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCC_PRE365_MS<br/>&#59<br/>run&#59<br/><br/>data ZXZD_C2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_C1&#59<br/>&nbsp&nbsp&nbsp&nbspformat DocSex $1.&#59<br/>&nbsp&nbsp&nbsp&nbspDocSex = scan(USPF1, 4, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge = EntryYear - scan(USPF1, 5, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs =EntryYear - scan(USPF1, 6, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradCtry = scan(USPF1, 8, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPayType=scan(USPF1, 9, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits = input(scan(USPF1, 10, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize = input(scan(USPF1, 11, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx = input(scan(USPF1, 12, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx = input(scan(USPF1, 13, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRxPCT = DocStatinRx/DocRx&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinPts = input(scan(USPF1, 15, \":\"), 8.)&#59<br/>&nbsp&nbsp&nbsp&nbspif DocAge - age < -5 then AgeConcord=1&#59<br/>&nbsp&nbsp&nbsp&nbspif -5 <= DocAge - age < 0 then AgeConcord=2&#59<br/>&nbsp&nbsp&nbsp&nbspif 0 <= DocAge - age <= 5 then AgeConcord=3&#59<br/>&nbsp&nbsp&nbsp&nbspif  DocAge - age >5  then AgeConcord=4&#59<br/>&nbsp&nbsp&nbsp&nbspAgeConcordN=DocAge - age&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='F' and Sex_desc='F' then SexConcord =1&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='M' and Sex_desc='M' then SexConcord =2&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='F' and Sex_desc='M' then SexConcord =3&#59<br/>&nbsp&nbsp&nbsp&nbspif docSex='M' and Sex_desc='F' then SexConcord =4&#59<br/>&nbsp&nbsp&nbsp&nbspif UPCIndexF ge UPCIndexFP50 then UPCCat='H'&#59<br/>&nbsp&nbsp&nbsp&nbspelse UPCCat='L'&#59<br/>&nbsp&nbsp&nbsp&nbspdrop    UPCIndexF UPCIndexFP50 UCPF1 USPF1&#59<br/>run&#59 <br/>%freq(data=ZXZD_C2, table=DocPayType)&#59<br/>/*%freq(data=ZXZD_C2, table=SexConcord docSex Sex_desc)&#59*/<br/><br/>data ZXZD_C3&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_C2&#59<br/>&nbsp&nbsp&nbsp&nbspif DocPayType ne 'UNKW' and DocPayType ne '_'&#59<br/>run&#59<br/><br/><br/><br/>/*exclude patients whose USP had < 6 statin new users*/<br/>/*count USPF for their # of new statin users*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_C3,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_C4a,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(USPF, count(Key_hsn) as N_Pts),<br/>&nbsp&nbsp&nbsp&nbspgroupby=USPF<br/>)&#59<br/><br/>/*exclude those not having 6 patients (tried excluding those with < 10 patients, more than half USPs were gone)*/<br/>data ZXZD_C4b&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_C4a&#59<br/>/*&nbsp&nbsp&nbsp&nbspif N_Pts ge 6&#59*/<br/>&nbsp&nbsp&nbsp&nbspdocID =_n_&#59<br/>run&#59<br/>/*in ZXZD_C3, select rows that the USPFs can be found in ZXZA2b*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXZD_C3,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXZD_C4b,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXZD_C5,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.DocID),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=uspf<br/>)&#59<br/><br/><br/><br/>data ZXZD_C&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXZD_C5&#59<br/>&nbsp&nbsp&nbsp&nbspDocAge=round(DocAge, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocGradYrs=round(DocGradYrs, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocNVisits=round(DocNVisits, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocPtSize=round(DocPtSize, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocRx=round(DocRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRx=round(DocStatinRx, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbspif DocGradYrs >=0&#59<br/>&nbsp&nbsp&nbsp&nbspdrop PCT_AdhPT&#59<br/>&nbsp&nbsp&nbsp&nbspDocStatinRxPCT=round(DocStatinRxPCT *100, \"1\")&#59<br/>run&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","children":[{"idx":"3a515cb2-e864-47f7-abbc-f278b14653de","name":"ZXZH USPF level logistic GEE_AgeConCord DocVars Patient Vars","NodeDescription":"<p>///t</p><p>///s</p><div class=\"ql-code-block-container\" spellcheck=\"false\"><div class=\"ql-code-block\">/*</div><div class=\"ql-code-block\">ZXZH</div><div class=\"ql-code-block\">Using Patient adherence results instead of GP Doc and Patient Vars</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">GEE, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;main =ageconcord</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">data _null_;run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let theMainvar=AgeConcord;</div><div class=\"ql-code-block\">%let numCoVars =&nbsp;&nbsp;&nbsp;&nbsp;</div><div class=\"ql-code-block\">/*DocAge*/</div><div class=\"ql-code-block\">DocGradYrs</div><div class=\"ql-code-block\">/*DocNVisits*/</div><div class=\"ql-code-block\">DocPtSize</div><div class=\"ql-code-block\">DocRx</div><div class=\"ql-code-block\">/*DocStatinRx*/</div><div class=\"ql-code-block\">/*DocStatinRxPCT*/</div><div class=\"ql-code-block\">DocStatinPts</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*age */</div><div class=\"ql-code-block\">/*sex_desc */</div><div class=\"ql-code-block\">HDays_AcuteCare_Pre365 </div><div class=\"ql-code-block\">NVISITS_GP_PRE365 </div><div class=\"ql-code-block\">NVISITS_SP_PRE365 </div><div class=\"ql-code-block\">NVISITS_ER_PRE365</div><div class=\"ql-code-block\">CHARLSON_INDEX </div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\">%let catCoVars =</div><div class=\"ql-code-block\">COMPFS</div><div class=\"ql-code-block\">/*DocSex*/</div><div class=\"ql-code-block\">DocGradCtry</div><div class=\"ql-code-block\">DocPayType</div><div class=\"ql-code-block\">SexConcord</div><div class=\"ql-code-block\">UPCCat</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">resitype </div><div class=\"ql-code-block\">QAIPPE </div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">BENZO_PRE365</div><div class=\"ql-code-block\">PSYCHO_PRE365</div><div class=\"ql-code-block\">ANTIDEP_PRE365</div><div class=\"ql-code-block\">ANTICHO_PRE365</div><div class=\"ql-code-block\">CC_PRE365_DIABETES</div><div class=\"ql-code-block\">CC_PRE365_HTN</div><div class=\"ql-code-block\">CC_PRE365_NS_PS</div><div class=\"ql-code-block\">CC_PRE365_ASTHMA</div><div class=\"ql-code-block\">CC_PRE365_COPD</div><div class=\"ql-code-block\">CC_PRE365_HF</div><div class=\"ql-code-block\">CC_PRE365_AP_PS</div><div class=\"ql-code-block\">CC_PRE365_MOODANX</div><div class=\"ql-code-block\">CC_PRE365_OA</div><div class=\"ql-code-block\">CC_PRE365_SUBABUSE_OLD</div><div class=\"ql-code-block\">CC_PRE365_AF_PS</div><div class=\"ql-code-block\">CC_PRE365_AMI</div><div class=\"ql-code-block\">CC_PRE365_CD_PS</div><div class=\"ql-code-block\">CC_PRE365_CV_PS</div><div class=\"ql-code-block\">CC_PRE365_HP_PS</div><div class=\"ql-code-block\">CC_PRE365_IHD</div><div class=\"ql-code-block\">CC_PRE365_STROKE_1POP</div><div class=\"ql-code-block\">CC_PRE365_WF_PS</div><div class=\"ql-code-block\">CC_PRE365_OSTEO_1POP</div><div class=\"ql-code-block\">CC_PRE365_OB_PS</div><div class=\"ql-code-block\">CC_PRE365_CA_PS</div><div class=\"ql-code-block\">CC_PRE365_PV_PS</div><div class=\"ql-code-block\">CC_PRE365_DA_PS</div><div class=\"ql-code-block\">CC_PRE365_NONRA</div><div class=\"ql-code-block\">CC_PRE365_LB_PS</div><div class=\"ql-code-block\">/*CC_PRE365_AK_PS*/</div><div class=\"ql-code-block\">/*CC_PRE365_RF_PS*/</div><div class=\"ql-code-block\">CC_PRE365_VTE_PS</div><div class=\"ql-code-block\">CC_PRE365_CO_PS</div><div class=\"ql-code-block\">CC_PRE365_IB_PS</div><div class=\"ql-code-block\">CC_PRE365_RA</div><div class=\"ql-code-block\">CC_PRE365_CK_PS</div><div class=\"ql-code-block\">CC_PRE365_LV_PS</div><div class=\"ql-code-block\">CC_PRE365_EPAD</div><div class=\"ql-code-block\">CC_PRE365_UB_PS</div><div class=\"ql-code-block\">CC_PRE365_AD</div><div class=\"ql-code-block\">CC_PRE365_SUICIDE_OLD</div><div class=\"ql-code-block\">CC_PRE365_SCHIZO_EVER</div><div class=\"ql-code-block\">CC_PRE365_PD</div><div class=\"ql-code-block\">CC_PRE365_MS</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let repeatVar=USPF;</div><div class=\"ql-code-block\">%let outcomeVar=Adherence_Adjust;</div><div class=\"ql-code-block\">%let groupVars = key_hsn;</div><div class=\"ql-code-block\">%let CatMainVar=&amp;theMainvar;</div><div class=\"ql-code-block\">%let NumMainvar=;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%testLogistic(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;teestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH), </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theMainV=&amp;theMainvar, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;srcData0=ZXZD_C,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keepvars=USPF DocID</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*for univariate*/</div><div class=\"ql-code-block\">ods results off;</div><div class=\"ql-code-block\">ods trace on;</div><div class=\"ql-code-block\">proc logistic data=teestt._XPilot4 namelen=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class X01_C_CatN /descending param=reference;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;X01_C_CatN; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;ods output </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA = teestt._XPilot28a1</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot28a3 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot28a4 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot28a5 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot28a7</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot28a8;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods trace off;</div><div class=\"ql-code-block\">ods results on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*this part is only for the main analyses: to determine the vars in the model (the sensitivity test will follow the same vars as</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;this one*/</div><div class=\"ql-code-block\">/*****************************************************************************************************/</div><div class=\"ql-code-block\">data _XPilot21;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set teestT._XPilot11b ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable renamed original;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*there is a bug in _XPilot21, some _N type are missing*/</div><div class=\"ql-code-block\">/*get terms with the interctions*/</div><div class=\"ql-code-block\">data _XPilot31;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot21;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") &gt;0 ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;variable=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;variable=strip(tranwrd(variable, '*', ''));</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*combine _XPilot31 _XPilot21 and have a distinct list of variables*/</div><div class=\"ql-code-block\">data _XPilot32;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot31 _XPilot21;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">%sort(data=_XPilot32, sorter=variable descending renamed);</div><div class=\"ql-code-block\">data _XPilot33;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot32;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;by variable descending renamed;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if first.variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if renamed='' and index(variable, \"*\") = 0 then renamed =substr(variable, 1, 5);</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">/*lookup the original names*/</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot33,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot34,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.variable, t1.renamed, t2.original),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">data teestt._XPilot24;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot34;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if Variable='X01_C_CatN' then theVar=Variable;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*****************************************************************************************************/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">libname Teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH\";</div><div class=\"ql-code-block\">/*get a list of categorical vars (including cateogical type of the original continuous vars like age)*/</div><div class=\"ql-code-block\">data _XPilot25a;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set teestt._XPilot24;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, '*')=0 and (index(variable, '_C_')&gt;0 or index(variable, '_N_')&gt;0 );</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;by renamed;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if first.renamed; /*the X01_C_CatN appears three times for different COC tests*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;keep variable;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*the var list for the class statement*/</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25a, theVar=variable, theStrVarName=theClassVars25a, DLMT= );</div><div class=\"ql-code-block\">/*add back X06 and X08 as they are not in the list*/</div><div class=\"ql-code-block\">%let theClassVars25=&amp;theClassVars25a ;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theClassVars25=&amp;theClassVars25;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*the vars for model statement*/</div><div class=\"ql-code-block\">%distinct(data=teestt._XPilot24, vars=variable, target=_XPilot25b);</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25b, theVar=variable, theStrVarName=theModelVars25a, DLMT= );</div><div class=\"ql-code-block\">/*add back X02 and X07 as they are not in the list*/</div><div class=\"ql-code-block\">%let theModelVars25=&amp;theModelVars25a ;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theModelVars25=&amp;theModelVars25;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">ods results off;</div><div class=\"ql-code-block\">proc logistic data=teestt._XPilot4 namelen=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25 /descending param=reference;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (Ref='0') =&nbsp;&nbsp;&nbsp;&nbsp;&amp;theModelVars25&nbsp;&nbsp;&nbsp;&nbsp;/lackfit; </div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oddsratio X01_C_CatN ; */</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ods output </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelANOVA =_XPilot25a1 </div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParameterEstimates= teestt._XPilot25a5 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FitStatistics = teestt._XPilot25a6 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevelInfo=teestt._XPilot25a7*/</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8;*/</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods results on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*keep the interaction terms that are insignificant*/</div><div class=\"ql-code-block\">data _XPilot25a2;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25a1;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(effect, \"*\") ne 0 and probChisq &gt;0.05;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;rename effect=variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(effect, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*remove the interaction terms from _XPilot25b */</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=teestt._XPilot24,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=_XPilot25a2,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=_XPilot25c,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.theVar as theVar2),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=theVar </div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\">/*delete the interaction terms matching theVar2*/</div><div class=\"ql-code-block\">data _XPilot25d;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot25c;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if index(variable, \"*\") ne 0 and theVar2 ne '' then delete;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;drop theVar2;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">%ValueToString(Data=_XPilot25d, theVar=variable, theStrVarName=theModelVars25a2a, DLMT= );</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*add back X06 as they are not in the list, also add the interaction between </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sexConcord and DoxSex, DocGradYr (which turned out significant in ZXZF test)*/</div><div class=\"ql-code-block\">%let theModelVars25a2=&amp;theModelVars25a2a ;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theModelVars25a2=&amp;theModelVars25a2;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%StringToTable(theStr=&amp;theModelVars25a2, target=_XPilot24a2, varname=variable, dlmt=, debug=);</div><div class=\"ql-code-block\">data _XPilot24a3;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set _XPilot24a2;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=tranwrd(variable, 'X01_C_CatN', '');</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVar=strip(tranwrd(theVar, '*', ''));</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if variable= 'X01_C_CatN' then theVar=variable;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;renamed =substr(theVar, 1, 5);</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">/*lookup the original names*/</div><div class=\"ql-code-block\">%sqljoinv2(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t1=_XPilot24a3,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;t2=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot24a,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jtype=left,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;jvars=renamed,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;vars=%str(t1.*, t2.original),</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;orderby=%str(renamed, variable)</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%print(data=teestt._XPilot24a, obs=100);</div><div class=\"ql-code-block\">%ValueToString(Data=teestt._XPilot24a, theVar=variable, theStrVarName=theModelVars25a3a, DLMT= );</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH\";</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*test results with repeat term</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;In the above, a significant var or interaction term might not be signicant in the repeated model</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*</div><div class=\"ql-code-block\">Note:</div><div class=\"ql-code-block\">PROC GENMOD is different from PROC Logistic</div><div class=\"ql-code-block\">in the class statement, use /param=glm/reference are the same, glm option allows statement of lsmeans</div><div class=\"ql-code-block\">/param=effect is different, the magnitude of effect is half of the setting of glm/ref</div><div class=\"ql-code-block\">*/</div><div class=\"ql-code-block\">ods trace on;</div><div class=\"ql-code-block\">proc genmod data=teestT._xPilot4 descending;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25 &amp;repeatVar / param=glm truncate=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (ref='0') =&amp;theModelVars25a3a / dist=binomial link=logit type3 ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;repeated subject=&amp;repeatVar /type=exch;</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods trace off;</div><div class=\"ql-code-block\">%beep;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">/*Run the final model*/</div><div class=\"ql-code-block\">%let theModelVars25a4a =</div><div class=\"ql-code-block\">X01_C_CatN</div><div class=\"ql-code-block\">X02_C_CatN</div><div class=\"ql-code-block\">X03_C_CatN</div><div class=\"ql-code-block\">X04_C_CatN</div><div class=\"ql-code-block\">X05_C_CatN</div><div class=\"ql-code-block\">X06_C_CatN</div><div class=\"ql-code-block\">X08_C_CatN</div><div class=\"ql-code-block\">X10_C_CatN</div><div class=\"ql-code-block\">X11_C_CatN</div><div class=\"ql-code-block\">X13_C_CatN</div><div class=\"ql-code-block\">X01_C_CatN*X14_C_CatN</div><div class=\"ql-code-block\">X14_C_CatN</div><div class=\"ql-code-block\">X15_C_CatN</div><div class=\"ql-code-block\">X16_C_CatN</div><div class=\"ql-code-block\">X18_C_CatN</div><div class=\"ql-code-block\">X19_C_CatN</div><div class=\"ql-code-block\">X20_C_CatN</div><div class=\"ql-code-block\">X21_C_CatN</div><div class=\"ql-code-block\">X22_C_CatN</div><div class=\"ql-code-block\">X01_C_CatN*X24_C_CatN</div><div class=\"ql-code-block\">X24_C_CatN</div><div class=\"ql-code-block\">X25_C_CatN</div><div class=\"ql-code-block\">X26_C_CatN</div><div class=\"ql-code-block\">X27_C_CatN</div><div class=\"ql-code-block\">X28_C_CatN</div><div class=\"ql-code-block\">X35_C_CatN</div><div class=\"ql-code-block\">X37_C_CatN</div><div class=\"ql-code-block\">X44_C_CatN</div><div class=\"ql-code-block\">X48_C_CatN</div><div class=\"ql-code-block\">X49_C_CatN</div><div class=\"ql-code-block\">X51_N_QUIN</div><div class=\"ql-code-block\">X01_C_CatN*X51_N_QUIN</div><div class=\"ql-code-block\">X52_N_QUIN</div><div class=\"ql-code-block\">X53_N_QUAN</div><div class=\"ql-code-block\">X54_N_QUIN</div><div class=\"ql-code-block\">X55_N_QUIN</div><div class=\"ql-code-block\">X56_N_QUAN</div><div class=\"ql-code-block\">X57_N_QUAN</div><div class=\"ql-code-block\">X59_N_QUAN</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\">ods trace on;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%let theClassVars25a4a= </div><div class=\"ql-code-block\">X01_C_CatN</div><div class=\"ql-code-block\">X02_C_CatN</div><div class=\"ql-code-block\">X03_C_CatN</div><div class=\"ql-code-block\">X04_C_CatN</div><div class=\"ql-code-block\">X05_C_CatN</div><div class=\"ql-code-block\">X06_C_CatN</div><div class=\"ql-code-block\">X08_C_CatN</div><div class=\"ql-code-block\">X10_C_CatN</div><div class=\"ql-code-block\">X11_C_CatN</div><div class=\"ql-code-block\">X13_C_CatN</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">X14_C_CatN</div><div class=\"ql-code-block\">X15_C_CatN</div><div class=\"ql-code-block\">X16_C_CatN</div><div class=\"ql-code-block\">X18_C_CatN</div><div class=\"ql-code-block\">X19_C_CatN</div><div class=\"ql-code-block\">X20_C_CatN</div><div class=\"ql-code-block\">X21_C_CatN</div><div class=\"ql-code-block\">X22_C_CatN</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">X24_C_CatN</div><div class=\"ql-code-block\">X25_C_CatN</div><div class=\"ql-code-block\">X26_C_CatN</div><div class=\"ql-code-block\">X27_C_CatN</div><div class=\"ql-code-block\">X28_C_CatN</div><div class=\"ql-code-block\">X35_C_CatN</div><div class=\"ql-code-block\">X37_C_CatN</div><div class=\"ql-code-block\">X44_C_CatN</div><div class=\"ql-code-block\">X48_C_CatN</div><div class=\"ql-code-block\">X49_C_CatN</div><div class=\"ql-code-block\">X51_N_QUIN</div><div class=\"ql-code-block\">X52_N_QUIN</div><div class=\"ql-code-block\">X53_N_QUAN</div><div class=\"ql-code-block\">X54_N_QUIN</div><div class=\"ql-code-block\">X55_N_QUIN</div><div class=\"ql-code-block\">X56_N_QUAN</div><div class=\"ql-code-block\">X57_N_QUAN</div><div class=\"ql-code-block\">X59_N_QUAN</div><div class=\"ql-code-block\">;</div><div class=\"ql-code-block\">%put &gt;&gt;&gt; theClassVars25a4a=&amp;theClassVars25a4a ;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">proc genmod data=teestT._xPilot4 descending;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;class &amp;theClassVars25a4a &amp;repeatVar /param=glm truncate=200;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;model Y (ref='0') =&amp;theModelVars25a4a / dist=binomial link=logit type3 ;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;repeated subject=&amp;repeatVar /type=exch;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;ods output</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type3 =teestt._XPilot25a1</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LackFitChiSq = teestt._XPilot25a2 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatiosWald =teestt._XPilot25a3 */</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OddsRatios = teestt._XPilot25a4 */</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEEmpPEst= teestt._XPilot25a5 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GEEFitCriteria = teestt._XPilot25a6 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClassLevels=teestt._XPilot25a7</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Association =teestt._XPilot25a8*/</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LSMeans =teestt._XPilot25a9 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Diffs = teestt._XPilot25a10 </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X01_C_CatN/ ilink oddsratio diff cl; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X02_C_CatN/ ilink oddsratio diff cl; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X03_C_CatN/ ilink oddsratio diff cl; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X04_C_CatN/ ilink oddsratio diff cl; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X05_C_CatN/ ilink oddsratio diff cl; </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X06_C_CatN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X08_C_CatN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X51_N_QUIN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X01_C_CatN*X51_N_QUIN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X52_N_QUIN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X53_N_QUAN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X54_N_QUIN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X55_N_QUIN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X56_N_QUAN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X57_N_QUAN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;lsmeans X59_N_QUAN/ ilink oddsratio diff cl;</div><div class=\"ql-code-block\">/*&nbsp;&nbsp;&nbsp;&nbsp;output out=teestt._XPilot25a9 (keep=key_hsn Y p) p=p;*/</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\">ods trace off;</div><div class=\"ql-code-block\">/*suppress the USPF IDs*/</div><div class=\"ql-code-block\">data teestt._XPilot25a7;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;set teestt._XPilot25a7;</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;if class ne 'USPF';</div><div class=\"ql-code-block\">run;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%beep;</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\">%getFreq(</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;data=teestt._XPilot4, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;theVars=&amp;theClassVars25a4a, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;VarsMapFile=teestt.varsmap,</div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;group=Y, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;target=teestt._XPilot27, </div><div class=\"ql-code-block\">&nbsp;&nbsp;&nbsp;&nbsp;dlmt=, debug=</div><div class=\"ql-code-block\">);</div><div class=\"ql-code-block\"><br></div><div class=\"ql-code-block\"><br></div></div><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>s///</p><p>t///</p>","custparents":[{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"MY4e752de1-c201-4564-9a6d-9bebc2ac39ef"},{"idx":"MY8343af43-b3b9-40b7-a0fb-1e9e05c334d3"}]},{"idx":"91904282-a57f-4252-973a-7cb9dafbc872","name":"ZXZEA USPF level GEE_4levelAgeConCord DocVars ","NodeDescription":"///t<br/>///s<br/>/*<br/>Using Patient adherence results instead of GP<br/><br/>GEE, a logistic (with GEE) model to test the GP level factors to H/L pct of adherent patients <br/>&nbsp&nbsp&nbsp&nbspmain =ageconcord<br/>*/<br/><br/>data _null_&#59run&#59<br/><br/>%let theMainvar=AgeConcord&#59<br/>%let numCoVars =&nbsp&nbsp&nbsp&nbsp<br/>/*DocAge*/<br/>DocGradYrs<br/>/*DocNVisits*/<br/>DocPtSize<br/>DocRx<br/>/*DocStatinRx*/<br/>/*DocStatinRxPCT*/<br/>DocStatinPts<br/>&#59<br/>%let catCoVars =<br/>COMPFS<br/>/*DocSex*/<br/>DocGradCtry<br/>DocPayType<br/>SexConcord<br/>UPCCat<br/>&#59<br/>%let repeatVar=USPF&#59<br/>%let outcomeVar=Adherence_Adjust&#59<br/>%let groupVars = key_hsn&#59<br/>%let CatMainVar=&theMainvar&#59<br/>%let NumMainvar=&#59<br/>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA\"&#59<br/><br/>%testLogistic(<br/>&nbsp&nbsp&nbsp&nbspteestTargetPath=%str(P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA), <br/>&nbsp&nbsp&nbsp&nbsptheMainV=&theMainvar, <br/>&nbsp&nbsp&nbsp&nbspsrcData0=ZXZD_B,<br/>&nbsp&nbsp&nbsp&nbspkeepvars=USPF DocID<br/>)&#59<br/><br/>/*for univariate (AgeConcord), should add SexConcord*/<br/>ods results off&#59<br/>ods trace on&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass   X01_C_CatN X05_C_CatN /descending  param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (Ref='0') =&nbsp&nbsp&nbsp&nbspX01_C_CatN X05_C_CatN&#59  <br/>&nbsp&nbsp&nbsp&nbspoddsratio X01_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspoddsratio X05_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA = teestt._XPilot28a1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot28a3 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot28a4 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot28a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot28a7<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot28a8&#59<br/>run&#59<br/>ods trace off&#59<br/>ods results on&#59<br/><br/><br/><br/>/*for univariate country of med training*/<br/>ods results off&#59<br/>ods trace on&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass   X03_C_CatN  /descending  param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (Ref='0') =&nbsp&nbsp&nbsp&nbspX03_C_CatN &#59  <br/>&nbsp&nbsp&nbsp&nbspoddsratio X03_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA = teestt._XPilot31a1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot31a3 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot31a4 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot31a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot31a7<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot31a8&#59<br/>run&#59<br/>ods trace off&#59<br/>ods results on&#59<br/><br/>/*for univariate FFS NFFS*/<br/>ods results off&#59<br/>ods trace on&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass   X04_C_CatN  /descending  param=reference&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (Ref='0') =&nbsp&nbsp&nbsp&nbspX04_C_CatN &#59  <br/>&nbsp&nbsp&nbsp&nbspoddsratio X04_C_CatN &#59<br/>&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA = teestt._XPilot32a1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot32a3 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot32a4 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot32a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot32a7<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot32a8&#59<br/>run&#59<br/>ods trace off&#59<br/>ods results on&#59<br/><br/>/*this part is only for the main analyses: to determine the vars in the model (the sensitivity test will follow the same vars as<br/>&nbsp&nbsp&nbsp&nbspthis one*/<br/>/*****************************************************************************************************/<br/>data _XPilot21&#59<br/>&nbsp&nbsp&nbsp&nbspset teestT._XPilot11b &#59<br/>&nbsp&nbsp&nbsp&nbspkeep variable renamed original&#59<br/>run&#59<br/><br/>/*there is a bug in _XPilot21, some _N type are missing*/<br/>/*get terms with the interctions*/<br/>data _XPilot31&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot21&#59<br/>&nbsp&nbsp&nbsp&nbspif index(variable, \"*\") >0 &#59<br/>&nbsp&nbsp&nbsp&nbspkeep variable&#59<br/>&nbsp&nbsp&nbsp&nbspvariable=tranwrd(variable, 'X01_C_CatN', '')&#59<br/>&nbsp&nbsp&nbsp&nbspvariable=strip(tranwrd(variable, '*', ''))&#59<br/>run&#59<br/><br/>/*combine _XPilot31 _XPilot21 and have a distinct list of variables*/<br/>data _XPilot32&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot31 _XPilot21&#59<br/>run&#59<br/>%sort(data=_XPilot32, sorter=variable descending renamed)&#59<br/>data _XPilot33&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot32&#59<br/>&nbsp&nbsp&nbsp&nbspby variable descending renamed&#59<br/>&nbsp&nbsp&nbsp&nbspif first.variable&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed='' and index(variable, \"*\") = 0 then renamed =substr(variable, 1, 5)&#59<br/>run&#59<br/>/*lookup the original names*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_XPilot33,<br/>&nbsp&nbsp&nbsp&nbspt2=teestt.varsmap,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot34,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=renamed,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.variable, t1.renamed, t2.original),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(renamed, variable)<br/>)&#59<br/><br/><br/>data teestt._XPilot24&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot34&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=tranwrd(variable, 'X01_C_CatN', '')&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=strip(tranwrd(theVar, '*', ''))&#59<br/>&nbsp&nbsp&nbsp&nbspif Variable='X01_C_CatN' then theVar=Variable&#59<br/>run&#59<br/><br/>/*****************************************************************************************************/<br/><br/><br/>/*get a list of categorical vars (including cateogical type of the original continuous vars like age)*/<br/>data _XPilot25a&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt._XPilot24&#59<br/>&nbsp&nbsp&nbsp&nbspif index(variable, '*')=0 and (index(variable, '_C_')>0 or index(variable, '_N_')>0 )&#59<br/>&nbsp&nbsp&nbsp&nbspby renamed&#59<br/>&nbsp&nbsp&nbsp&nbspif first.renamed&#59 /*the X01_C_CatN appears three times for different COC tests*/<br/>&nbsp&nbsp&nbsp&nbspkeep variable&#59<br/>run&#59<br/><br/>/*the var list for the class statement*/<br/>%ValueToString(Data=_XPilot25a, theVar=variable, theStrVarName=theClassVars25a, DLMT= )&#59<br/>/*add back X06 and X08 as they are not in the list*/<br/>%let theClassVars25=&theClassVars25a   &#59<br/>%put >>> theClassVars25=&theClassVars25&#59<br/><br/><br/>/*the vars for model statement*/<br/>%distinct(data=teestt._XPilot24, vars=variable, target=_XPilot25b)&#59<br/>%ValueToString(Data=_XPilot25b, theVar=variable, theStrVarName=theModelVars25a, DLMT= )&#59<br/>/*add back X02 and X07 as they are not in the list*/<br/>%let theModelVars25=&theModelVars25a   &#59<br/>%put >>> theModelVars25=&theModelVars25&#59<br/><br/><br/>ods results off&#59<br/>proc logistic data=teestt._XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass &theClassVars25 /descending param=reference&#59<br/>&nbsp&nbsp&nbsp&nbsp model Y (Ref='0') =&nbsp&nbsp&nbsp&nbsp&theModelVars25&nbsp&nbsp&nbsp&nbsp/lackfit&#59 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspoddsratio X01_C_CatN &#59 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspModelANOVA =_XPilot25a1 <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt._XPilot25a5 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFitStatistics = teestt._XPilot25a6 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevelInfo=teestt._XPilot25a7*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=teestt._XPilot25a9  (keep=key_hsn Y p) p=p&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>run&#59<br/>ods results on&#59<br/><br/>/*keep the interaction terms that are insignificant*/<br/>data _XPilot25a2&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot25a1&#59<br/>&nbsp&nbsp&nbsp&nbspif index(effect, \"*\") ne 0 and probChisq >0.05&#59<br/>&nbsp&nbsp&nbsp&nbsprename effect=variable&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=tranwrd(effect, 'X01_C_CatN', '')&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=strip(tranwrd(theVar, '*', ''))&#59<br/>run&#59<br/><br/>/*remove the interaction terms from _XPilot25b */<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=teestt._XPilot24,<br/>&nbsp&nbsp&nbsp&nbspt2=_XPilot25a2,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot25c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.theVar as theVar2),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=theVar <br/>)&#59<br/>/*delete the interaction terms matching theVar2*/<br/>data _XPilot25d&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot25c&#59<br/>&nbsp&nbsp&nbsp&nbspif index(variable, \"*\") ne 0 and theVar2 ne '' then delete&#59<br/>&nbsp&nbsp&nbsp&nbspdrop theVar2&#59<br/>run&#59<br/>%ValueToString(Data=_XPilot25d, theVar=variable, theStrVarName=theModelVars25a2a, DLMT= )&#59<br/><br/>/*add back X06 as they are not in the list, also add the interaction between <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsexConcord and DoxSex, DocGradYr (which turned out significant in ZXZF test)*/<br/>%let theModelVars25a2=&theModelVars25a2a  &#59<br/>%put >>> theModelVars25a2=&theModelVars25a2&#59<br/><br/>%StringToTable(theStr=&theModelVars25a2, target=_XPilot24a2, varname=variable, dlmt=, debug=)&#59<br/>data _XPilot24a3&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot24a2&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=tranwrd(variable, 'X01_C_CatN', '')&#59<br/>&nbsp&nbsp&nbsp&nbsptheVar=strip(tranwrd(theVar, '*', ''))&#59<br/>&nbsp&nbsp&nbsp&nbspif variable= 'X01_C_CatN' then theVar=variable&#59<br/>&nbsp&nbsp&nbsp&nbsprenamed =substr(theVar, 1, 5)&#59<br/>run&#59<br/>/*lookup the original names*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_XPilot24a3,<br/>&nbsp&nbsp&nbsp&nbspt2=teestt.varsmap,<br/>&nbsp&nbsp&nbsp&nbsptarget=teestt._XPilot24a,<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=renamed,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.original),<br/>&nbsp&nbsp&nbsp&nbsporderby=%str(renamed, variable)<br/>)&#59<br/><br/>%print(data=teestt._XPilot24a, obs=100)&#59<br/>%ValueToString(Data=teestt._XPilot24a, theVar=variable, theStrVarName=theModelVars25a3a, DLMT= )&#59<br/><br/><br/><br/>libname teestt \"P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZEA\"&#59<br/><br/>/*test results with repeat term*/<br/>ods trace on&#59<br/>/*<br/>Note:<br/>PROC GENMOD is different from PROC Logistic<br/>in the class statement, use /param=glm/reference are the same, glm option allows statement of lsmeans<br/>/param=effect is different, the magnitude of effect is half of the setting of glm/ref<br/>*/<br/>proc genmod data=teestT._xPilot4 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass &theClassVars25 &repeatVar  / param=glm truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (ref='0') =&theModelVars25a3a   / dist=binomial link=logit type3 &#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=&repeatVar /type=exch&#59<br/>/*&nbsp&nbsp&nbsp&nbspods output*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType3 =teestt._XPilot25a1*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEEmpPEst= teestt._XPilot25a5 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEFitCriteria = teestt._XPilot25a6 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt._XPilot25a7*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>/*&nbsp&nbsp&nbsp&nbsp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 */<br/>/*&nbsp&nbsp&nbsp&nbspestimate 'X04_C_CatN 1 vs 4' X04_C_CatN 1 -1 /exp&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=teestt._XPilot25a9  (keep=key_hsn Y p) p=p&#59*/<br/>run&#59<br/>ods trace off&#59<br/><br/><br/><br/>%let theModelVars45 =<br/>X01_C_CatN<br/>X02_C_CatN<br/>X03_C_CatN<br/>X04_C_CatN<br/>X05_C_CatN<br/>X06_C_CatN<br/><br/>X07_N_QUAN<br/>X01_C_CatN*X07_N_QUAN<br/>X08_N_QUIN<br/>X10_N_QUIN<br/>&#59<br/>ods trace on&#59<br/><br/>%let theClassVars45=<br/>&nbsp&nbsp&nbsp&nbspX01_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX02_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX03_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX04_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX05_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX06_C_CatN<br/>&nbsp&nbsp&nbsp&nbspX07_N_QUAN<br/>&nbsp&nbsp&nbsp&nbspX08_N_QUIN<br/>&nbsp&nbsp&nbsp&nbspX10_N_QUIN<br/>&#59<br/>%put >>> theClassVars45=&theClassVars45 &#59<br/>/*X01_C_CatN X02_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN X06_C_CatN X07_N_QUAN X08_N_QUIN X10_N_QUIN X05_C_CatN*/<br/>proc genmod data=teestT._xPilot4 descending&#59<br/>&nbsp&nbsp&nbsp&nbspclass &theClassVars45 &repeatVar  /param=glm  truncate=200&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y (ref='0') =&theModelVars45   / dist=binomial link=logit type3 &#59<br/>&nbsp&nbsp&nbsp&nbsprepeated subject=&repeatVar /type=exch&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspType3 =teestt._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEEmpPEst= teestt._XPilot25a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspGEEFitCriteria = teestt._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt._XPilot25a9 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt._XPilot25a10 <br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X02_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X03_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X05_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X06_C_CatN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN*X07_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X08_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X10_N_QUIN/ ilink oddsratio diff cl&#59<br/>/*&nbsp&nbsp&nbsp&nbspoutput out=teestt._XPilot25a9  (keep=key_hsn Y p) p=p&#59*/<br/>run&#59<br/>ods trace off&#59<br/>/*suppress the USPF IDs*/<br/>data teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/><br/>%getFreq(<br/>&nbsp&nbsp&nbsp&nbspdata=teestt._XPilot4, <br/>&nbsp&nbsp&nbsp&nbsptheVars=&theClassVars45, <br/>&nbsp&nbsp&nbsp&nbspVarsMapFile=teestt.varsmap,<br/>&nbsp&nbsp&nbsp&nbspgroup=Y,  <br/>&nbsp&nbsp&nbsp&nbsptarget=teestt._XPilot27, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, debug=<br/>)&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"d26f8308-6308-4d14-ae0e-47023ce4215a"}]}],"custparents":[{"idx":"50fd26b8-19ba-4b12-9e2c-c79a18686426"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"},{"idx":"MY187ef6e6-2a71-40c7-9ec7-30fefc072eba"}]}]},{"idx":"MYe107cfd3-4bb9-4655-9e96-62c6570ba7ab","name":"Glimmix methods","custparents":[{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"},{"idx":"MYf18fe88b-bc5c-4932-9fcb-921327457224"}],"children":[{"idx":"ee8f5484-4a03-4426-ae96-7ea9af92e69a","name":"ZXZJ GLIMMIX","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>/*The great paper:<br/>sas.com/content/dam/SAS/support/en/sas-global-forum-proceedings/2018/2179-2018.pdf<br/>*/<br/>/*Use the same terms as in ZXZH (GEE)*/<br/><br/>%put >>> theModelVars25a4a = &theModelVars25a4a&#59<br/>%put >>> theClassVars25a4a=&theClassVars25a4a &#59<br/><br/><br/>%let teestTargetPath1=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH&#59<br/>%let teestTargetPath2=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZJ&#59<br/>libname teestT1 \"&teestTargetPath1\"&#59<br/>libname teestT2 \"&teestTargetPath2\"&#59<br/><br/><br/>/*copy the test data (same as in teestT1)*/<br/>data teestT2._xPilot4&#59<br/>&nbsp&nbsp&nbsp&nbspset teestT1._xPilot4&#59<br/>run&#59<br/><br/>/*&theModelVars25a4a<br/>&theClassVars25a4a<br/>X01_C_CatN X02_C_CatN<br/>*/<br/>%sort(data=teestT2._xPilot4 , sorter=DocID)&#59<br/><br/><br/>ods trace on&#59<br/>ods exclude SolutionR IterHistory&#59<br/>proc glimmix data=teestT2._xPilot4 &nbsp&nbsp&nbsp&nbspmethod=quad&#59<br/>&nbsp&nbsp&nbsp&nbspclass &nbsp&nbsp&nbsp&nbsp&theClassVars25a4a<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTests3 =teestt2._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt2._XPilot25a5 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFitStatistics = teestt2._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCondFitStatistics = teestt2._XPilot25a6a<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt2._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt2._XPilot25a9 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt2._XPilot25a10 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCovParms = teestt2._XPilot25a31<br/>&#59<br/><br/>&nbsp&nbsp&nbsp&nbspmodel Y(Event='1')= &theModelVars25a4a / s dist=binary link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsprandom int  /subject=docID  &#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X02_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X03_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X05_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X06_C_CatN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X08_C_CatN/ ilink oddsratio diff cl&#59<br/><br/>&nbsp&nbsp&nbsp&nbsplsmeans X51_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN*X51_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X52_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X53_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X54_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X55_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X56_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X57_N_QUAN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X59_N_QUAN/ ilink oddsratio diff cl&#59<br/><br/>run&#59<br/>ods trace off&#59<br/>ods select all&#59<br/><br/>/*suppress the USPF IDs*/<br/>data teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/>/*keep it! the following works*/<br/>%macro notrun&#59<br/>ods trace on&#59<br/>ods exclude SolutionR&#59<br/>proc glimmix data=teestT2._xPilot4<br/>&nbsp&nbsp&nbsp&nbspmethod=quad<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmaxopt=  */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspnloptions <br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptech=nrridg  */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*maxiter=*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbspclass &nbsp&nbsp&nbsp&nbsp&theClassVars25a4a<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/  &nbsp&nbsp&nbsp&nbsptruncate=200*/<br/>&#59<br/>&nbsp&nbsp&nbsp&nbspmodel Y(Event='1')= &theModelVars25a4a / s dist=binary link=logit<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspddfm=betwithin */<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsprandom int  /subject=docID  &#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN /ilink diff oddsratio cl &#59<br/>run&#59<br/>ods trace off&#59<br/>ods select all&#59<br/>%mend&#59<br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"MYe107cfd3-4bb9-4655-9e96-62c6570ba7ab"}]},{"idx":"9be479cd-8313-4a65-8017-8646ccec4d28","name":"ZXZK GLIMMIX empty","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>/*The great paper:<br/>sas.com/content/dam/SAS/support/en/sas-global-forum-proceedings/2018/2179-2018.pdf<br/>*/<br/>/*Use the same terms as in ZXZH (GEE)*/<br/><br/>%put >>> theModelVars25a4a = &theModelVars25a4a&#59<br/>%put >>> theClassVars25a4a=&theClassVars25a4a &#59<br/><br/>options dlcreatedir&#59<br/>%let teestTargetPath1=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH&#59<br/>%let teestTargetPath2=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZK&#59<br/>libname teestT1 \"&teestTargetPath1\"&#59<br/>libname teestT2 \"&teestTargetPath2\"&#59<br/><br/><br/><br/><br/>/*&theModelVars25a4a<br/>&theClassVars25a4a<br/>X01_C_CatN X02_C_CatN<br/>*/<br/>%sort(data=teestT1._xPilot4 , sorter=DocID)&#59<br/><br/>/*EMPTY MODEL*/<br/>ods trace on&#59<br/>ods exclude SolutionR IterHistory&#59<br/>proc glimmix data=teestT1._xPilot4 &nbsp&nbsp&nbsp&nbspmethod=quad&#59<br/>&nbsp&nbsp&nbsp&nbspclass &nbsp&nbsp&nbsp&nbsp&theClassVars25a4a<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTests3 =teestt2._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt2._XPilot25a5 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFitStatistics = teestt2._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCondFitStatistics = teestt2._XPilot25a6a<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt2._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt2._XPilot25a9 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt2._XPilot25a10 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCovParms = teestt2._XPilot25a31<br/>&#59<br/><br/>&nbsp&nbsp&nbsp&nbspmodel Y(Event='1')=  / s dist=binary link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsprandom int  /subject=docID  &#59 <br/><br/><br/>run&#59<br/>ods trace off&#59<br/>ods select all&#59<br/><br/>/*suppress the USPF IDs*/<br/>data teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/>%beep&#59<br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"MYe107cfd3-4bb9-4655-9e96-62c6570ba7ab"}]},{"idx":"c8fb7420-9991-4712-b298-5a6a3c0964ce","name":"ZXZM GLIMMIX Doclevel","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>/*The great paper:<br/>sas.com/content/dam/SAS/support/en/sas-global-forum-proceedings/2018/2179-2018.pdf<br/>*/<br/>/*Use the same terms as in ZXZH (GEE)*/<br/><br/><br/><br/><br/>options dlcreatedir&#59<br/>%let teestTargetPath1=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZH&#59<br/>%let teestTargetPath2=P:\\Physician_Impact_Pro(SYao)_Bio14-143\\Output\\Result data project2\\ZXZM&#59<br/>libname teestT1 \"&teestTargetPath1\"&#59<br/>libname teestT2 \"&teestTargetPath2\"&#59<br/><br/><br/><br/><br/>/*&theModelVars25a4a<br/>&theClassVars25a4a<br/>X01_C_CatN X02_C_CatN<br/>*/<br/>%sort(data=teestT1._xPilot4 , sorter=DocID)&#59<br/><br/>/*Doc related<br/>&nbsp&nbsp&nbsp&nbspAgeConcord&nbsp&nbsp&nbsp&nbspX01_C_CatN<br/><br/>&nbsp&nbsp&nbsp&nbspDocGradCtry&nbsp&nbsp&nbsp&nbspX03_C_CatN<br/>&nbsp&nbsp&nbsp&nbspDocPayType&nbsp&nbsp&nbsp&nbspX04_C_CatN<br/>&nbsp&nbsp&nbsp&nbspSexConcord&nbsp&nbsp&nbsp&nbspX05_C_CatN<br/><br/>&nbsp&nbsp&nbsp&nbspDocGradYrs&nbsp&nbsp&nbsp&nbspX51_N_QUIN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX51_N_QUIN*X01_C_CatN<br/>&nbsp&nbsp&nbsp&nbspDocPtSize&nbsp&nbsp&nbsp&nbspX52_N_QUIN<br/>&nbsp&nbsp&nbsp&nbspDocStatinPts&nbsp&nbsp&nbsp&nbspX54_N_QUIN<br/><br/><br/>*/<br/>%let theClassVars_ZXZM =X01_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp X51_N_QUIN X52_N_QUIN X54_N_QUIN&#59<br/>%let theModelVars_ZXZM =X01_C_CatN X03_C_CatN X04_C_CatN X05_C_CatN <br/> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX51_N_QUIN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX51_N_QUIN*X01_C_CatN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX52_N_QUIN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX54_N_QUIN &#59 <br/><br/>ods trace on&#59<br/>ods exclude SolutionR IterHistory&#59<br/><br/>proc glimmix data=teestT1._xPilot4 &nbsp&nbsp&nbsp&nbspmethod=quad empirical=mbn&#59 <br/>&nbsp&nbsp&nbsp&nbspclass &nbsp&nbsp&nbsp&nbsp&theClassVars_ZXZM<br/>&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbspods output<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTests3 =teestt2._XPilot25a1<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = teestt._XPilot25a2  */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatiosWald =teestt._XPilot25a3 */<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspOddsRatios = teestt._XPilot25a4 */<br/><br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspParameterEstimates= teestt2._XPilot25a5 */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspFitStatistics = teestt2._XPilot25a6 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCondFitStatistics = teestt2._XPilot25a6a<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspClassLevels=teestt2._XPilot25a7<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAssociation =teestt._XPilot25a8*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLSMeans =teestt2._XPilot25a9 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspDiffs = teestt2._XPilot25a10 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCovParms = teestt2._XPilot25a31<br/>&#59<br/><br/>&nbsp&nbsp&nbsp&nbspmodel Y(Event='1')=  &theModelVars_ZXZM / s dist=binary link=logit&#59<br/>&nbsp&nbsp&nbsp&nbsprandom int  /subject=docID  &#59 <br/><br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X03_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X04_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X05_C_CatN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X51_N_QUIN/ ilink oddsratio diff cl&#59<br/>&nbsp&nbsp&nbsp&nbsplsmeans X01_C_CatN*X51_N_QUIN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X52_N_QUIN/ ilink oddsratio diff cl&#59 <br/>&nbsp&nbsp&nbsp&nbsplsmeans X54_N_QUIN/ ilink oddsratio diff cl&#59 <br/><br/>run&#59<br/>ods trace off&#59<br/>ods select all&#59<br/><br/>/*suppress the USPF IDs*/<br/>data teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspset teestt2._XPilot25a7&#59<br/>&nbsp&nbsp&nbsp&nbspif class ne 'USPF'&#59<br/>run&#59<br/><br/><br/>%beep&#59<br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"},{"idx":"MYe107cfd3-4bb9-4655-9e96-62c6570ba7ab"}]}],"NodeDescription":"<p>///t</p><p>t///</p><p>[_W] no need to perform this, leave for project 3</p>"}]}]}],"custparents":[{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf"}]},{"idx":"274796d7-aa85-4f26-93b7-8abae782ef8e","name":"ZXA view files (analysis for cohort year decision)","NodeDescription":"///t<br/>///s<br/>data _null_&#59run&#59<br/><br/>%VbsUnzip(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptgtDir=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspzipFile=%str(&localTargetPath.\\VXM_FS.zip),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsrcFile=%str(VXM_FS.sas7bdat)<br/>)&#59<br/><br/>%print(data=VXM_FS)&#59<br/><br/>/*In project one, the new statin patients have been idenfied in VXM_FS<br/>&nbsp&nbsp&nbsp&nbspIn this file, many covariates of patient/GP have been determined, and can be used in obj 2<br/>*/<br/><br/>/*have a simpler for the statin patient, the USP during followup, and the index date*/<br/>data ZXA1&#59<br/>&nbsp&nbsp&nbsp&nbspset VXM_FS&#59<br/>&nbsp&nbsp&nbsp&nbspformat USPF1 $11.&#59<br/>&nbsp&nbsp&nbsp&nbspUSPF=scan(uspf1, 1, \":\")&#59<br/>&nbsp&nbsp&nbsp&nbspEntryYear = year(entryDate)&#59<br/>&nbsp&nbsp&nbsp&nbspkeep key_hsn EntryDate uspf1 USPF EntryYear Adherence_Adjust&#59<br/>&nbsp&nbsp&nbsp&nbsprename USPF1 = USPFInfo&#59<br/>&nbsp&nbsp&nbsp&nbspif uspf1 ne ''&#59<br/>run&#59<br/>/*some patients were excluded as not prescribed by a GP*/<br/><br/>/* We proposed to have a 2-year inclusion period for the USPs. was there enough patients for analysis for 2016 and 2017*/<br/>%freq(data=ZXA1, table=entryyear)&#59<br/>/*sounds enough*/<br/><br/>/*But what 2 years? For the USPs, does the number of new statin patients vary drastically in 2012-2013, vs 2016-2017?*/<br/>%macro Npt_BiAnnual_USP(debug=, data=, target=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data debug yr yr2 target&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%do yr = 12 %to 16&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yr2=%eval(&yr +1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*sum the # patients per usp in 2 years*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=&data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=NBU_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(USPF, count(key_hsn) as N_Patients, \"&yr.&yr2\" as InclusionPeriods),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = USPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby = USPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(EntryYear ge 20&yr and EntryYear le 20&yr2)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata NBU_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset NBU_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif N_Patients > 10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59 set &target NBU_tmp2&#59 run&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend Npt_BiAnnual_USP&#59<br/>%Npt_BiAnnual_USP(data=ZXA1, debug=, target=ZXA2a)&#59<br/>/*grouped by each patient, get the mean and std of # of statin users in diff 2-years*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXA2a,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=USPF,<br/>&nbsp&nbsp&nbsp&nbsptheVar=N_Patients,<br/>&nbsp&nbsp&nbsp&nbsptheStats=mean min max std,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA2b,<br/>&nbsp&nbsp&nbsp&nbsppersonID=InclusionPeriods,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*calculate the % of std /mean*/<br/>data ZXA2&#59<br/>&nbsp&nbsp&nbsp&nbspset ZXA2b&#59<br/>&nbsp&nbsp&nbsp&nbspkeep mean std stdpct&#59<br/>&nbsp&nbsp&nbsp&nbspif std=. then std=0&#59<br/>&nbsp&nbsp&nbsp&nbspstdpct = std/mean&#59<br/>run&#59<br/>/*check how is the distribution of % of std/mean on # of statin users over years*/<br/>proc univariate data=ZXA2&#59<br/>&nbsp&nbsp&nbsp&nbsphistogram stdpct /normal endpoints= (0 to 1 by .05)  outhistogram=ZXA2c&#59<br/>/*&nbsp&nbsp&nbsp&nbsphistogram N_StatinUsers  / normal outhistogram=VZL1b1 endpoints= (0 to 1 by .05)    &#59*/<br/>run&#59<br/>/*Do not know if it is good enough. <br/>&nbsp&nbsp&nbsp&nbsp70% of USPs have an std which is < 30% of the mean # of statin patient in different 2-year periods<br/>&nbsp&nbsp&nbsp&nbspThis means that the # of patients did not change drastically over years for most USPs<br/>*/<br/><br/>/*But what 2 years? For the USPs, does the number of new statin patients vary drastically in 2012-2013, vs 2016-2017?*/<br/>%macro PCTAdhPt_BiAnnual_USP(debug=, data=, target=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data debug yr yr2 target&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%do yr = 12 %to 16&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let yr2=%eval(&yr +1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*sum the # patients per usp in 2 years*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=&data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=PBU_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(USPF, sum(Adherence_Adjust) as N_AdhPt, count(key_hsn) as N_Patients, \"&yr.&yr2\" as InclusionPeriods),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby = USPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby = USPF,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%str(EntryYear ge 20&yr and EntryYear le 20&yr2)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata PBU_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset PBU_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif N_Patients > 10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPCT_AdhPT = N_AdhPt / N_Patients&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59 set &target PBU_tmp2&#59 run&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend PCTAdhPt_BiAnnual_USP&#59<br/>%PCTAdhPt_BiAnnual_USP(data=ZXA1, debug=, target=ZXA3a)&#59<br/><br/>/*get the mean median PCT_AdhPT per year*/<br/>%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbspdata=ZXA3a,<br/>&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbspgroupVars=InclusionPeriods,<br/>&nbsp&nbsp&nbsp&nbsptheVar=PCT_AdhPT,<br/>&nbsp&nbsp&nbsp&nbsptheStats=mean min max std median,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3b,<br/>&nbsp&nbsp&nbsp&nbsppersonID=USPF,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*the mean/median % of adherent patients were quite stable over years*/<br/><br/>/*Category USPFs as high/low percentage of statin users for each 2-year periods*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXA3a,<br/>&nbsp&nbsp&nbsp&nbspt2=ZXA3b,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3c,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t1.PCT_AdhPT >=t2.median, 1, 0 ) as HighAdhPTUSP),<br/>&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbspjvars=InclusionPeriods,<br/>&nbsp&nbsp&nbsp&nbsporderby=uspf<br/>)&#59<br/><br/>/*count the PCT of periods being HighAdhPTUSP*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=ZXA3c,<br/>&nbsp&nbsp&nbsp&nbsptarget=ZXA3d,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(USPF, sum(HighAdhPTUSP) as Times_HighAdhPTUSP, count(InclusionPeriods) as N_Periods),<br/>&nbsp&nbsp&nbsp&nbspgroupby=USPF,<br/>&nbsp&nbsp&nbsp&nbsporderby=uspf<br/>)&#59<br/><br/>data ZXA3e&#59 set ZXA3d&#59 PCT=Times_HighAdhPTUSP/N_Periods&#59run&#59<br/>%freq(data=ZXA3e, table=PCT)&#59<br/>/*interesting, over 70% consistently having high/low pct of adherent patients in different periods*/<br/>s///<br/>t///","children":[],"custparents":[{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf"},{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf"}]},{"idx":"MY816513f4-add0-468b-be4b-2d28fbd3899d","name":"settings and macros for project2","custparents":[{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf"},{"idx":"24defe5f-02a2-4b08-9d49-1342f2a6b5bf"}],"children":[],"_substeps":{"idx":"MYa10652e6-d573-4b5e-a2a8-513d1ab33e61","name":"substeps","custparents":[{"idx":"MY816513f4-add0-468b-be4b-2d28fbd3899d"}],"children":[{"idx":"89449242-2116-4375-9ca8-fdfeda505f10","name":"Tools for project2","NodeDescription":"///t<br/>///s<br/>/*remove a var from the list<br/>&nbsp&nbsp&nbsp&nbspe.g.,  testvar1=X01_C X02_C X03_C X04_C X05_C X06_C X04_C*X06_C&#59<br/>&nbsp&nbsp&nbsp&nbspto remove=x04 x05<br/>&nbsp&nbsp&nbsp&nbsptargetStr=testvar2<br/>&nbsp&nbsp&nbsp&nbspthemacro returns:<br/>&nbsp&nbsp&nbsp&nbsptestvar2 =X01_C X02_C X03_C X06_C (those partially matching X04 or x05, including the interaction terms are removed.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspit is case-insensitive)<br/>*/<br/>%macro removeVars(srcStr=, toRemove=, targetStr=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp%local srcStr toRemove targetStr debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*change the to remove string to upcase*/<br/>&nbsp&nbsp&nbsp&nbsp%let toRemove=%sysfunc(upcase(&toRemove))&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*save the src string into a dataset, split elements by dlmt (default is space)*/<br/>&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&srcStr, target=removeVars_tmp1, varname=element, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*save the to remove string into a dataset, split elements by dlmt (default is space)*/<br/>&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&toRemove, target=removeVars_tmp2, varname=element, dlmt=, debug=)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*match the two tables, keep those partially matched (e.g., 'X01_C_CatN * X56_N_QuiN' in the src str table matches<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'X56' in the to remove table*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=removeVars_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=removeVars_tmp2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=removeVars_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.element as element2),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm=%Str(index(t1.element, strip(t2.element)) >0),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=element<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*In the src table, keep elements not matched to any of the remove elements*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=removeVars_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=removeVars_tmp4,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfilters=%Str(element not in (select element from removeVars_tmp3)),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=element<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp/*store the kept elements into the target str*/<br/>&nbsp&nbsp&nbsp&nbsp%ValueToString(Data=removeVars_tmp4, &nbsp&nbsp&nbsp&nbsptheVar=element, theStrVarName=&targetStr, DLMT= )&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*delete tmp files*/<br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete removeVars_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend removeVars&#59<br/><br/><br/><br/>/*convert a macro string into values of a dataset */<br/>%macro StringToTable(theStr=, target=, varname=, dlmt=, debug=)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local theStr target debug workpath dlmt&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt)=0 %then %let dlmt =' '&#59<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&varname)=0 %then %let varname =variable&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&theStr) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat &varName $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto exit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*8. add must have vars (even if it was not selected in model selection)*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*lookup the musthaveCovars, and get the std var names (e.g., X02_C, X50_N)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCheck if these vars are in the var string <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp1) for categorical vars, in &stdCatCoVars_SCatN2<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not, add the vars into &stdCatCoVars_SCatN2<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2) for numerical vars, in &stdNumCoVars_S3<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif not, add the categorical type (_QuaN) into stdNumVars_CatN9<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Input values in the string mustHaveCoVars into a data set<br/>&nbsp&nbsp&nbsp&nbspNote: dateline does not work in SAS macros. <br/>&nbsp&nbsp&nbsp&nbspFollowing is an alternative way:<br/>&nbsp&nbsp&nbsp&nbspCreating temporary files:<br/>&nbsp&nbsp&nbsp&nbsphttps://documentation.sas.com/?docsetId=dispatch&docsetTarget=sasintra.htm&docsetVersion=9.4&locale=en<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Create a temp file in work path*/<br/>&nbsp&nbsp&nbsp&nbsp%let workpath = %sysfunc(pathname(work))&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &workpath&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*create a tmp txt file in the workpath, and give it a nickname*/<br/>&nbsp&nbsp&nbsp&nbspfilename tmptxt \"&workpath.\\_tmp.txt\"&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*write the values in &theStr into the tmp txt file */<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspfile tmptxt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspput \"&theStr\"&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*input values from that temp file*/<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat &varName $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspinfile tmptxt dlm=&dlmt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspinput &varName @@&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &varName ne ''&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*clear filename*/<br/>&nbsp&nbsp&nbsp&nbspfilename tmptxt clear&#59<br/>%exit:<br/>%mend StringToTable&#59<br/><br/><br/><br/>/*Determine what type of var best fit the models, i.e., numeric value, or categories, <br/>&nbsp&nbsp&nbsp&nbspcheck AIC and -2Log<br/>*/<br/>%macro checkVarsNumCatFit(data=, intintTable=, theVars=, stdNumCoVars_S2=, stdCatMainVar_CatN=, stdNumMainVar=, <br/>&nbsp&nbsp&nbsp&nbspstdCatCoVars_SCatN2=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data intintTable theVar  theVars stdCatMainVar_CatN stdNumMainVar stdNumCoVars_S2 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatCoVars_SCatN2 target debug dlmt i&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. CoVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theVars=&theVars&#59<br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for categorical covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&theVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar = %scan(&theVars, &i &dlmt)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theVar = &theVar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for a given numeric var, determine which type (as continuous, as categorical...) fit the best*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%checkTheVarNumCatFit(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&data, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspintintTable=&intintTable, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStdNumCovar0=&theVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=checkVarsNumCatFit_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdNumCoVars_S2=&stdNumCoVars_S2, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatMainVar_CatN=&stdCatMainVar_CatN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdNumMainVar=&stdNumMainVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatCoVars_SCatN2=&stdCatCoVars_SCatN2, &nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target checkVarsNumCatFit_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete checkVarsNumCatFit_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend checkVarsNumCatFit&#59<br/><br/><br/>/*for a given numeric var, determine which type (as continuous, as categorical...) fit the best*/<br/>%macro checkTheVarNumCatFit(data=, intintTable=, theStdNumCovar0=, target=, stdNumCoVars_S2=, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatMainVar_CatN=, stdNumMainVar=, stdCatCoVars_SCatN2=, &nbsp&nbsp&nbsp&nbspdebug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data intintTable target theStdNumCovar0 theStdNumCovar1 theStdNumCovar2 theStdNumCovar3<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheIntTerm stdNumCoVars_S3 stdNumCoVars_S2 stdCatMainVar_CatN stdNumMainVar stdCatCoVars_SCatN2 debug i &#59<br/>/**/<br/>/*&nbsp&nbsp&nbsp&nbsp%let intintTable= test8&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let data =test4&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%let theStdNumCovar0 = X49_N&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&theStdNumCovar0)=0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. CoVar $30. Ref_CoVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%goto exit&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let theStdNumCovar1 = &theStdNumCovar0&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theStdNumCovar2 = &theStdNumCovar0._QUAN&#59<br/>&nbsp&nbsp&nbsp&nbsp%let theStdNumCovar3 = &theStdNumCovar0._QUIN&#59<br/>&nbsp&nbsp&nbsp&nbsp/*test the model with theStdNumCoVar as numeric type*/<br/><br/>/*&nbsp&nbsp&nbsp&nbsp%put >>>>>>>>>>>>>>>>>>>>>>>>>>>> running checkTheVarNumCatFit&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%put >>> theStdNumCovar0=&theStdNumCovar0&#59*/<br/>/*&nbsp&nbsp&nbsp&nbsp%put >>> &theStdNumCovar1 &theStdNumCovar2 &theStdNumCovar3&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*the interaction term*/<br/>&nbsp&nbsp&nbsp&nbsp%let theIntTerm =&#59<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &intintTable&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif renamed = \"&theStdNumCovar0\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theIntTerm', intTerm)&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*init a table to hold fit results*/<br/>&nbsp&nbsp&nbsp&nbspdata checkTheVarNumCatFit_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. CoVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%do i = 1 %to 3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the original stdNumCoVars_S2, replace the value 'X49_N' with the redefined value (like 'X49_N_QUAN')*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let stdNumCoVars_S3 = %sysfunc(tranwrd(&stdNumCoVars_S2, &theStdNumCovar0, &&theStdNumCovar&i))&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the intTerm is found, it should be like X49_N * X01_C_CatN (the interaction between the current var and the main variable)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin that case, make a proper interaction term (e.g., X49_N * X01_C_CatN, or X49_N_QUAN * X01_C_CatN...)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theIntTerm) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine whether the main variable is of numerical or categorical type*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&stdCatMainVar_CatN ) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theIntTerm = &&theStdNumCovar&i*&stdCatMainVar_CatN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theIntTerm = &&theStdNumCovar&i*&stdNumMainVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theIntTerm = &theIntTerm&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=&data namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*when measured by categories of numeric vars, the categories are added in the class statement */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &i ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&&theStdNumCovar&i <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdCatMainVar_CatN  &stdCatCoVars_SCatN2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp model Y = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_SCatN2 &stdNumCoVars_S3 &theIntTerm&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = checkTheVarNumCatFit_tmp1 FitStatistics = checkTheVarNumCatFit_tmp2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace off&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%nobs(data=checkTheVarNumCatFit_tmp1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nobs=&nobs&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata checkTheVarNumCatFit_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. CoVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkTheVarNumCatFit_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed = \"&theStdNumCovar0\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspCoVar = \"&&theStdNumCovar&i\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspestRows= &nobs&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let nobs=&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata checkTheVarNumCatFit_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkTheVarNumCatFit_tmp4 checkTheVarNumCatFit_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*determine the measure with the smallest AIC*/<br/>&nbsp&nbsp&nbsp&nbspproc sort data=checkTheVarNumCatFit_tmp4 out=checkTheVarNumCatFit_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere criterion = 'AIC'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby renamed InterceptAndCovariates &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata checkTheVarNumCatFit_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkTheVarNumCatFit_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby renamed InterceptAndCovariates&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.renamed then smallAIC=InterceptAndCovariates&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain smallAIC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename InterceptAndCovariates = AIC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep CoVar renamed InterceptAndCovariates smallAIC&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*determine the -2 Log L log*/<br/>&nbsp&nbsp&nbsp&nbspproc sort data=checkTheVarNumCatFit_tmp4 out=checkTheVarNumCatFit_tmp7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere criterion = '-2 Log L'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby renamed InterceptAndCovariates &#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata checkTheVarNumCatFit_tmp8&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkTheVarNumCatFit_tmp7&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat Ref_CoVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspby renamed InterceptAndCovariates&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif first.renamed then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsmallLogL = InterceptAndCovariates&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspR1 = estRows&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspRef_Covar= covar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspretain smallLogL R1 Ref_Covar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLRT=abs(InterceptAndCovariates - smallLogL)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdf = abs(estRows-R1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsppValue = 1-probchi(LRT, df)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename InterceptAndCovariates = _2LogL&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep Ref_Covar CoVar LRT df pValue smallLogL InterceptAndCovariates&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*merge tmp6 and tmp8*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=checkTheVarNumCatFit_tmp6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=checkTheVarNumCatFit_tmp8,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=*,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=coVar<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete checkTheVarNumCatFit_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59&nbsp&nbsp&nbsp&nbsp<br/>%exit:<br/>%mend checkTheVarNumCatFit&#59<br/><br/><br/>/*Given a list of interestd vars, check interaction with the main variable. <br/>&nbsp&nbsp&nbsp&nbspThe result is a table containing interested vars, and the type 3 result of the interaction terms (each interested var * the main variable)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspe.g., resitype * X01_CatN<br/>*/<br/>%macro checkVarsIntInt(data=, theVars=, theVarsMapFile=, stdCatMainVar_CatN=, stdNumMainVar=, debug=, target=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data theVars theVarsMapFile dlmt i theVar stdCatMainVar_CatN stdNumMainVar target debug &#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. original $100. intTerm $200. theVar $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for categorical covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&theVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar = %scan(&theVars, &i &dlmt)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*For a given var (theVar), check if it has siginficant interaction with the main var.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspIf the ineraction is significant, return &theVar into theIntVar (a global var) (like age, or Sex_desc, or resitype) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif the interaction is not significant, return a null value in theIntVar<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%checkTheVarIntInt (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=&theVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVarsMapFile=VarsMap, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatMainVar_CatN=&stdCatMainVar_CatN, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdNumMainVar=&stdNumMainVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=checkVarsIntInt_tmp1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target checkVarsIntInt_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete checkVarsIntInt_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend checkVarsIntInt&#59<br/><br/>/*For a given var (theVar), check if it has siginficant interaction with the main var.<br/>&nbsp&nbsp&nbsp&nbspIf the ineraction is significant, return &theVar into theIntVar (a global var) (like age, or Sex_desc, or resitype) <br/>&nbsp&nbsp&nbsp&nbspif the interaction is not significant, return a null value in theIntVar<br/>*/<br/>%macro checkTheVarIntInt (data=, theVar=, theVarsMapFile=, stdCatMainVar_CatN=, stdNumMainVar=, target=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%local data theVar theStdVar theStdVarC theStdVarN theIntTerm stdCatMainVar_CatN stdNumMainVar target debug theIntVar <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspstdCatCoVars_SCatN2x1<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*lookup the varsmap and find the corresponding std var name*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar=%upcase(&theVar)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &theVarsMapFile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere upcase(original) = \"&theVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('theStdVar', renamed)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('theIntVar', original)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theStdVar=%sysfunc(strip(&theStdVar))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*theIntVar differs from theVar in that theIntVar is exactly the var in the map file (e.g., Sex_Desc), while<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar can be of different case (e.g., sex_desc)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theIntVar=%sysfunc(strip(&theIntVar))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theStdVar = &theStdVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the proper name for the stdVar (either save as a categorical var in theStdVarC, or a continuous var in theStdVarN*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %substr(&theStdVar, %length(&theStdVar), 1) = C %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theStdVarC = %sysfunc(strip(&theStdVar))_CatN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theStdVarN =&theStdVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theStdVarC=&theStdVarC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theStdVarN=&theStdVarN&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*determine the interaction between thestdVar, and  the main variable*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&stdCatMainVar_CatN) ne 0 %then %let theVarIntTerm = &stdCatMainVar_CatN*&theStdVarC&theStdVarN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %let theVarIntTerm = &stdNumMainVar*&theStdVarC&theStdVarN&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*the following is wrong. This macro takes all vars regardless of being selected or not in xPilot8<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe followoing steps add all vars into the stdCatCoVars_SCatN2 list. Wrong! <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspChanged 2020-02-27<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspuse a separate var stdCatCoVars_SCatN2x1 instead<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the theStdVarC is not in stdCatCoVars_SCatN2, add it */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let stdCatCoVars_SCatN2x1=&stdCatCoVars_SCatN2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theStdVarC) ne 0 and %index(&stdCatCoVars_SCatN2, &theStdVarC) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let stdCatCoVars_SCatN2x1= &stdCatCoVars_SCatN2 &theStdVarC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*if the theStdVarN is not in stdNumCoVars_S2, add it in to another */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let stdNumCoVars_S2x1=&stdNumCoVars_S2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theStdVarN) ne 0 and %index(&stdNumCoVars_S2, &theStdVarN) = 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let stdNumCoVars_S2x1= &stdNumCoVars_S2 &theStdVarN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> stdCatCoVars_SCatN2x1=&stdCatCoVars_SCatN2x1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> stdNumCoVars_S2x1=&stdNumCoVars_S2x1&#59<br/><br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace on&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*allow max length of the output var field =200 (e.g., <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the type 3/ANOVA ods table, and in the column 'effect', the interaction term 'X01_C_CatN*X03_C_CatN'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspis of a length of 21. By default, the column 'effect' is of 20 in length, part of the interaction term name will be truncated. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhen specifed as namelen=200, The length of column 'effect' will be extended to 21 (the max in all variable terms) <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=&data namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass &stdCatMainVar_CatN   &stdCatCoVars_SCatN2x1 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp model Y = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_SCatN2 &stdNumCoVars_S2x1  &theVarIntTerm &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*only check two way interactions*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ModelANOVA = checkTheVarIntInt_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods results on&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods trace off&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*save the interaction terms into the target set*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30. original $100. effect $200. theVar $30. &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkTheVarIntInt_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed = \"&theStdVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal=\"&theIntVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&theStdVarC) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar = \"&theStdVarC\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar = \"&theStdVarN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspeffect = intTerm<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspProbChisq = pValue&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif index(effect , '*') >0  and (index(effect, \"&theStdVarC\") >0 or index(effect, \"&theStdVarN\") >0 ) &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete checkTheVarIntInt_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend checkTheVarIntInt&#59<br/><br/><br/>/*Given a list of vars (theVars), keep those not having multicollinearity problems.  */<br/>%macro GetNonMultiCollinVars(theVars=, theNonCollinVarHeaders=, targetVarName=, dlmt=, debug=)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*must have, enable in operator, and set delimiter = ' ' (a single space)*/<br/>&nbsp&nbsp&nbsp&nbspoptions minoperator mindelimiter=' '&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local theVars theNonCollinVarHeaders targetVarName i dlmt debug theVar theVarSeg1 theVarSeg2 theVarHeader&#59<br/>&nbsp&nbsp&nbsp&nbsp%global &targetVarName&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp%let &targetVarName=&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for categorical covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&theVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar = %scan(&theVars, &i &dlmt)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theVar = &theVar&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the header of theVar. (e.g., if theVar = X2_C_CatN, get the header (X2_C)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsuch header will be used to match the headers in &theNonCollinVarHeaders<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVarSeg1=%scan(&theVar, 1, \"_\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVarSeg2=%scan(&theVar, 2, \"_\")&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVarHeader=&theVarSeg1._&theVarSeg2&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put theVarHeader = &theVarHeader&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*check if theVar header matches a header in &theNonCollinVarHeaders*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theNonCollinVarHeaders= &theNonCollinVarHeaders&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if &theVarHeader in (&theNonCollinVarHeaders) %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add the current var into the targetVar list*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &targetVarName = &&&targetVarName &theVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend GetNonMultiCollinVars&#59<br/><br/>/*check multicollinearity*/<br/>%macro checkMultiCollin(data = , target=, Y=, Vars=,  VarsMapFile=, VIFCutOff=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data target Y Vars VarsMapFile&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*By default, set VIF CutOff = 2.5*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&VIFCutOff) = 0 %then %let VIFCutOff =2.5&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%put >>> Vars= &Vars&#59<br/>&nbsp&nbsp&nbsp&nbsp/*1. get VIF of vars. Highlight those with a VIF greater than &VIFCutOff(e.g., 2.5), there is no clue which var is colliner with which*/<br/>&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbspods select none&#59<br/>&nbsp&nbsp&nbsp&nbspproc reg data=&data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspmodel &Y=&vars /vif tol&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ParameterEstimates = checkMultiCollin_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods select all&#59<br/>&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbspdata checkMultiCollin_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkMultiCollin_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif variable in: ('X')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep Variable VarianceInflation&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename VarianceInflation = VIF&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*Indicate those with VIF > &VIFCutOff*/<br/>&nbsp&nbsp&nbsp&nbspData checkMultiCollin_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset checkMultiCollin_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif VIF > &VIFCutOff then MultiCollin=1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse MultiCollin=0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvariable=tranwrd(variable, '_CatN', '')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=checkMultiCollin_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2= &VarsMapFile,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.original),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjterm=%str(t1.variable = t2.renamed),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby =VIF desc<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete checkMultiCollin_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%mend checkMultiCollin&#59<br/><br/><br/><br/>/*add pre/surfix to the vars<br/>&nbsp&nbsp&nbsp&nbspe.g., for a string of  X3_C X4_C, change it to <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX3_C_CatC X4_C_CatC<br/>*/<br/>%macro VarsAddPreSurfix(srcVars=, targetVarName=, prefix=, surfix=, dlmt=)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%local srcVars dlmt i prefix surfix theVar thetargetVar targetVarName dlmt2&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%put >>> targetVarName = &targetVarName&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*note:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptargetVarName refers to the name of the variable (e.g., stdCarVars_CatC) to hold targer vars . <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the above case, &targetVarName = stdCarVars_CatC<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&&&targetVarName (three &s, not 2 &s) refers to the string (i.e., the variable names) stored in the variable 'stdCarVars_CatC'<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe stored variable names are like X1_C_CatC X2_C_CatC, etc <br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp%global &&targetVarName&#59<br/>&nbsp&nbsp&nbsp&nbsp%let &targetVarName=&#59<br/>/*&nbsp&nbsp&nbsp&nbsp%put >>> &targetVarName=&&&targetVarName&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*if the srcVars is null, exit*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&srcVars) = 0 %then %goto exit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt2 = , &dlmt&#59<br/>&nbsp&nbsp&nbsp&nbsp%else %let dlmt2=&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&srcVars, &i &dlmt2))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar = %scan(&srcVars, &i &dlmt2)&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theVar = &theVar&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add prefix*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&prefix) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thetargetVar = &prefix.&theVar&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theTargetVar = &theTargetVar&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &targetVars = &&&targetVarName &dlmt &thetargetVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%else %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thetargetVar= &theVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add surfix*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&surfix) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let thetargetVar =&thetargetVar.&surfix&#59<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theTargetVar = &theTargetVar&#59*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let &targetVarName =&&&targetVarName &dlmt &thetargetVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%put >>> &targetVarName =&&&targetVarName&#59<br/>%exit:<br/>%mend VarsAddPreSurfix&#59<br/><br/><br/>/*loop for numvars and catvars, and rename vars into standardized names. Also make a varmap file to<br/>&nbsp&nbsp&nbsp&nbspmap the renamed, and the original names*/<br/>%macro makeStdVarNames(data =, outcomeVar=, CatMainVar=, NumMainVar=, NumCoVars=, CatCoVars=, target=,  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarsMapfile=, dlmt=, leadingZ=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data CatMainVar NumMainVar NumCoVars CatCoVars target i theNumCoVar theCatCoVars dlmt debug j k zk leadingZ varsMapfile&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&varsMapfile) =0 %then %let varsMapfile = varsMap&#59<br/>&nbsp&nbsp&nbsp&nbsp/*leading zeros*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&leadingZ) =0 %then %let leadingZ = 1&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*At first, let the target file be the source file*/<br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &outcomeVar=Y&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &outcomeVar = \"&outcomeVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*Create the var map file, enter the renamed, and original outcome var*/<br/>&nbsp&nbsp&nbsp&nbspdata &varsMapfile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed='Y'&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal = \"&outcomeVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%let k=1&#59 /*for the main variable, the k value is always 1, so that it always takes the position of X1_...*/<br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for the main variable of categorical type */<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&CatMainVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add leading zeros (X1 => X01, easy for ordering*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let zk=%sysfunc(putN(&k, z%eval(&leadingZ+1)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*create a map record for the renamed (like X1_C), and the original (like CombTerm_FS)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeStdVarNames_tmp1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed= \"X&zk._C\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal = \"&CatMainVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*append the map record into the var map file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &varsMapfile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &varsMapfile makeStdVarNames_tmp1a&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the target file, rename the original var (like CombTerm_FS => X1_C)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsave the original name into the var's label*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &CatMainVar = X&zk._C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &CatMainVar= \"&CatMainVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for the main variable of numerical type*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&NumMainVar) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*create a map record for the renamed (like X1_N), and the original (like Age, if age is the main variable for analyses)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeStdVarNames_tmp1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let zk=%sysfunc(putN(&k, z%eval(&leadingZ+1)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed= \"X&zk._N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal = \"&NumMainVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*append the map record into the var map file*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &varsMapfile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &varsMapfile makeStdVarNames_tmp1b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*In the target file, rename the original var (like Age => X1_N)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspsave the original name into the var's label*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &NumMainVar = X&zk._N&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &NumMainVar= \"&NumMainVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*define the dlmt*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for categorical covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&CatCoVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCatCoVar = %scan(&CatCoVars, &i &dlmt)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theCatCoVar = &theCatCoVar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let k = %eval(&k+ 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeStdVarNames_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let zk=%sysfunc(putN(&k, z%eval(&leadingZ+1)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed= \"X&zk._C\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal = \"&theCatCoVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &varsMapfile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &varsMapfile makeStdVarNames_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for a given CatCoVar, rename it by adding the prefix: Xn_C_...*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &theCatCoVar = X&zk._C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theCatCoVar= \"&theCatCoVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for numeric covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&NumCoVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theNumCoVar = %scan(&NumCoVars, &i &dlmt)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theNumCoVar = &theNumCoVar&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for a given NumCoVar, rename it by adding the prefix: Xn_N_...*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let k= %eval(&k+1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata makeStdVarNames_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $10. original $100.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let zk=%sysfunc(putN(&k, z%eval(&leadingZ+1)))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed= \"X&zk._N\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporiginal = \"&theNumCoVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &varsMapfile&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &varsMapfile makeStdVarNames_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &theNumCoVar=X&zk._N&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theNumCoVar= \"&theNumCoVar\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeStdVarNames_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend makeStdVarNames&#59<br/><br/><br/>/*for a given variable in the source dataset, make quartile and quintile rank categories*/<br/>%macro makeRanks(data=, target=, theRankVar=, debug=, groupVars=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data target theRankVar debug groupVars p25 p50 p75 p20 p40 p60 p80<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheLabel theLabelQuac theLabelQuan theLabelQuic theLabelQuin<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&groupVars) = 0 %then %let groupVars = Key_hsn&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*1. keep groupvars (to make distinct records, e.g., key_hsn, key_hsn by drugclass, etc) and theRankVar, i.e.<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe var to make ranks (e.g., theRankVar = age)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp- change missing values to 0<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp- change values to the rounded integers<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata makeRanks_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep &groupVars &theRankVar &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif &theRankVar = . then &theRankVar = 0&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theRankVar = round(&theRankVar, \"1\")&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59 <br/><br/>&nbsp&nbsp&nbsp&nbsp/*2. create corresponding ranks var using:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa. quartiles, b. quintiles<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp/*determine the Q values (e.g., p25, p75, etc)*/<br/>&nbsp&nbsp&nbsp&nbsp%GetMeanStats(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=makeRanks_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhere=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupVars=,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheVar=&theRankVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheStats=mean median p25 p75 p20 p40 p60 p80,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeRanks_tmp2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*determine the quartile cut-off values p25 p50 p75<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspNote: these values must be of integers<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p25', int(p25))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p50', int(median))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p75', int(p75))&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &p25 &p50 &p75&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*make quartiles<br/>&nbsp&nbsp&nbsp&nbspNote, it does not matter if the p25 = p50, the macro makeCategories ignores repeated cutoff points. Nice!<br/>&nbsp&nbsp&nbsp&nbsp*/<br/><br/>&nbsp&nbsp&nbsp&nbsp%MakeCategories(<br/>&nbsp&nbsp&nbsp&nbsp    Data=makeRanks_tmp1, <br/>&nbsp&nbsp&nbsp&nbsp    theVar=&theRankVar,<br/>&nbsp&nbsp&nbsp&nbsp    theTargetVar=&theRankVar._QUAC,<br/>&nbsp&nbsp&nbsp&nbsp    theCutOffs=&p25 &p50 &p75, <br/>&nbsp&nbsp&nbsp&nbsp    dlmt=, <br/>&nbsp&nbsp&nbsp&nbsp    debug=, <br/>&nbsp&nbsp&nbsp&nbsp    closeSide=left,<br/>&nbsp&nbsp&nbsp&nbsp    target=makeRanks_tmp3a<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get the quartile categories */<br/>&nbsp&nbsp&nbsp&nbspproc freq data=makeRanks_tmp3a nlevels noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptable &theRankVar._QUAC /out=makeRanks_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata makeRanks_tmp3c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp3b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theRankVar._QUAN =_n_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop count percent&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*attach numeric values corresponding to the quartile categories */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeRanks_tmp3a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=makeRanks_tmp3c, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeRanks_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&theRankVar._QUAN),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars =&theRankVar._QUAC<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*make quintiles*/<br/>&nbsp&nbsp&nbsp&nbsp/*determine the vars  p20 p40 p60 p80*/<br/>&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p20', int(p20))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p40', int(p40))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p60', int(p60))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput ('p80', int(p80))&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> &p20 &p40 &p60 &p80&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%MakeCategories(<br/>&nbsp&nbsp&nbsp&nbsp    Data=makeRanks_tmp3, <br/>&nbsp&nbsp&nbsp&nbsp    theVar=&theRankVar,<br/>&nbsp&nbsp&nbsp&nbsp    theTargetVar=&theRankVar._QUIC,<br/>&nbsp&nbsp&nbsp&nbsp    theCutOffs= &p20 &p40 &p60 &p80, <br/>&nbsp&nbsp&nbsp&nbsp    dlmt=, <br/>&nbsp&nbsp&nbsp&nbsp    debug=, <br/>&nbsp&nbsp&nbsp&nbsp    closeSide=left,<br/>&nbsp&nbsp&nbsp&nbsp    target=makeRanks_tmp5a<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*get the quintile categories */<br/>&nbsp&nbsp&nbsp&nbspproc freq data=makeRanks_tmp5a nlevels noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptable &theRankVar._QUIC /out=makeRanks_tmp5b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspdata makeRanks_tmp5c&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp5b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theRankVar._QUIN =_n_ &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop count percent&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*attach numeric values corresponding to the quintile categories */<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=makeRanks_tmp5a,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=makeRanks_tmp5c, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeRanks_tmp5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&theRankVar._QUIN),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars =&theRankVar._QUIC<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*Attach the rank categories and level numbers back to the source data*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=&data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=makeRanks_tmp5, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeRanks_tmp6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&theRankVar._QUAC, t2.&theRankVar._QUAN, t2.&theRankVar._QUIC, t2.&theRankVar._QUIN),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars =&groupVars<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp/*It does not work to change label values directly in data steps<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe label values have to be extracted into macro variables, and then assigned back to the target vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*get the label of the var, and save into a macro variable*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp6&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theLabel', label(&theRankVar))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelQuac = %sysfunc(strip(&theLabel))_QUAC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelQuan = %sysfunc(strip(&theLabel))_QUAN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelQuic = %sysfunc(strip(&theLabel))_QUIC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelQuin = %sysfunc(strip(&theLabel))_QUIN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> &theLabelQuac &theLabelQuan &theLabelQuic &theLabelQuin&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add labels to the vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeRanks_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theRankVar._QUAC = \"&theLabelQuac\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theRankVar._QUAN = \"&theLabelQuan\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theRankVar._QUIC = \"&theLabelQuic\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theRankVar._QUIN = \"&theLabelQuin\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeRanks_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend makeRanks&#59<br/><br/><br/><br/>/*loop for numvars and make quartile and quintile ranks*/<br/>%macro NumVarsMakeRanks(data =, numvars=, target=, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data numvars target i theNumVar dlmt debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*if numvars is empty, exit*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&numvars) = 0 %then %goto exit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&numvars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theNumVar = %scan(&numvars, &i &dlmt)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theNumVar = &theNumVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for a given var, make categories accoridng to p25 p50 p75 cutoff, and p20 p40 p60 p80 cutoff*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeRanks(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata = &target,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget= &target,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheRankVar=&theNumVar,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Report the levels*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=&target, table= &theNumVar._QuaC &theNumVar._QuiC)&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/>%exit:<br/>%mend NumVarsMakeRanks&#59<br/><br/><br/><br/><br/>/*loop for catVars and assign numeric number for each level*/<br/>%macro CatVarsMakeRanks(data =, catvars=, target=, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data catvars target i theCatVar dlmt debug&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*if catvars is empty, exit*/<br/>&nbsp&nbsp&nbsp&nbsp%if %length(&catvars) = 0 %then %goto exit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&catvars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theCatVar = %scan(&catvars, &i &dlmt)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>>theCatVar = &theCatVar&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*for a categorical var, assign a numeric number to each level*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%makeVarCatN(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata=&target, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=&target, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheCatVar=&theCatVar, <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdebug=&debug<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*Report the levels*/<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%freq(data=&target, table= &theCatVar._CatC &theCatVar._CatN )&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%exit:<br/><br/>%mend CatVarsMakeRanks&#59<br/><br/><br/>/*for a categorical var, assign a numeric number to each level*/<br/>%macro makeVarCatN(data=, target=, theCatVar=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local data target theCatVar debug theLabel theLabelC theLabelN&#59<br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*get the levels*/<br/>&nbsp&nbsp&nbsp&nbspproc freq data=&data nlevels noprint&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptable &theCatVar /nocol nocum norow nopct out=makeVarCatN_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59 <br/>&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp/*assign a number for each level*/&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspdata makeVarCatN_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeVarCatN_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theCatVar._CatN =_n_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop count percent&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*attach the numeric value of the levels back to the source data, and rename the original var as var._CatC (to standardize the var names)*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=&data,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=makeVarCatN_tmp2,&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>/*&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=%str(&target(rename = ( &theCatVar=&theCatVar._CatC))),*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=makeVarCatN_tmp3,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.&theCatVar._CatN),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=inner,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars = &theCatVar<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*It does not work to change label values directly in data steps<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe label values have to be extracted into macro variables, and then assigned back to the target vars*/<br/>&nbsp&nbsp&nbsp&nbsp/*get the label of the var, and save into a macro variable*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _null_&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeVarCatN_tmp3&#59&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcall symput('theLabel', label(&theCatVar))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelC = %sysfunc(strip(&theLabel))_CatC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theLabelN = %sysfunc(strip(&theLabel))_CatN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*%put >>> &theLabelC &theLabelN&#59*/<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*add labels to the vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset makeVarCatN_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &theCatVar = &theCatVar._CatC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theCatVar = \"&theLabelC\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsplabel &theCatVar._CatN = \"&theLabelN\"&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete makeVarCatN_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/><br/>%mend makeVarCatN&#59<br/><br/><br/><br/><br/><br/><br/><br/><br/>s///<br/>t///","custparents":[{"idx":"MYa10652e6-d573-4b5e-a2a8-513d1ab33e61"}]},{"idx":"caf61621-4979-4d1d-8c98-57865ea09b1a","name":"Test logistic macro ","NodeDescription":"///t<br/>///s<br/>%macro testLogistic(teestTargetPath=, themainV=, checkAllInteraction=, srcData0=, keepvars=)&#59<br/>%local testLogisticPath theMainV teestTarget teestTargetPath vars1 vars2 checkAllInteraction srcData0  keepvars&#59<br/><br/>options dlcreatedir&#59<br/>libname teestT \"&teestTargetPath\"&#59<br/><br/>/*clean up all _xPilot files in the work dir*/<br/>proc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbspdelete _xPilot:&#59<br/>run&#59<br/><br/><br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot1 all raw vars&#59<br/><br/>data _XPilot1&#59<br/>&nbsp&nbsp&nbsp&nbspretain &groupVars &outcomeVar &CatMainVar &NumMainVar  &CatCoVars &NumCoVars&#59<br/>&nbsp&nbsp&nbsp&nbspset &srcData0&#59<br/>&nbsp&nbsp&nbsp&nbspkeep &outcomeVar &CatMainVar &NumMainVar &NumCoVars &groupVars &CatCoVars &keepVars&#59<br/>run&#59<br/><br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot2 all standard vars, and varsMap&#59<br/><br/>/*make standardized var names<br/>&nbsp&nbsp&nbsp&nbspfor the outcome, rename it as Y<br/>&nbsp&nbsp&nbsp&nbspfor NumCoVars: Xn_N_...<br/>&nbsp&nbsp&nbsp&nbspfor CatCoVars: Xn_C_...<br/>*/<br/><br/>%makeStdVarNames(<br/>&nbsp&nbsp&nbsp&nbspdata =_XPilot1, <br/>&nbsp&nbsp&nbsp&nbspoutcomeVar = &outcomeVar, CatMainVar=&CatMainVar, NumMainVar=&NumMainVar,<br/>&nbsp&nbsp&nbsp&nbspNumCoVars=&NumCoVars, CatCoVars=&CatCoVars, <br/>&nbsp&nbsp&nbsp&nbspleadingZ=1,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot2, varsMapfile=varsmap, dlmt=, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/><br/>/*data teestT._xpilot2&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset _xpilot2&#59*/<br/>/*run&#59*/<br/><br/>data teestT.VarsMap&#59<br/>&nbsp&nbsp&nbsp&nbspset VarsMap&#59<br/>run&#59<br/><br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot3 all standard vars&#59<br/><br/>/*make a string of standardized CatMainVar (if there is no such var, the stdCatMainVar will be null)*/<br/>%let stdCatMainVar=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset varsmap&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed = 'X01_C'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('stdCatMainVar', renamed)&#59<br/>run&#59 <br/>%put >>> stdCatMainVar = &stdCatMainVar&#59<br/><br/>/*make a string of standardized NumMainVar (if there is no such var, the stdNumMainVar will be null)*/<br/>%let stdNumMainVar=&#59<br/>data _null_&#59<br/>&nbsp&nbsp&nbsp&nbspset varsmap&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed = 'X01_N'&#59<br/>&nbsp&nbsp&nbsp&nbspcall symput('stdNumMainVar', renamed)&#59<br/>run&#59 <br/>%put >>> stdNumMainVar = &stdNumMainVar&#59<br/><br/>/*make a string of standardized CatCoVars*/<br/>data _XPilot3a&#59<br/>&nbsp&nbsp&nbsp&nbspset varsmap&#59<br/>&nbsp&nbsp&nbsp&nbspif index(renamed, '_C') >0 and not (renamed in: ('X01_')) &#59<br/>run&#59 <br/>%ValueToString(Data=_XPilot3a, &nbsp&nbsp&nbsp&nbsptheVar=renamed, theStrVarName=stdCatCoVars, DLMT=)&#59<br/>data teestT._xpilot3a&#59<br/>&nbsp&nbsp&nbsp&nbspset _xpilot3a&#59<br/>run&#59<br/><br/>/*make a string of standardized NumCoVars*/<br/>data _XPilot3b&#59<br/>&nbsp&nbsp&nbsp&nbspset varsmap&#59<br/>&nbsp&nbsp&nbsp&nbspif index(renamed, '_N') >0 and not (renamed in: ('X01_')) &#59<br/>run&#59 <br/>%ValueToString(Data=_XPilot3b, &nbsp&nbsp&nbsp&nbsptheVar=renamed, theStrVarName=stdNumCoVars, DLMT=)&#59<br/>data teestT._xpilot3b&#59<br/>&nbsp&nbsp&nbsp&nbspset _xpilot3b&#59<br/>run&#59<br/><br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot4 levels of cat and num vars&#59<br/><br/>/*For the catMainvar and assign numeric number for each level*/<br/>%CatVarsMakeRanks(<br/>&nbsp&nbsp&nbsp&nbspdata =_XPilot2, <br/>&nbsp&nbsp&nbsp&nbspCatVars=&stdCatMainVar, <br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot4a, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*data teestT._xpilot4a&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset _xpilot4a&#59*/<br/>/*run&#59*/<br/><br/><br/>/*loop for CatCoVars and assign numeric number for each level*/<br/>%CatVarsMakeRanks(<br/>&nbsp&nbsp&nbsp&nbspdata =_XPilot4a, <br/>&nbsp&nbsp&nbsp&nbspCatVars=&stdCatCoVars, <br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot4b, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>/*data teestT._xpilot4b&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset _xpilot4b&#59*/<br/>/*run&#59*/<br/><br/>/*For the numMainvar and assign numeric number for each level*/<br/>%NumVarsMakeRanks(<br/>&nbsp&nbsp&nbsp&nbspdata=_XPilot4b,<br/>&nbsp&nbsp&nbsp&nbspNumVars=&stdNumMainVar,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot4c<br/>)&#59<br/>/*data teestT._xpilot4c&#59*/<br/>/*&nbsp&nbsp&nbsp&nbspset _xpilot4c&#59*/<br/>/*run&#59*/<br/><br/>/*loop for NumCoVars and make quartile and quintile ranks*/<br/>%NumVarsMakeRanks(<br/>&nbsp&nbsp&nbsp&nbspdata=_XPilot4c,<br/>&nbsp&nbsp&nbsp&nbspNumVars=&stdNumCoVars,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot4<br/>)&#59<br/><br/>data teestT._xpilot4&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot4&#59<br/>run&#59<br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot5 check multicollinearity&#59<br/><br/>/*add surfix to the standardized categorical var names. <br/>&nbsp&nbsp&nbsp&nbspe.g., for a string of  X3_C X4_C, change it to &nbsp&nbsp&nbsp&nbspX3_C_CatN X4_C_CatN<br/>*/<br/>%VarsAddPreSurfix(srcVars=&stdCatMainVar, targetVarName=stdCatMainVar_CatN, prefix=, surfix=_CatN)&#59<br/>%VarsAddPreSurfix(srcVars=&stdCatMainVar, targetVarName=stdCatMainVar_CatC, prefix=, surfix=_CatC)&#59<br/>%VarsAddPreSurfix(srcVars=&stdCatCoVars, targetVarName=stdCatCoVars_CatN, prefix=, surfix=_CatN)&#59<br/>%VarsAddPreSurfix(srcVars=&stdCatCoVars, targetVarName=stdCatCoVars_CatC, prefix=, surfix=_CatC)&#59<br/><br/><br/>/*check multicollinearity*/<br/>%checkMultiCollin (<br/>&nbsp&nbsp&nbsp&nbspdata = _XPilot4,<br/>&nbsp&nbsp&nbsp&nbsptarget = _XPilot5a, <br/>&nbsp&nbsp&nbsp&nbspY=Y, <br/>&nbsp&nbsp&nbsp&nbspVars=%str( &stdCatMainVar_CatN  &stdNumMainVar   &stdCatCoVars_CatN &stdNumCoVars),<br/>&nbsp&nbsp&nbsp&nbspvarsMapFile=VarsMap,<br/>&nbsp&nbsp&nbsp&nbspVIFCutOff=2.5,<br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>data teestT._xpilot5a&#59<br/>&nbsp&nbsp&nbsp&nbspset _xpilot5a&#59<br/>run&#59<br/><br/>/*exclude those with VIF > &VIFCutOff (e.g., 2.5)*/<br/>data _XPilot5&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot5a&#59<br/>&nbsp&nbsp&nbsp&nbspif MultiCollin=0&#59<br/>run&#59<br/>/*sort variables*/<br/>%sort(data=_XPilot5, sorter=variable)&#59<br/>data teestT._xpilot5&#59<br/>&nbsp&nbsp&nbsp&nbspset _xpilot5&#59<br/>run&#59<br/><br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> making _XPilot6-8 make var list&#59<br/><br/>/*make a string for vars to be kept after VIF check (without multicollinearity problems)*/<br/>%ValueToString(Data=_XPilot5, &nbsp&nbsp&nbsp&nbsptheVar=variable, theStrVarName=nonMultiCollinVars, DLMT=)&#59<br/><br/>/*Given a list of vars (theVars), keep those not having multicollinearity problems.  */<br/>%GetNonMultiCollinVars(<br/>&nbsp&nbsp&nbsp&nbsptheVars=&stdCatCoVars_CatN, <br/>&nbsp&nbsp&nbsp&nbsptheNonCollinVarHeaders=&nonMultiCollinVars, <br/>&nbsp&nbsp&nbsp&nbsptargetVarName=stdCatCoVars_CatN_nonMultiCollin, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, debug=<br/>)&#59<br/>%put stdCatCoVars_CatN_nonMultiCollin = &stdCatCoVars_CatN_nonMultiCollin&#59<br/>%GetNonMultiCollinVars(<br/>&nbsp&nbsp&nbsp&nbsptheVars=&stdNumCoVars, <br/>&nbsp&nbsp&nbsp&nbsptheNonCollinVarHeaders=&nonMultiCollinVars, <br/>&nbsp&nbsp&nbsp&nbsptargetVarName=stdNumCoVars_nonMultiCollin, <br/>&nbsp&nbsp&nbsp&nbspdlmt=, debug=<br/>)&#59<br/>%put stdNumCoVars_nonMultiCollin = &stdNumCoVars_nonMultiCollin&#59<br/><br/>/*Select Vars, Univariate, excluding vars with a p > .05*/<br/>ods results off&#59<br/>proc logistic data=_XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass &stdCatMainVar_CatN &stdCatCoVars_CatN_nonMultiCollin&#59<br/>&nbsp&nbsp&nbsp&nbspModel Y = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_CatN_nonMultiCollin &stdNumCoVars_nonMultiCollin <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/selection=forward slentry=.05 slstay= .05&#59<br/>&nbsp&nbsp&nbsp&nbspods output ModelBuildingSummary=_XPilot6a ModelANOVA = _XPilot6b&#59<br/>run&#59<br/>ods results on&#59<br/>ods results off&#59<br/>proc logistic data=_XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass &stdCatMainVar_CatN &stdCatCoVars_CatN_nonMultiCollin&#59<br/>&nbsp&nbsp&nbsp&nbspModel Y = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_CatN_nonMultiCollin &stdNumCoVars_nonMultiCollin <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/selection=forward slentry=.05 slstay= .05&#59<br/>&nbsp&nbsp&nbsp&nbspods output ModelBuildingSummary=_XPilot6c ModelANOVA = _XPilot6d&#59<br/>run&#59<br/>ods results on&#59<br/>ods results off&#59<br/>proc logistic data=_XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbspclass &stdCatMainVar_CatN &stdCatCoVars_CatN_nonMultiCollin&#59<br/>&nbsp&nbsp&nbsp&nbspModel Y = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_CatN_nonMultiCollin &stdNumCoVars_nonMultiCollin <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/selection=stepwise slentry=.05 slstay= .05&#59<br/>&nbsp&nbsp&nbsp&nbspods output ModelBuildingSummary=_XPilot6e ModelANOVA = _XPilot6f&#59<br/>run&#59<br/>ods results on&#59<br/><br/>data teestT._xpilot6a&#59<br/>&nbsp&nbsp&nbsp&nbspset _xpilot6a&#59<br/>run&#59<br/>data teestT._xpilot6b&#59&nbsp&nbsp&nbsp&nbspset _xpilot6b&#59run&#59<br/>data teestT._xpilot6c&#59&nbsp&nbsp&nbsp&nbspset _xpilot6c&#59run&#59<br/>data teestT._xpilot6d&#59&nbsp&nbsp&nbsp&nbspset _xpilot6d&#59run&#59<br/>data teestT._xpilot6e&#59&nbsp&nbsp&nbsp&nbspset _xpilot6e&#59run&#59<br/>data teestT._xpilot6f&#59&nbsp&nbsp&nbsp&nbspset _xpilot6f&#59run&#59<br/><br/>/*keep variables that appear in _XPilot5, _XPilot6B 6D and 6F<br/>&nbsp&nbsp&nbsp&nbspThese are vars that <br/>&nbsp&nbsp&nbsp&nbsp1. not having multicollinearity problem<br/>&nbsp&nbsp&nbsp&nbsp2. with an effect p <.05 in the multivariable model<br/>*/<br/><br/>PROC SQL&#59<br/>   CREATE TABLE _XPilot7a <br/>&nbsp&nbsp&nbsp&nbspAS <br/>   SELECT t0.variable <br/>      FROM _XPilot5 t0, _XPilot6B t1, _XPilot6D t2, _XPilot6F t3<br/>      WHERE (<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt0.variable = tranwrd(t1.Effect, '_CatN', '') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAND t0.variable =tranwrd(t2.Effect, '_CatN', '') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAND t0.variable =tranwrd(t3.Effect, '_CatN', '') <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)<br/>&nbsp&nbsp&nbsp&nbsporder by variable&#59<br/>QUIT&#59<br/>data teestT._xpilot7a&#59&nbsp&nbsp&nbsp&nbspset _xpilot7a&#59run&#59<br/>/*in varsmap, indicate those selected in _XPilot7a*/<br/>%print(data=varsmap, obs=100)&#59 <br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=varsmap,<br/>&nbsp&nbsp&nbsp&nbspt2=_XPilot7a,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot7,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.variable=\"\", 0, 1) as S7),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(t1.renamed=t2.variable)<br/>)&#59<br/>data teestT._xpilot7&#59&nbsp&nbsp&nbsp&nbspset _xpilot7&#59run&#59<br/><br/>%let mustHaveCoVars=&CatMainVar &NumMainVar  &#59<br/>%put >>> &mustHaveCoVars&#59<br/><br/>%StringToTable(theStr=&mustHaveCoVars, target=_XPilot8a, varname=original, dlmt=, debug=)&#59<br/>data teestT._XPilot8a&#59&nbsp&nbsp&nbsp&nbspset _XPilot8a&#59run&#59<br/><br/>/*in _XPilot7, indicate those selected in _XPilot8a*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_XPilot7,<br/>&nbsp&nbsp&nbsp&nbspt2=_XPilot8a,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot8b,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, ifn(t2.original=\"\", 0, 1) as S8),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjterm=%str(strip(upcase(t1.original))=strip(upcase(t2.original))),<br/>&nbsp&nbsp&nbsp&nbsporderby=t1.renamed<br/>)&#59<br/>data teestT._XPilot8b&#59&nbsp&nbsp&nbsp&nbspset _XPilot8b&#59run&#59<br/><br/>data _XPilot8&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot8b&#59<br/>&nbsp&nbsp&nbsp&nbsps8=sum(s8, s7)&#59<br/>&nbsp&nbsp&nbsp&nbspif S8 > 1 then S8=1&#59<br/>run&#59<br/>data teestT._XPilot8&#59&nbsp&nbsp&nbsp&nbspset _XPilot8&#59run&#59<br/><br/><br/>/*make variable strings*/<br/>data _XPilot8_N _XPilot8_C&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot8&#59<br/>&nbsp&nbsp&nbsp&nbspwhere S8>0&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed not in:('X01_') then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif index(renamed, '_N') > 0 then output _XPilot8_N&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspelse output _XPilot8_C&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>data teestT._XPilot8_C&#59&nbsp&nbsp&nbsp&nbspset _XPilot8_C&#59run&#59<br/>data teestT._XPilot8_N&#59&nbsp&nbsp&nbsp&nbspset _XPilot8_N&#59run&#59<br/>/*selected stdNumCoVars*/<br/>%ValueToString(Data=_XPilot8_N, theVar=renamed, theStrVarName=stdNumCoVars_S2, DLMT=)&#59<br/>%put >>> line 408, stdNumCoVars_S2=&stdNumCoVars_S2&#59<br/>/*selected stdCatCoVars*/<br/>%ValueToString(Data=_XPilot8_C, &nbsp&nbsp&nbsp&nbsptheVar=renamed, theStrVarName=stdCatCoVars_selected2, DLMT= )&#59<br/><br/>/*change categorical vars from X01_C to X01_C_CatN by adding the surfix _CatN*/<br/>%VarsAddPreSurfix(srcVars=&stdCatCoVars_selected2, targetVarName=stdCatCoVars_SCatN2, prefix=, DLMT= , surfix=_CatN)&#59<br/>%put >>> line 414, stdNumCoVars_S2=&stdCatCoVars_SCatN2&#59<br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> check _XPilot9 interaction with main vars&#59<br/><br/><br/>/*9. Given a list of interestd vars, check interaction with the main variable. <br/>&nbsp&nbsp&nbsp&nbspThe result is a table containing interested vars, and the type 3 result of the interaction terms (each interested var * the main variable)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspe.g., resitype * X01_CatN<br/>*/<br/>%checkVarsIntInt(<br/>&nbsp&nbsp&nbsp&nbspdata = _XPilot4,<br/>&nbsp&nbsp&nbsp&nbsptheVars= &NumCoVars &CatCoVars, <br/>&nbsp&nbsp&nbsp&nbsptheVarsMapFile=VarsMap, <br/>&nbsp&nbsp&nbsp&nbspstdCatMainVar_CatN=&stdCatMainVar_CatN, <br/>&nbsp&nbsp&nbsp&nbspstdNumMainVar=&stdNumMainVar,<br/>&nbsp&nbsp&nbsp&nbspdebug=,<br/>&nbsp&nbsp&nbsp&nbsptarget =_XPilot9a<br/>)&#59<br/>data teestT._XPilot9a&#59&nbsp&nbsp&nbsp&nbspset _XPilot9a&#59run&#59<br/>%put >>> line 430&#59<br/>%put >>> stdNumCoVars_S2=&stdNumCoVars_S2&#59<br/>%put >>> stdNumCoVars_S2=&stdCatCoVars_SCatN2&#59<br/><br/>/*From above (all interaction terms), select those with a p value <0.05.*/<br/>data _XPilot9&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot9a&#59<br/>&nbsp&nbsp&nbsp&nbspif pValue < .05 &#59<br/>run&#59<br/>data teestT._XPilot9&#59&nbsp&nbsp&nbsp&nbspset _XPilot9&#59run&#59<br/><br/>/*keep interested interaction terms in the final model <br/>&nbsp&nbsp&nbsp&nbsphowever, the vars should be determined later (depending on whether to include the numeric value, <br/>&nbsp&nbsp&nbsp&nbspor the categories of the numeric value)<br/>*/<br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> check _XPilot10 best fit var type&#59<br/><br/>/*Determine what type of var best fit the models, i.e., numeric value, or categories, <br/>&nbsp&nbsp&nbsp&nbspcheck AIC and -2Log<br/>*/<br/>%checkVarsNumCatFit(<br/>&nbsp&nbsp&nbsp&nbspdata=_XPilot4, <br/>&nbsp&nbsp&nbsp&nbspintintTable=_XPilot9, <br/>&nbsp&nbsp&nbsp&nbsptheVars = &stdNumCoVars_S2 , <br/>&nbsp&nbsp&nbsp&nbspstdNumCoVars_S2=&stdNumCoVars_S2,<br/>&nbsp&nbsp&nbsp&nbspstdCatMainVar_CatN=&stdCatMainVar_CatN, <br/>&nbsp&nbsp&nbsp&nbspstdNumMainVar=&stdNumMainVar, <br/>&nbsp&nbsp&nbsp&nbspstdCatCoVars_SCatN2=&stdCatCoVars_SCatN2, <br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot10a, <br/>&nbsp&nbsp&nbsp&nbspdebug=<br/>)&#59<br/>%put >>> line 459, stdNumCoVars_S2=&stdNumCoVars_S2&#59<br/>%put >>> line 460, stdCatCoVars_SCatN2=&stdCatCoVars_SCatN2&#59<br/><br/>/*It returns in 10a all the forms (num type, quinN, quarN, etc), indicating the best fit form*/<br/>data teestT._XPilot10a&#59&nbsp&nbsp&nbsp&nbspset _XPilot10a&#59  run&#59<br/><br/>/*From above, make a distinct list of num var types that are best fit*/<br/>%distinct(data=_XPilot10a, target=_XPilot10b, vars=%str(renamed, ref_covar))&#59<br/>data teestT._XPilot10b&#59&nbsp&nbsp&nbsp&nbspset _XPilot10b&#59run&#59<br/>/*A string of<br/>&nbsp&nbsp&nbsp&nbspthe categorical var names of the original continuous vars<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(e.g., X49_N => X49_N_QuiN ...)<br/>&nbsp&nbsp&nbsp&nbspWhich is to be added in the class statement, and the model statement as well<br/>*/<br/>/*From _XPilot10b, select rows that a ref_CoVar not equal to the numeric var<br/>&nbsp&nbsp&nbsp&nbspe.g., the numeric var (in the column 'renamed') = X49_N<br/>&nbsp&nbsp&nbsp&nbspwhile the ref_CoVar = X49_N_QuiN<br/>&nbsp&nbsp&nbsp&nbspIn that case, X49_N_QuiN (age measured by categories) better fits the model than X49_N (the continuous measure)<br/>*/<br/>data _XPilot10c&#59&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbspset _XPilot10b&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed ne ref_Covar&#59<br/>run&#59<br/>%ValueToString(Data=_XPilot10c, &nbsp&nbsp&nbsp&nbsptheVar=ref_CoVar, theStrVarName=stdNumVars_CatN10, DLMT= )&#59<br/>%put stdNumVars_CatN10 = &stdNumVars_CatN10&#59<br/>/*stdNumVars_CatN9 is like 'X49_N_QUIN X51_N_QUIN X52_N_QUIN X53_N_QUAN'*/<br/>data teestT._XPilot10c&#59&nbsp&nbsp&nbsp&nbspset _XPilot10c&#59run&#59<br/><br/>/*A string of<br/>&nbsp&nbsp&nbsp&nbspthe original continuous vars in continuouse type (e.g., X49_N)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspwhich is to replace &stdNumCoVars_S3 in the model statement <br/>&nbsp&nbsp&nbsp&nbspIt would be the flip of the above (rows that the values are the same in the column 'renamed' and in 'ref_CoVar'<br/>*/<br/>data _XPilot10d&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot10b&#59<br/>&nbsp&nbsp&nbsp&nbspif renamed=ref_CoVar&#59<br/>run&#59<br/>data teestT._XPilot10d&#59&nbsp&nbsp&nbsp&nbspset _XPilot10d&#59run&#59<br/>/*If _XPilot10d is empty, the result var stdNumVars9 will be empty*/<br/>%ValueToString(Data=_XPilot10d, &nbsp&nbsp&nbsp&nbsptheVar=ref_CoVar, theStrVarName=stdNumVars10, DLMT= )&#59<br/>%put >>> stdNumVars10 = &stdNumVars10&#59<br/><br/>/* A string of <br/>&nbsp&nbsp&nbsp&nbspthe interactions between the main var and the continuous vars either in the original continuous type, or <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin categorical type if the latter best fit the model <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(e.g., X49_N * X01_C_CatN => X49_N_QuiN * X01_C_CatN)<br/>&nbsp&nbsp&nbsp&nbspwhich is to partially replace the &theIntTerm in the model statement for those continuous vars that <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspa categorical type better fits the models<br/>*/<br/>/*the interaction terms (with the main var) are in _XPilot9*/<br/>%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbspt1=_XPilot9,<br/>&nbsp&nbsp&nbsp&nbspt2=_XPilot10c,<br/>&nbsp&nbsp&nbsp&nbsptarget=_XPilot10e1,<br/>&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.ref_covar),<br/>&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbspjvars=renamed<br/>)&#59<br/>data teestT._XPilot10e1&#59&nbsp&nbsp&nbsp&nbspset _XPilot10e1&#59run&#59<br/>/*In the following, the interaction term is partially change (only those continuous vars that a categorical type <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspbetter fit the model will be replaced)<br/>&nbsp&nbsp&nbsp&nbspe.g. if there are three interaction variables:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX02_C_CatN * X01_C_CatN (1)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX49_N * X01_C_CatN (2), while the categorical measure X49_N_QuiN fits the model better than X49_N<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX50_N * X01_C_CatN (3), and X50_N fits the model better than (X50_QuiN)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(1) will be remained unchange<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(2) X49_N will be replaced by X49_N_QuiN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp(3) will be remained unchanged<br/>*/<br/>data _XPilot10e&#59<br/>&nbsp&nbsp&nbsp&nbspset _XPilot10e1&#59<br/>&nbsp&nbsp&nbsp&nbspformat newIntTerm $100.&#59<br/>&nbsp&nbsp&nbsp&nbspif ref_covar ne '' then do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*replace the var names (e.g., X49_N) with the names in ref_covar (e.g., X49_N_QuiN)*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnewIntTerm = tranwrd(intTerm, strip(renamed), strip(Ref_CoVar))&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>&nbsp&nbsp&nbsp&nbspelse do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspnewIntTerm= intTerm&#59<br/>&nbsp&nbsp&nbsp&nbspend&#59<br/>run&#59<br/>%ValueToString(Data=_XPilot10e, &nbsp&nbsp&nbsp&nbsptheVar=newIntTerm, theStrVarName=theIntTerm10, DLMT= )&#59<br/>%put >>> theIntTerm10 = &theIntTerm10&#59<br/>data teestT._XPilot10e&#59&nbsp&nbsp&nbsp&nbspset _XPilot10e&#59run&#59<br/><br/>/*decisions, what interaction terms to be retained?*/<br/>%let theIntTerm11=&theIntTerm10&#59<br/><br/>%put >>>>>>>>>>>>>>>>>>>>>>>>>>> check _XPilot11 lackfit&#59<br/><br/>%macro testLackfit&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let data=_XPilot4&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*the stdNumVars_CatN10 is like: X49_N_QuiN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptheIntTerm11 is like: X01_C_CatN*X50_N_QuaN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif the above were put into a model:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX49_N_QuiN X01_C_CatN X01_C_CatN*X50_N_QuaN<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe interaction term is there, but the term X50_N_QuaN is missing. <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspThe complete terms should be:<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspX49_N_QuiN X50_N_QuaN X01_C_CatN X01_C_CatN*X50_N_QuaN <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspAs such, a new macro variable should be created to contain: <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspthe stdNumVars_CatN11 = X49_N_QuiN X50_N_QuaN<br/>&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. The existing numtype_catN terms are in stdNumVars_CatN10, change it into a table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&stdNumVars_CatN10, target=_XPilot11a1, varname=variable, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The variable name involved in the interaction term can be found in _xpilot10e<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the column Ref_Covar, it is like X50_N_QinN, or X51_N_QuaN, anyways, it contains _N_<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a2&#59 set _xpilot10e&#59 if Ref_CoVar ne '' and index(Ref_CoVar, '_N_') >0&#59 keep ref_covar&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename ref_covar = variable&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. combine 1 and 2 and havea distint list of num vars in catN*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a3a&#59 set _XPilot11a1 _XPilot11a2&#59 run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(data=_XPilot11a3a, target = _XPilot11a3, vars=variable)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. convert the above table into a string*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%ValueToString(Data=_XPilot11a3, &nbsp&nbsp&nbsp&nbsptheVar=variable, theStrVarName=stdNumVars_CatN11, DLMT= )&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*same thing for the num vars in original type, that we need to add it into the num vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. The existing numtype_catN terms are in stdNumVars_CatN10, change it into a table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&stdNumVars10, target=_XPilot11a11, varname=variable, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The variable name involved in the interaction term can be found in _xpilot10e<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the column Ref_Covar, it is like X52_N, anyways, it does not contains _N_<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a12&#59 set _xpilot10e&#59 if index(renamed, '_N') ne 0 and index(Ref_CoVar, '_N_') =0 &#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspkeep theVar&#59 rename theVar = variable&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. combine 1 and 2 and havea distint list of num vars in cat types*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a13a&#59 set _XPilot11a11 _XPilot11a12&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(data=_XPilot11a13a, target = _XPilot11a13, vars=variable)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. convert the above table into a string*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%ValueToString(Data=_XPilot11a13, &nbsp&nbsp&nbsp&nbsptheVar=variable, theStrVarName=stdNumVars11, DLMT= )&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*same thing for the cat vars in , that we need to add it into the cat vars*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*1. The existing cat terms are in stdNumVars_CatN10, change it into a table*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&stdCatCoVars_SCatN2, target=_XPilot11a21, varname=variable, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*2. The variable name involved in the interaction term can be found in _xpilot10e<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspin the column renamed, it is like _C<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a22&#59 set _xpilot10e&#59 if index(theVar, '_C_') ne 0 &#59 keep thevar&#59 rename thevar = variable&#59run&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*3. combine 1 and 2 and have a distint list of cat vars */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata _XPilot11a23a&#59 set _XPilot11a21 _XPilot11a22&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%distinct(data=_XPilot11a23a, target = _XPilot11a23, vars=variable)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*4. convert the above table into a string*/<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%ValueToString(Data=_XPilot11a23, &nbsp&nbsp&nbsp&nbsptheVar=variable, theStrVarName=stdCatCoVars_SCatN11, DLMT= )&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> line 602&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put stdCatMainVar_CatN=&stdCatMainVar_CatN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put stdNumVars_CatN11=&stdNumVars_CatN11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put stdNumMainVar=&stdNumMainVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put stdCatCoVars_SCatN11=&stdCatCoVars_SCatN11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put stdNumVars11=&stdNumVars11&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put theIntTerm11=&theIntTerm11&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*lackfit*/<br/>&nbsp&nbsp&nbsp&nbsp/*ods trace on&#59*/<br/>&nbsp&nbsp&nbsp&nbspods results off&#59<br/>&nbsp&nbsp&nbsp&nbspproc logistic data=&data namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*when measured by categories of numeric vars, the categories are added in the class statement */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&stdNumVars_CatN11) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdNumVars_CatN11<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdCatMainVar_CatN  &stdCatCoVars_SCatN11 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp model Y = &stdCatMainVar_CatN &stdNumMainVar <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdCatCoVars_SCatN11 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdNumVars_CatN11 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdNumVars11<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theIntTerm11 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/lackfit<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ModelANOVA =_XPilot11a0 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspLackFitChiSq = _XPilot11a<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbspods results on&#59<br/>&nbsp&nbsp&nbsp&nbsp/*ods trace off&#59*/<br/>&nbsp&nbsp&nbsp&nbspdata teestT._XPilot11a0&#59&nbsp&nbsp&nbsp&nbspset _XPilot11a0&#59run&#59<br/>&nbsp&nbsp&nbsp&nbspdata teestT._XPilot11a&#59&nbsp&nbsp&nbsp&nbspset _XPilot11a&#59run&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%let VarsInModel = &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_SCatN2  &stdNumVars_CatN10 &stdNumVars10  <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&theIntTerm11&#59<br/>&nbsp&nbsp&nbsp&nbsp%put VarsInModel = &VarsInModel&#59<br/>&nbsp&nbsp&nbsp&nbsp/*store vars into a table*/<br/>&nbsp&nbsp&nbsp&nbsp%StringToTable(theStr=&VarsInModel, target=_XPilot11b1, varname=variable, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbspdata _XPilot11b2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _XPilot11b1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspif index(variable, '*') = 0 then renamed=scan(variable, 1, '_') || '_' || scan(variable, 2, '_')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp/*map the original names*/<br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=_XPilot11b2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=VarsMap,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=_XPilot11b,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.original),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=renamed,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=renamed<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/>&nbsp&nbsp&nbsp&nbspdata teestt._XPilot11b&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset _XPilot11b&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*optional, check all intereactions. Not recommended (takes a lot of time). Only run it when checkAllInteraction=1*/<br/>&nbsp&nbsp&nbsp&nbsp%macro checkAllInt&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let vars1= &stdCatMainVar_CatN &stdNumMainVar &stdCatCoVars_SCatN2  &stdNumVars_CatN10 &stdNumVars10&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%AddDlmt(theStr=&vars1, DLMT=|, preFix=)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let vars2=&DLMTStr0824&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let DLMTStr0824=&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc logistic data=_XPilot4 namelen=200&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspclass <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp/*when measured by categories of numeric vars, the categories are added in the class statement */<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdNumVars_CatN10<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&stdCatMainVar_CatN  &stdCatCoVars_SCatN2 &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp model Y = &vars2 @2 /lackfit&#59 <br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspods output ModelANOVA =_XPilot12b0 LackFitChiSq = _XPilot12b &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%mend checkAllInt&#59<br/>&nbsp&nbsp&nbsp&nbsp%if &checkAllInteraction = 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%checkAllInt&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/><br/>%mend testLackFit&#59<br/>%testLackFit&#59<br/><br/>%mend testLogistic &#59<br/>s///<br/>t///","custparents":[{"idx":"MYa10652e6-d573-4b5e-a2a8-513d1ab33e61"}]},{"idx":"6aa1f4dc-7ec7-48d1-b4ab-2b9a0e7ec653","name":"getfreq","NodeDescription":"///t<br/>///s<br/>/*get the freq by group information*/<br/>%macro getFreq(theVars=, group=, data=, VarsMapFile=, target=, dlmt=, debug=)&#59<br/>&nbsp&nbsp&nbsp&nbsp%local theVars theVar theVarC group target i dlmt debug VarsMapFile&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp/*get a distinct list of vars and levels from the source data set*/<br/><br/>&nbsp&nbsp&nbsp&nbspdata getFreq_tmp1&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset &data&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata getFreq_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat groupvar $30. grpcat 4. variable $30. varlevelC $30. N_Patients 8.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if %length(&dlmt) ne 0 %then %let dlmt = , &dlmt&#59<br/>&nbsp&nbsp&nbsp&nbsp%put >>> theVars=&theVars&#59<br/>&nbsp&nbsp&nbsp&nbsp/*making standard vars for categorical covariates */<br/>&nbsp&nbsp&nbsp&nbsp%let i=1&#59<br/>&nbsp&nbsp&nbsp&nbsp%do %until ( %eval(%length(%scan(&theVars, &i &dlmt))=0) )&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar = %scan(&theVars, &i &dlmt)&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVar=%sysfunc(strip(&theVar))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theVar = &theVar&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVarC= %substr(&theVar, 1, %eval(%length(&theVar)-1))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let theVarC=&theVarC.C&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%put >>> theVarC=&theVarC&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getFreq_tmp1,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(Y, &theVar, &theVarC,   count(key_hsn) as N_Patients),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getFreq_tmp2,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupby=%str(Y, &theVar, &theVarC),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(Y, &theVar, &theVarC)<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getFreq_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getFreq_tmp2&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat variable $30. varlevelC $30. &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvariable = symget('thevar')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &theVar=varLevelN&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvarlevelC=strip(put(&thevarC, $30.))&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%if %length(&group) ne 0 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspgroupvar=symget('group')&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprename &group = grpcat &#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%end&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdrop &thevarC&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdata getFreq_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getFreq_tmp4 getFreq_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getFreq_tmp3&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp%let i = %eval(&i + 1)&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata getFreq_tmp5&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getFreq_tmp4&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat renamed $30.&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprenamed= scan(variable, 1, '_') || '_' || scan(variable, 2, '_')&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%sqljoinv2(<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt1=getFreq_tmp5,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspt2=&VarsMapFile,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvars=%str(t1.*, t2.original),<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsptarget=getFreq_tmp6,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjtype=left,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspjvars=renamed,<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsporderby=%str(renamed, varLevelN)<br/>&nbsp&nbsp&nbsp&nbsp)&#59<br/><br/>&nbsp&nbsp&nbsp&nbspdata &target&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspset getFreq_tmp6&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproject=&_clientProjectName&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspprogram=&_clientTaskLabel&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspcreateDate=date()&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspformat createDate date9.&#59<br/>&nbsp&nbsp&nbsp&nbsprun&#59<br/><br/>&nbsp&nbsp&nbsp&nbsp%if &debug ne 1 %then %do&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspproc datasets nolist&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspdelete getFreq_tmp:&#59<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsprun&#59<br/>&nbsp&nbsp&nbsp&nbsp%end&#59<br/><br/>%mend getFreq&#59<br/>s///<br/>t///","custparents":[{"idx":"MYa10652e6-d573-4b5e-a2a8-513d1ab33e61"}]}]}}],"custparents":[{"idx":"9ec42206-3401-4fcc-bcbd-eb90ab98d712"},{"idx":"MYf9fb1874-c748-423e-befe-62311fcc781e"}]}]}]}],"custparents":[{"idx":"MYe17d2a31-6562-4b1c-8662-c557351ebbdf"}]}]}]},{"idx":"MYec5996b2-d53a-4c1d-9afc-67f7e05532c8","name":"Results","custparents":[{"idx":"edd76f6a-da61-4d5b-939a-6f6cb3f079db"}],"children":[{"idx":"MY1cfbb97d-e08d-4fa4-8fc8-8cd0149f39e1","name":"Patient flow","custparents":[{"idx":"MYec5996b2-d53a-4c1d-9afc-67f7e05532c8"}],"NodeDescription":"<p>///t</p><p>[to do]</p><table><tbody><tr><td data-row=\"row-3qbs\">Item</td><td data-row=\"row-3qbs\">number</td><td data-row=\"row-3qbs\">excluded</td></tr><tr><td data-row=\"row-8q39\">receiving statin between Jan 1, 2012 to dec 31,2017</td><td data-row=\"row-8q39\">180,010</td><td data-row=\"row-8q39\"><br></td></tr><tr><td data-row=\"row-qa5h\">excluding missing demo, died, or lack continuous cover</td><td data-row=\"row-qa5h\"><br></td><td data-row=\"row-qa5h\">21149</td></tr><tr><td data-row=\"row-vlxi\">exclud prevalent users</td><td data-row=\"row-vlxi\">58549</td><td data-row=\"row-vlxi\"><br></td></tr><tr><td data-row=\"row-1ue5\">exclue LTC, outhosp, etc (Final cohort</td><td data-row=\"row-1ue5\">55144</td><td data-row=\"row-1ue5\">3405</td></tr></tbody></table><p><br></p><p>how many prescribers</p><p>how many new statin users per prescriber</p><p>age range of patients, age range of prescribers</p><p>sex % of patients, sex percentage of prescribers</p><p>% of age concordance (2 level), % of sex concordance (2 level)</p><p>% of age concordance (4 level), % of sex concordance (4 level)</p><p><br></p><p>baseline characteristics</p><p>for prescriber (age, sex, workload, etc)</p><p><br></p><p>for patients (age, sex, ...., etc)</p><p> </p><p>t///</p>"},{"idx":"MYa93f9e0c-30fd-4b18-bbf0-11bfb91411ca","name":"Descriptive","custparents":[{"idx":"MYec5996b2-d53a-4c1d-9afc-67f7e05532c8"}],"NodeDescription":"<p>///t</p><p>[to do]</p><p>Number of ....</p><p>t///</p>"},{"idx":"MYcb803374-8d8c-4725-8faa-8295f4e11dd4","name":"obj2","custparents":[{"idx":"MYec5996b2-d53a-4c1d-9afc-67f7e05532c8"},{"idx":"8de27eb3-d7dd-4f57-b582-e5a3e3ee4ffd"}],"NodeDescription":"<p>///t</p><p>Type 3:</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\Output\\20200317\\ZXZG\\_xpilot29a1.sas7bdat</p><table><tbody><tr><td data-row=\"1\">Effect</td><td data-row=\"1\">DF</td><td data-row=\"1\">WaldChiSq</td><td data-row=\"1\">ProbChiSq</td></tr><tr><td data-row=\"2\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN (age concord pct)</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">4</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">16.4259</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.0025</span></td></tr><tr><td data-row=\"3\">X07_N_QUIN (sex concord pct)</td><td data-row=\"3\" class=\"ql-align-right\">4</td><td data-row=\"3\" class=\"ql-align-right\">9.3992</td><td data-row=\"3\" class=\"ql-align-right\">0.0519</td></tr></tbody></table><p><br></p><p><br></p><p>OR:</p><p>baseline</p><p>age concord (PCT)</p><p>sex concord (PCT)</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\Output\\20200317\\ZXZG\\_xpilot29a3.sas7bda</p><table><tbody><tr><td data-row=\"1\">Effect</td><td data-row=\"1\">PCT range</td><td data-row=\"1\">OddsRatioEst</td><td data-row=\"1\">LowerCL</td><td data-row=\"1\">UpperCL</td></tr><tr><td data-row=\"2\">X06_N_QUIN 5 vs 4</td><td data-row=\"2\">&gt;=32% vs 20-31%</td><td data-row=\"2\" class=\"ql-align-right\">1.266408613</td><td data-row=\"2\" class=\"ql-align-right\">0.881907298</td><td data-row=\"2\" class=\"ql-align-right\">1.818548023</td></tr><tr><td data-row=\"3\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 5 vs 3</span></td><td data-row=\"3\"><span style=\"background-color: rgb(255, 255, 0);\">&gt;=32% vs 11-19%</span></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.908001337</span></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.320644193</span></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.756585856</span></td></tr><tr><td data-row=\"4\">X06_N_QUIN 5 vs 2</td><td data-row=\"4\">&gt;=32% vs 2-10%</td><td data-row=\"4\" class=\"ql-align-right\">1.093851697</td><td data-row=\"4\" class=\"ql-align-right\">0.758472304</td><td data-row=\"4\" class=\"ql-align-right\">1.577528314</td></tr><tr><td data-row=\"5\">X06_N_QUIN 5 vs 1</td><td data-row=\"5\">&gt;=32% vs 0-1%</td><td data-row=\"5\" class=\"ql-align-right\">0.981321836</td><td data-row=\"5\" class=\"ql-align-right\">0.681507704</td><td data-row=\"5\" class=\"ql-align-right\">1.413032515</td></tr><tr><td data-row=\"6\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 4 vs 3</span></td><td data-row=\"6\"><span style=\"background-color: rgb(255, 255, 0);\">20-31% vs 11-19%</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.506623785</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.040460075</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.181645682</span></td></tr><tr><td data-row=\"7\">X06_N_QUIN 4 vs 2</td><td data-row=\"7\">20-31% vs 2-10%</td><td data-row=\"7\" class=\"ql-align-right\">0.863743097</td><td data-row=\"7\" class=\"ql-align-right\">0.597293625</td><td data-row=\"7\" class=\"ql-align-right\">1.249054245</td></tr><tr><td data-row=\"8\">X06_N_QUIN 4 vs 1</td><td data-row=\"8\">20-31% vs 0-1 %</td><td data-row=\"8\" class=\"ql-align-right\">0.77488563</td><td data-row=\"8\" class=\"ql-align-right\">0.536299495</td><td data-row=\"8\" class=\"ql-align-right\">1.119612727</td></tr><tr><td data-row=\"9\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 3 vs 2</span></td><td data-row=\"9\"><span style=\"background-color: rgb(255, 255, 0);\">11-19% vs 2-10%</span></td><td data-row=\"9\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.573297133</span></td><td data-row=\"9\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.39371575</span></td><td data-row=\"9\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.834789066</span></td></tr><tr><td data-row=\"10\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 3 vs 1</span></td><td data-row=\"10\"><span style=\"background-color: rgb(255, 255, 0);\">11-19% vs 0-1%</span></td><td data-row=\"10\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.51431926</span></td><td data-row=\"10\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.353435589</span></td><td data-row=\"10\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.748437083</span></td></tr><tr><td data-row=\"11\">X06_N_QUIN 2 vs 1</td><td data-row=\"11\">2-10% vs 0-1%</td><td data-row=\"11\" class=\"ql-align-right\">0.897125121</td><td data-row=\"11\" class=\"ql-align-right\">0.617602131</td><td data-row=\"11\" class=\"ql-align-right\">1.303158525</td></tr><tr><td data-row=\"12\">X07_N_QUIN 5 vs 4</td><td data-row=\"12\">&gt;=75% vs 67-74%</td><td data-row=\"12\" class=\"ql-align-right\">0.735319717</td><td data-row=\"12\" class=\"ql-align-right\">0.512355432</td><td data-row=\"12\" class=\"ql-align-right\">1.05531249</td></tr><tr><td data-row=\"13\">X07_N_QUIN 5 vs 3</td><td data-row=\"13\">&gt;=75% vs 59-66%</td><td data-row=\"13\" class=\"ql-align-right\">0.705944224</td><td data-row=\"13\" class=\"ql-align-right\">0.490504404</td><td data-row=\"13\" class=\"ql-align-right\">1.016009731</td></tr><tr><td data-row=\"14\">X07_N_QUIN 5 vs 2</td><td data-row=\"14\">&gt;=75% vs 50-58%</td><td data-row=\"14\" class=\"ql-align-right\">1.047979765</td><td data-row=\"14\" class=\"ql-align-right\">0.736750877</td><td data-row=\"14\" class=\"ql-align-right\">1.49068243</td></tr><tr><td data-row=\"15\">X07_N_QUIN 5 vs 1</td><td data-row=\"15\">&gt;=75% vs 0-49%</td><td data-row=\"15\" class=\"ql-align-right\">1.094494961</td><td data-row=\"15\" class=\"ql-align-right\">0.753740991</td><td data-row=\"15\" class=\"ql-align-right\">1.589298225</td></tr><tr><td data-row=\"16\">X07_N_QUIN 4 vs 3</td><td data-row=\"16\">67-74% vs 59-66%</td><td data-row=\"16\" class=\"ql-align-right\">0.96005072</td><td data-row=\"16\" class=\"ql-align-right\">0.659425507</td><td data-row=\"16\" class=\"ql-align-right\">1.397727833</td></tr><tr><td data-row=\"17\">X07_N_QUIN 4 vs 2</td><td data-row=\"17\">67-74% vs 50-58%</td><td data-row=\"17\" class=\"ql-align-right\">1.425202861</td><td data-row=\"17\" class=\"ql-align-right\">0.990309369</td><td data-row=\"17\" class=\"ql-align-right\">2.051079448</td></tr><tr><td data-row=\"18\"><span style=\"background-color: rgb(255, 255, 0);\">X07_N_QUIN 4 vs 1</span></td><td data-row=\"18\"><span style=\"background-color: rgb(255, 255, 0);\">67-74% vs 0-49%</span></td><td data-row=\"18\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.488461325</span></td><td data-row=\"18\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.012163465</span></td><td data-row=\"18\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.188892596</span></td></tr><tr><td data-row=\"19\"><span style=\"background-color: rgb(255, 255, 0);\">X07_N_QUIN 3 vs 2</span></td><td data-row=\"19\"><span style=\"background-color: rgb(255, 255, 0);\">59-66% vs 50-58%</span></td><td data-row=\"19\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.484507882</span></td><td data-row=\"19\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.030562465</span></td><td data-row=\"19\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.138408611</span></td></tr><tr><td data-row=\"20\"><span style=\"background-color: rgb(255, 255, 0);\">X07_N_QUIN 3 vs 1</span></td><td data-row=\"20\"><span style=\"background-color: rgb(255, 255, 0);\">59-66% vs 0-49%</span></td><td data-row=\"20\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.550398634</span></td><td data-row=\"20\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.052190683</span></td><td data-row=\"20\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.284505996</span></td></tr><tr><td data-row=\"21\">X07_N_QUIN 2 vs 1</td><td data-row=\"21\">50-58% vs 0-49%</td><td data-row=\"21\" class=\"ql-align-right\">1.044385586</td><td data-row=\"21\" class=\"ql-align-right\">0.717643749</td><td data-row=\"21\" class=\"ql-align-right\">1.519892362</td></tr></tbody></table><p><br></p><p><br></p><p><br></p><p><br></p><p>multivariable</p><p><br></p><p>Type 3</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\Output\\20200317\\ZXZG\\_xpilot25a1.sas7bdat</p><table><tbody><tr><td data-row=\"1\">Effect</td><td data-row=\"1\"><br></td><td data-row=\"1\">DF</td><td data-row=\"1\">WaldChiSq</td><td data-row=\"1\">ProbChiSq</td></tr><tr><td data-row=\"2\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN</span></td><td data-row=\"2\"><span style=\"background-color: rgb(255, 255, 0);\">Doc Grad country</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">32.7639</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.0000</span></td></tr><tr><td data-row=\"3\">X02_C_CatN</td><td data-row=\"3\">DocSex</td><td data-row=\"3\" class=\"ql-align-right\">1</td><td data-row=\"3\" class=\"ql-align-right\">0.8097</td><td data-row=\"3\" class=\"ql-align-right\">0.3682</td></tr><tr><td data-row=\"4\">X03_N_QUIN</td><td data-row=\"4\">DocAge</td><td data-row=\"4\" class=\"ql-align-right\">4</td><td data-row=\"4\" class=\"ql-align-right\">3.5609</td><td data-row=\"4\" class=\"ql-align-right\">0.4687</td></tr><tr><td data-row=\"5\">X04_N_QUIN</td><td data-row=\"5\">DocPtSize</td><td data-row=\"5\" class=\"ql-align-right\">4</td><td data-row=\"5\" class=\"ql-align-right\">7.6939</td><td data-row=\"5\" class=\"ql-align-right\">0.1035</td></tr><tr><td data-row=\"6\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_Cat*X04_N_QUIN</span></td><td data-row=\"6\"><br></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">4</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">10.2804</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.0360</span></td></tr><tr><td data-row=\"7\">X05_N_QUAN</td><td data-row=\"7\">DocStatinPts</td><td data-row=\"7\" class=\"ql-align-right\">3</td><td data-row=\"7\" class=\"ql-align-right\">5.8518</td><td data-row=\"7\" class=\"ql-align-right\">0.1190</td></tr><tr><td data-row=\"8\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN</span></td><td data-row=\"8\"><span style=\"background-color: rgb(255, 255, 0);\">ConcordAgePCT</span></td><td data-row=\"8\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">4</span></td><td data-row=\"8\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">12.1092</span></td><td data-row=\"8\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.0166</span></td></tr><tr><td data-row=\"9\">X07_N_QUIN</td><td data-row=\"9\">ConcordSexPCT</td><td data-row=\"9\" class=\"ql-align-right\">4</td><td data-row=\"9\" class=\"ql-align-right\">9.1874</td><td data-row=\"9\" class=\"ql-align-right\">0.0566</td></tr></tbody></table><p><br></p><p>age concord</p><p>sex concord</p><p>covariates</p><p>F:\\Personal\\Dropbox\\Project\\The PhD Thesis Project\\Proposal and thesis\\Project2\\Output\\20200317\\ZXZG\\_xpilot25a3.sas7bdat</p><table><tbody><tr><td data-row=\"1\">Effect</td><td data-row=\"1\">Unit</td><td data-row=\"1\">OddsRatioEst</td><td data-row=\"1\">LowerCL</td><td data-row=\"1\">UpperCL</td></tr><tr><td data-row=\"2\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN 1 vs 2 at X04_N_QUIN=1</span></td><td data-row=\"2\">foreign vs domestic </td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.315834854</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.174565907</span></td><td data-row=\"2\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.571426901</span></td></tr><tr><td data-row=\"3\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN 1 vs 2 at X04_N_QUIN=2</span></td><td data-row=\"3\"><br></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.393308509</span></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.214983322</span></td><td data-row=\"3\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.719551552</span></td></tr><tr><td data-row=\"4\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN 1 vs 2 at X04_N_QUIN=3</span></td><td data-row=\"4\"><br></td><td data-row=\"4\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.442873982</span></td><td data-row=\"4\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.254188319</span></td><td data-row=\"4\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.771622256</span></td></tr><tr><td data-row=\"5\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN 1 vs 2 at X04_N_QUIN=4</span></td><td data-row=\"5\"><br></td><td data-row=\"5\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.279864157</span></td><td data-row=\"5\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.152771021</span></td><td data-row=\"5\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.512688507</span></td></tr><tr><td data-row=\"6\"><span style=\"background-color: rgb(255, 255, 0);\">X01_C_CatN 1 vs 2 at X04_N_QUIN=5</span></td><td data-row=\"6\"><br></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.099422914</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.045103743</span></td><td data-row=\"6\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.219159546</span></td></tr><tr><td data-row=\"7\">X02_C_CatN 1 vs 2</td><td data-row=\"7\">DocSex</td><td data-row=\"7\" class=\"ql-align-right\">0.878538272</td><td data-row=\"7\" class=\"ql-align-right\">0.662612748</td><td data-row=\"7\" class=\"ql-align-right\">1.164827417</td></tr><tr><td data-row=\"8\">X03_N_QUIN 1 vs 2</td><td data-row=\"8\">DocAge</td><td data-row=\"8\" class=\"ql-align-right\">0.734632231</td><td data-row=\"8\" class=\"ql-align-right\">0.477702693</td><td data-row=\"8\" class=\"ql-align-right\">1.129749784</td></tr><tr><td data-row=\"9\">X03_N_QUIN 1 vs 3</td><td data-row=\"9\"><br></td><td data-row=\"9\" class=\"ql-align-right\">0.699145286</td><td data-row=\"9\" class=\"ql-align-right\">0.435277127</td><td data-row=\"9\" class=\"ql-align-right\">1.122972242</td></tr><tr><td data-row=\"10\">X03_N_QUIN 1 vs 4</td><td data-row=\"10\"><br></td><td data-row=\"10\" class=\"ql-align-right\">0.672139393</td><td data-row=\"10\" class=\"ql-align-right\">0.390984778</td><td data-row=\"10\" class=\"ql-align-right\">1.155470466</td></tr><tr><td data-row=\"11\">X03_N_QUIN 1 vs 5</td><td data-row=\"11\"><br></td><td data-row=\"11\" class=\"ql-align-right\">0.832258962</td><td data-row=\"11\" class=\"ql-align-right\">0.504557993</td><td data-row=\"11\" class=\"ql-align-right\">1.372795575</td></tr><tr><td data-row=\"12\">X03_N_QUIN 2 vs 3</td><td data-row=\"12\"><br></td><td data-row=\"12\" class=\"ql-align-right\">0.951694272</td><td data-row=\"12\" class=\"ql-align-right\">0.63360966</td><td data-row=\"12\" class=\"ql-align-right\">1.429463666</td></tr><tr><td data-row=\"13\">X03_N_QUIN 2 vs 4</td><td data-row=\"13\"><br></td><td data-row=\"13\" class=\"ql-align-right\">0.914933167</td><td data-row=\"13\" class=\"ql-align-right\">0.569096742</td><td data-row=\"13\" class=\"ql-align-right\">1.470932159</td></tr><tr><td data-row=\"14\">X03_N_QUIN 2 vs 5</td><td data-row=\"14\"><br></td><td data-row=\"14\" class=\"ql-align-right\">1.13289198</td><td data-row=\"14\" class=\"ql-align-right\">0.732890878</td><td data-row=\"14\" class=\"ql-align-right\">1.751207821</td></tr><tr><td data-row=\"15\">X03_N_QUIN 3 vs 4</td><td data-row=\"15\"><br></td><td data-row=\"15\" class=\"ql-align-right\">0.961372989</td><td data-row=\"15\" class=\"ql-align-right\">0.632126553</td><td data-row=\"15\" class=\"ql-align-right\">1.462109162</td></tr><tr><td data-row=\"16\">X03_N_QUIN 3 vs 5</td><td data-row=\"16\"><br></td><td data-row=\"16\" class=\"ql-align-right\">1.190394871</td><td data-row=\"16\" class=\"ql-align-right\">0.801077865</td><td data-row=\"16\" class=\"ql-align-right\">1.768916619</td></tr><tr><td data-row=\"17\">X03_N_QUIN 4 vs 5</td><td data-row=\"17\"><br></td><td data-row=\"17\" class=\"ql-align-right\">1.238223753</td><td data-row=\"17\" class=\"ql-align-right\">0.828849487</td><td data-row=\"17\" class=\"ql-align-right\">1.849790688</td></tr><tr><td data-row=\"18\">X04_N_QUIN 1 vs 2 at X01_C_CatN=1</td><td data-row=\"18\">Pt Size</td><td data-row=\"18\" class=\"ql-align-right\">0.63223627</td><td data-row=\"18\" class=\"ql-align-right\">0.369476485</td><td data-row=\"18\" class=\"ql-align-right\">1.081862358</td></tr><tr><td data-row=\"19\">X04_N_QUIN 1 vs 3 at X01_C_CatN=1</td><td data-row=\"19\"><br></td><td data-row=\"19\" class=\"ql-align-right\">0.658364499</td><td data-row=\"19\" class=\"ql-align-right\">0.388809402</td><td data-row=\"19\" class=\"ql-align-right\">1.114797664</td></tr><tr><td data-row=\"20\">X04_N_QUIN 1 vs 4 at X01_C_CatN=1</td><td data-row=\"20\"><br></td><td data-row=\"20\" class=\"ql-align-right\">0.768662581</td><td data-row=\"20\" class=\"ql-align-right\">0.440457706</td><td data-row=\"20\" class=\"ql-align-right\">1.34142769</td></tr><tr><td data-row=\"21\">X04_N_QUIN 1 vs 5 at X01_C_CatN=1</td><td data-row=\"21\"><br></td><td data-row=\"21\" class=\"ql-align-right\">1.012012413</td><td data-row=\"21\" class=\"ql-align-right\">0.574223949</td><td data-row=\"21\" class=\"ql-align-right\">1.783570899</td></tr><tr><td data-row=\"22\">X04_N_QUIN 2 vs 3 at X01_C_CatN=1</td><td data-row=\"22\"><br></td><td data-row=\"22\" class=\"ql-align-right\">1.041326684</td><td data-row=\"22\" class=\"ql-align-right\">0.666324376</td><td data-row=\"22\" class=\"ql-align-right\">1.627377448</td></tr><tr><td data-row=\"23\">X04_N_QUIN 2 vs 4 at X01_C_CatN=1</td><td data-row=\"23\"><br></td><td data-row=\"23\" class=\"ql-align-right\">1.215783745</td><td data-row=\"23\" class=\"ql-align-right\">0.757132381</td><td data-row=\"23\" class=\"ql-align-right\">1.952274335</td></tr><tr><td data-row=\"24\">X04_N_QUIN 2 vs 5 at X01_C_CatN=1</td><td data-row=\"24\"><br></td><td data-row=\"24\" class=\"ql-align-right\">1.600687055</td><td data-row=\"24\" class=\"ql-align-right\">0.987637228</td><td data-row=\"24\" class=\"ql-align-right\">2.594271433</td></tr><tr><td data-row=\"25\">X04_N_QUIN 3 vs 4 at X01_C_CatN=1</td><td data-row=\"25\"><br></td><td data-row=\"25\" class=\"ql-align-right\">1.167533459</td><td data-row=\"25\" class=\"ql-align-right\">0.755808452</td><td data-row=\"25\" class=\"ql-align-right\">1.803544766</td></tr><tr><td data-row=\"26\">X04_N_QUIN 3 vs 5 at X01_C_CatN=1</td><td data-row=\"26\"><br></td><td data-row=\"26\" class=\"ql-align-right\">1.537161277</td><td data-row=\"26\" class=\"ql-align-right\">0.989879762</td><td data-row=\"26\" class=\"ql-align-right\">2.387022022</td></tr><tr><td data-row=\"27\">X04_N_QUIN 4 vs 5 at X01_C_CatN=1</td><td data-row=\"27\"><br></td><td data-row=\"27\" class=\"ql-align-right\">1.316588629</td><td data-row=\"27\" class=\"ql-align-right\">0.840589903</td><td data-row=\"27\" class=\"ql-align-right\">2.062129954</td></tr><tr><td data-row=\"28\">X04_N_QUIN 1 vs 2 at X01_C_CatN=2</td><td data-row=\"28\"><br></td><td data-row=\"28\" class=\"ql-align-right\">0.787322557</td><td data-row=\"28\" class=\"ql-align-right\">0.41077876</td><td data-row=\"28\" class=\"ql-align-right\">1.509028384</td></tr><tr><td data-row=\"29\">X04_N_QUIN 1 vs 3 at X01_C_CatN=2</td><td data-row=\"29\"><br></td><td data-row=\"29\" class=\"ql-align-right\">0.923180275</td><td data-row=\"29\" class=\"ql-align-right\">0.487616221</td><td data-row=\"29\" class=\"ql-align-right\">1.74781269</td></tr><tr><td data-row=\"30\">X04_N_QUIN 1 vs 4 at X01_C_CatN=2</td><td data-row=\"30\"><br></td><td data-row=\"30\" class=\"ql-align-right\">0.681118953</td><td data-row=\"30\" class=\"ql-align-right\">0.34280025</td><td data-row=\"30\" class=\"ql-align-right\">1.353333402</td></tr><tr><td data-row=\"31\">X04_N_QUIN 1 vs 5 at X01_C_CatN=2</td><td data-row=\"31\"><br></td><td data-row=\"31\" class=\"ql-align-right\">0.318575427</td><td data-row=\"31\" class=\"ql-align-right\">0.135908584</td><td data-row=\"31\" class=\"ql-align-right\">0.746754174</td></tr><tr><td data-row=\"32\">X04_N_QUIN 2 vs 3 at X01_C_CatN=2</td><td data-row=\"32\"><br></td><td data-row=\"32\" class=\"ql-align-right\">1.172556619</td><td data-row=\"32\" class=\"ql-align-right\">0.594566645</td><td data-row=\"32\" class=\"ql-align-right\">2.312422058</td></tr><tr><td data-row=\"33\">X04_N_QUIN 2 vs 4 at X01_C_CatN=2</td><td data-row=\"33\"><br></td><td data-row=\"33\" class=\"ql-align-right\">0.865107887</td><td data-row=\"33\" class=\"ql-align-right\">0.419786113</td><td data-row=\"33\" class=\"ql-align-right\">1.782840433</td></tr><tr><td data-row=\"34\">X04_N_QUIN 2 vs 5 at X01_C_CatN=2</td><td data-row=\"34\"><br></td><td data-row=\"34\" class=\"ql-align-right\">0.404631398</td><td data-row=\"34\" class=\"ql-align-right\">0.167071287</td><td data-row=\"34\" class=\"ql-align-right\">0.979980287</td></tr><tr><td data-row=\"35\">X04_N_QUIN 3 vs 4 at X01_C_CatN=2</td><td data-row=\"35\"><br></td><td data-row=\"35\" class=\"ql-align-right\">0.737796259</td><td data-row=\"35\" class=\"ql-align-right\">0.367714507</td><td data-row=\"35\" class=\"ql-align-right\">1.48034225</td></tr><tr><td data-row=\"36\">X04_N_QUIN 3 vs 5 at X01_C_CatN=2</td><td data-row=\"36\"><br></td><td data-row=\"36\" class=\"ql-align-right\">0.345084742</td><td data-row=\"36\" class=\"ql-align-right\">0.145085708</td><td data-row=\"36\" class=\"ql-align-right\">0.820780214</td></tr><tr><td data-row=\"37\">X04_N_QUIN 4 vs 5 at X01_C_CatN=2</td><td data-row=\"37\"><br></td><td data-row=\"37\" class=\"ql-align-right\">0.467723626</td><td data-row=\"37\" class=\"ql-align-right\">0.192662352</td><td data-row=\"37\" class=\"ql-align-right\">1.135485931</td></tr><tr><td data-row=\"38\">X05_N_QUAN 1 vs 2</td><td data-row=\"38\">Doc Statin patients</td><td data-row=\"38\" class=\"ql-align-right\">0.747515951</td><td data-row=\"38\" class=\"ql-align-right\">0.520451512</td><td data-row=\"38\" class=\"ql-align-right\">1.073644872</td></tr><tr><td data-row=\"39\">X05_N_QUAN 1 vs 3</td><td data-row=\"39\"><br></td><td data-row=\"39\" class=\"ql-align-right\">0.686784926</td><td data-row=\"39\" class=\"ql-align-right\">0.469487459</td><td data-row=\"39\" class=\"ql-align-right\">1.004656303</td></tr><tr><td data-row=\"40\">X05_N_QUAN 1 vs 4</td><td data-row=\"40\"><br></td><td data-row=\"40\" class=\"ql-align-right\">0.610748388</td><td data-row=\"40\" class=\"ql-align-right\">0.401967487</td><td data-row=\"40\" class=\"ql-align-right\">0.927969561</td></tr><tr><td data-row=\"41\">X05_N_QUAN 2 vs 3</td><td data-row=\"41\"><br></td><td data-row=\"41\" class=\"ql-align-right\">0.918756215</td><td data-row=\"41\" class=\"ql-align-right\">0.643991439</td><td data-row=\"41\" class=\"ql-align-right\">1.31075187</td></tr><tr><td data-row=\"42\">X05_N_QUAN 2 vs 4</td><td data-row=\"42\"><br></td><td data-row=\"42\" class=\"ql-align-right\">0.817037264</td><td data-row=\"42\" class=\"ql-align-right\">0.559064152</td><td data-row=\"42\" class=\"ql-align-right\">1.194048819</td></tr><tr><td data-row=\"43\">X05_N_QUAN 3 vs 4</td><td data-row=\"43\"><br></td><td data-row=\"43\" class=\"ql-align-right\">0.889286244</td><td data-row=\"43\" class=\"ql-align-right\">0.620405925</td><td data-row=\"43\" class=\"ql-align-right\">1.274697729</td></tr><tr><td data-row=\"44\">X06_N_QUIN 1 vs 2</td><td data-row=\"44\"><br></td><td data-row=\"44\" class=\"ql-align-right\">1.326330961</td><td data-row=\"44\" class=\"ql-align-right\">0.872280294</td><td data-row=\"44\" class=\"ql-align-right\">2.016729978</td></tr><tr><td data-row=\"45\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 1 vs 3</span></td><td data-row=\"45\"><br></td><td data-row=\"45\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.146072491</span></td><td data-row=\"45\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.364654261</span></td><td data-row=\"45\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">3.37494065</span></td></tr><tr><td data-row=\"46\">X06_N_QUIN 1 vs 4</td><td data-row=\"46\"><br></td><td data-row=\"46\" class=\"ql-align-right\">1.619192372</td><td data-row=\"46\" class=\"ql-align-right\">0.999941002</td><td data-row=\"46\" class=\"ql-align-right\">2.621938627</td></tr><tr><td data-row=\"47\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 1 vs 5</span></td><td data-row=\"47\"><br></td><td data-row=\"47\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.388805375</span></td><td data-row=\"47\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.832509681</span></td><td data-row=\"47\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.316826356</span></td></tr><tr><td data-row=\"48\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 2 vs 3</span></td><td data-row=\"48\"><br></td><td data-row=\"48\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.61805202</span></td><td data-row=\"48\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">1.064928446</span></td><td data-row=\"48\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">2.458467842</span></td></tr><tr><td data-row=\"49\">X06_N_QUIN 2 vs 4</td><td data-row=\"49\"><br></td><td data-row=\"49\" class=\"ql-align-right\">1.220805681</td><td data-row=\"49\" class=\"ql-align-right\">0.78589785</td><td data-row=\"49\" class=\"ql-align-right\">1.896387057</td></tr><tr><td data-row=\"50\">X06_N_QUIN 2 vs 5</td><td data-row=\"50\"><br></td><td data-row=\"50\" class=\"ql-align-right\">1.047103186</td><td data-row=\"50\" class=\"ql-align-right\">0.646018194</td><td data-row=\"50\" class=\"ql-align-right\">1.697204648</td></tr><tr><td data-row=\"51\">X06_N_QUIN 3 vs 4</td><td data-row=\"51\"><br></td><td data-row=\"51\" class=\"ql-align-right\">0.754490996</td><td data-row=\"51\" class=\"ql-align-right\">0.50593998</td><td data-row=\"51\" class=\"ql-align-right\">1.125146629</td></tr><tr><td data-row=\"52\"><span style=\"background-color: rgb(255, 255, 0);\">X06_N_QUIN 3 vs 5</span></td><td data-row=\"52\"><br></td><td data-row=\"52\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.647138147</span></td><td data-row=\"52\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.421008936</span></td><td data-row=\"52\" class=\"ql-align-right\"><span style=\"background-color: rgb(255, 255, 0);\">0.994724209</span></td></tr><tr><td data-row=\"53\">X06_N_QUIN 4 vs 5</td><td data-row=\"53\"><br></td><td data-row=\"53\" class=\"ql-align-right\">0.85771487</td><td data-row=\"53\" class=\"ql-align-right\">0.574497322</td><td data-row=\"53\" class=\"ql-align-right\">1.280553921</td></tr><tr><td data-row=\"54\">X07_N_QUIN 1 vs 2</td><td data-row=\"54\"><br></td><td data-row=\"54\" class=\"ql-align-right\">0.989100828</td><td data-row=\"54\" class=\"ql-align-right\">0.6664575</td><td data-row=\"54\" class=\"ql-align-right\">1.467941238</td></tr><tr><td data-row=\"55\">X07_N_QUIN 1 vs 3</td><td data-row=\"55\"><br></td><td data-row=\"55\" class=\"ql-align-right\">0.665070018</td><td data-row=\"55\" class=\"ql-align-right\">0.439301666</td><td data-row=\"55\" class=\"ql-align-right\">1.006866496</td></tr><tr><td data-row=\"56\">X07_N_QUIN 1 vs 4</td><td data-row=\"56\"><br></td><td data-row=\"56\" class=\"ql-align-right\">0.687654515</td><td data-row=\"56\" class=\"ql-align-right\">0.456021611</td><td data-row=\"56\" class=\"ql-align-right\">1.036943691</td></tr><tr><td data-row=\"57\">X07_N_QUIN 1 vs 5</td><td data-row=\"57\"><br></td><td data-row=\"57\" class=\"ql-align-right\">1.024395088</td><td data-row=\"57\" class=\"ql-align-right\">0.688989053</td><td data-row=\"57\" class=\"ql-align-right\">1.52307978</td></tr><tr><td data-row=\"58\">X07_N_QUIN 2 vs 3</td><td data-row=\"58\"><br></td><td data-row=\"58\" class=\"ql-align-right\">0.672398606</td><td data-row=\"58\" class=\"ql-align-right\">0.456993447</td><td data-row=\"58\" class=\"ql-align-right\">0.9893356</td></tr><tr><td data-row=\"59\">X07_N_QUIN 2 vs 4</td><td data-row=\"59\"><br></td><td data-row=\"59\" class=\"ql-align-right\">0.695231968</td><td data-row=\"59\" class=\"ql-align-right\">0.472776935</td><td data-row=\"59\" class=\"ql-align-right\">1.02235844</td></tr><tr><td data-row=\"60\">X07_N_QUIN 2 vs 5</td><td data-row=\"60\"><br></td><td data-row=\"60\" class=\"ql-align-right\">1.035683177</td><td data-row=\"60\" class=\"ql-align-right\">0.70962512</td><td data-row=\"60\" class=\"ql-align-right\">1.511558163</td></tr><tr><td data-row=\"61\">X07_N_QUIN 3 vs 4</td><td data-row=\"61\"><br></td><td data-row=\"61\" class=\"ql-align-right\">1.033958074</td><td data-row=\"61\" class=\"ql-align-right\">0.694168792</td><td data-row=\"61\" class=\"ql-align-right\">1.540071106</td></tr><tr><td data-row=\"62\">X07_N_QUIN 3 vs 5</td><td data-row=\"62\"><br></td><td data-row=\"62\" class=\"ql-align-right\">1.540281564</td><td data-row=\"62\" class=\"ql-align-right\">1.040644956</td><td data-row=\"62\" class=\"ql-align-right\">2.279804731</td></tr><tr><td data-row=\"63\">X07_N_QUIN 4 vs 5</td><td data-row=\"63\"><br></td><td data-row=\"63\" class=\"ql-align-right\">1.48969441</td><td data-row=\"63\" class=\"ql-align-right\">1.013827201</td><td data-row=\"63\" class=\"ql-align-right\">2.188922761</td></tr></tbody></table><p><br></p><p><br></p><p><br></p><p><br></p><table><tbody><tr><td data-row=\"1\">groupvar</td><td data-row=\"1\">grpcat</td><td data-row=\"1\">variable</td><td data-row=\"1\">varlevelC</td><td data-row=\"1\">N_Patients</td><td data-row=\"1\">varLevelN</td><td data-row=\"1\">renamed</td><td data-row=\"1\">original</td><td data-row=\"1\">project</td><td data-row=\"1\">program</td></tr><tr><td data-row=\"2\">Y</td><td data-row=\"2\" class=\"ql-align-right\">1</td><td data-row=\"2\">X01_C_CatN</td><td data-row=\"2\">0</td><td data-row=\"2\" class=\"ql-align-right\">326</td><td data-row=\"2\" class=\"ql-align-right\">1</td><td data-row=\"2\">X01_C</td><td data-row=\"2\">DocGradCtry</td><td data-row=\"2\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"2\">ZXZG Logistic</td></tr><tr><td data-row=\"3\">Y</td><td data-row=\"3\" class=\"ql-align-right\">0</td><td data-row=\"3\">X01_C_CatN</td><td data-row=\"3\">0</td><td data-row=\"3\" class=\"ql-align-right\">457</td><td data-row=\"3\" class=\"ql-align-right\">1</td><td data-row=\"3\">X01_C</td><td data-row=\"3\">DocGradCtry</td><td data-row=\"3\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"3\">ZXZG Logistic</td></tr><tr><td data-row=\"4\">Y</td><td data-row=\"4\" class=\"ql-align-right\">1</td><td data-row=\"4\">X01_C_CatN</td><td data-row=\"4\">1</td><td data-row=\"4\" class=\"ql-align-right\">256</td><td data-row=\"4\" class=\"ql-align-right\">2</td><td data-row=\"4\">X01_C</td><td data-row=\"4\">DocGradCtry</td><td data-row=\"4\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"4\">ZXZG Logistic</td></tr><tr><td data-row=\"5\">Y</td><td data-row=\"5\" class=\"ql-align-right\">0</td><td data-row=\"5\">X01_C_CatN</td><td data-row=\"5\">1</td><td data-row=\"5\" class=\"ql-align-right\">125</td><td data-row=\"5\" class=\"ql-align-right\">2</td><td data-row=\"5\">X01_C</td><td data-row=\"5\">DocGradCtry</td><td data-row=\"5\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"5\">ZXZG Logistic</td></tr><tr><td data-row=\"6\">Y</td><td data-row=\"6\" class=\"ql-align-right\">0</td><td data-row=\"6\">X02_C_CatN</td><td data-row=\"6\">F</td><td data-row=\"6\" class=\"ql-align-right\">213</td><td data-row=\"6\" class=\"ql-align-right\">1</td><td data-row=\"6\">X02_C</td><td data-row=\"6\">DocSex</td><td data-row=\"6\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"6\">ZXZG Logistic</td></tr><tr><td data-row=\"7\">Y</td><td data-row=\"7\" class=\"ql-align-right\">1</td><td data-row=\"7\">X02_C_CatN</td><td data-row=\"7\">F</td><td data-row=\"7\" class=\"ql-align-right\">206</td><td data-row=\"7\" class=\"ql-align-right\">1</td><td data-row=\"7\">X02_C</td><td data-row=\"7\">DocSex</td><td data-row=\"7\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"7\">ZXZG Logistic</td></tr><tr><td data-row=\"8\">Y</td><td data-row=\"8\" class=\"ql-align-right\">0</td><td data-row=\"8\">X02_C_CatN</td><td data-row=\"8\">M</td><td data-row=\"8\" class=\"ql-align-right\">369</td><td data-row=\"8\" class=\"ql-align-right\">2</td><td data-row=\"8\">X02_C</td><td data-row=\"8\">DocSex</td><td data-row=\"8\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"8\">ZXZG Logistic</td></tr><tr><td data-row=\"9\">Y</td><td data-row=\"9\" class=\"ql-align-right\">1</td><td data-row=\"9\">X02_C_CatN</td><td data-row=\"9\">M</td><td data-row=\"9\" class=\"ql-align-right\">376</td><td data-row=\"9\" class=\"ql-align-right\">2</td><td data-row=\"9\">X02_C</td><td data-row=\"9\">DocSex</td><td data-row=\"9\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"9\">ZXZG Logistic</td></tr><tr><td data-row=\"10\">Y</td><td data-row=\"10\" class=\"ql-align-right\">0</td><td data-row=\"10\">X03_N_QUIN</td><td data-row=\"10\">26 - 34</td><td data-row=\"10\" class=\"ql-align-right\">102</td><td data-row=\"10\" class=\"ql-align-right\">1</td><td data-row=\"10\">X03_N</td><td data-row=\"10\">DocAge</td><td data-row=\"10\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"10\">ZXZG Logistic</td></tr><tr><td data-row=\"11\">Y</td><td data-row=\"11\" class=\"ql-align-right\">1</td><td data-row=\"11\">X03_N_QUIN</td><td data-row=\"11\">26 - 34</td><td data-row=\"11\" class=\"ql-align-right\">106</td><td data-row=\"11\" class=\"ql-align-right\">1</td><td data-row=\"11\">X03_N</td><td data-row=\"11\">DocAge</td><td data-row=\"11\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"11\">ZXZG Logistic</td></tr><tr><td data-row=\"12\">Y</td><td data-row=\"12\" class=\"ql-align-right\">0</td><td data-row=\"12\">X03_N_QUIN</td><td data-row=\"12\">35 - 41</td><td data-row=\"12\" class=\"ql-align-right\">116</td><td data-row=\"12\" class=\"ql-align-right\">2</td><td data-row=\"12\">X03_N</td><td data-row=\"12\">DocAge</td><td data-row=\"12\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"12\">ZXZG Logistic</td></tr><tr><td data-row=\"13\">Y</td><td data-row=\"13\" class=\"ql-align-right\">1</td><td data-row=\"13\">X03_N_QUIN</td><td data-row=\"13\">35 - 41</td><td data-row=\"13\" class=\"ql-align-right\">120</td><td data-row=\"13\" class=\"ql-align-right\">2</td><td data-row=\"13\">X03_N</td><td data-row=\"13\">DocAge</td><td data-row=\"13\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"13\">ZXZG Logistic</td></tr><tr><td data-row=\"14\">Y</td><td data-row=\"14\" class=\"ql-align-right\">1</td><td data-row=\"14\">X03_N_QUIN</td><td data-row=\"14\">42 - 49</td><td data-row=\"14\" class=\"ql-align-right\">113</td><td data-row=\"14\" class=\"ql-align-right\">3</td><td data-row=\"14\">X03_N</td><td data-row=\"14\">DocAge</td><td data-row=\"14\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"14\">ZXZG Logistic</td></tr><tr><td data-row=\"15\">Y</td><td data-row=\"15\" class=\"ql-align-right\">0</td><td data-row=\"15\">X03_N_QUIN</td><td data-row=\"15\">42 - 49</td><td data-row=\"15\" class=\"ql-align-right\">127</td><td data-row=\"15\" class=\"ql-align-right\">3</td><td data-row=\"15\">X03_N</td><td data-row=\"15\">DocAge</td><td data-row=\"15\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"15\">ZXZG Logistic</td></tr><tr><td data-row=\"16\">Y</td><td data-row=\"16\" class=\"ql-align-right\">0</td><td data-row=\"16\">X03_N_QUIN</td><td data-row=\"16\">50 - 59</td><td data-row=\"16\" class=\"ql-align-right\">110</td><td data-row=\"16\" class=\"ql-align-right\">4</td><td data-row=\"16\">X03_N</td><td data-row=\"16\">DocAge</td><td data-row=\"16\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"16\">ZXZG Logistic</td></tr><tr><td data-row=\"17\">Y</td><td data-row=\"17\" class=\"ql-align-right\">1</td><td data-row=\"17\">X03_N_QUIN</td><td data-row=\"17\">50 - 59</td><td data-row=\"17\" class=\"ql-align-right\">128</td><td data-row=\"17\" class=\"ql-align-right\">4</td><td data-row=\"17\">X03_N</td><td data-row=\"17\">DocAge</td><td data-row=\"17\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"17\">ZXZG Logistic</td></tr><tr><td data-row=\"18\">Y</td><td data-row=\"18\" class=\"ql-align-right\">1</td><td data-row=\"18\">X03_N_QUIN</td><td data-row=\"18\">60 - 98</td><td data-row=\"18\" class=\"ql-align-right\">115</td><td data-row=\"18\" class=\"ql-align-right\">5</td><td data-row=\"18\">X03_N</td><td data-row=\"18\">DocAge</td><td data-row=\"18\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"18\">ZXZG Logistic</td></tr><tr><td data-row=\"19\">Y</td><td data-row=\"19\" class=\"ql-align-right\">0</td><td data-row=\"19\">X03_N_QUIN</td><td data-row=\"19\">60 - 98</td><td data-row=\"19\" class=\"ql-align-right\">127</td><td data-row=\"19\" class=\"ql-align-right\">5</td><td data-row=\"19\">X03_N</td><td data-row=\"19\">DocAge</td><td data-row=\"19\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"19\">ZXZG Logistic</td></tr><tr><td data-row=\"20\">Y</td><td data-row=\"20\" class=\"ql-align-right\">0</td><td data-row=\"20\">X04_N_QUIN</td><td data-row=\"20\">000 - 015</td><td data-row=\"20\" class=\"ql-align-right\">114</td><td data-row=\"20\" class=\"ql-align-right\">1</td><td data-row=\"20\">X04_N</td><td data-row=\"20\">DocPtSize100</td><td data-row=\"20\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"20\">ZXZG Logistic</td></tr><tr><td data-row=\"21\">Y</td><td data-row=\"21\" class=\"ql-align-right\">1</td><td data-row=\"21\">X04_N_QUIN</td><td data-row=\"21\">000 - 015</td><td data-row=\"21\" class=\"ql-align-right\">89</td><td data-row=\"21\" class=\"ql-align-right\">1</td><td data-row=\"21\">X04_N</td><td data-row=\"21\">DocPtSize100</td><td data-row=\"21\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"21\">ZXZG Logistic</td></tr><tr><td data-row=\"22\">Y</td><td data-row=\"22\" class=\"ql-align-right\">0</td><td data-row=\"22\">X04_N_QUIN</td><td data-row=\"22\">016 - 021</td><td data-row=\"22\" class=\"ql-align-right\">105</td><td data-row=\"22\" class=\"ql-align-right\">2</td><td data-row=\"22\">X04_N</td><td data-row=\"22\">DocPtSize100</td><td data-row=\"22\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"22\">ZXZG Logistic</td></tr><tr><td data-row=\"23\">Y</td><td data-row=\"23\" class=\"ql-align-right\">1</td><td data-row=\"23\">X04_N_QUIN</td><td data-row=\"23\">016 - 021</td><td data-row=\"23\" class=\"ql-align-right\">115</td><td data-row=\"23\" class=\"ql-align-right\">2</td><td data-row=\"23\">X04_N</td><td data-row=\"23\">DocPtSize100</td><td data-row=\"23\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"23\">ZXZG Logistic</td></tr><tr><td data-row=\"24\">Y</td><td data-row=\"24\" class=\"ql-align-right\">0</td><td data-row=\"24\">X04_N_QUIN</td><td data-row=\"24\">022 - 030</td><td data-row=\"24\" class=\"ql-align-right\">133</td><td data-row=\"24\" class=\"ql-align-right\">3</td><td data-row=\"24\">X04_N</td><td data-row=\"24\">DocPtSize100</td><td data-row=\"24\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"24\">ZXZG Logistic</td></tr><tr><td data-row=\"25\">Y</td><td data-row=\"25\" class=\"ql-align-right\">1</td><td data-row=\"25\">X04_N_QUIN</td><td data-row=\"25\">022 - 030</td><td data-row=\"25\" class=\"ql-align-right\">136</td><td data-row=\"25\" class=\"ql-align-right\">3</td><td data-row=\"25\">X04_N</td><td data-row=\"25\">DocPtSize100</td><td data-row=\"25\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"25\">ZXZG Logistic</td></tr><tr><td data-row=\"26\">Y</td><td data-row=\"26\" class=\"ql-align-right\">0</td><td data-row=\"26\">X04_N_QUIN</td><td data-row=\"26\">031 - 048</td><td data-row=\"26\" class=\"ql-align-right\">114</td><td data-row=\"26\" class=\"ql-align-right\">4</td><td data-row=\"26\">X04_N</td><td data-row=\"26\">DocPtSize100</td><td data-row=\"26\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"26\">ZXZG Logistic</td></tr><tr><td data-row=\"27\">Y</td><td data-row=\"27\" class=\"ql-align-right\">1</td><td data-row=\"27\">X04_N_QUIN</td><td data-row=\"27\">031 - 048</td><td data-row=\"27\" class=\"ql-align-right\">125</td><td data-row=\"27\" class=\"ql-align-right\">4</td><td data-row=\"27\">X04_N</td><td data-row=\"27\">DocPtSize100</td><td data-row=\"27\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"27\">ZXZG Logistic</td></tr><tr><td data-row=\"28\">Y</td><td data-row=\"28\" class=\"ql-align-right\">0</td><td data-row=\"28\">X04_N_QUIN</td><td data-row=\"28\">049 - 185</td><td data-row=\"28\" class=\"ql-align-right\">116</td><td data-row=\"28\" class=\"ql-align-right\">5</td><td data-row=\"28\">X04_N</td><td data-row=\"28\">DocPtSize100</td><td data-row=\"28\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"28\">ZXZG Logistic</td></tr><tr><td data-row=\"29\">Y</td><td data-row=\"29\" class=\"ql-align-right\">1</td><td data-row=\"29\">X04_N_QUIN</td><td data-row=\"29\">049 - 185</td><td data-row=\"29\" class=\"ql-align-right\">117</td><td data-row=\"29\" class=\"ql-align-right\">5</td><td data-row=\"29\">X04_N</td><td data-row=\"29\">DocPtSize100</td><td data-row=\"29\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"29\">ZXZG Logistic</td></tr><tr><td data-row=\"30\">Y</td><td data-row=\"30\" class=\"ql-align-right\">0</td><td data-row=\"30\">X05_N_QUAN</td><td data-row=\"30\">010 - 106</td><td data-row=\"30\" class=\"ql-align-right\">159</td><td data-row=\"30\" class=\"ql-align-right\">1</td><td data-row=\"30\">X05_N</td><td data-row=\"30\">DocStatinPts</td><td data-row=\"30\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"30\">ZXZG Logistic</td></tr><tr><td data-row=\"31\">Y</td><td data-row=\"31\" class=\"ql-align-right\">1</td><td data-row=\"31\">X05_N_QUAN</td><td data-row=\"31\">010 - 106</td><td data-row=\"31\" class=\"ql-align-right\">131</td><td data-row=\"31\" class=\"ql-align-right\">1</td><td data-row=\"31\">X05_N</td><td data-row=\"31\">DocStatinPts</td><td data-row=\"31\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"31\">ZXZG Logistic</td></tr><tr><td data-row=\"32\">Y</td><td data-row=\"32\" class=\"ql-align-right\">0</td><td data-row=\"32\">X05_N_QUAN</td><td data-row=\"32\">107 - 173</td><td data-row=\"32\" class=\"ql-align-right\">146</td><td data-row=\"32\" class=\"ql-align-right\">2</td><td data-row=\"32\">X05_N</td><td data-row=\"32\">DocStatinPts</td><td data-row=\"32\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"32\">ZXZG Logistic</td></tr><tr><td data-row=\"33\">Y</td><td data-row=\"33\" class=\"ql-align-right\">1</td><td data-row=\"33\">X05_N_QUAN</td><td data-row=\"33\">107 - 173</td><td data-row=\"33\" class=\"ql-align-right\">143</td><td data-row=\"33\" class=\"ql-align-right\">2</td><td data-row=\"33\">X05_N</td><td data-row=\"33\">DocStatinPts</td><td data-row=\"33\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"33\">ZXZG Logistic</td></tr><tr><td data-row=\"34\">Y</td><td data-row=\"34\" class=\"ql-align-right\">0</td><td data-row=\"34\">X05_N_QUAN</td><td data-row=\"34\">174 - 270</td><td data-row=\"34\" class=\"ql-align-right\">138</td><td data-row=\"34\" class=\"ql-align-right\">3</td><td data-row=\"34\">X05_N</td><td data-row=\"34\">DocStatinPts</td><td data-row=\"34\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"34\">ZXZG Logistic</td></tr><tr><td data-row=\"35\">Y</td><td data-row=\"35\" class=\"ql-align-right\">1</td><td data-row=\"35\">X05_N_QUAN</td><td data-row=\"35\">174 - 270</td><td data-row=\"35\" class=\"ql-align-right\">155</td><td data-row=\"35\" class=\"ql-align-right\">3</td><td data-row=\"35\">X05_N</td><td data-row=\"35\">DocStatinPts</td><td data-row=\"35\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"35\">ZXZG Logistic</td></tr><tr><td data-row=\"36\">Y</td><td data-row=\"36\" class=\"ql-align-right\">0</td><td data-row=\"36\">X05_N_QUAN</td><td data-row=\"36\">271 - 841</td><td data-row=\"36\" class=\"ql-align-right\">139</td><td data-row=\"36\" class=\"ql-align-right\">4</td><td data-row=\"36\">X05_N</td><td data-row=\"36\">DocStatinPts</td><td data-row=\"36\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"36\">ZXZG Logistic</td></tr><tr><td data-row=\"37\">Y</td><td data-row=\"37\" class=\"ql-align-right\">1</td><td data-row=\"37\">X05_N_QUAN</td><td data-row=\"37\">271 - 841</td><td data-row=\"37\" class=\"ql-align-right\">153</td><td data-row=\"37\" class=\"ql-align-right\">4</td><td data-row=\"37\">X05_N</td><td data-row=\"37\">DocStatinPts</td><td data-row=\"37\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"37\">ZXZG Logistic</td></tr><tr><td data-row=\"38\">Y</td><td data-row=\"38\" class=\"ql-align-right\">0</td><td data-row=\"38\">X06_N_QUIN</td><td data-row=\"38\">000 - 001</td><td data-row=\"38\" class=\"ql-align-right\">104</td><td data-row=\"38\" class=\"ql-align-right\">1</td><td data-row=\"38\">X06_N</td><td data-row=\"38\">Concord_AgePCT</td><td data-row=\"38\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"38\">ZXZG Logistic</td></tr><tr><td data-row=\"39\">Y</td><td data-row=\"39\" class=\"ql-align-right\">1</td><td data-row=\"39\">X06_N_QUIN</td><td data-row=\"39\">000 - 001</td><td data-row=\"39\" class=\"ql-align-right\">124</td><td data-row=\"39\" class=\"ql-align-right\">1</td><td data-row=\"39\">X06_N</td><td data-row=\"39\">Concord_AgePCT</td><td data-row=\"39\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"39\">ZXZG Logistic</td></tr><tr><td data-row=\"40\">Y</td><td data-row=\"40\" class=\"ql-align-right\">0</td><td data-row=\"40\">X06_N_QUIN</td><td data-row=\"40\">002 - 010</td><td data-row=\"40\" class=\"ql-align-right\">105</td><td data-row=\"40\" class=\"ql-align-right\">2</td><td data-row=\"40\">X06_N</td><td data-row=\"40\">Concord_AgePCT</td><td data-row=\"40\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"40\">ZXZG Logistic</td></tr><tr><td data-row=\"41\">Y</td><td data-row=\"41\" class=\"ql-align-right\">1</td><td data-row=\"41\">X06_N_QUIN</td><td data-row=\"41\">002 - 010</td><td data-row=\"41\" class=\"ql-align-right\">117</td><td data-row=\"41\" class=\"ql-align-right\">2</td><td data-row=\"41\">X06_N</td><td data-row=\"41\">Concord_AgePCT</td><td data-row=\"41\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"41\">ZXZG Logistic</td></tr><tr><td data-row=\"42\">Y</td><td data-row=\"42\" class=\"ql-align-right\">0</td><td data-row=\"42\">X06_N_QUIN</td><td data-row=\"42\">011 - 019</td><td data-row=\"42\" class=\"ql-align-right\">140</td><td data-row=\"42\" class=\"ql-align-right\">3</td><td data-row=\"42\">X06_N</td><td data-row=\"42\">Concord_AgePCT</td><td data-row=\"42\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"42\">ZXZG Logistic</td></tr><tr><td data-row=\"43\">Y</td><td data-row=\"43\" class=\"ql-align-right\">1</td><td data-row=\"43\">X06_N_QUIN</td><td data-row=\"43\">011 - 019</td><td data-row=\"43\" class=\"ql-align-right\">89</td><td data-row=\"43\" class=\"ql-align-right\">3</td><td data-row=\"43\">X06_N</td><td data-row=\"43\">Concord_AgePCT</td><td data-row=\"43\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"43\">ZXZG Logistic</td></tr><tr><td data-row=\"44\">Y</td><td data-row=\"44\" class=\"ql-align-right\">0</td><td data-row=\"44\">X06_N_QUIN</td><td data-row=\"44\">020 - 031</td><td data-row=\"44\" class=\"ql-align-right\">122</td><td data-row=\"44\" class=\"ql-align-right\">4</td><td data-row=\"44\">X06_N</td><td data-row=\"44\">Concord_AgePCT</td><td data-row=\"44\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"44\">ZXZG Logistic</td></tr><tr><td data-row=\"45\">Y</td><td data-row=\"45\" class=\"ql-align-right\">1</td><td data-row=\"45\">X06_N_QUIN</td><td data-row=\"45\">020 - 031</td><td data-row=\"45\" class=\"ql-align-right\">117</td><td data-row=\"45\" class=\"ql-align-right\">4</td><td data-row=\"45\">X06_N</td><td data-row=\"45\">Concord_AgePCT</td><td data-row=\"45\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"45\">ZXZG Logistic</td></tr><tr><td data-row=\"46\">Y</td><td data-row=\"46\" class=\"ql-align-right\">0</td><td data-row=\"46\">X06_N_QUIN</td><td data-row=\"46\">032 - 100</td><td data-row=\"46\" class=\"ql-align-right\">111</td><td data-row=\"46\" class=\"ql-align-right\">5</td><td data-row=\"46\">X06_N</td><td data-row=\"46\">Concord_AgePCT</td><td data-row=\"46\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"46\">ZXZG Logistic</td></tr><tr><td data-row=\"47\">Y</td><td data-row=\"47\" class=\"ql-align-right\">1</td><td data-row=\"47\">X06_N_QUIN</td><td data-row=\"47\">032 - 100</td><td data-row=\"47\" class=\"ql-align-right\">135</td><td data-row=\"47\" class=\"ql-align-right\">5</td><td data-row=\"47\">X06_N</td><td data-row=\"47\">Concord_AgePCT</td><td data-row=\"47\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"47\">ZXZG Logistic</td></tr><tr><td data-row=\"48\">Y</td><td data-row=\"48\" class=\"ql-align-right\">0</td><td data-row=\"48\">X07_N_QUIN</td><td data-row=\"48\">000 - 049</td><td data-row=\"48\" class=\"ql-align-right\">109</td><td data-row=\"48\" class=\"ql-align-right\">1</td><td data-row=\"48\">X07_N</td><td data-row=\"48\">Concord_SexPCT</td><td data-row=\"48\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"48\">ZXZG Logistic</td></tr><tr><td data-row=\"49\">Y</td><td data-row=\"49\" class=\"ql-align-right\">1</td><td data-row=\"49\">X07_N_QUIN</td><td data-row=\"49\">000 - 049</td><td data-row=\"49\" class=\"ql-align-right\">92</td><td data-row=\"49\" class=\"ql-align-right\">1</td><td data-row=\"49\">X07_N</td><td data-row=\"49\">Concord_SexPCT</td><td data-row=\"49\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"49\">ZXZG Logistic</td></tr><tr><td data-row=\"50\">Y</td><td data-row=\"50\" class=\"ql-align-right\">0</td><td data-row=\"50\">X07_N_QUIN</td><td data-row=\"50\">050 - 058</td><td data-row=\"50\" class=\"ql-align-right\">137</td><td data-row=\"50\" class=\"ql-align-right\">2</td><td data-row=\"50\">X07_N</td><td data-row=\"50\">Concord_SexPCT</td><td data-row=\"50\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"50\">ZXZG Logistic</td></tr><tr><td data-row=\"51\">Y</td><td data-row=\"51\" class=\"ql-align-right\">1</td><td data-row=\"51\">X07_N_QUIN</td><td data-row=\"51\">050 - 058</td><td data-row=\"51\" class=\"ql-align-right\">116</td><td data-row=\"51\" class=\"ql-align-right\">2</td><td data-row=\"51\">X07_N</td><td data-row=\"51\">Concord_SexPCT</td><td data-row=\"51\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"51\">ZXZG Logistic</td></tr><tr><td data-row=\"52\">Y</td><td data-row=\"52\" class=\"ql-align-right\">0</td><td data-row=\"52\">X07_N_QUIN</td><td data-row=\"52\">059 - 066</td><td data-row=\"52\" class=\"ql-align-right\">99</td><td data-row=\"52\" class=\"ql-align-right\">3</td><td data-row=\"52\">X07_N</td><td data-row=\"52\">Concord_SexPCT</td><td data-row=\"52\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"52\">ZXZG Logistic</td></tr><tr><td data-row=\"53\">Y</td><td data-row=\"53\" class=\"ql-align-right\">1</td><td data-row=\"53\">X07_N_QUIN</td><td data-row=\"53\">059 - 066</td><td data-row=\"53\" class=\"ql-align-right\">124</td><td data-row=\"53\" class=\"ql-align-right\">3</td><td data-row=\"53\">X07_N</td><td data-row=\"53\">Concord_SexPCT</td><td data-row=\"53\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"53\">ZXZG Logistic</td></tr><tr><td data-row=\"54\">Y</td><td data-row=\"54\" class=\"ql-align-right\">0</td><td data-row=\"54\">X07_N_QUIN</td><td data-row=\"54\">067 - 074</td><td data-row=\"54\" class=\"ql-align-right\">101</td><td data-row=\"54\" class=\"ql-align-right\">4</td><td data-row=\"54\">X07_N</td><td data-row=\"54\">Concord_SexPCT</td><td data-row=\"54\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"54\">ZXZG Logistic</td></tr><tr><td data-row=\"55\">Y</td><td data-row=\"55\" class=\"ql-align-right\">1</td><td data-row=\"55\">X07_N_QUIN</td><td data-row=\"55\">067 - 074</td><td data-row=\"55\" class=\"ql-align-right\">125</td><td data-row=\"55\" class=\"ql-align-right\">4</td><td data-row=\"55\">X07_N</td><td data-row=\"55\">Concord_SexPCT</td><td data-row=\"55\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"55\">ZXZG Logistic</td></tr><tr><td data-row=\"56\">Y</td><td data-row=\"56\" class=\"ql-align-right\">0</td><td data-row=\"56\">X07_N_QUIN</td><td data-row=\"56\">075 - 100</td><td data-row=\"56\" class=\"ql-align-right\">136</td><td data-row=\"56\" class=\"ql-align-right\">5</td><td data-row=\"56\">X07_N</td><td data-row=\"56\">Concord_SexPCT</td><td data-row=\"56\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"56\">ZXZG Logistic</td></tr><tr><td data-row=\"57\">Y</td><td data-row=\"57\" class=\"ql-align-right\">1</td><td data-row=\"57\">X07_N_QUIN</td><td data-row=\"57\">075 - 100</td><td data-row=\"57\" class=\"ql-align-right\">125</td><td data-row=\"57\" class=\"ql-align-right\">5</td><td data-row=\"57\">X07_N</td><td data-row=\"57\">Concord_SexPCT</td><td data-row=\"57\">PhD_GPCharactStatin_20200312.egp</td><td data-row=\"57\">ZXZG Logistic</td></tr></tbody></table><p><br></p><p>t///</p>"},{"idx":"MYd731aa59-a10d-4325-a07a-08c5dfef60d3","name":"obj3","custparents":[{"idx":"MYec5996b2-d53a-4c1d-9afc-67f7e05532c8"}],"NodeDescription":"<p>///t</p><p>univariate</p><p>age concordance</p><p>sex concordance</p><p><br></p><p>multivariate</p><p>age concordance</p><p>sex concordance</p><p>doc covariates</p><p>patient covariates</p><p>t///</p>","children":[{"idx":"MY8343af43-b3b9-40b7-a0fb-1e9e05c334d3","name":"main","custparents":[{"idx":"MYd731aa59-a10d-4325-a07a-08c5dfef60d3"},{"idx":"MY51c4bf80-52e4-4dfd-bcbd-5b18c5c18040"}]},{"idx":"MY00592c53-67a1-4957-ab0b-9beba465351e","name":"sensitivity","custparents":[{"idx":"MYd731aa59-a10d-4325-a07a-08c5dfef60d3"}],"children":[{"idx":"MYf63379dc-03e3-4e0e-b8f6-11168c21f2a9","name":"4 levels","custparents":[{"idx":"MY00592c53-67a1-4957-ab0b-9beba465351e"},{"idx":"a46bc596-385e-46f9-bc6e-c7b9cd532144"}]},{"idx":"MY43a7c7bf-082b-4ba4-8df6-8316a59f9a3d","name":"10 years","custparents":[{"idx":"MY00592c53-67a1-4957-ab0b-9beba465351e"},{"idx":"MY00592c53-67a1-4957-ab0b-9beba465351e"},{"idx":"be210d3d-abbe-4cd9-8458-17ef8ffd4b8a"}]}]}]}]}]}